const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/token-util-Sm2JKhoD.js","assets/token-util-otq8SzSH.js","assets/token-BPS6PKUo.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=r(s);fetch(s.href,l)}})();var qs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ql(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function P9(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function a(){var s=!1;try{s=this instanceof a}catch{}return s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var s=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(r,a,s.get?s:{enumerable:!0,get:function(){return e[a]}})}),r}var Mp={exports:{}},tl={};var wv;function OE(){if(wv)return tl;wv=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:e,type:a,key:c,ref:s!==void 0?s:null,props:l}}return tl.Fragment=t,tl.jsx=r,tl.jsxs=r,tl}var Sv;function ME(){return Sv||(Sv=1,Mp.exports=OE()),Mp.exports}var h=ME(),Ip={exports:{}},Je={};var kv;function IE(){if(kv)return Je;kv=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),x=Symbol.iterator;function b(N){return N===null||typeof N!="object"?null:(N=x&&N[x]||N["@@iterator"],typeof N=="function"?N:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,k={};function j(N,L,V){this.props=N,this.context=L,this.refs=k,this.updater=V||_}j.prototype.isReactComponent={},j.prototype.setState=function(N,L){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,L,"setState")},j.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function R(){}R.prototype=j.prototype;function E(N,L,V){this.props=N,this.context=L,this.refs=k,this.updater=V||_}var q=E.prototype=new R;q.constructor=E,S(q,j.prototype),q.isPureReactComponent=!0;var P=Array.isArray;function H(){}var I={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function O(N,L,V){var G=V.ref;return{$$typeof:e,type:N,key:L,ref:G!==void 0?G:null,props:V}}function M(N,L){return O(N.type,L,N.props)}function F(N){return typeof N=="object"&&N!==null&&N.$$typeof===e}function Y(N){var L={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(V){return L[V]})}var ae=/\/+/g;function ee(N,L){return typeof N=="object"&&N!==null&&N.key!=null?Y(""+N.key):L.toString(36)}function de(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(H,H):(N.status="pending",N.then(function(L){N.status==="pending"&&(N.status="fulfilled",N.value=L)},function(L){N.status==="pending"&&(N.status="rejected",N.reason=L)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function J(N,L,V,G,X){var D=typeof N;(D==="undefined"||D==="boolean")&&(N=null);var ne=!1;if(N===null)ne=!0;else switch(D){case"bigint":case"string":case"number":ne=!0;break;case"object":switch(N.$$typeof){case e:case t:ne=!0;break;case y:return ne=N._init,J(ne(N._payload),L,V,G,X)}}if(ne)return X=X(N),ne=G===""?"."+ee(N,0):G,P(X)?(V="",ne!=null&&(V=ne.replace(ae,"$&/")+"/"),J(X,L,V,"",function(Ae){return Ae})):X!=null&&(F(X)&&(X=M(X,V+(X.key==null||N&&N.key===X.key?"":(""+X.key).replace(ae,"$&/")+"/")+ne)),L.push(X)),1;ne=0;var le=G===""?".":G+":";if(P(N))for(var Se=0;Se<N.length;Se++)G=N[Se],D=le+ee(G,Se),ne+=J(G,L,V,D,X);else if(Se=b(N),typeof Se=="function")for(N=Se.call(N),Se=0;!(G=N.next()).done;)G=G.value,D=le+ee(G,Se++),ne+=J(G,L,V,D,X);else if(D==="object"){if(typeof N.then=="function")return J(de(N),L,V,G,X);throw L=String(N),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return ne}function te(N,L,V){if(N==null)return N;var G=[],X=0;return J(N,G,"","",function(D){return L.call(V,D,X++)}),G}function he(N){if(N._status===-1){var L=N._result;L=L(),L.then(function(V){(N._status===0||N._status===-1)&&(N._status=1,N._result=V)},function(V){(N._status===0||N._status===-1)&&(N._status=2,N._result=V)}),N._status===-1&&(N._status=0,N._result=L)}if(N._status===1)return N._result.default;throw N._result}var ve=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},se={map:te,forEach:function(N,L,V){te(N,function(){L.apply(this,arguments)},V)},count:function(N){var L=0;return te(N,function(){L++}),L},toArray:function(N){return te(N,function(L){return L})||[]},only:function(N){if(!F(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Je.Activity=v,Je.Children=se,Je.Component=j,Je.Fragment=r,Je.Profiler=s,Je.PureComponent=E,Je.StrictMode=a,Je.Suspense=f,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Je.__COMPILER_RUNTIME={__proto__:null,c:function(N){return I.H.useMemoCache(N)}},Je.cache=function(N){return function(){return N.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(N,L,V){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var G=S({},N.props),X=N.key;if(L!=null)for(D in L.key!==void 0&&(X=""+L.key),L)!A.call(L,D)||D==="key"||D==="__self"||D==="__source"||D==="ref"&&L.ref===void 0||(G[D]=L[D]);var D=arguments.length-2;if(D===1)G.children=V;else if(1<D){for(var ne=Array(D),le=0;le<D;le++)ne[le]=arguments[le+2];G.children=ne}return O(N.type,X,G)},Je.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:l,_context:N},N},Je.createElement=function(N,L,V){var G,X={},D=null;if(L!=null)for(G in L.key!==void 0&&(D=""+L.key),L)A.call(L,G)&&G!=="key"&&G!=="__self"&&G!=="__source"&&(X[G]=L[G]);var ne=arguments.length-2;if(ne===1)X.children=V;else if(1<ne){for(var le=Array(ne),Se=0;Se<ne;Se++)le[Se]=arguments[Se+2];X.children=le}if(N&&N.defaultProps)for(G in ne=N.defaultProps,ne)X[G]===void 0&&(X[G]=ne[G]);return O(N,D,X)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(N){return{$$typeof:d,render:N}},Je.isValidElement=F,Je.lazy=function(N){return{$$typeof:y,_payload:{_status:-1,_result:N},_init:he}},Je.memo=function(N,L){return{$$typeof:p,type:N,compare:L===void 0?null:L}},Je.startTransition=function(N){var L=I.T,V={};I.T=V;try{var G=N(),X=I.S;X!==null&&X(V,G),typeof G=="object"&&G!==null&&typeof G.then=="function"&&G.then(H,ve)}catch(D){ve(D)}finally{L!==null&&V.types!==null&&(L.types=V.types),I.T=L}},Je.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Je.use=function(N){return I.H.use(N)},Je.useActionState=function(N,L,V){return I.H.useActionState(N,L,V)},Je.useCallback=function(N,L){return I.H.useCallback(N,L)},Je.useContext=function(N){return I.H.useContext(N)},Je.useDebugValue=function(){},Je.useDeferredValue=function(N,L){return I.H.useDeferredValue(N,L)},Je.useEffect=function(N,L){return I.H.useEffect(N,L)},Je.useEffectEvent=function(N){return I.H.useEffectEvent(N)},Je.useId=function(){return I.H.useId()},Je.useImperativeHandle=function(N,L,V){return I.H.useImperativeHandle(N,L,V)},Je.useInsertionEffect=function(N,L){return I.H.useInsertionEffect(N,L)},Je.useLayoutEffect=function(N,L){return I.H.useLayoutEffect(N,L)},Je.useMemo=function(N,L){return I.H.useMemo(N,L)},Je.useOptimistic=function(N,L){return I.H.useOptimistic(N,L)},Je.useReducer=function(N,L,V){return I.H.useReducer(N,L,V)},Je.useRef=function(N){return I.H.useRef(N)},Je.useState=function(N){return I.H.useState(N)},Je.useSyncExternalStore=function(N,L,V){return I.H.useSyncExternalStore(N,L,V)},Je.useTransition=function(){return I.H.useTransition()},Je.version="19.2.0",Je}var Tv;function Wh(){return Tv||(Tv=1,Ip.exports=IE()),Ip.exports}var U=Wh();const bn=Ql(U);var $p={exports:{}},nl={},Dp={exports:{}},zp={};var Ev;function $E(){return Ev||(Ev=1,(function(e){function t(J,te){var he=J.length;J.push(te);e:for(;0<he;){var ve=he-1>>>1,se=J[ve];if(0<s(se,te))J[ve]=te,J[he]=se,he=ve;else break e}}function r(J){return J.length===0?null:J[0]}function a(J){if(J.length===0)return null;var te=J[0],he=J.pop();if(he!==te){J[0]=he;e:for(var ve=0,se=J.length,N=se>>>1;ve<N;){var L=2*(ve+1)-1,V=J[L],G=L+1,X=J[G];if(0>s(V,he))G<se&&0>s(X,V)?(J[ve]=X,J[G]=he,ve=G):(J[ve]=V,J[L]=he,ve=L);else if(G<se&&0>s(X,he))J[ve]=X,J[G]=he,ve=G;else break e}}return te}function s(J,te){var he=J.sortIndex-te.sortIndex;return he!==0?he:J.id-te.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var f=[],p=[],y=1,v=null,x=3,b=!1,_=!1,S=!1,k=!1,j=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function q(J){for(var te=r(p);te!==null;){if(te.callback===null)a(p);else if(te.startTime<=J)a(p),te.sortIndex=te.expirationTime,t(f,te);else break;te=r(p)}}function P(J){if(S=!1,q(J),!_)if(r(f)!==null)_=!0,H||(H=!0,Y());else{var te=r(p);te!==null&&de(P,te.startTime-J)}}var H=!1,I=-1,A=5,O=-1;function M(){return k?!0:!(e.unstable_now()-O<A)}function F(){if(k=!1,H){var J=e.unstable_now();O=J;var te=!0;try{e:{_=!1,S&&(S=!1,R(I),I=-1),b=!0;var he=x;try{t:{for(q(J),v=r(f);v!==null&&!(v.expirationTime>J&&M());){var ve=v.callback;if(typeof ve=="function"){v.callback=null,x=v.priorityLevel;var se=ve(v.expirationTime<=J);if(J=e.unstable_now(),typeof se=="function"){v.callback=se,q(J),te=!0;break t}v===r(f)&&a(f),q(J)}else a(f);v=r(f)}if(v!==null)te=!0;else{var N=r(p);N!==null&&de(P,N.startTime-J),te=!1}}break e}finally{v=null,x=he,b=!1}te=void 0}}finally{te?Y():H=!1}}}var Y;if(typeof E=="function")Y=function(){E(F)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ee=ae.port2;ae.port1.onmessage=F,Y=function(){ee.postMessage(null)}}else Y=function(){j(F,0)};function de(J,te){I=j(function(){J(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(J){switch(x){case 1:case 2:case 3:var te=3;break;default:te=x}var he=x;x=te;try{return J()}finally{x=he}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(J,te){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var he=x;x=J;try{return te()}finally{x=he}},e.unstable_scheduleCallback=function(J,te,he){var ve=e.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?ve+he:ve):he=ve,J){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=he+se,J={id:y++,callback:te,priorityLevel:J,startTime:he,expirationTime:se,sortIndex:-1},he>ve?(J.sortIndex=he,t(p,J),r(f)===null&&J===r(p)&&(S?(R(I),I=-1):S=!0,de(P,he-ve))):(J.sortIndex=se,t(f,J),_||b||(_=!0,H||(H=!0,Y()))),J},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(J){var te=x;return function(){var he=x;x=te;try{return J.apply(this,arguments)}finally{x=he}}}})(zp)),zp}var Nv;function DE(){return Nv||(Nv=1,Dp.exports=$E()),Dp.exports}var Lp={exports:{}},On={};var Av;function zE(){if(Av)return On;Av=1;var e=Wh();function t(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(f,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:f,containerInfo:p,implementation:y}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return On.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,On.createPortal=function(f,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(f,p,null,y)},On.flushSync=function(f){var p=c.T,y=a.p;try{if(c.T=null,a.p=2,f)return f()}finally{c.T=p,a.p=y,a.d.f()}},On.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(f,p))},On.prefetchDNS=function(f){typeof f=="string"&&a.d.D(f)},On.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?a.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:b}):y==="script"&&a.d.X(f,{crossOrigin:v,integrity:x,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},On.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);a.d.M(f,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(f)},On.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin);a.d.L(f,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},On.preloadModule=function(f,p){if(typeof f=="string")if(p){var y=d(p.as,p.crossOrigin);a.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(f)},On.requestFormReset=function(f){a.d.r(f)},On.unstable_batchedUpdates=function(f,p){return f(p)},On.useFormState=function(f,p,y){return c.H.useFormState(f,p,y)},On.useFormStatus=function(){return c.H.useHostTransitionStatus()},On.version="19.2.0",On}var Cv;function a1(){if(Cv)return Lp.exports;Cv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Lp.exports=zE(),Lp.exports}var Rv;function LE(){if(Rv)return nl;Rv=1;var e=DE(),t=Wh(),r=a1();function a(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function d(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(l(n)!==n)throw Error(a(188))}function p(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(a(188));return i!==n?null:n}for(var o=n,u=i;;){var m=o.return;if(m===null)break;var g=m.alternate;if(g===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===o)return f(m),n;if(g===u)return f(m),i;g=g.sibling}throw Error(a(188))}if(o.return!==u.return)o=m,u=g;else{for(var T=!1,$=m.child;$;){if($===o){T=!0,o=m,u=g;break}if($===u){T=!0,u=m,o=g;break}$=$.sibling}if(!T){for($=g.child;$;){if($===o){T=!0,o=g,u=m;break}if($===u){T=!0,u=g,o=m;break}$=$.sibling}if(!T)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?n:i}function y(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=y(n),i!==null)return i;n=n.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),E=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function Y(n){return n===null||typeof n!="object"?null:(n=F&&n[F]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Symbol.for("react.client.reference");function ee(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ae?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case j:return"Profiler";case k:return"StrictMode";case P:return"Suspense";case H:return"SuspenseList";case O:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case _:return"Portal";case E:return n.displayName||"Context";case R:return(n._context.displayName||"Context")+".Consumer";case q:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case I:return i=n.displayName||null,i!==null?i:ee(n.type)||"Memo";case A:i=n._payload,n=n._init;try{return ee(n(i))}catch{}}return null}var de=Array.isArray,J=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},ve=[],se=-1;function N(n){return{current:n}}function L(n){0>se||(n.current=ve[se],ve[se]=null,se--)}function V(n,i){se++,ve[se]=n.current,n.current=i}var G=N(null),X=N(null),D=N(null),ne=N(null);function le(n,i){switch(V(D,i),V(X,n),V(G,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Hy(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Hy(i),n=Gy(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}L(G),V(G,n)}function Se(){L(G),L(X),L(D)}function Ae(n){n.memoizedState!==null&&V(ne,n);var i=G.current,o=Gy(i,n.type);i!==o&&(V(X,n),V(G,o))}function Te(n){X.current===n&&(L(G),L(X)),ne.current===n&&(L(ne),Ko._currentValue=he)}var $e,Oe;function Me(n){if($e===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);$e=i&&i[1]||"",Oe=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$e+n+Oe}var Re=!1;function Ue(n,i){if(!n||Re)return"";Re=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ke=function(){throw Error()};if(Object.defineProperty(ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ke,[])}catch(ye){var me=ye}Reflect.construct(n,[],ke)}else{try{ke.call()}catch(ye){me=ye}n.call(ke.prototype)}}else{try{throw Error()}catch(ye){me=ye}(ke=n())&&typeof ke.catch=="function"&&ke.catch(function(){})}}catch(ye){if(ye&&me&&typeof ye.stack=="string")return[ye.stack,me.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),T=g[0],$=g[1];if(T&&$){var K=T.split(`
`),pe=$.split(`
`);for(m=u=0;u<K.length&&!K[u].includes("DetermineComponentFrameRoot");)u++;for(;m<pe.length&&!pe[m].includes("DetermineComponentFrameRoot");)m++;if(u===K.length||m===pe.length)for(u=K.length-1,m=pe.length-1;1<=u&&0<=m&&K[u]!==pe[m];)m--;for(;1<=u&&0<=m;u--,m--)if(K[u]!==pe[m]){if(u!==1||m!==1)do if(u--,m--,0>m||K[u]!==pe[m]){var xe=`
`+K[u].replace(" at new "," at ");return n.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",n.displayName)),xe}while(1<=u&&0<=m);break}}}finally{Re=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Me(o):""}function wt(n,i){switch(n.tag){case 26:case 27:case 5:return Me(n.type);case 16:return Me("Lazy");case 13:return n.child!==i&&i!==null?Me("Suspense Fallback"):Me("Suspense");case 19:return Me("SuspenseList");case 0:case 15:return Ue(n.type,!1);case 11:return Ue(n.type.render,!1);case 1:return Ue(n.type,!0);case 31:return Me("Activity");default:return""}}function Pe(n){try{var i="",o=null;do i+=wt(n,o),o=n,n=n.return;while(n);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var nt=Object.prototype.hasOwnProperty,tn=e.unstable_scheduleCallback,Tn=e.unstable_cancelCallback,xn=e.unstable_shouldYield,pt=e.unstable_requestPaint,rt=e.unstable_now,_n=e.unstable_getCurrentPriorityLevel,Mt=e.unstable_ImmediatePriority,Gt=e.unstable_UserBlockingPriority,nn=e.unstable_NormalPriority,Ar=e.unstable_LowPriority,Cr=e.unstable_IdlePriority,Vn=e.log,wn=e.unstable_setDisableYieldValue,_t=null,It=null;function nr(n){if(typeof Vn=="function"&&wn(n),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(_t,n)}catch{}}var $n=Math.clz32?Math.clz32:Sd,so=Math.log,au=Math.LN2;function Sd(n){return n>>>=0,n===0?32:31-(so(n)/au|0)|0}var rr=256,Yi=262144,Ji=4194304;function Vr(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Xi(n,i,o){var u=n.pendingLanes;if(u===0)return 0;var m=0,g=n.suspendedLanes,T=n.pingedLanes;n=n.warmLanes;var $=u&134217727;return $!==0?(u=$&~g,u!==0?m=Vr(u):(T&=$,T!==0?m=Vr(T):o||(o=$&~n,o!==0&&(m=Vr(o))))):($=u&~g,$!==0?m=Vr($):T!==0?m=Vr(T):o||(o=u&~n,o!==0&&(m=Vr(o)))),m===0?0:i!==0&&i!==m&&(i&g)===0&&(g=m&-m,o=i&-i,g>=o||g===32&&(o&4194048)!==0)?i:m}function di(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function kd(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iu(){var n=Ji;return Ji<<=1,(Ji&62914560)===0&&(Ji=4194304),n}function oo(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function fi(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Td(n,i,o,u,m,g){var T=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var $=n.entanglements,K=n.expirationTimes,pe=n.hiddenUpdates;for(o=T&~o;0<o;){var xe=31-$n(o),ke=1<<xe;$[xe]=0,K[xe]=-1;var me=pe[xe];if(me!==null)for(pe[xe]=null,xe=0;xe<me.length;xe++){var ye=me[xe];ye!==null&&(ye.lane&=-536870913)}o&=~ke}u!==0&&su(n,u,0),g!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=g&~(T&~i))}function su(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-$n(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function ou(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var u=31-$n(o),m=1<<u;m&i|n[u]&i&&(n[u]|=i),o&=~m}}function lu(n,i){var o=i&-i;return o=(o&42)!==0?1:Ki(o),(o&(n.suspendedLanes|i))!==0?0:o}function Ki(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function lo(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function uu(){var n=te.p;return n!==0?n:(n=window.event,n===void 0?32:mv(n.type))}function cu(n,i){var o=te.p;try{return te.p=n,i()}finally{te.p=o}}var Hr=Math.random().toString(36).slice(2),hn="__reactFiber$"+Hr,jn="__reactProps$"+Hr,Aa="__reactContainer$"+Hr,uo="__reactEvents$"+Hr,Ed="__reactListeners$"+Hr,Nd="__reactHandles$"+Hr,du="__reactResources$"+Hr,pi="__reactMarker$"+Hr;function co(n){delete n[hn],delete n[jn],delete n[uo],delete n[Ed],delete n[Nd]}function Ca(n){var i=n[hn];if(i)return i;for(var o=n.parentNode;o;){if(i=o[Aa]||o[hn]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=Wy(n);n!==null;){if(o=n[hn])return o;n=Wy(n)}return i}n=o,o=n.parentNode}return null}function Ra(n){if(n=n[hn]||n[Aa]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function ja(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(a(33))}function yr(n){var i=n[du];return i||(i=n[du]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Kt(n){n[pi]=!0}var ra=new Set,fu={};function vr(n,i){Gr(n,i),Gr(n+"Capture",i)}function Gr(n,i){for(fu[n]=i,n=0;n<i.length;n++)ra.add(i[n])}var Ad=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pu={},Qi={};function Cd(n){return nt.call(Qi,n)?!0:nt.call(pu,n)?!1:Ad.test(n)?Qi[n]=!0:(pu[n]=!0,!1)}function Wi(n,i,o){if(Cd(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function z(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function W(n,i,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+u)}}function B(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function oe(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ce(n,i,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,g=u.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return m.call(this)},set:function(T){o=""+T,g.call(this,T)}}),Object.defineProperty(n,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(T){o=""+T},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function ie(n){if(!n._valueTracker){var i=oe(n)?"checked":"value";n._valueTracker=ce(n,i,""+n[i])}}function _e(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return n&&(u=oe(n)?n.checked?"true":"false":n.value),n=u,n!==o?(i.setValue(n),!0):!1}function Ee(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ce=/[\n"\\]/g;function Ne(n){return n.replace(Ce,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function je(n,i,o,u,m,g,T,$){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),i!=null?T==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+B(i)):n.value!==""+B(i)&&(n.value=""+B(i)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),i!=null?et(n,T,B(i)):o!=null?et(n,T,B(o)):u!=null&&n.removeAttribute("value"),m==null&&g!=null&&(n.defaultChecked=!!g),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?n.name=""+B($):n.removeAttribute("name")}function ze(n,i,o,u,m,g,T,$){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),i!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){ie(n);return}o=o!=null?""+B(o):"",i=i!=null?""+B(i):o,$||i===n.value||(n.value=i),n.defaultValue=i}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=$?n.checked:!!u,n.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T),ie(n)}function et(n,i,o){i==="number"&&Ee(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function st(n,i,o,u){if(n=n.options,i){i={};for(var m=0;m<o.length;m++)i["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=i.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&u&&(n[o].defaultSelected=!0)}else{for(o=""+B(o),i=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,u&&(n[m].defaultSelected=!0);return}i!==null||n[m].disabled||(i=n[m])}i!==null&&(i.selected=!0)}}function ht(n,i,o){if(i!=null&&(i=""+B(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+B(o):""}function Zt(n,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(a(92));if(de(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=B(i),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),ie(n)}function At(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var Hn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Oa(n,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,o):typeof o!="number"||o===0||Hn.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function es(n,i,o){if(i!=null&&typeof i!="object")throw Error(a(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var m in i)u=i[m],i.hasOwnProperty(m)&&o[m]!==u&&Oa(n,m,u)}else for(var g in i)i.hasOwnProperty(g)&&Oa(n,g,i[g])}function fo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var po=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ts(n){return Fm.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Rr(){}var ns=null;function Rd(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var rs=null,as=null;function Vm(n){var i=Ra(n);if(i&&(n=i.stateNode)){var o=n[jn]||null;e:switch(n=i.stateNode,i.type){case"input":if(je(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ne(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==n&&u.form===n.form){var m=u[jn]||null;if(!m)throw Error(a(90));je(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===n.form&&_e(u)}break e;case"textarea":ht(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&st(n,!!o.multiple,i,!1)}}}var jd=!1;function Hm(n,i,o){if(jd)return n(i,o);jd=!0;try{var u=n(i);return u}finally{if(jd=!1,(rs!==null||as!==null)&&(ec(),rs&&(i=rs,n=as,as=rs=null,Vm(i),n)))for(i=0;i<n.length;i++)Vm(n[i])}}function ho(n,i){var o=n.stateNode;if(o===null)return null;var u=o[jn]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(a(231,i,typeof o));return o}var aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Od=!1;if(aa)try{var mo={};Object.defineProperty(mo,"passive",{get:function(){Od=!0}}),window.addEventListener("test",mo,mo),window.removeEventListener("test",mo,mo)}catch{Od=!1}var Ma=null,Md=null,hu=null;function Gm(){if(hu)return hu;var n,i=Md,o=i.length,u,m="value"in Ma?Ma.value:Ma.textContent,g=m.length;for(n=0;n<o&&i[n]===m[n];n++);var T=o-n;for(u=1;u<=T&&i[o-u]===m[g-u];u++);return hu=m.slice(n,1<u?1-u:void 0)}function mu(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function gu(){return!0}function Zm(){return!1}function Gn(n){function i(o,u,m,g,T){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var $ in n)n.hasOwnProperty($)&&(o=n[$],this[$]=o?o(g):g[$]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?gu:Zm,this.isPropagationStopped=Zm,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=gu)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=gu)},persist:function(){},isPersistent:gu}),i}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yu=Gn(hi),go=v({},hi,{view:0,detail:0}),Rk=Gn(go),Id,$d,yo,vu=v({},go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==yo&&(yo&&n.type==="mousemove"?(Id=n.screenX-yo.screenX,$d=n.screenY-yo.screenY):$d=Id=0,yo=n),Id)},movementY:function(n){return"movementY"in n?n.movementY:$d}}),Ym=Gn(vu),jk=v({},vu,{dataTransfer:0}),Ok=Gn(jk),Mk=v({},go,{relatedTarget:0}),Dd=Gn(Mk),Ik=v({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),$k=Gn(Ik),Dk=v({},hi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),zk=Gn(Dk),Lk=v({},hi,{data:0}),Jm=Gn(Lk),Uk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bk(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Pk[n])?!!i[n]:!1}function zd(){return Bk}var Fk=v({},go,{key:function(n){if(n.key){var i=Uk[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=mu(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?qk[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(n){return n.type==="keypress"?mu(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?mu(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Vk=Gn(Fk),Hk=v({},vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xm=Gn(Hk),Gk=v({},go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Zk=Gn(Gk),Yk=v({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jk=Gn(Yk),Xk=v({},vu,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Kk=Gn(Xk),Qk=v({},hi,{newState:0,oldState:0}),Wk=Gn(Qk),eT=[9,13,27,32],Ld=aa&&"CompositionEvent"in window,vo=null;aa&&"documentMode"in document&&(vo=document.documentMode);var tT=aa&&"TextEvent"in window&&!vo,Km=aa&&(!Ld||vo&&8<vo&&11>=vo),Qm=" ",Wm=!1;function eg(n,i){switch(n){case"keyup":return eT.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tg(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var is=!1;function nT(n,i){switch(n){case"compositionend":return tg(i);case"keypress":return i.which!==32?null:(Wm=!0,Qm);case"textInput":return n=i.data,n===Qm&&Wm?null:n;default:return null}}function rT(n,i){if(is)return n==="compositionend"||!Ld&&eg(n,i)?(n=Gm(),hu=Md=Ma=null,is=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Km&&i.locale!=="ko"?null:i.data;default:return null}}var aT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ng(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!aT[n.type]:i==="textarea"}function rg(n,i,o,u){rs?as?as.push(u):as=[u]:rs=u,i=oc(i,"onChange"),0<i.length&&(o=new yu("onChange","change",null,o,u),n.push({event:o,listeners:i}))}var bo=null,xo=null;function iT(n){Uy(n,0)}function bu(n){var i=ja(n);if(_e(i))return n}function ag(n,i){if(n==="change")return i}var ig=!1;if(aa){var Ud;if(aa){var qd="oninput"in document;if(!qd){var sg=document.createElement("div");sg.setAttribute("oninput","return;"),qd=typeof sg.oninput=="function"}Ud=qd}else Ud=!1;ig=Ud&&(!document.documentMode||9<document.documentMode)}function og(){bo&&(bo.detachEvent("onpropertychange",lg),xo=bo=null)}function lg(n){if(n.propertyName==="value"&&bu(xo)){var i=[];rg(i,xo,n,Rd(n)),Hm(iT,i)}}function sT(n,i,o){n==="focusin"?(og(),bo=i,xo=o,bo.attachEvent("onpropertychange",lg)):n==="focusout"&&og()}function oT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return bu(xo)}function lT(n,i){if(n==="click")return bu(i)}function uT(n,i){if(n==="input"||n==="change")return bu(i)}function cT(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var ar=typeof Object.is=="function"?Object.is:cT;function _o(n,i){if(ar(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!nt.call(i,m)||!ar(n[m],i[m]))return!1}return!0}function ug(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function cg(n,i){var o=ug(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=i&&u>=i)return{node:o,offset:i-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=ug(o)}}function dg(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?dg(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function fg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Ee(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Ee(n.document)}return i}function Pd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var dT=aa&&"documentMode"in document&&11>=document.documentMode,ss=null,Bd=null,wo=null,Fd=!1;function pg(n,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Fd||ss==null||ss!==Ee(u)||(u=ss,"selectionStart"in u&&Pd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),wo&&_o(wo,u)||(wo=u,u=oc(Bd,"onSelect"),0<u.length&&(i=new yu("onSelect","select",null,i,o),n.push({event:i,listeners:u}),i.target=ss)))}function mi(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var os={animationend:mi("Animation","AnimationEnd"),animationiteration:mi("Animation","AnimationIteration"),animationstart:mi("Animation","AnimationStart"),transitionrun:mi("Transition","TransitionRun"),transitionstart:mi("Transition","TransitionStart"),transitioncancel:mi("Transition","TransitionCancel"),transitionend:mi("Transition","TransitionEnd")},Vd={},hg={};aa&&(hg=document.createElement("div").style,"AnimationEvent"in window||(delete os.animationend.animation,delete os.animationiteration.animation,delete os.animationstart.animation),"TransitionEvent"in window||delete os.transitionend.transition);function gi(n){if(Vd[n])return Vd[n];if(!os[n])return n;var i=os[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in hg)return Vd[n]=i[o];return n}var mg=gi("animationend"),gg=gi("animationiteration"),yg=gi("animationstart"),fT=gi("transitionrun"),pT=gi("transitionstart"),hT=gi("transitioncancel"),vg=gi("transitionend"),bg=new Map,Hd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hd.push("scrollEnd");function jr(n,i){bg.set(n,i),vr(i,[n])}var xu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},br=[],ls=0,Gd=0;function _u(){for(var n=ls,i=Gd=ls=0;i<n;){var o=br[i];br[i++]=null;var u=br[i];br[i++]=null;var m=br[i];br[i++]=null;var g=br[i];if(br[i++]=null,u!==null&&m!==null){var T=u.pending;T===null?m.next=m:(m.next=T.next,T.next=m),u.pending=m}g!==0&&xg(o,m,g)}}function wu(n,i,o,u){br[ls++]=n,br[ls++]=i,br[ls++]=o,br[ls++]=u,Gd|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Zd(n,i,o,u){return wu(n,i,o,u),Su(n)}function yi(n,i){return wu(n,null,null,i),Su(n)}function xg(n,i,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var m=!1,g=n.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(m=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,m&&i!==null&&(m=31-$n(o),n=g.hiddenUpdates,u=n[m],u===null?n[m]=[i]:u.push(i),i.lane=o|536870912),g):null}function Su(n){if(50<Vo)throw Vo=0,rp=null,Error(a(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var us={};function mT(n,i,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(n,i,o,u){return new mT(n,i,o,u)}function Yd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ia(n,i){var o=n.alternate;return o===null?(o=ir(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function _g(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function ku(n,i,o,u,m,g){var T=0;if(u=n,typeof n=="function")Yd(n)&&(T=1);else if(typeof n=="string")T=xE(n,o,G.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case O:return n=ir(31,o,i,m),n.elementType=O,n.lanes=g,n;case S:return vi(o.children,m,g,i);case k:T=8,m|=24;break;case j:return n=ir(12,o,i,m|2),n.elementType=j,n.lanes=g,n;case P:return n=ir(13,o,i,m),n.elementType=P,n.lanes=g,n;case H:return n=ir(19,o,i,m),n.elementType=H,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case E:T=10;break e;case R:T=9;break e;case q:T=11;break e;case I:T=14;break e;case A:T=16,u=null;break e}T=29,o=Error(a(130,n===null?"null":typeof n,"")),u=null}return i=ir(T,o,i,m),i.elementType=n,i.type=u,i.lanes=g,i}function vi(n,i,o,u){return n=ir(7,n,u,i),n.lanes=o,n}function Jd(n,i,o){return n=ir(6,n,null,i),n.lanes=o,n}function wg(n){var i=ir(18,null,null,0);return i.stateNode=n,i}function Xd(n,i,o){return i=ir(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Sg=new WeakMap;function xr(n,i){if(typeof n=="object"&&n!==null){var o=Sg.get(n);return o!==void 0?o:(i={value:n,source:i,stack:Pe(i)},Sg.set(n,i),i)}return{value:n,source:i,stack:Pe(i)}}var cs=[],ds=0,Tu=null,So=0,_r=[],wr=0,Ia=null,Zr=1,Yr="";function sa(n,i){cs[ds++]=So,cs[ds++]=Tu,Tu=n,So=i}function kg(n,i,o){_r[wr++]=Zr,_r[wr++]=Yr,_r[wr++]=Ia,Ia=n;var u=Zr;n=Yr;var m=32-$n(u)-1;u&=~(1<<m),o+=1;var g=32-$n(i)+m;if(30<g){var T=m-m%5;g=(u&(1<<T)-1).toString(32),u>>=T,m-=T,Zr=1<<32-$n(i)+m|o<<m|u,Yr=g+n}else Zr=1<<g|o<<m|u,Yr=n}function Kd(n){n.return!==null&&(sa(n,1),kg(n,1,0))}function Qd(n){for(;n===Tu;)Tu=cs[--ds],cs[ds]=null,So=cs[--ds],cs[ds]=null;for(;n===Ia;)Ia=_r[--wr],_r[wr]=null,Yr=_r[--wr],_r[wr]=null,Zr=_r[--wr],_r[wr]=null}function Tg(n,i){_r[wr++]=Zr,_r[wr++]=Yr,_r[wr++]=Ia,Zr=i.id,Yr=i.overflow,Ia=n}var En=null,Ut=null,dt=!1,$a=null,Sr=!1,Wd=Error(a(519));function Da(n){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ko(xr(i,n)),Wd}function Eg(n){var i=n.stateNode,o=n.type,u=n.memoizedProps;switch(i[hn]=n,i[jn]=u,o){case"dialog":lt("cancel",i),lt("close",i);break;case"iframe":case"object":case"embed":lt("load",i);break;case"video":case"audio":for(o=0;o<Go.length;o++)lt(Go[o],i);break;case"source":lt("error",i);break;case"img":case"image":case"link":lt("error",i),lt("load",i);break;case"details":lt("toggle",i);break;case"input":lt("invalid",i),ze(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":lt("invalid",i);break;case"textarea":lt("invalid",i),Zt(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||Fy(i.textContent,o)?(u.popover!=null&&(lt("beforetoggle",i),lt("toggle",i)),u.onScroll!=null&&lt("scroll",i),u.onScrollEnd!=null&&lt("scrollend",i),u.onClick!=null&&(i.onclick=Rr),i=!0):i=!1,i||Da(n,!0)}function Ng(n){for(En=n.return;En;)switch(En.tag){case 5:case 31:case 13:Sr=!1;return;case 27:case 3:Sr=!0;return;default:En=En.return}}function fs(n){if(n!==En)return!1;if(!dt)return Ng(n),dt=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||vp(n.type,n.memoizedProps)),o=!o),o&&Ut&&Da(n),Ng(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));Ut=Qy(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));Ut=Qy(n)}else i===27?(i=Ut,Xa(n.type)?(n=Sp,Sp=null,Ut=n):Ut=i):Ut=En?Tr(n.stateNode.nextSibling):null;return!0}function bi(){Ut=En=null,dt=!1}function ef(){var n=$a;return n!==null&&(Xn===null?Xn=n:Xn.push.apply(Xn,n),$a=null),n}function ko(n){$a===null?$a=[n]:$a.push(n)}var tf=N(null),xi=null,oa=null;function za(n,i,o){V(tf,i._currentValue),i._currentValue=o}function la(n){n._currentValue=tf.current,L(tf)}function nf(n,i,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===o)break;n=n.return}}function rf(n,i,o,u){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var g=m.dependencies;if(g!==null){var T=m.child;g=g.firstContext;e:for(;g!==null;){var $=g;g=m;for(var K=0;K<i.length;K++)if($.context===i[K]){g.lanes|=o,$=g.alternate,$!==null&&($.lanes|=o),nf(g.return,o,n),u||(T=null);break e}g=$.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(a(341));T.lanes|=o,g=T.alternate,g!==null&&(g.lanes|=o),nf(T,o,n),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===n){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function ps(n,i,o,u){n=null;for(var m=i,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(a(387));if(T=T.memoizedProps,T!==null){var $=m.type;ar(m.pendingProps.value,T.value)||(n!==null?n.push($):n=[$])}}else if(m===ne.current){if(T=m.alternate,T===null)throw Error(a(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(Ko):n=[Ko])}m=m.return}n!==null&&rf(i,n,o,u),i.flags|=262144}function Eu(n){for(n=n.firstContext;n!==null;){if(!ar(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function _i(n){xi=n,oa=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Nn(n){return Ag(xi,n)}function Nu(n,i){return xi===null&&_i(n),Ag(n,i)}function Ag(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},oa===null){if(n===null)throw Error(a(308));oa=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else oa=oa.next=i;return o}var gT=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},yT=e.unstable_scheduleCallback,vT=e.unstable_NormalPriority,rn={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function af(){return{controller:new gT,data:new Map,refCount:0}}function To(n){n.refCount--,n.refCount===0&&yT(vT,function(){n.controller.abort()})}var Eo=null,sf=0,hs=0,ms=null;function bT(n,i){if(Eo===null){var o=Eo=[];sf=0,hs=up(),ms={status:"pending",value:void 0,then:function(u){o.push(u)}}}return sf++,i.then(Cg,Cg),i}function Cg(){if(--sf===0&&Eo!==null){ms!==null&&(ms.status="fulfilled");var n=Eo;Eo=null,hs=0,ms=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function xT(n,i){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var m=0;m<o.length;m++)(0,o[m])(i)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var Rg=J.S;J.S=function(n,i){py=rt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&bT(n,i),Rg!==null&&Rg(n,i)};var wi=N(null);function of(){var n=wi.current;return n!==null?n:$t.pooledCache}function Au(n,i){i===null?V(wi,wi.current):V(wi,i.pool)}function jg(){var n=of();return n===null?null:{parent:rn._currentValue,pool:n}}var gs=Error(a(460)),lf=Error(a(474)),Cu=Error(a(542)),Ru={then:function(){}};function Og(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Mg(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(Rr,Rr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,$g(n),n;default:if(typeof i.status=="string")i.then(Rr,Rr);else{if(n=$t,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=u}},function(u){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,$g(n),n}throw ki=i,gs}}function Si(n){try{var i=n._init;return i(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ki=o,gs):o}}var ki=null;function Ig(){if(ki===null)throw Error(a(459));var n=ki;return ki=null,n}function $g(n){if(n===gs||n===Cu)throw Error(a(483))}var ys=null,No=0;function ju(n){var i=No;return No+=1,ys===null&&(ys=[]),Mg(ys,n,i)}function Ao(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Ou(n,i){throw i.$$typeof===x?Error(a(525)):(n=Object.prototype.toString.call(i),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Dg(n){function i(ue,re){if(n){var fe=ue.deletions;fe===null?(ue.deletions=[re],ue.flags|=16):fe.push(re)}}function o(ue,re){if(!n)return null;for(;re!==null;)i(ue,re),re=re.sibling;return null}function u(ue){for(var re=new Map;ue!==null;)ue.key!==null?re.set(ue.key,ue):re.set(ue.index,ue),ue=ue.sibling;return re}function m(ue,re){return ue=ia(ue,re),ue.index=0,ue.sibling=null,ue}function g(ue,re,fe){return ue.index=fe,n?(fe=ue.alternate,fe!==null?(fe=fe.index,fe<re?(ue.flags|=67108866,re):fe):(ue.flags|=67108866,re)):(ue.flags|=1048576,re)}function T(ue){return n&&ue.alternate===null&&(ue.flags|=67108866),ue}function $(ue,re,fe,we){return re===null||re.tag!==6?(re=Jd(fe,ue.mode,we),re.return=ue,re):(re=m(re,fe),re.return=ue,re)}function K(ue,re,fe,we){var Ve=fe.type;return Ve===S?xe(ue,re,fe.props.children,we,fe.key):re!==null&&(re.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===A&&Si(Ve)===re.type)?(re=m(re,fe.props),Ao(re,fe),re.return=ue,re):(re=ku(fe.type,fe.key,fe.props,null,ue.mode,we),Ao(re,fe),re.return=ue,re)}function pe(ue,re,fe,we){return re===null||re.tag!==4||re.stateNode.containerInfo!==fe.containerInfo||re.stateNode.implementation!==fe.implementation?(re=Xd(fe,ue.mode,we),re.return=ue,re):(re=m(re,fe.children||[]),re.return=ue,re)}function xe(ue,re,fe,we,Ve){return re===null||re.tag!==7?(re=vi(fe,ue.mode,we,Ve),re.return=ue,re):(re=m(re,fe),re.return=ue,re)}function ke(ue,re,fe){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return re=Jd(""+re,ue.mode,fe),re.return=ue,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case b:return fe=ku(re.type,re.key,re.props,null,ue.mode,fe),Ao(fe,re),fe.return=ue,fe;case _:return re=Xd(re,ue.mode,fe),re.return=ue,re;case A:return re=Si(re),ke(ue,re,fe)}if(de(re)||Y(re))return re=vi(re,ue.mode,fe,null),re.return=ue,re;if(typeof re.then=="function")return ke(ue,ju(re),fe);if(re.$$typeof===E)return ke(ue,Nu(ue,re),fe);Ou(ue,re)}return null}function me(ue,re,fe,we){var Ve=re!==null?re.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Ve!==null?null:$(ue,re,""+fe,we);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case b:return fe.key===Ve?K(ue,re,fe,we):null;case _:return fe.key===Ve?pe(ue,re,fe,we):null;case A:return fe=Si(fe),me(ue,re,fe,we)}if(de(fe)||Y(fe))return Ve!==null?null:xe(ue,re,fe,we,null);if(typeof fe.then=="function")return me(ue,re,ju(fe),we);if(fe.$$typeof===E)return me(ue,re,Nu(ue,fe),we);Ou(ue,fe)}return null}function ye(ue,re,fe,we,Ve){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return ue=ue.get(fe)||null,$(re,ue,""+we,Ve);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case b:return ue=ue.get(we.key===null?fe:we.key)||null,K(re,ue,we,Ve);case _:return ue=ue.get(we.key===null?fe:we.key)||null,pe(re,ue,we,Ve);case A:return we=Si(we),ye(ue,re,fe,we,Ve)}if(de(we)||Y(we))return ue=ue.get(fe)||null,xe(re,ue,we,Ve,null);if(typeof we.then=="function")return ye(ue,re,fe,ju(we),Ve);if(we.$$typeof===E)return ye(ue,re,fe,Nu(re,we),Ve);Ou(re,we)}return null}function De(ue,re,fe,we){for(var Ve=null,mt=null,qe=re,at=re=0,ct=null;qe!==null&&at<fe.length;at++){qe.index>at?(ct=qe,qe=null):ct=qe.sibling;var gt=me(ue,qe,fe[at],we);if(gt===null){qe===null&&(qe=ct);break}n&&qe&&gt.alternate===null&&i(ue,qe),re=g(gt,re,at),mt===null?Ve=gt:mt.sibling=gt,mt=gt,qe=ct}if(at===fe.length)return o(ue,qe),dt&&sa(ue,at),Ve;if(qe===null){for(;at<fe.length;at++)qe=ke(ue,fe[at],we),qe!==null&&(re=g(qe,re,at),mt===null?Ve=qe:mt.sibling=qe,mt=qe);return dt&&sa(ue,at),Ve}for(qe=u(qe);at<fe.length;at++)ct=ye(qe,ue,at,fe[at],we),ct!==null&&(n&&ct.alternate!==null&&qe.delete(ct.key===null?at:ct.key),re=g(ct,re,at),mt===null?Ve=ct:mt.sibling=ct,mt=ct);return n&&qe.forEach(function(ti){return i(ue,ti)}),dt&&sa(ue,at),Ve}function Ze(ue,re,fe,we){if(fe==null)throw Error(a(151));for(var Ve=null,mt=null,qe=re,at=re=0,ct=null,gt=fe.next();qe!==null&&!gt.done;at++,gt=fe.next()){qe.index>at?(ct=qe,qe=null):ct=qe.sibling;var ti=me(ue,qe,gt.value,we);if(ti===null){qe===null&&(qe=ct);break}n&&qe&&ti.alternate===null&&i(ue,qe),re=g(ti,re,at),mt===null?Ve=ti:mt.sibling=ti,mt=ti,qe=ct}if(gt.done)return o(ue,qe),dt&&sa(ue,at),Ve;if(qe===null){for(;!gt.done;at++,gt=fe.next())gt=ke(ue,gt.value,we),gt!==null&&(re=g(gt,re,at),mt===null?Ve=gt:mt.sibling=gt,mt=gt);return dt&&sa(ue,at),Ve}for(qe=u(qe);!gt.done;at++,gt=fe.next())gt=ye(qe,ue,at,gt.value,we),gt!==null&&(n&&gt.alternate!==null&&qe.delete(gt.key===null?at:gt.key),re=g(gt,re,at),mt===null?Ve=gt:mt.sibling=gt,mt=gt);return n&&qe.forEach(function(jE){return i(ue,jE)}),dt&&sa(ue,at),Ve}function jt(ue,re,fe,we){if(typeof fe=="object"&&fe!==null&&fe.type===S&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case b:e:{for(var Ve=fe.key;re!==null;){if(re.key===Ve){if(Ve=fe.type,Ve===S){if(re.tag===7){o(ue,re.sibling),we=m(re,fe.props.children),we.return=ue,ue=we;break e}}else if(re.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===A&&Si(Ve)===re.type){o(ue,re.sibling),we=m(re,fe.props),Ao(we,fe),we.return=ue,ue=we;break e}o(ue,re);break}else i(ue,re);re=re.sibling}fe.type===S?(we=vi(fe.props.children,ue.mode,we,fe.key),we.return=ue,ue=we):(we=ku(fe.type,fe.key,fe.props,null,ue.mode,we),Ao(we,fe),we.return=ue,ue=we)}return T(ue);case _:e:{for(Ve=fe.key;re!==null;){if(re.key===Ve)if(re.tag===4&&re.stateNode.containerInfo===fe.containerInfo&&re.stateNode.implementation===fe.implementation){o(ue,re.sibling),we=m(re,fe.children||[]),we.return=ue,ue=we;break e}else{o(ue,re);break}else i(ue,re);re=re.sibling}we=Xd(fe,ue.mode,we),we.return=ue,ue=we}return T(ue);case A:return fe=Si(fe),jt(ue,re,fe,we)}if(de(fe))return De(ue,re,fe,we);if(Y(fe)){if(Ve=Y(fe),typeof Ve!="function")throw Error(a(150));return fe=Ve.call(fe),Ze(ue,re,fe,we)}if(typeof fe.then=="function")return jt(ue,re,ju(fe),we);if(fe.$$typeof===E)return jt(ue,re,Nu(ue,fe),we);Ou(ue,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint"?(fe=""+fe,re!==null&&re.tag===6?(o(ue,re.sibling),we=m(re,fe),we.return=ue,ue=we):(o(ue,re),we=Jd(fe,ue.mode,we),we.return=ue,ue=we),T(ue)):o(ue,re)}return function(ue,re,fe,we){try{No=0;var Ve=jt(ue,re,fe,we);return ys=null,Ve}catch(qe){if(qe===gs||qe===Cu)throw qe;var mt=ir(29,qe,null,ue.mode);return mt.lanes=we,mt.return=ue,mt}finally{}}}var Ti=Dg(!0),zg=Dg(!1),La=!1;function uf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cf(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ua(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function qa(n,i,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(xt&2)!==0){var m=u.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),u.pending=i,i=Su(n),xg(n,null,o),i}return wu(n,u,i,o),Su(n)}function Co(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,ou(n,o)}}function df(n,i){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?m=g=T:g=g.next=T,o=o.next}while(o!==null);g===null?m=g=i:g=g.next=i}else m=g=i;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var ff=!1;function Ro(){if(ff){var n=ms;if(n!==null)throw n}}function jo(n,i,o,u){ff=!1;var m=n.updateQueue;La=!1;var g=m.firstBaseUpdate,T=m.lastBaseUpdate,$=m.shared.pending;if($!==null){m.shared.pending=null;var K=$,pe=K.next;K.next=null,T===null?g=pe:T.next=pe,T=K;var xe=n.alternate;xe!==null&&(xe=xe.updateQueue,$=xe.lastBaseUpdate,$!==T&&($===null?xe.firstBaseUpdate=pe:$.next=pe,xe.lastBaseUpdate=K))}if(g!==null){var ke=m.baseState;T=0,xe=pe=K=null,$=g;do{var me=$.lane&-536870913,ye=me!==$.lane;if(ye?(ut&me)===me:(u&me)===me){me!==0&&me===hs&&(ff=!0),xe!==null&&(xe=xe.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});e:{var De=n,Ze=$;me=i;var jt=o;switch(Ze.tag){case 1:if(De=Ze.payload,typeof De=="function"){ke=De.call(jt,ke,me);break e}ke=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Ze.payload,me=typeof De=="function"?De.call(jt,ke,me):De,me==null)break e;ke=v({},ke,me);break e;case 2:La=!0}}me=$.callback,me!==null&&(n.flags|=64,ye&&(n.flags|=8192),ye=m.callbacks,ye===null?m.callbacks=[me]:ye.push(me))}else ye={lane:me,tag:$.tag,payload:$.payload,callback:$.callback,next:null},xe===null?(pe=xe=ye,K=ke):xe=xe.next=ye,T|=me;if($=$.next,$===null){if($=m.shared.pending,$===null)break;ye=$,$=ye.next,ye.next=null,m.lastBaseUpdate=ye,m.shared.pending=null}}while(!0);xe===null&&(K=ke),m.baseState=K,m.firstBaseUpdate=pe,m.lastBaseUpdate=xe,g===null&&(m.shared.lanes=0),Ha|=T,n.lanes=T,n.memoizedState=ke}}function Lg(n,i){if(typeof n!="function")throw Error(a(191,n));n.call(i)}function Ug(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Lg(o[n],i)}var vs=N(null),Mu=N(0);function qg(n,i){n=ya,V(Mu,n),V(vs,i),ya=n|i.baseLanes}function pf(){V(Mu,ya),V(vs,vs.current)}function hf(){ya=Mu.current,L(vs),L(Mu)}var sr=N(null),kr=null;function Pa(n){var i=n.alternate;V(Qt,Qt.current&1),V(sr,n),kr===null&&(i===null||vs.current!==null||i.memoizedState!==null)&&(kr=n)}function mf(n){V(Qt,Qt.current),V(sr,n),kr===null&&(kr=n)}function Pg(n){n.tag===22?(V(Qt,Qt.current),V(sr,n),kr===null&&(kr=n)):Ba()}function Ba(){V(Qt,Qt.current),V(sr,sr.current)}function or(n){L(sr),kr===n&&(kr=null),L(Qt)}var Qt=N(0);function Iu(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||_p(o)||wp(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ua=0,tt=null,Ct=null,an=null,$u=!1,bs=!1,Ei=!1,Du=0,Oo=0,xs=null,_T=0;function Jt(){throw Error(a(321))}function gf(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!ar(n[o],i[o]))return!1;return!0}function yf(n,i,o,u,m,g){return ua=g,tt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,J.H=n===null||n.memoizedState===null?k0:Of,Ei=!1,g=o(u,m),Ei=!1,bs&&(g=Fg(i,o,u,m)),Bg(n),g}function Bg(n){J.H=$o;var i=Ct!==null&&Ct.next!==null;if(ua=0,an=Ct=tt=null,$u=!1,Oo=0,xs=null,i)throw Error(a(300));n===null||sn||(n=n.dependencies,n!==null&&Eu(n)&&(sn=!0))}function Fg(n,i,o,u){tt=n;var m=0;do{if(bs&&(xs=null),Oo=0,bs=!1,25<=m)throw Error(a(301));if(m+=1,an=Ct=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}J.H=T0,g=i(o,u)}while(bs);return g}function wT(){var n=J.H,i=n.useState()[0];return i=typeof i.then=="function"?Mo(i):i,n=n.useState()[0],(Ct!==null?Ct.memoizedState:null)!==n&&(tt.flags|=1024),i}function vf(){var n=Du!==0;return Du=0,n}function bf(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function xf(n){if($u){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}$u=!1}ua=0,an=Ct=tt=null,bs=!1,Oo=Du=0,xs=null}function Dn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?tt.memoizedState=an=n:an=an.next=n,an}function Wt(){if(Ct===null){var n=tt.alternate;n=n!==null?n.memoizedState:null}else n=Ct.next;var i=an===null?tt.memoizedState:an.next;if(i!==null)an=i,Ct=n;else{if(n===null)throw tt.alternate===null?Error(a(467)):Error(a(310));Ct=n,n={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},an===null?tt.memoizedState=an=n:an=an.next=n}return an}function zu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mo(n){var i=Oo;return Oo+=1,xs===null&&(xs=[]),n=Mg(xs,n,i),i=tt,(an===null?i.memoizedState:an.next)===null&&(i=i.alternate,J.H=i===null||i.memoizedState===null?k0:Of),n}function Lu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Mo(n);if(n.$$typeof===E)return Nn(n)}throw Error(a(438,String(n)))}function _f(n){var i=null,o=tt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=tt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=zu(),tt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),u=0;u<n;u++)o[u]=M;return i.index++,o}function ca(n,i){return typeof i=="function"?i(n):i}function Uu(n){var i=Wt();return wf(i,Ct,n)}function wf(n,i,o){var u=n.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var m=n.baseQueue,g=u.pending;if(g!==null){if(m!==null){var T=m.next;m.next=g.next,g.next=T}i.baseQueue=m=g,u.pending=null}if(g=n.baseState,m===null)n.memoizedState=g;else{i=m.next;var $=T=null,K=null,pe=i,xe=!1;do{var ke=pe.lane&-536870913;if(ke!==pe.lane?(ut&ke)===ke:(ua&ke)===ke){var me=pe.revertLane;if(me===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),ke===hs&&(xe=!0);else if((ua&me)===me){pe=pe.next,me===hs&&(xe=!0);continue}else ke={lane:0,revertLane:pe.revertLane,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},K===null?($=K=ke,T=g):K=K.next=ke,tt.lanes|=me,Ha|=me;ke=pe.action,Ei&&o(g,ke),g=pe.hasEagerState?pe.eagerState:o(g,ke)}else me={lane:ke,revertLane:pe.revertLane,gesture:pe.gesture,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},K===null?($=K=me,T=g):K=K.next=me,tt.lanes|=ke,Ha|=ke;pe=pe.next}while(pe!==null&&pe!==i);if(K===null?T=g:K.next=$,!ar(g,n.memoizedState)&&(sn=!0,xe&&(o=ms,o!==null)))throw o;n.memoizedState=g,n.baseState=T,n.baseQueue=K,u.lastRenderedState=g}return m===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Sf(n){var i=Wt(),o=i.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=n;var u=o.dispatch,m=o.pending,g=i.memoizedState;if(m!==null){o.pending=null;var T=m=m.next;do g=n(g,T.action),T=T.next;while(T!==m);ar(g,i.memoizedState)||(sn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,u]}function Vg(n,i,o){var u=tt,m=Wt(),g=dt;if(g){if(o===void 0)throw Error(a(407));o=o()}else o=i();var T=!ar((Ct||m).memoizedState,o);if(T&&(m.memoizedState=o,sn=!0),m=m.queue,Ef(Zg.bind(null,u,m,n),[n]),m.getSnapshot!==i||T||an!==null&&an.memoizedState.tag&1){if(u.flags|=2048,_s(9,{destroy:void 0},Gg.bind(null,u,m,o,i),null),$t===null)throw Error(a(349));g||(ua&127)!==0||Hg(u,i,o)}return o}function Hg(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=tt.updateQueue,i===null?(i=zu(),tt.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function Gg(n,i,o,u){i.value=o,i.getSnapshot=u,Yg(i)&&Jg(n)}function Zg(n,i,o){return o(function(){Yg(i)&&Jg(n)})}function Yg(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!ar(n,o)}catch{return!0}}function Jg(n){var i=yi(n,2);i!==null&&Kn(i,n,2)}function kf(n){var i=Dn();if(typeof n=="function"){var o=n;if(n=o(),Ei){nr(!0);try{o()}finally{nr(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:n},i}function Xg(n,i,o,u){return n.baseState=o,wf(n,Ct,typeof u=="function"?u:ca)}function ST(n,i,o,u,m){if(Bu(n))throw Error(a(485));if(n=i.action,n!==null){var g={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};J.T!==null?o(!0):g.isTransition=!1,u(g),o=i.pending,o===null?(g.next=i.pending=g,Kg(i,g)):(g.next=o.next,i.pending=o.next=g)}}function Kg(n,i){var o=i.action,u=i.payload,m=n.state;if(i.isTransition){var g=J.T,T={};J.T=T;try{var $=o(m,u),K=J.S;K!==null&&K(T,$),Qg(n,i,$)}catch(pe){Tf(n,i,pe)}finally{g!==null&&T.types!==null&&(g.types=T.types),J.T=g}}else try{g=o(m,u),Qg(n,i,g)}catch(pe){Tf(n,i,pe)}}function Qg(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Wg(n,i,u)},function(u){return Tf(n,i,u)}):Wg(n,i,o)}function Wg(n,i,o){i.status="fulfilled",i.value=o,e0(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,Kg(n,o)))}function Tf(n,i,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,e0(i),i=i.next;while(i!==u)}n.action=null}function e0(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function t0(n,i){return i}function n0(n,i){if(dt){var o=$t.formState;if(o!==null){e:{var u=tt;if(dt){if(Ut){t:{for(var m=Ut,g=Sr;m.nodeType!==8;){if(!g){m=null;break t}if(m=Tr(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){Ut=Tr(m.nextSibling),u=m.data==="F!";break e}}Da(u)}u=!1}u&&(i=o[0])}}return o=Dn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t0,lastRenderedState:i},o.queue=u,o=_0.bind(null,tt,u),u.dispatch=o,u=kf(!1),g=jf.bind(null,tt,!1,u.queue),u=Dn(),m={state:i,dispatch:null,action:n,pending:null},u.queue=m,o=ST.bind(null,tt,m,g,o),m.dispatch=o,u.memoizedState=n,[i,o,!1]}function r0(n){var i=Wt();return a0(i,Ct,n)}function a0(n,i,o){if(i=wf(n,i,t0)[0],n=Uu(ca)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Mo(i)}catch(T){throw T===gs?Cu:T}else u=i;i=Wt();var m=i.queue,g=m.dispatch;return o!==i.memoizedState&&(tt.flags|=2048,_s(9,{destroy:void 0},kT.bind(null,m,o),null)),[u,g,n]}function kT(n,i){n.action=i}function i0(n){var i=Wt(),o=Ct;if(o!==null)return a0(i,o,n);Wt(),i=i.memoizedState,o=Wt();var u=o.queue.dispatch;return o.memoizedState=n,[i,u,!1]}function _s(n,i,o,u){return n={tag:n,create:o,deps:u,inst:i,next:null},i=tt.updateQueue,i===null&&(i=zu(),tt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,i.lastEffect=n),n}function s0(){return Wt().memoizedState}function qu(n,i,o,u){var m=Dn();tt.flags|=n,m.memoizedState=_s(1|i,{destroy:void 0},o,u===void 0?null:u)}function Pu(n,i,o,u){var m=Wt();u=u===void 0?null:u;var g=m.memoizedState.inst;Ct!==null&&u!==null&&gf(u,Ct.memoizedState.deps)?m.memoizedState=_s(i,g,o,u):(tt.flags|=n,m.memoizedState=_s(1|i,g,o,u))}function o0(n,i){qu(8390656,8,n,i)}function Ef(n,i){Pu(2048,8,n,i)}function TT(n){tt.flags|=4;var i=tt.updateQueue;if(i===null)i=zu(),tt.updateQueue=i,i.events=[n];else{var o=i.events;o===null?i.events=[n]:o.push(n)}}function l0(n){var i=Wt().memoizedState;return TT({ref:i,nextImpl:n}),function(){if((xt&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function u0(n,i){return Pu(4,2,n,i)}function c0(n,i){return Pu(4,4,n,i)}function d0(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function f0(n,i,o){o=o!=null?o.concat([n]):null,Pu(4,4,d0.bind(null,i,n),o)}function Nf(){}function p0(n,i){var o=Wt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&gf(i,u[1])?u[0]:(o.memoizedState=[n,i],n)}function h0(n,i){var o=Wt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&gf(i,u[1]))return u[0];if(u=n(),Ei){nr(!0);try{n()}finally{nr(!1)}}return o.memoizedState=[u,i],u}function Af(n,i,o){return o===void 0||(ua&1073741824)!==0&&(ut&261930)===0?n.memoizedState=i:(n.memoizedState=o,n=my(),tt.lanes|=n,Ha|=n,o)}function m0(n,i,o,u){return ar(o,i)?o:vs.current!==null?(n=Af(n,o,u),ar(n,i)||(sn=!0),n):(ua&42)===0||(ua&1073741824)!==0&&(ut&261930)===0?(sn=!0,n.memoizedState=o):(n=my(),tt.lanes|=n,Ha|=n,i)}function g0(n,i,o,u,m){var g=te.p;te.p=g!==0&&8>g?g:8;var T=J.T,$={};J.T=$,jf(n,!1,i,o);try{var K=m(),pe=J.S;if(pe!==null&&pe($,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var xe=xT(K,u);Io(n,i,xe,cr(n))}else Io(n,i,u,cr(n))}catch(ke){Io(n,i,{then:function(){},status:"rejected",reason:ke},cr())}finally{te.p=g,T!==null&&$.types!==null&&(T.types=$.types),J.T=T}}function ET(){}function Cf(n,i,o,u){if(n.tag!==5)throw Error(a(476));var m=y0(n).queue;g0(n,m,i,he,o===null?ET:function(){return v0(n),o(u)})}function y0(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:he},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function v0(n){var i=y0(n);i.next===null&&(i=n.alternate.memoizedState),Io(n,i.next.queue,{},cr())}function Rf(){return Nn(Ko)}function b0(){return Wt().memoizedState}function x0(){return Wt().memoizedState}function NT(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=cr();n=Ua(o);var u=qa(i,n,o);u!==null&&(Kn(u,i,o),Co(u,i,o)),i={cache:af()},n.payload=i;return}i=i.return}}function AT(n,i,o){var u=cr();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Bu(n)?w0(i,o):(o=Zd(n,i,o,u),o!==null&&(Kn(o,n,u),S0(o,i,u)))}function _0(n,i,o){var u=cr();Io(n,i,o,u)}function Io(n,i,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Bu(n))w0(i,m);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var T=i.lastRenderedState,$=g(T,o);if(m.hasEagerState=!0,m.eagerState=$,ar($,T))return wu(n,i,m,0),$t===null&&_u(),!1}catch{}finally{}if(o=Zd(n,i,m,u),o!==null)return Kn(o,n,u),S0(o,i,u),!0}return!1}function jf(n,i,o,u){if(u={lane:2,revertLane:up(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Bu(n)){if(i)throw Error(a(479))}else i=Zd(n,o,u,2),i!==null&&Kn(i,n,2)}function Bu(n){var i=n.alternate;return n===tt||i!==null&&i===tt}function w0(n,i){bs=$u=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function S0(n,i,o){if((o&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,ou(n,o)}}var $o={readContext:Nn,use:Lu,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt,useHostTransitionStatus:Jt,useFormState:Jt,useActionState:Jt,useOptimistic:Jt,useMemoCache:Jt,useCacheRefresh:Jt};$o.useEffectEvent=Jt;var k0={readContext:Nn,use:Lu,useCallback:function(n,i){return Dn().memoizedState=[n,i===void 0?null:i],n},useContext:Nn,useEffect:o0,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,qu(4194308,4,d0.bind(null,i,n),o)},useLayoutEffect:function(n,i){return qu(4194308,4,n,i)},useInsertionEffect:function(n,i){qu(4,2,n,i)},useMemo:function(n,i){var o=Dn();i=i===void 0?null:i;var u=n();if(Ei){nr(!0);try{n()}finally{nr(!1)}}return o.memoizedState=[u,i],u},useReducer:function(n,i,o){var u=Dn();if(o!==void 0){var m=o(i);if(Ei){nr(!0);try{o(i)}finally{nr(!1)}}}else m=i;return u.memoizedState=u.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},u.queue=n,n=n.dispatch=AT.bind(null,tt,n),[u.memoizedState,n]},useRef:function(n){var i=Dn();return n={current:n},i.memoizedState=n},useState:function(n){n=kf(n);var i=n.queue,o=_0.bind(null,tt,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:Nf,useDeferredValue:function(n,i){var o=Dn();return Af(o,n,i)},useTransition:function(){var n=kf(!1);return n=g0.bind(null,tt,n.queue,!0,!1),Dn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var u=tt,m=Dn();if(dt){if(o===void 0)throw Error(a(407));o=o()}else{if(o=i(),$t===null)throw Error(a(349));(ut&127)!==0||Hg(u,i,o)}m.memoizedState=o;var g={value:o,getSnapshot:i};return m.queue=g,o0(Zg.bind(null,u,g,n),[n]),u.flags|=2048,_s(9,{destroy:void 0},Gg.bind(null,u,g,o,i),null),o},useId:function(){var n=Dn(),i=$t.identifierPrefix;if(dt){var o=Yr,u=Zr;o=(u&~(1<<32-$n(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=Du++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=_T++,i="_"+i+"r_"+o.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:Rf,useFormState:n0,useActionState:n0,useOptimistic:function(n){var i=Dn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=jf.bind(null,tt,!0,o),o.dispatch=i,[n,i]},useMemoCache:_f,useCacheRefresh:function(){return Dn().memoizedState=NT.bind(null,tt)},useEffectEvent:function(n){var i=Dn(),o={impl:n};return i.memoizedState=o,function(){if((xt&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},Of={readContext:Nn,use:Lu,useCallback:p0,useContext:Nn,useEffect:Ef,useImperativeHandle:f0,useInsertionEffect:u0,useLayoutEffect:c0,useMemo:h0,useReducer:Uu,useRef:s0,useState:function(){return Uu(ca)},useDebugValue:Nf,useDeferredValue:function(n,i){var o=Wt();return m0(o,Ct.memoizedState,n,i)},useTransition:function(){var n=Uu(ca)[0],i=Wt().memoizedState;return[typeof n=="boolean"?n:Mo(n),i]},useSyncExternalStore:Vg,useId:b0,useHostTransitionStatus:Rf,useFormState:r0,useActionState:r0,useOptimistic:function(n,i){var o=Wt();return Xg(o,Ct,n,i)},useMemoCache:_f,useCacheRefresh:x0};Of.useEffectEvent=l0;var T0={readContext:Nn,use:Lu,useCallback:p0,useContext:Nn,useEffect:Ef,useImperativeHandle:f0,useInsertionEffect:u0,useLayoutEffect:c0,useMemo:h0,useReducer:Sf,useRef:s0,useState:function(){return Sf(ca)},useDebugValue:Nf,useDeferredValue:function(n,i){var o=Wt();return Ct===null?Af(o,n,i):m0(o,Ct.memoizedState,n,i)},useTransition:function(){var n=Sf(ca)[0],i=Wt().memoizedState;return[typeof n=="boolean"?n:Mo(n),i]},useSyncExternalStore:Vg,useId:b0,useHostTransitionStatus:Rf,useFormState:i0,useActionState:i0,useOptimistic:function(n,i){var o=Wt();return Ct!==null?Xg(o,Ct,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:_f,useCacheRefresh:x0};T0.useEffectEvent=l0;function Mf(n,i,o,u){i=n.memoizedState,o=o(u,i),o=o==null?i:v({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var If={enqueueSetState:function(n,i,o){n=n._reactInternals;var u=cr(),m=Ua(u);m.payload=i,o!=null&&(m.callback=o),i=qa(n,m,u),i!==null&&(Kn(i,n,u),Co(i,n,u))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var u=cr(),m=Ua(u);m.tag=1,m.payload=i,o!=null&&(m.callback=o),i=qa(n,m,u),i!==null&&(Kn(i,n,u),Co(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=cr(),u=Ua(o);u.tag=2,i!=null&&(u.callback=i),i=qa(n,u,o),i!==null&&(Kn(i,n,o),Co(i,n,o))}};function E0(n,i,o,u,m,g,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,T):i.prototype&&i.prototype.isPureReactComponent?!_o(o,u)||!_o(m,g):!0}function N0(n,i,o,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==n&&If.enqueueReplaceState(i,i.state,null)}function Ni(n,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(n=n.defaultProps){o===i&&(o=v({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}function A0(n){xu(n)}function C0(n){console.error(n)}function R0(n){xu(n)}function Fu(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function j0(n,i,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function $f(n,i,o){return o=Ua(o),o.tag=3,o.payload={element:null},o.callback=function(){Fu(n,i)},o}function O0(n){return n=Ua(n),n.tag=3,n}function M0(n,i,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var g=u.value;n.payload=function(){return m(g)},n.callback=function(){j0(i,o,u)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){j0(i,o,u),typeof m!="function"&&(Ga===null?Ga=new Set([this]):Ga.add(this));var $=u.stack;this.componentDidCatch(u.value,{componentStack:$!==null?$:""})})}function CT(n,i,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&ps(i,o,m,!0),o=sr.current,o!==null){switch(o.tag){case 31:case 13:return kr===null?tc():o.alternate===null&&Xt===0&&(Xt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===Ru?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),sp(n,u,m)),!1;case 22:return o.flags|=65536,u===Ru?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),sp(n,u,m)),!1}throw Error(a(435,o.tag))}return sp(n,u,m),tc(),!1}if(dt)return i=sr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,u!==Wd&&(n=Error(a(422),{cause:u}),ko(xr(n,o)))):(u!==Wd&&(i=Error(a(423),{cause:u}),ko(xr(i,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,u=xr(u,o),m=$f(n.stateNode,u,m),df(n,m),Xt!==4&&(Xt=2)),!1;var g=Error(a(520),{cause:u});if(g=xr(g,o),Fo===null?Fo=[g]:Fo.push(g),Xt!==4&&(Xt=2),i===null)return!0;u=xr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=$f(o.stateNode,u,n),df(o,n),!1;case 1:if(i=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ga===null||!Ga.has(g))))return o.flags|=65536,m&=-m,o.lanes|=m,m=O0(m),M0(m,n,o,u),df(o,m),!1}o=o.return}while(o!==null);return!1}var Df=Error(a(461)),sn=!1;function An(n,i,o,u){i.child=n===null?zg(i,null,o,u):Ti(i,n.child,o,u)}function I0(n,i,o,u,m){o=o.render;var g=i.ref;if("ref"in u){var T={};for(var $ in u)$!=="ref"&&(T[$]=u[$])}else T=u;return _i(i),u=yf(n,i,o,T,g,m),$=vf(),n!==null&&!sn?(bf(n,i,m),da(n,i,m)):(dt&&$&&Kd(i),i.flags|=1,An(n,i,u,m),i.child)}function $0(n,i,o,u,m){if(n===null){var g=o.type;return typeof g=="function"&&!Yd(g)&&g.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=g,D0(n,i,g,u,m)):(n=ku(o.type,null,u,i,i.mode,m),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!Vf(n,m)){var T=g.memoizedProps;if(o=o.compare,o=o!==null?o:_o,o(T,u)&&n.ref===i.ref)return da(n,i,m)}return i.flags|=1,n=ia(g,u),n.ref=i.ref,n.return=i,i.child=n}function D0(n,i,o,u,m){if(n!==null){var g=n.memoizedProps;if(_o(g,u)&&n.ref===i.ref)if(sn=!1,i.pendingProps=u=g,Vf(n,m))(n.flags&131072)!==0&&(sn=!0);else return i.lanes=n.lanes,da(n,i,m)}return zf(n,i,o,u,m)}function z0(n,i,o,u){var m=u.children,g=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,n!==null){for(u=i.child=n.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~g}else u=0,i.child=null;return L0(n,i,g,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Au(i,g!==null?g.cachePool:null),g!==null?qg(i,g):pf(),Pg(i);else return u=i.lanes=536870912,L0(n,i,g!==null?g.baseLanes|o:o,o,u)}else g!==null?(Au(i,g.cachePool),qg(i,g),Ba(),i.memoizedState=null):(n!==null&&Au(i,null),pf(),Ba());return An(n,i,m,o),i.child}function Do(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function L0(n,i,o,u,m){var g=of();return g=g===null?null:{parent:rn._currentValue,pool:g},i.memoizedState={baseLanes:o,cachePool:g},n!==null&&Au(i,null),pf(),Pg(i),n!==null&&ps(n,i,u,!0),i.childLanes=m,null}function Vu(n,i){return i=Gu({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function U0(n,i,o){return Ti(i,n.child,null,o),n=Vu(i,i.pendingProps),n.flags|=2,or(i),i.memoizedState=null,n}function RT(n,i,o){var u=i.pendingProps,m=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(dt){if(u.mode==="hidden")return n=Vu(i,u),i.lanes=536870912,Do(null,n);if(mf(i),(n=Ut)?(n=Ky(n,Sr),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ia!==null?{id:Zr,overflow:Yr}:null,retryLane:536870912,hydrationErrors:null},o=wg(n),o.return=i,i.child=o,En=i,Ut=null)):n=null,n===null)throw Da(i);return i.lanes=536870912,null}return Vu(i,u)}var g=n.memoizedState;if(g!==null){var T=g.dehydrated;if(mf(i),m)if(i.flags&256)i.flags&=-257,i=U0(n,i,o);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(a(558));else if(sn||ps(n,i,o,!1),m=(o&n.childLanes)!==0,sn||m){if(u=$t,u!==null&&(T=lu(u,o),T!==0&&T!==g.retryLane))throw g.retryLane=T,yi(n,T),Kn(u,n,T),Df;tc(),i=U0(n,i,o)}else n=g.treeContext,Ut=Tr(T.nextSibling),En=i,dt=!0,$a=null,Sr=!1,n!==null&&Tg(i,n),i=Vu(i,u),i.flags|=4096;return i}return n=ia(n.child,{mode:u.mode,children:u.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Hu(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function zf(n,i,o,u,m){return _i(i),o=yf(n,i,o,u,void 0,m),u=vf(),n!==null&&!sn?(bf(n,i,m),da(n,i,m)):(dt&&u&&Kd(i),i.flags|=1,An(n,i,o,m),i.child)}function q0(n,i,o,u,m,g){return _i(i),i.updateQueue=null,o=Fg(i,u,o,m),Bg(n),u=vf(),n!==null&&!sn?(bf(n,i,g),da(n,i,g)):(dt&&u&&Kd(i),i.flags|=1,An(n,i,o,g),i.child)}function P0(n,i,o,u,m){if(_i(i),i.stateNode===null){var g=us,T=o.contextType;typeof T=="object"&&T!==null&&(g=Nn(T)),g=new o(u,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=If,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=u,g.state=i.memoizedState,g.refs={},uf(i),T=o.contextType,g.context=typeof T=="object"&&T!==null?Nn(T):us,g.state=i.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(Mf(i,o,T,u),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&If.enqueueReplaceState(g,g.state,null),jo(i,u,g,m),Ro(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){g=i.stateNode;var $=i.memoizedProps,K=Ni(o,$);g.props=K;var pe=g.context,xe=o.contextType;T=us,typeof xe=="object"&&xe!==null&&(T=Nn(xe));var ke=o.getDerivedStateFromProps;xe=typeof ke=="function"||typeof g.getSnapshotBeforeUpdate=="function",$=i.pendingProps!==$,xe||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||($||pe!==T)&&N0(i,g,u,T),La=!1;var me=i.memoizedState;g.state=me,jo(i,u,g,m),Ro(),pe=i.memoizedState,$||me!==pe||La?(typeof ke=="function"&&(Mf(i,o,ke,u),pe=i.memoizedState),(K=La||E0(i,o,K,u,me,pe,T))?(xe||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=pe),g.props=u,g.state=pe,g.context=T,u=K):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,cf(n,i),T=i.memoizedProps,xe=Ni(o,T),g.props=xe,ke=i.pendingProps,me=g.context,pe=o.contextType,K=us,typeof pe=="object"&&pe!==null&&(K=Nn(pe)),$=o.getDerivedStateFromProps,(pe=typeof $=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==ke||me!==K)&&N0(i,g,u,K),La=!1,me=i.memoizedState,g.state=me,jo(i,u,g,m),Ro();var ye=i.memoizedState;T!==ke||me!==ye||La||n!==null&&n.dependencies!==null&&Eu(n.dependencies)?(typeof $=="function"&&(Mf(i,o,$,u),ye=i.memoizedState),(xe=La||E0(i,o,xe,u,me,ye,K)||n!==null&&n.dependencies!==null&&Eu(n.dependencies))?(pe||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,ye,K),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,ye,K)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===n.memoizedProps&&me===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&me===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ye),g.props=u,g.state=ye,g.context=K,u=xe):(typeof g.componentDidUpdate!="function"||T===n.memoizedProps&&me===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&me===n.memoizedState||(i.flags|=1024),u=!1)}return g=u,Hu(n,i),u=(i.flags&128)!==0,g||u?(g=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,n!==null&&u?(i.child=Ti(i,n.child,null,m),i.child=Ti(i,null,o,m)):An(n,i,o,m),i.memoizedState=g.state,n=i.child):n=da(n,i,m),n}function B0(n,i,o,u){return bi(),i.flags|=256,An(n,i,o,u),i.child}var Lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uf(n){return{baseLanes:n,cachePool:jg()}}function qf(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=ur),n}function F0(n,i,o){var u=i.pendingProps,m=!1,g=(i.flags&128)!==0,T;if((T=g)||(T=n!==null&&n.memoizedState===null?!1:(Qt.current&2)!==0),T&&(m=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,n===null){if(dt){if(m?Pa(i):Ba(),(n=Ut)?(n=Ky(n,Sr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ia!==null?{id:Zr,overflow:Yr}:null,retryLane:536870912,hydrationErrors:null},o=wg(n),o.return=i,i.child=o,En=i,Ut=null)):n=null,n===null)throw Da(i);return wp(n)?i.lanes=32:i.lanes=536870912,null}var $=u.children;return u=u.fallback,m?(Ba(),m=i.mode,$=Gu({mode:"hidden",children:$},m),u=vi(u,m,o,null),$.return=i,u.return=i,$.sibling=u,i.child=$,u=i.child,u.memoizedState=Uf(o),u.childLanes=qf(n,T,o),i.memoizedState=Lf,Do(null,u)):(Pa(i),Pf(i,$))}var K=n.memoizedState;if(K!==null&&($=K.dehydrated,$!==null)){if(g)i.flags&256?(Pa(i),i.flags&=-257,i=Bf(n,i,o)):i.memoizedState!==null?(Ba(),i.child=n.child,i.flags|=128,i=null):(Ba(),$=u.fallback,m=i.mode,u=Gu({mode:"visible",children:u.children},m),$=vi($,m,o,null),$.flags|=2,u.return=i,$.return=i,u.sibling=$,i.child=u,Ti(i,n.child,null,o),u=i.child,u.memoizedState=Uf(o),u.childLanes=qf(n,T,o),i.memoizedState=Lf,i=Do(null,u));else if(Pa(i),wp($)){if(T=$.nextSibling&&$.nextSibling.dataset,T)var pe=T.dgst;T=pe,u=Error(a(419)),u.stack="",u.digest=T,ko({value:u,source:null,stack:null}),i=Bf(n,i,o)}else if(sn||ps(n,i,o,!1),T=(o&n.childLanes)!==0,sn||T){if(T=$t,T!==null&&(u=lu(T,o),u!==0&&u!==K.retryLane))throw K.retryLane=u,yi(n,u),Kn(T,n,u),Df;_p($)||tc(),i=Bf(n,i,o)}else _p($)?(i.flags|=192,i.child=n.child,i=null):(n=K.treeContext,Ut=Tr($.nextSibling),En=i,dt=!0,$a=null,Sr=!1,n!==null&&Tg(i,n),i=Pf(i,u.children),i.flags|=4096);return i}return m?(Ba(),$=u.fallback,m=i.mode,K=n.child,pe=K.sibling,u=ia(K,{mode:"hidden",children:u.children}),u.subtreeFlags=K.subtreeFlags&65011712,pe!==null?$=ia(pe,$):($=vi($,m,o,null),$.flags|=2),$.return=i,u.return=i,u.sibling=$,i.child=u,Do(null,u),u=i.child,$=n.child.memoizedState,$===null?$=Uf(o):(m=$.cachePool,m!==null?(K=rn._currentValue,m=m.parent!==K?{parent:K,pool:K}:m):m=jg(),$={baseLanes:$.baseLanes|o,cachePool:m}),u.memoizedState=$,u.childLanes=qf(n,T,o),i.memoizedState=Lf,Do(n.child,u)):(Pa(i),o=n.child,n=o.sibling,o=ia(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,n!==null&&(T=i.deletions,T===null?(i.deletions=[n],i.flags|=16):T.push(n)),i.child=o,i.memoizedState=null,o)}function Pf(n,i){return i=Gu({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Gu(n,i){return n=ir(22,n,null,i),n.lanes=0,n}function Bf(n,i,o){return Ti(i,n.child,null,o),n=Pf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function V0(n,i,o){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),nf(n.return,i,o)}function Ff(n,i,o,u,m,g){var T=n.memoizedState;T===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:g}:(T.isBackwards=i,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=o,T.tailMode=m,T.treeForkCount=g)}function H0(n,i,o){var u=i.pendingProps,m=u.revealOrder,g=u.tail;u=u.children;var T=Qt.current,$=(T&2)!==0;if($?(T=T&1|2,i.flags|=128):T&=1,V(Qt,T),An(n,i,u,o),u=dt?So:0,!$&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&V0(n,o,i);else if(n.tag===19)V0(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(o=i.child,m=null;o!==null;)n=o.alternate,n!==null&&Iu(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=i.child,i.child=null):(m=o.sibling,o.sibling=null),Ff(i,!1,m,o,g,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=i.child,i.child=null;m!==null;){if(n=m.alternate,n!==null&&Iu(n)===null){i.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}Ff(i,!0,o,null,g,u);break;case"together":Ff(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function da(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Ha|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(ps(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(a(153));if(i.child!==null){for(n=i.child,o=ia(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=ia(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Vf(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Eu(n)))}function jT(n,i,o){switch(i.tag){case 3:le(i,i.stateNode.containerInfo),za(i,rn,n.memoizedState.cache),bi();break;case 27:case 5:Ae(i);break;case 4:le(i,i.stateNode.containerInfo);break;case 10:za(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,mf(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Pa(i),i.flags|=128,null):(o&i.child.childLanes)!==0?F0(n,i,o):(Pa(i),n=da(n,i,o),n!==null?n.sibling:null);Pa(i);break;case 19:var m=(n.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(ps(n,i,o,!1),u=(o&i.childLanes)!==0),m){if(u)return H0(n,i,o);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),V(Qt,Qt.current),u)break;return null;case 22:return i.lanes=0,z0(n,i,o,i.pendingProps);case 24:za(i,rn,n.memoizedState.cache)}return da(n,i,o)}function G0(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)sn=!0;else{if(!Vf(n,o)&&(i.flags&128)===0)return sn=!1,jT(n,i,o);sn=(n.flags&131072)!==0}else sn=!1,dt&&(i.flags&1048576)!==0&&kg(i,So,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(n=Si(i.elementType),i.type=n,typeof n=="function")Yd(n)?(u=Ni(n,u),i.tag=1,i=P0(null,i,n,u,o)):(i.tag=0,i=zf(null,i,n,u,o));else{if(n!=null){var m=n.$$typeof;if(m===q){i.tag=11,i=I0(null,i,n,u,o);break e}else if(m===I){i.tag=14,i=$0(null,i,n,u,o);break e}}throw i=ee(n)||n,Error(a(306,i,""))}}return i;case 0:return zf(n,i,i.type,i.pendingProps,o);case 1:return u=i.type,m=Ni(u,i.pendingProps),P0(n,i,u,m,o);case 3:e:{if(le(i,i.stateNode.containerInfo),n===null)throw Error(a(387));u=i.pendingProps;var g=i.memoizedState;m=g.element,cf(n,i),jo(i,u,null,o);var T=i.memoizedState;if(u=T.cache,za(i,rn,u),u!==g.cache&&rf(i,[rn],o,!0),Ro(),u=T.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=B0(n,i,u,o);break e}else if(u!==m){m=xr(Error(a(424)),i),ko(m),i=B0(n,i,u,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ut=Tr(n.firstChild),En=i,dt=!0,$a=null,Sr=!0,o=zg(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(bi(),u===m){i=da(n,i,o);break e}An(n,i,u,o)}i=i.child}return i;case 26:return Hu(n,i),n===null?(o=rv(i.type,null,i.pendingProps,null))?i.memoizedState=o:dt||(o=i.type,n=i.pendingProps,u=lc(D.current).createElement(o),u[hn]=i,u[jn]=n,Cn(u,o,n),Kt(u),i.stateNode=u):i.memoizedState=rv(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Ae(i),n===null&&dt&&(u=i.stateNode=ev(i.type,i.pendingProps,D.current),En=i,Sr=!0,m=Ut,Xa(i.type)?(Sp=m,Ut=Tr(u.firstChild)):Ut=m),An(n,i,i.pendingProps.children,o),Hu(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&dt&&((m=u=Ut)&&(u=oE(u,i.type,i.pendingProps,Sr),u!==null?(i.stateNode=u,En=i,Ut=Tr(u.firstChild),Sr=!1,m=!0):m=!1),m||Da(i)),Ae(i),m=i.type,g=i.pendingProps,T=n!==null?n.memoizedProps:null,u=g.children,vp(m,g)?u=null:T!==null&&vp(m,T)&&(i.flags|=32),i.memoizedState!==null&&(m=yf(n,i,wT,null,null,o),Ko._currentValue=m),Hu(n,i),An(n,i,u,o),i.child;case 6:return n===null&&dt&&((n=o=Ut)&&(o=lE(o,i.pendingProps,Sr),o!==null?(i.stateNode=o,En=i,Ut=null,n=!0):n=!1),n||Da(i)),null;case 13:return F0(n,i,o);case 4:return le(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=Ti(i,null,u,o):An(n,i,u,o),i.child;case 11:return I0(n,i,i.type,i.pendingProps,o);case 7:return An(n,i,i.pendingProps,o),i.child;case 8:return An(n,i,i.pendingProps.children,o),i.child;case 12:return An(n,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,za(i,i.type,u.value),An(n,i,u.children,o),i.child;case 9:return m=i.type._context,u=i.pendingProps.children,_i(i),m=Nn(m),u=u(m),i.flags|=1,An(n,i,u,o),i.child;case 14:return $0(n,i,i.type,i.pendingProps,o);case 15:return D0(n,i,i.type,i.pendingProps,o);case 19:return H0(n,i,o);case 31:return RT(n,i,o);case 22:return z0(n,i,o,i.pendingProps);case 24:return _i(i),u=Nn(rn),n===null?(m=of(),m===null&&(m=$t,g=af(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=o),m=g),i.memoizedState={parent:u,cache:m},uf(i),za(i,rn,m)):((n.lanes&o)!==0&&(cf(n,i),jo(i,null,null,o),Ro()),m=n.memoizedState,g=i.memoizedState,m.parent!==u?(m={parent:u,cache:u},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),za(i,rn,u)):(u=g.cache,za(i,rn,u),u!==m.cache&&rf(i,[rn],o,!0))),An(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function fa(n){n.flags|=4}function Hf(n,i,o,u,m){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(by())n.flags|=8192;else throw ki=Ru,lf}else n.flags&=-16777217}function Z0(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!lv(i))if(by())n.flags|=8192;else throw ki=Ru,lf}function Zu(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?iu():536870912,n.lanes|=i,Ts|=i)}function zo(n,i){if(!dt)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function qt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(i)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=u,n.childLanes=o,i}function OT(n,i,o){var u=i.pendingProps;switch(Qd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(i),null;case 1:return qt(i),null;case 3:return o=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),la(rn),Se(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(fs(i)?fa(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ef())),qt(i),null;case 26:var m=i.type,g=i.memoizedState;return n===null?(fa(i),g!==null?(qt(i),Z0(i,g)):(qt(i),Hf(i,m,null,u,o))):g?g!==n.memoizedState?(fa(i),qt(i),Z0(i,g)):(qt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==u&&fa(i),qt(i),Hf(i,m,n,u,o)),null;case 27:if(Te(i),o=D.current,m=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&fa(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return qt(i),null}n=G.current,fs(i)?Eg(i):(n=ev(m,u,o),i.stateNode=n,fa(i))}return qt(i),null;case 5:if(Te(i),m=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&fa(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return qt(i),null}if(g=G.current,fs(i))Eg(i);else{var T=lc(D.current);switch(g){case 1:g=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:g=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":g=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":g=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":g=T.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?T.createElement(m,{is:u.is}):T.createElement(m)}}g[hn]=i,g[jn]=u;e:for(T=i.child;T!==null;){if(T.tag===5||T.tag===6)g.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===i)break e;for(;T.sibling===null;){if(T.return===null||T.return===i)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}i.stateNode=g;e:switch(Cn(g,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&fa(i)}}return qt(i),Hf(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,o),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&fa(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(n=D.current,fs(i)){if(n=i.stateNode,o=i.memoizedProps,u=null,m=En,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}n[hn]=i,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Fy(n.nodeValue,o)),n||Da(i,!0)}else n=lc(n).createTextNode(u),n[hn]=i,i.stateNode=n}return qt(i),null;case 31:if(o=i.memoizedState,n===null||n.memoizedState!==null){if(u=fs(i),o!==null){if(n===null){if(!u)throw Error(a(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(557));n[hn]=i}else bi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),n=!1}else o=ef(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return i.flags&256?(or(i),i):(or(i),null);if((i.flags&128)!==0)throw Error(a(558))}return qt(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=fs(i),u!==null&&u.dehydrated!==null){if(n===null){if(!m)throw Error(a(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(a(317));m[hn]=i}else bi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),m=!1}else m=ef(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(or(i),i):(or(i),null)}return or(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=i.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==m&&(u.flags|=2048)),o!==n&&o&&(i.child.flags|=8192),Zu(i,i.updateQueue),qt(i),null);case 4:return Se(),n===null&&pp(i.stateNode.containerInfo),qt(i),null;case 10:return la(i.type),qt(i),null;case 19:if(L(Qt),u=i.memoizedState,u===null)return qt(i),null;if(m=(i.flags&128)!==0,g=u.rendering,g===null)if(m)zo(u,!1);else{if(Xt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(g=Iu(n),g!==null){for(i.flags|=128,zo(u,!1),n=g.updateQueue,i.updateQueue=n,Zu(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)_g(o,n),o=o.sibling;return V(Qt,Qt.current&1|2),dt&&sa(i,u.treeForkCount),i.child}n=n.sibling}u.tail!==null&&rt()>Qu&&(i.flags|=128,m=!0,zo(u,!1),i.lanes=4194304)}else{if(!m)if(n=Iu(g),n!==null){if(i.flags|=128,m=!0,n=n.updateQueue,i.updateQueue=n,Zu(i,n),zo(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!dt)return qt(i),null}else 2*rt()-u.renderingStartTime>Qu&&o!==536870912&&(i.flags|=128,m=!0,zo(u,!1),i.lanes=4194304);u.isBackwards?(g.sibling=i.child,i.child=g):(n=u.last,n!==null?n.sibling=g:i.child=g,u.last=g)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=rt(),n.sibling=null,o=Qt.current,V(Qt,m?o&1|2:o&1),dt&&sa(i,u.treeForkCount),n):(qt(i),null);case 22:case 23:return or(i),hf(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(qt(i),i.subtreeFlags&6&&(i.flags|=8192)):qt(i),o=i.updateQueue,o!==null&&Zu(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),n!==null&&L(wi),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),la(rn),qt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function MT(n,i){switch(Qd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return la(rn),Se(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Te(i),null;case 31:if(i.memoizedState!==null){if(or(i),i.alternate===null)throw Error(a(340));bi()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(or(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(a(340));bi()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return L(Qt),null;case 4:return Se(),null;case 10:return la(i.type),null;case 22:case 23:return or(i),hf(),n!==null&&L(wi),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return la(rn),null;case 25:return null;default:return null}}function Y0(n,i){switch(Qd(i),i.tag){case 3:la(rn),Se();break;case 26:case 27:case 5:Te(i);break;case 4:Se();break;case 31:i.memoizedState!==null&&or(i);break;case 13:or(i);break;case 19:L(Qt);break;case 10:la(i.type);break;case 22:case 23:or(i),hf(),n!==null&&L(wi);break;case 24:la(rn)}}function Lo(n,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&n)===n){u=void 0;var g=o.create,T=o.inst;u=g(),T.destroy=u}o=o.next}while(o!==m)}}catch($){kt(i,i.return,$)}}function Fa(n,i,o){try{var u=i.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var g=m.next;u=g;do{if((u.tag&n)===n){var T=u.inst,$=T.destroy;if($!==void 0){T.destroy=void 0,m=i;var K=o,pe=$;try{pe()}catch(xe){kt(m,K,xe)}}}u=u.next}while(u!==g)}}catch(xe){kt(i,i.return,xe)}}function J0(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{Ug(i,o)}catch(u){kt(n,n.return,u)}}}function X0(n,i,o){o.props=Ni(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){kt(n,i,u)}}function Uo(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(m){kt(n,i,m)}}function Jr(n,i){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){kt(n,i,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){kt(n,i,m)}else o.current=null}function K0(n){var i=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){kt(n,n.return,m)}}function Gf(n,i,o){try{var u=n.stateNode;tE(u,n.type,o,i),u[jn]=i}catch(m){kt(n,n.return,m)}}function Q0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Xa(n.type)||n.tag===4}function Zf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Q0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Xa(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Yf(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Rr));else if(u!==4&&(u===27&&Xa(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(Yf(n,i,o),n=n.sibling;n!==null;)Yf(n,i,o),n=n.sibling}function Yu(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(u!==4&&(u===27&&Xa(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Yu(n,i,o),n=n.sibling;n!==null;)Yu(n,i,o),n=n.sibling}function W0(n){var i=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);Cn(i,u,o),i[hn]=n,i[jn]=o}catch(g){kt(n,n.return,g)}}var pa=!1,on=!1,Jf=!1,ey=typeof WeakSet=="function"?WeakSet:Set,Sn=null;function IT(n,i){if(n=n.containerInfo,gp=mc,n=fg(n),Pd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var T=0,$=-1,K=-1,pe=0,xe=0,ke=n,me=null;t:for(;;){for(var ye;ke!==o||m!==0&&ke.nodeType!==3||($=T+m),ke!==g||u!==0&&ke.nodeType!==3||(K=T+u),ke.nodeType===3&&(T+=ke.nodeValue.length),(ye=ke.firstChild)!==null;)me=ke,ke=ye;for(;;){if(ke===n)break t;if(me===o&&++pe===m&&($=T),me===g&&++xe===u&&(K=T),(ye=ke.nextSibling)!==null)break;ke=me,me=ke.parentNode}ke=ye}o=$===-1||K===-1?null:{start:$,end:K}}else o=null}o=o||{start:0,end:0}}else o=null;for(yp={focusedElem:n,selectionRange:o},mc=!1,Sn=i;Sn!==null;)if(i=Sn,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Sn=n;else for(;Sn!==null;){switch(i=Sn,g=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)m=n[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=i,m=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var De=Ni(o.type,m);n=u.getSnapshotBeforeUpdate(De,g),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ze){kt(o,o.return,Ze)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)xp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":xp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=i.sibling,n!==null){n.return=i.return,Sn=n;break}Sn=i.return}}function ty(n,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ma(n,o),u&4&&Lo(5,o);break;case 1:if(ma(n,o),u&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(T){kt(o,o.return,T)}else{var m=Ni(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(m,i,n.__reactInternalSnapshotBeforeUpdate)}catch(T){kt(o,o.return,T)}}u&64&&J0(o),u&512&&Uo(o,o.return);break;case 3:if(ma(n,o),u&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Ug(n,i)}catch(T){kt(o,o.return,T)}}break;case 27:i===null&&u&4&&W0(o);case 26:case 5:ma(n,o),i===null&&u&4&&K0(o),u&512&&Uo(o,o.return);break;case 12:ma(n,o);break;case 31:ma(n,o),u&4&&ay(n,o);break;case 13:ma(n,o),u&4&&iy(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=FT.bind(null,o),uE(n,o))));break;case 22:if(u=o.memoizedState!==null||pa,!u){i=i!==null&&i.memoizedState!==null||on,m=pa;var g=on;pa=u,(on=i)&&!g?ga(n,o,(o.subtreeFlags&8772)!==0):ma(n,o),pa=m,on=g}break;case 30:break;default:ma(n,o)}}function ny(n){var i=n.alternate;i!==null&&(n.alternate=null,ny(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&co(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Bt=null,Zn=!1;function ha(n,i,o){for(o=o.child;o!==null;)ry(n,i,o),o=o.sibling}function ry(n,i,o){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(_t,o)}catch{}switch(o.tag){case 26:on||Jr(o,i),ha(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:on||Jr(o,i);var u=Bt,m=Zn;Xa(o.type)&&(Bt=o.stateNode,Zn=!1),ha(n,i,o),Yo(o.stateNode),Bt=u,Zn=m;break;case 5:on||Jr(o,i);case 6:if(u=Bt,m=Zn,Bt=null,ha(n,i,o),Bt=u,Zn=m,Bt!==null)if(Zn)try{(Bt.nodeType===9?Bt.body:Bt.nodeName==="HTML"?Bt.ownerDocument.body:Bt).removeChild(o.stateNode)}catch(g){kt(o,i,g)}else try{Bt.removeChild(o.stateNode)}catch(g){kt(o,i,g)}break;case 18:Bt!==null&&(Zn?(n=Bt,Jy(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Ms(n)):Jy(Bt,o.stateNode));break;case 4:u=Bt,m=Zn,Bt=o.stateNode.containerInfo,Zn=!0,ha(n,i,o),Bt=u,Zn=m;break;case 0:case 11:case 14:case 15:Fa(2,o,i),on||Fa(4,o,i),ha(n,i,o);break;case 1:on||(Jr(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&X0(o,i,u)),ha(n,i,o);break;case 21:ha(n,i,o);break;case 22:on=(u=on)||o.memoizedState!==null,ha(n,i,o),on=u;break;default:ha(n,i,o)}}function ay(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Ms(n)}catch(o){kt(i,i.return,o)}}}function iy(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ms(n)}catch(o){kt(i,i.return,o)}}function $T(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new ey),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new ey),i;default:throw Error(a(435,n.tag))}}function Ju(n,i){var o=$T(n);i.forEach(function(u){if(!o.has(u)){o.add(u);var m=VT.bind(null,n,u);u.then(m,m)}})}function Yn(n,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],g=n,T=i,$=T;e:for(;$!==null;){switch($.tag){case 27:if(Xa($.type)){Bt=$.stateNode,Zn=!1;break e}break;case 5:Bt=$.stateNode,Zn=!1;break e;case 3:case 4:Bt=$.stateNode.containerInfo,Zn=!0;break e}$=$.return}if(Bt===null)throw Error(a(160));ry(g,T,m),Bt=null,Zn=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)sy(i,n),i=i.sibling}var Or=null;function sy(n,i){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Yn(i,n),Jn(n),u&4&&(Fa(3,n,n.return),Lo(3,n),Fa(5,n,n.return));break;case 1:Yn(i,n),Jn(n),u&512&&(on||o===null||Jr(o,o.return)),u&64&&pa&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=Or;if(Yn(i,n),Jn(n),u&512&&(on||o===null||Jr(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":g=m.getElementsByTagName("title")[0],(!g||g[pi]||g[hn]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(u),m.head.insertBefore(g,m.querySelector("head > title"))),Cn(g,u,o),g[hn]=n,Kt(g),u=g;break e;case"link":var T=sv("link","href",m).get(u+(o.href||""));if(T){for(var $=0;$<T.length;$++)if(g=T[$],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice($,1);break t}}g=m.createElement(u),Cn(g,u,o),m.head.appendChild(g);break;case"meta":if(T=sv("meta","content",m).get(u+(o.content||""))){for($=0;$<T.length;$++)if(g=T[$],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice($,1);break t}}g=m.createElement(u),Cn(g,u,o),m.head.appendChild(g);break;default:throw Error(a(468,u))}g[hn]=n,Kt(g),u=g}n.stateNode=u}else ov(m,n.type,n.stateNode);else n.stateNode=iv(m,u,n.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?ov(m,n.type,n.stateNode):iv(m,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Gf(n,n.memoizedProps,o.memoizedProps)}break;case 27:Yn(i,n),Jn(n),u&512&&(on||o===null||Jr(o,o.return)),o!==null&&u&4&&Gf(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Yn(i,n),Jn(n),u&512&&(on||o===null||Jr(o,o.return)),n.flags&32){m=n.stateNode;try{At(m,"")}catch(De){kt(n,n.return,De)}}u&4&&n.stateNode!=null&&(m=n.memoizedProps,Gf(n,m,o!==null?o.memoizedProps:m)),u&1024&&(Jf=!0);break;case 6:if(Yn(i,n),Jn(n),u&4){if(n.stateNode===null)throw Error(a(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(De){kt(n,n.return,De)}}break;case 3:if(dc=null,m=Or,Or=uc(i.containerInfo),Yn(i,n),Or=m,Jn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ms(i.containerInfo)}catch(De){kt(n,n.return,De)}Jf&&(Jf=!1,oy(n));break;case 4:u=Or,Or=uc(n.stateNode.containerInfo),Yn(i,n),Jn(n),Or=u;break;case 12:Yn(i,n),Jn(n);break;case 31:Yn(i,n),Jn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ju(n,u)));break;case 13:Yn(i,n),Jn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ku=rt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ju(n,u)));break;case 22:m=n.memoizedState!==null;var K=o!==null&&o.memoizedState!==null,pe=pa,xe=on;if(pa=pe||m,on=xe||K,Yn(i,n),on=xe,pa=pe,Jn(n),u&8192)e:for(i=n.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(o===null||K||pa||on||Ai(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){K=o=i;try{if(g=K.stateNode,m)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{$=K.stateNode;var ke=K.memoizedProps.style,me=ke!=null&&ke.hasOwnProperty("display")?ke.display:null;$.style.display=me==null||typeof me=="boolean"?"":(""+me).trim()}}catch(De){kt(K,K.return,De)}}}else if(i.tag===6){if(o===null){K=i;try{K.stateNode.nodeValue=m?"":K.memoizedProps}catch(De){kt(K,K.return,De)}}}else if(i.tag===18){if(o===null){K=i;try{var ye=K.stateNode;m?Xy(ye,!0):Xy(K.stateNode,!1)}catch(De){kt(K,K.return,De)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Ju(n,o))));break;case 19:Yn(i,n),Jn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ju(n,u)));break;case 30:break;case 21:break;default:Yn(i,n),Jn(n)}}function Jn(n){var i=n.flags;if(i&2){try{for(var o,u=n.return;u!==null;){if(Q0(u)){o=u;break}u=u.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var m=o.stateNode,g=Zf(n);Yu(n,g,m);break;case 5:var T=o.stateNode;o.flags&32&&(At(T,""),o.flags&=-33);var $=Zf(n);Yu(n,$,T);break;case 3:case 4:var K=o.stateNode.containerInfo,pe=Zf(n);Yf(n,pe,K);break;default:throw Error(a(161))}}catch(xe){kt(n,n.return,xe)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function oy(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;oy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function ma(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ty(n,i.alternate,i),i=i.sibling}function Ai(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Fa(4,i,i.return),Ai(i);break;case 1:Jr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&X0(i,i.return,o),Ai(i);break;case 27:Yo(i.stateNode);case 26:case 5:Jr(i,i.return),Ai(i);break;case 22:i.memoizedState===null&&Ai(i);break;case 30:Ai(i);break;default:Ai(i)}n=n.sibling}}function ga(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,m=n,g=i,T=g.flags;switch(g.tag){case 0:case 11:case 15:ga(m,g,o),Lo(4,g);break;case 1:if(ga(m,g,o),u=g,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(pe){kt(u,u.return,pe)}if(u=g,m=u.updateQueue,m!==null){var $=u.stateNode;try{var K=m.shared.hiddenCallbacks;if(K!==null)for(m.shared.hiddenCallbacks=null,m=0;m<K.length;m++)Lg(K[m],$)}catch(pe){kt(u,u.return,pe)}}o&&T&64&&J0(g),Uo(g,g.return);break;case 27:W0(g);case 26:case 5:ga(m,g,o),o&&u===null&&T&4&&K0(g),Uo(g,g.return);break;case 12:ga(m,g,o);break;case 31:ga(m,g,o),o&&T&4&&ay(m,g);break;case 13:ga(m,g,o),o&&T&4&&iy(m,g);break;case 22:g.memoizedState===null&&ga(m,g,o),Uo(g,g.return);break;case 30:break;default:ga(m,g,o)}i=i.sibling}}function Xf(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&To(o))}function Kf(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&To(n))}function Mr(n,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ly(n,i,o,u),i=i.sibling}function ly(n,i,o,u){var m=i.flags;switch(i.tag){case 0:case 11:case 15:Mr(n,i,o,u),m&2048&&Lo(9,i);break;case 1:Mr(n,i,o,u);break;case 3:Mr(n,i,o,u),m&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&To(n)));break;case 12:if(m&2048){Mr(n,i,o,u),n=i.stateNode;try{var g=i.memoizedProps,T=g.id,$=g.onPostCommit;typeof $=="function"&&$(T,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(K){kt(i,i.return,K)}}else Mr(n,i,o,u);break;case 31:Mr(n,i,o,u);break;case 13:Mr(n,i,o,u);break;case 23:break;case 22:g=i.stateNode,T=i.alternate,i.memoizedState!==null?g._visibility&2?Mr(n,i,o,u):qo(n,i):g._visibility&2?Mr(n,i,o,u):(g._visibility|=2,ws(n,i,o,u,(i.subtreeFlags&10256)!==0||!1)),m&2048&&Xf(T,i);break;case 24:Mr(n,i,o,u),m&2048&&Kf(i.alternate,i);break;default:Mr(n,i,o,u)}}function ws(n,i,o,u,m){for(m=m&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=n,T=i,$=o,K=u,pe=T.flags;switch(T.tag){case 0:case 11:case 15:ws(g,T,$,K,m),Lo(8,T);break;case 23:break;case 22:var xe=T.stateNode;T.memoizedState!==null?xe._visibility&2?ws(g,T,$,K,m):qo(g,T):(xe._visibility|=2,ws(g,T,$,K,m)),m&&pe&2048&&Xf(T.alternate,T);break;case 24:ws(g,T,$,K,m),m&&pe&2048&&Kf(T.alternate,T);break;default:ws(g,T,$,K,m)}i=i.sibling}}function qo(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,u=i,m=u.flags;switch(u.tag){case 22:qo(o,u),m&2048&&Xf(u.alternate,u);break;case 24:qo(o,u),m&2048&&Kf(u.alternate,u);break;default:qo(o,u)}i=i.sibling}}var Po=8192;function Ss(n,i,o){if(n.subtreeFlags&Po)for(n=n.child;n!==null;)uy(n,i,o),n=n.sibling}function uy(n,i,o){switch(n.tag){case 26:Ss(n,i,o),n.flags&Po&&n.memoizedState!==null&&_E(o,Or,n.memoizedState,n.memoizedProps);break;case 5:Ss(n,i,o);break;case 3:case 4:var u=Or;Or=uc(n.stateNode.containerInfo),Ss(n,i,o),Or=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Po,Po=16777216,Ss(n,i,o),Po=u):Ss(n,i,o));break;default:Ss(n,i,o)}}function cy(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Bo(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Sn=u,fy(u,n)}cy(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)dy(n),n=n.sibling}function dy(n){switch(n.tag){case 0:case 11:case 15:Bo(n),n.flags&2048&&Fa(9,n,n.return);break;case 3:Bo(n);break;case 12:Bo(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Xu(n)):Bo(n);break;default:Bo(n)}}function Xu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Sn=u,fy(u,n)}cy(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Fa(8,i,i.return),Xu(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Xu(i));break;default:Xu(i)}n=n.sibling}}function fy(n,i){for(;Sn!==null;){var o=Sn;switch(o.tag){case 0:case 11:case 15:Fa(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:To(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Sn=u;else e:for(o=n;Sn!==null;){u=Sn;var m=u.sibling,g=u.return;if(ny(u),u===o){Sn=null;break e}if(m!==null){m.return=g,Sn=m;break e}Sn=g}}}var DT={getCacheForType:function(n){var i=Nn(rn),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o},cacheSignal:function(){return Nn(rn).controller.signal}},zT=typeof WeakMap=="function"?WeakMap:Map,xt=0,$t=null,ot=null,ut=0,St=0,lr=null,Va=!1,ks=!1,Qf=!1,ya=0,Xt=0,Ha=0,Ci=0,Wf=0,ur=0,Ts=0,Fo=null,Xn=null,ep=!1,Ku=0,py=0,Qu=1/0,Wu=null,Ga=null,mn=0,Za=null,Es=null,va=0,tp=0,np=null,hy=null,Vo=0,rp=null;function cr(){return(xt&2)!==0&&ut!==0?ut&-ut:J.T!==null?up():uu()}function my(){if(ur===0)if((ut&536870912)===0||dt){var n=Yi;Yi<<=1,(Yi&3932160)===0&&(Yi=262144),ur=n}else ur=536870912;return n=sr.current,n!==null&&(n.flags|=32),ur}function Kn(n,i,o){(n===$t&&(St===2||St===9)||n.cancelPendingCommit!==null)&&(Ns(n,0),Ya(n,ut,ur,!1)),fi(n,o),((xt&2)===0||n!==$t)&&(n===$t&&((xt&2)===0&&(Ci|=o),Xt===4&&Ya(n,ut,ur,!1)),Xr(n))}function gy(n,i,o){if((xt&6)!==0)throw Error(a(327));var u=!o&&(i&127)===0&&(i&n.expiredLanes)===0||di(n,i),m=u?qT(n,i):ip(n,i,!0),g=u;do{if(m===0){ks&&!u&&Ya(n,i,0,!1);break}else{if(o=n.current.alternate,g&&!LT(o)){m=ip(n,i,!1),g=!1;continue}if(m===2){if(g=i,n.errorRecoveryDisabledLanes&g)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var $=n;m=Fo;var K=$.current.memoizedState.isDehydrated;if(K&&(Ns($,T).flags|=256),T=ip($,T,!1),T!==2){if(Qf&&!K){$.errorRecoveryDisabledLanes|=g,Ci|=g,m=4;break e}g=Xn,Xn=m,g!==null&&(Xn===null?Xn=g:Xn.push.apply(Xn,g))}m=T}if(g=!1,m!==2)continue}}if(m===1){Ns(n,0),Ya(n,i,0,!0);break}e:{switch(u=n,g=m,g){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Ya(u,i,ur,!Va);break e;case 2:Xn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(m=Ku+300-rt(),10<m)){if(Ya(u,i,ur,!Va),Xi(u,0,!0)!==0)break e;va=i,u.timeoutHandle=Zy(yy.bind(null,u,o,Xn,Wu,ep,i,ur,Ci,Ts,Va,g,"Throttled",-0,0),m);break e}yy(u,o,Xn,Wu,ep,i,ur,Ci,Ts,Va,g,null,-0,0)}}break}while(!0);Xr(n)}function yy(n,i,o,u,m,g,T,$,K,pe,xe,ke,me,ye){if(n.timeoutHandle=-1,ke=i.subtreeFlags,ke&8192||(ke&16785408)===16785408){ke={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rr},uy(i,g,ke);var De=(g&62914560)===g?Ku-rt():(g&4194048)===g?py-rt():0;if(De=wE(ke,De),De!==null){va=g,n.cancelPendingCommit=De(Ty.bind(null,n,i,g,o,u,m,T,$,K,xe,ke,null,me,ye)),Ya(n,g,T,!pe);return}}Ty(n,i,g,o,u,m,T,$,K)}function LT(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],g=m.getSnapshot;m=m.value;try{if(!ar(g(),m))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ya(n,i,o,u){i&=~Wf,i&=~Ci,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var m=i;0<m;){var g=31-$n(m),T=1<<g;u[g]=-1,m&=~T}o!==0&&su(n,o,i)}function ec(){return(xt&6)===0?(Ho(0),!1):!0}function ap(){if(ot!==null){if(St===0)var n=ot.return;else n=ot,oa=xi=null,xf(n),ys=null,No=0,n=ot;for(;n!==null;)Y0(n.alternate,n),n=n.return;ot=null}}function Ns(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,aE(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),va=0,ap(),$t=n,ot=o=ia(n.current,null),ut=i,St=0,lr=null,Va=!1,ks=di(n,i),Qf=!1,Ts=ur=Wf=Ci=Ha=Xt=0,Xn=Fo=null,ep=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var m=31-$n(u),g=1<<m;i|=n[m],u&=~g}return ya=i,_u(),o}function vy(n,i){tt=null,J.H=$o,i===gs||i===Cu?(i=Ig(),St=3):i===lf?(i=Ig(),St=4):St=i===Df?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,lr=i,ot===null&&(Xt=1,Fu(n,xr(i,n.current)))}function by(){var n=sr.current;return n===null?!0:(ut&4194048)===ut?kr===null:(ut&62914560)===ut||(ut&536870912)!==0?n===kr:!1}function xy(){var n=J.H;return J.H=$o,n===null?$o:n}function _y(){var n=J.A;return J.A=DT,n}function tc(){Xt=4,Va||(ut&4194048)!==ut&&sr.current!==null||(ks=!0),(Ha&134217727)===0&&(Ci&134217727)===0||$t===null||Ya($t,ut,ur,!1)}function ip(n,i,o){var u=xt;xt|=2;var m=xy(),g=_y();($t!==n||ut!==i)&&(Wu=null,Ns(n,i)),i=!1;var T=Xt;e:do try{if(St!==0&&ot!==null){var $=ot,K=lr;switch(St){case 8:ap(),T=6;break e;case 3:case 2:case 9:case 6:sr.current===null&&(i=!0);var pe=St;if(St=0,lr=null,As(n,$,K,pe),o&&ks){T=0;break e}break;default:pe=St,St=0,lr=null,As(n,$,K,pe)}}UT(),T=Xt;break}catch(xe){vy(n,xe)}while(!0);return i&&n.shellSuspendCounter++,oa=xi=null,xt=u,J.H=m,J.A=g,ot===null&&($t=null,ut=0,_u()),T}function UT(){for(;ot!==null;)wy(ot)}function qT(n,i){var o=xt;xt|=2;var u=xy(),m=_y();$t!==n||ut!==i?(Wu=null,Qu=rt()+500,Ns(n,i)):ks=di(n,i);e:do try{if(St!==0&&ot!==null){i=ot;var g=lr;t:switch(St){case 1:St=0,lr=null,As(n,i,g,1);break;case 2:case 9:if(Og(g)){St=0,lr=null,Sy(i);break}i=function(){St!==2&&St!==9||$t!==n||(St=7),Xr(n)},g.then(i,i);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:Og(g)?(St=0,lr=null,Sy(i)):(St=0,lr=null,As(n,i,g,7));break;case 5:var T=null;switch(ot.tag){case 26:T=ot.memoizedState;case 5:case 27:var $=ot;if(T?lv(T):$.stateNode.complete){St=0,lr=null;var K=$.sibling;if(K!==null)ot=K;else{var pe=$.return;pe!==null?(ot=pe,nc(pe)):ot=null}break t}}St=0,lr=null,As(n,i,g,5);break;case 6:St=0,lr=null,As(n,i,g,6);break;case 8:ap(),Xt=6;break e;default:throw Error(a(462))}}PT();break}catch(xe){vy(n,xe)}while(!0);return oa=xi=null,J.H=u,J.A=m,xt=o,ot!==null?0:($t=null,ut=0,_u(),Xt)}function PT(){for(;ot!==null&&!xn();)wy(ot)}function wy(n){var i=G0(n.alternate,n,ya);n.memoizedProps=n.pendingProps,i===null?nc(n):ot=i}function Sy(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=q0(o,i,i.pendingProps,i.type,void 0,ut);break;case 11:i=q0(o,i,i.pendingProps,i.type.render,i.ref,ut);break;case 5:xf(i);default:Y0(o,i),i=ot=_g(i,ya),i=G0(o,i,ya)}n.memoizedProps=n.pendingProps,i===null?nc(n):ot=i}function As(n,i,o,u){oa=xi=null,xf(i),ys=null,No=0;var m=i.return;try{if(CT(n,m,i,o,ut)){Xt=1,Fu(n,xr(o,n.current)),ot=null;return}}catch(g){if(m!==null)throw ot=m,g;Xt=1,Fu(n,xr(o,n.current)),ot=null;return}i.flags&32768?(dt||u===1?n=!0:ks||(ut&536870912)!==0?n=!1:(Va=n=!0,(u===2||u===9||u===3||u===6)&&(u=sr.current,u!==null&&u.tag===13&&(u.flags|=16384))),ky(i,n)):nc(i)}function nc(n){var i=n;do{if((i.flags&32768)!==0){ky(i,Va);return}n=i.return;var o=OT(i.alternate,i,ya);if(o!==null){ot=o;return}if(i=i.sibling,i!==null){ot=i;return}ot=i=n}while(i!==null);Xt===0&&(Xt=5)}function ky(n,i){do{var o=MT(n.alternate,n);if(o!==null){o.flags&=32767,ot=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){ot=n;return}ot=n=o}while(n!==null);Xt=6,ot=null}function Ty(n,i,o,u,m,g,T,$,K){n.cancelPendingCommit=null;do rc();while(mn!==0);if((xt&6)!==0)throw Error(a(327));if(i!==null){if(i===n.current)throw Error(a(177));if(g=i.lanes|i.childLanes,g|=Gd,Td(n,o,g,T,$,K),n===$t&&(ot=$t=null,ut=0),Es=i,Za=n,va=o,tp=g,np=m,hy=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,HT(nn,function(){return Ry(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=J.T,J.T=null,m=te.p,te.p=2,T=xt,xt|=4;try{IT(n,i,o)}finally{xt=T,te.p=m,J.T=u}}mn=1,Ey(),Ny(),Ay()}}function Ey(){if(mn===1){mn=0;var n=Za,i=Es,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=J.T,J.T=null;var u=te.p;te.p=2;var m=xt;xt|=4;try{sy(i,n);var g=yp,T=fg(n.containerInfo),$=g.focusedElem,K=g.selectionRange;if(T!==$&&$&&$.ownerDocument&&dg($.ownerDocument.documentElement,$)){if(K!==null&&Pd($)){var pe=K.start,xe=K.end;if(xe===void 0&&(xe=pe),"selectionStart"in $)$.selectionStart=pe,$.selectionEnd=Math.min(xe,$.value.length);else{var ke=$.ownerDocument||document,me=ke&&ke.defaultView||window;if(me.getSelection){var ye=me.getSelection(),De=$.textContent.length,Ze=Math.min(K.start,De),jt=K.end===void 0?Ze:Math.min(K.end,De);!ye.extend&&Ze>jt&&(T=jt,jt=Ze,Ze=T);var ue=cg($,Ze),re=cg($,jt);if(ue&&re&&(ye.rangeCount!==1||ye.anchorNode!==ue.node||ye.anchorOffset!==ue.offset||ye.focusNode!==re.node||ye.focusOffset!==re.offset)){var fe=ke.createRange();fe.setStart(ue.node,ue.offset),ye.removeAllRanges(),Ze>jt?(ye.addRange(fe),ye.extend(re.node,re.offset)):(fe.setEnd(re.node,re.offset),ye.addRange(fe))}}}}for(ke=[],ye=$;ye=ye.parentNode;)ye.nodeType===1&&ke.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<ke.length;$++){var we=ke[$];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}mc=!!gp,yp=gp=null}finally{xt=m,te.p=u,J.T=o}}n.current=i,mn=2}}function Ny(){if(mn===2){mn=0;var n=Za,i=Es,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=J.T,J.T=null;var u=te.p;te.p=2;var m=xt;xt|=4;try{ty(n,i.alternate,i)}finally{xt=m,te.p=u,J.T=o}}mn=3}}function Ay(){if(mn===4||mn===3){mn=0,pt();var n=Za,i=Es,o=va,u=hy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?mn=5:(mn=0,Es=Za=null,Cy(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(Ga=null),lo(o),i=i.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(_t,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=J.T,m=te.p,te.p=2,J.T=null;try{for(var g=n.onRecoverableError,T=0;T<u.length;T++){var $=u[T];g($.value,{componentStack:$.stack})}}finally{J.T=i,te.p=m}}(va&3)!==0&&rc(),Xr(n),m=n.pendingLanes,(o&261930)!==0&&(m&42)!==0?n===rp?Vo++:(Vo=0,rp=n):Vo=0,Ho(0)}}function Cy(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,To(i)))}function rc(){return Ey(),Ny(),Ay(),Ry()}function Ry(){if(mn!==5)return!1;var n=Za,i=tp;tp=0;var o=lo(va),u=J.T,m=te.p;try{te.p=32>o?32:o,J.T=null,o=np,np=null;var g=Za,T=va;if(mn=0,Es=Za=null,va=0,(xt&6)!==0)throw Error(a(331));var $=xt;if(xt|=4,dy(g.current),ly(g,g.current,T,o),xt=$,Ho(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(_t,g)}catch{}return!0}finally{te.p=m,J.T=u,Cy(n,i)}}function jy(n,i,o){i=xr(o,i),i=$f(n.stateNode,i,2),n=qa(n,i,2),n!==null&&(fi(n,2),Xr(n))}function kt(n,i,o){if(n.tag===3)jy(n,n,o);else for(;i!==null;){if(i.tag===3){jy(i,n,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ga===null||!Ga.has(u))){n=xr(o,n),o=O0(2),u=qa(i,o,2),u!==null&&(M0(o,u,i,n),fi(u,2),Xr(u));break}}i=i.return}}function sp(n,i,o){var u=n.pingCache;if(u===null){u=n.pingCache=new zT;var m=new Set;u.set(i,m)}else m=u.get(i),m===void 0&&(m=new Set,u.set(i,m));m.has(o)||(Qf=!0,m.add(o),n=BT.bind(null,n,i,o),i.then(n,n))}function BT(n,i,o){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,$t===n&&(ut&o)===o&&(Xt===4||Xt===3&&(ut&62914560)===ut&&300>rt()-Ku?(xt&2)===0&&Ns(n,0):Wf|=o,Ts===ut&&(Ts=0)),Xr(n)}function Oy(n,i){i===0&&(i=iu()),n=yi(n,i),n!==null&&(fi(n,i),Xr(n))}function FT(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),Oy(n,o)}function VT(n,i){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),Oy(n,o)}function HT(n,i){return tn(n,i)}var ac=null,Cs=null,op=!1,ic=!1,lp=!1,Ja=0;function Xr(n){n!==Cs&&n.next===null&&(Cs===null?ac=Cs=n:Cs=Cs.next=n),ic=!0,op||(op=!0,ZT())}function Ho(n,i){if(!lp&&ic){lp=!0;do for(var o=!1,u=ac;u!==null;){if(n!==0){var m=u.pendingLanes;if(m===0)var g=0;else{var T=u.suspendedLanes,$=u.pingedLanes;g=(1<<31-$n(42|n)+1)-1,g&=m&~(T&~$),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,Dy(u,g))}else g=ut,g=Xi(u,u===$t?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||di(u,g)||(o=!0,Dy(u,g));u=u.next}while(o);lp=!1}}function GT(){My()}function My(){ic=op=!1;var n=0;Ja!==0&&rE()&&(n=Ja);for(var i=rt(),o=null,u=ac;u!==null;){var m=u.next,g=Iy(u,i);g===0?(u.next=null,o===null?ac=m:o.next=m,m===null&&(Cs=o)):(o=u,(n!==0||(g&3)!==0)&&(ic=!0)),u=m}mn!==0&&mn!==5||Ho(n),Ja!==0&&(Ja=0)}function Iy(n,i){for(var o=n.suspendedLanes,u=n.pingedLanes,m=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var T=31-$n(g),$=1<<T,K=m[T];K===-1?(($&o)===0||($&u)!==0)&&(m[T]=kd($,i)):K<=i&&(n.expiredLanes|=$),g&=~$}if(i=$t,o=ut,o=Xi(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===i&&(St===2||St===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Tn(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||di(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(u!==null&&Tn(u),lo(o)){case 2:case 8:o=Gt;break;case 32:o=nn;break;case 268435456:o=Cr;break;default:o=nn}return u=$y.bind(null,n),o=tn(o,u),n.callbackPriority=i,n.callbackNode=o,i}return u!==null&&u!==null&&Tn(u),n.callbackPriority=2,n.callbackNode=null,2}function $y(n,i){if(mn!==0&&mn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(rc()&&n.callbackNode!==o)return null;var u=ut;return u=Xi(n,n===$t?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(gy(n,u,i),Iy(n,rt()),n.callbackNode!=null&&n.callbackNode===o?$y.bind(null,n):null)}function Dy(n,i){if(rc())return null;gy(n,i,!0)}function ZT(){iE(function(){(xt&6)!==0?tn(Mt,GT):My()})}function up(){if(Ja===0){var n=hs;n===0&&(n=rr,rr<<=1,(rr&261888)===0&&(rr=256)),Ja=n}return Ja}function zy(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ts(""+n)}function Ly(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function YT(n,i,o,u,m){if(i==="submit"&&o&&o.stateNode===m){var g=zy((m[jn]||null).action),T=u.submitter;T&&(i=(i=T[jn]||null)?zy(i.formAction):T.getAttribute("formAction"),i!==null&&(g=i,T=null));var $=new yu("action","action",null,u,m);n.push({event:$,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ja!==0){var K=T?Ly(m,T):new FormData(m);Cf(o,{pending:!0,data:K,method:m.method,action:g},null,K)}}else typeof g=="function"&&($.preventDefault(),K=T?Ly(m,T):new FormData(m),Cf(o,{pending:!0,data:K,method:m.method,action:g},g,K))},currentTarget:m}]})}}for(var cp=0;cp<Hd.length;cp++){var dp=Hd[cp],JT=dp.toLowerCase(),XT=dp[0].toUpperCase()+dp.slice(1);jr(JT,"on"+XT)}jr(mg,"onAnimationEnd"),jr(gg,"onAnimationIteration"),jr(yg,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(fT,"onTransitionRun"),jr(pT,"onTransitionStart"),jr(hT,"onTransitionCancel"),jr(vg,"onTransitionEnd"),Gr("onMouseEnter",["mouseout","mouseover"]),Gr("onMouseLeave",["mouseout","mouseover"]),Gr("onPointerEnter",["pointerout","pointerover"]),Gr("onPointerLeave",["pointerout","pointerover"]),vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vr("onBeforeInput",["compositionend","keypress","textInput","paste"]),vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Go));function Uy(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],m=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var T=u.length-1;0<=T;T--){var $=u[T],K=$.instance,pe=$.currentTarget;if($=$.listener,K!==g&&m.isPropagationStopped())break e;g=$,m.currentTarget=pe;try{g(m)}catch(xe){xu(xe)}m.currentTarget=null,g=K}else for(T=0;T<u.length;T++){if($=u[T],K=$.instance,pe=$.currentTarget,$=$.listener,K!==g&&m.isPropagationStopped())break e;g=$,m.currentTarget=pe;try{g(m)}catch(xe){xu(xe)}m.currentTarget=null,g=K}}}}function lt(n,i){var o=i[uo];o===void 0&&(o=i[uo]=new Set);var u=n+"__bubble";o.has(u)||(qy(i,n,2,!1),o.add(u))}function fp(n,i,o){var u=0;i&&(u|=4),qy(o,n,u,i)}var sc="_reactListening"+Math.random().toString(36).slice(2);function pp(n){if(!n[sc]){n[sc]=!0,ra.forEach(function(o){o!=="selectionchange"&&(KT.has(o)||fp(o,!1,n),fp(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[sc]||(i[sc]=!0,fp("selectionchange",!1,i))}}function qy(n,i,o,u){switch(mv(i)){case 2:var m=TE;break;case 8:m=EE;break;default:m=Ap}o=m.bind(null,i,o,n),m=void 0,!Od||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),u?m!==void 0?n.addEventListener(i,o,{capture:!0,passive:m}):n.addEventListener(i,o,!0):m!==void 0?n.addEventListener(i,o,{passive:m}):n.addEventListener(i,o,!1)}function hp(n,i,o,u,m){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var $=u.stateNode.containerInfo;if($===m)break;if(T===4)for(T=u.return;T!==null;){var K=T.tag;if((K===3||K===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;$!==null;){if(T=Ca($),T===null)return;if(K=T.tag,K===5||K===6||K===26||K===27){u=g=T;continue e}$=$.parentNode}}u=u.return}Hm(function(){var pe=g,xe=Rd(o),ke=[];e:{var me=bg.get(n);if(me!==void 0){var ye=yu,De=n;switch(n){case"keypress":if(mu(o)===0)break e;case"keydown":case"keyup":ye=Vk;break;case"focusin":De="focus",ye=Dd;break;case"focusout":De="blur",ye=Dd;break;case"beforeblur":case"afterblur":ye=Dd;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=Ym;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=Ok;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=Zk;break;case mg:case gg:case yg:ye=$k;break;case vg:ye=Jk;break;case"scroll":case"scrollend":ye=Rk;break;case"wheel":ye=Kk;break;case"copy":case"cut":case"paste":ye=zk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=Xm;break;case"toggle":case"beforetoggle":ye=Wk}var Ze=(i&4)!==0,jt=!Ze&&(n==="scroll"||n==="scrollend"),ue=Ze?me!==null?me+"Capture":null:me;Ze=[];for(var re=pe,fe;re!==null;){var we=re;if(fe=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||fe===null||ue===null||(we=ho(re,ue),we!=null&&Ze.push(Zo(re,we,fe))),jt)break;re=re.return}0<Ze.length&&(me=new ye(me,De,null,o,xe),ke.push({event:me,listeners:Ze}))}}if((i&7)===0){e:{if(me=n==="mouseover"||n==="pointerover",ye=n==="mouseout"||n==="pointerout",me&&o!==ns&&(De=o.relatedTarget||o.fromElement)&&(Ca(De)||De[Aa]))break e;if((ye||me)&&(me=xe.window===xe?xe:(me=xe.ownerDocument)?me.defaultView||me.parentWindow:window,ye?(De=o.relatedTarget||o.toElement,ye=pe,De=De?Ca(De):null,De!==null&&(jt=l(De),Ze=De.tag,De!==jt||Ze!==5&&Ze!==27&&Ze!==6)&&(De=null)):(ye=null,De=pe),ye!==De)){if(Ze=Ym,we="onMouseLeave",ue="onMouseEnter",re="mouse",(n==="pointerout"||n==="pointerover")&&(Ze=Xm,we="onPointerLeave",ue="onPointerEnter",re="pointer"),jt=ye==null?me:ja(ye),fe=De==null?me:ja(De),me=new Ze(we,re+"leave",ye,o,xe),me.target=jt,me.relatedTarget=fe,we=null,Ca(xe)===pe&&(Ze=new Ze(ue,re+"enter",De,o,xe),Ze.target=fe,Ze.relatedTarget=jt,we=Ze),jt=we,ye&&De)t:{for(Ze=QT,ue=ye,re=De,fe=0,we=ue;we;we=Ze(we))fe++;we=0;for(var Ve=re;Ve;Ve=Ze(Ve))we++;for(;0<fe-we;)ue=Ze(ue),fe--;for(;0<we-fe;)re=Ze(re),we--;for(;fe--;){if(ue===re||re!==null&&ue===re.alternate){Ze=ue;break t}ue=Ze(ue),re=Ze(re)}Ze=null}else Ze=null;ye!==null&&Py(ke,me,ye,Ze,!1),De!==null&&jt!==null&&Py(ke,jt,De,Ze,!0)}}e:{if(me=pe?ja(pe):window,ye=me.nodeName&&me.nodeName.toLowerCase(),ye==="select"||ye==="input"&&me.type==="file")var mt=ag;else if(ng(me))if(ig)mt=uT;else{mt=oT;var qe=sT}else ye=me.nodeName,!ye||ye.toLowerCase()!=="input"||me.type!=="checkbox"&&me.type!=="radio"?pe&&fo(pe.elementType)&&(mt=ag):mt=lT;if(mt&&(mt=mt(n,pe))){rg(ke,mt,o,xe);break e}qe&&qe(n,me,pe),n==="focusout"&&pe&&me.type==="number"&&pe.memoizedProps.value!=null&&et(me,"number",me.value)}switch(qe=pe?ja(pe):window,n){case"focusin":(ng(qe)||qe.contentEditable==="true")&&(ss=qe,Bd=pe,wo=null);break;case"focusout":wo=Bd=ss=null;break;case"mousedown":Fd=!0;break;case"contextmenu":case"mouseup":case"dragend":Fd=!1,pg(ke,o,xe);break;case"selectionchange":if(dT)break;case"keydown":case"keyup":pg(ke,o,xe)}var at;if(Ld)e:{switch(n){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else is?eg(n,o)&&(ct="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(ct="onCompositionStart");ct&&(Km&&o.locale!=="ko"&&(is||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&is&&(at=Gm()):(Ma=xe,Md="value"in Ma?Ma.value:Ma.textContent,is=!0)),qe=oc(pe,ct),0<qe.length&&(ct=new Jm(ct,n,null,o,xe),ke.push({event:ct,listeners:qe}),at?ct.data=at:(at=tg(o),at!==null&&(ct.data=at)))),(at=tT?nT(n,o):rT(n,o))&&(ct=oc(pe,"onBeforeInput"),0<ct.length&&(qe=new Jm("onBeforeInput","beforeinput",null,o,xe),ke.push({event:qe,listeners:ct}),qe.data=at)),YT(ke,n,pe,o,xe)}Uy(ke,i)})}function Zo(n,i,o){return{instance:n,listener:i,currentTarget:o}}function oc(n,i){for(var o=i+"Capture",u=[];n!==null;){var m=n,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=ho(n,o),m!=null&&u.unshift(Zo(n,m,g)),m=ho(n,i),m!=null&&u.push(Zo(n,m,g))),n.tag===3)return u;n=n.return}return[]}function QT(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Py(n,i,o,u,m){for(var g=i._reactName,T=[];o!==null&&o!==u;){var $=o,K=$.alternate,pe=$.stateNode;if($=$.tag,K!==null&&K===u)break;$!==5&&$!==26&&$!==27||pe===null||(K=pe,m?(pe=ho(o,g),pe!=null&&T.unshift(Zo(o,pe,K))):m||(pe=ho(o,g),pe!=null&&T.push(Zo(o,pe,K)))),o=o.return}T.length!==0&&n.push({event:i,listeners:T})}var WT=/\r\n?/g,eE=/\u0000|\uFFFD/g;function By(n){return(typeof n=="string"?n:""+n).replace(WT,`
`).replace(eE,"")}function Fy(n,i){return i=By(i),By(n)===i}function Rt(n,i,o,u,m,g){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||At(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&At(n,""+u);break;case"className":z(n,"class",u);break;case"tabIndex":z(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":z(n,o,u);break;case"style":es(n,u,g);break;case"data":if(i!=="object"){z(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=ts(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(i!=="input"&&Rt(n,i,"name",m.name,m,null),Rt(n,i,"formEncType",m.formEncType,m,null),Rt(n,i,"formMethod",m.formMethod,m,null),Rt(n,i,"formTarget",m.formTarget,m,null)):(Rt(n,i,"encType",m.encType,m,null),Rt(n,i,"method",m.method,m,null),Rt(n,i,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=ts(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Rr);break;case"onScroll":u!=null&&lt("scroll",n);break;case"onScrollEnd":u!=null&&lt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(a(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=ts(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":lt("beforetoggle",n),lt("toggle",n),Wi(n,"popover",u);break;case"xlinkActuate":W(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":W(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":W(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":W(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":W(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":W(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":W(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":W(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":W(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Wi(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=po.get(o)||o,Wi(n,o,u))}}function mp(n,i,o,u,m,g){switch(o){case"style":es(n,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(a(60));n.innerHTML=o}}break;case"children":typeof u=="string"?At(n,u):(typeof u=="number"||typeof u=="bigint")&&At(n,""+u);break;case"onScroll":u!=null&&lt("scroll",n);break;case"onScrollEnd":u!=null&&lt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Rr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fu.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),i=o.slice(2,m?o.length-7:void 0),g=n[jn]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(i,g,m),typeof u=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,u,m);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Wi(n,o,u)}}}function Cn(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lt("error",n),lt("load",n);var u=!1,m=!1,g;for(g in o)if(o.hasOwnProperty(g)){var T=o[g];if(T!=null)switch(g){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Rt(n,i,g,T,o,null)}}m&&Rt(n,i,"srcSet",o.srcSet,o,null),u&&Rt(n,i,"src",o.src,o,null);return;case"input":lt("invalid",n);var $=g=T=m=null,K=null,pe=null;for(u in o)if(o.hasOwnProperty(u)){var xe=o[u];if(xe!=null)switch(u){case"name":m=xe;break;case"type":T=xe;break;case"checked":K=xe;break;case"defaultChecked":pe=xe;break;case"value":g=xe;break;case"defaultValue":$=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(a(137,i));break;default:Rt(n,i,u,xe,o,null)}}ze(n,g,$,K,pe,T,m,!1);return;case"select":lt("invalid",n),u=T=g=null;for(m in o)if(o.hasOwnProperty(m)&&($=o[m],$!=null))switch(m){case"value":g=$;break;case"defaultValue":T=$;break;case"multiple":u=$;default:Rt(n,i,m,$,o,null)}i=g,o=T,n.multiple=!!u,i!=null?st(n,!!u,i,!1):o!=null&&st(n,!!u,o,!0);return;case"textarea":lt("invalid",n),g=m=u=null;for(T in o)if(o.hasOwnProperty(T)&&($=o[T],$!=null))switch(T){case"value":u=$;break;case"defaultValue":m=$;break;case"children":g=$;break;case"dangerouslySetInnerHTML":if($!=null)throw Error(a(91));break;default:Rt(n,i,T,$,o,null)}Zt(n,u,m,g);return;case"option":for(K in o)if(o.hasOwnProperty(K)&&(u=o[K],u!=null))switch(K){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Rt(n,i,K,u,o,null)}return;case"dialog":lt("beforetoggle",n),lt("toggle",n),lt("cancel",n),lt("close",n);break;case"iframe":case"object":lt("load",n);break;case"video":case"audio":for(u=0;u<Go.length;u++)lt(Go[u],n);break;case"image":lt("error",n),lt("load",n);break;case"details":lt("toggle",n);break;case"embed":case"source":case"link":lt("error",n),lt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pe in o)if(o.hasOwnProperty(pe)&&(u=o[pe],u!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Rt(n,i,pe,u,o,null)}return;default:if(fo(i)){for(xe in o)o.hasOwnProperty(xe)&&(u=o[xe],u!==void 0&&mp(n,i,xe,u,o,void 0));return}}for($ in o)o.hasOwnProperty($)&&(u=o[$],u!=null&&Rt(n,i,$,u,o,null))}function tE(n,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,T=null,$=null,K=null,pe=null,xe=null;for(ye in o){var ke=o[ye];if(o.hasOwnProperty(ye)&&ke!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":K=ke;default:u.hasOwnProperty(ye)||Rt(n,i,ye,null,u,ke)}}for(var me in u){var ye=u[me];if(ke=o[me],u.hasOwnProperty(me)&&(ye!=null||ke!=null))switch(me){case"type":g=ye;break;case"name":m=ye;break;case"checked":pe=ye;break;case"defaultChecked":xe=ye;break;case"value":T=ye;break;case"defaultValue":$=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(a(137,i));break;default:ye!==ke&&Rt(n,i,me,ye,u,ke)}}je(n,T,$,K,pe,xe,g,m);return;case"select":ye=T=$=me=null;for(g in o)if(K=o[g],o.hasOwnProperty(g)&&K!=null)switch(g){case"value":break;case"multiple":ye=K;default:u.hasOwnProperty(g)||Rt(n,i,g,null,u,K)}for(m in u)if(g=u[m],K=o[m],u.hasOwnProperty(m)&&(g!=null||K!=null))switch(m){case"value":me=g;break;case"defaultValue":$=g;break;case"multiple":T=g;default:g!==K&&Rt(n,i,m,g,u,K)}i=$,o=T,u=ye,me!=null?st(n,!!o,me,!1):!!u!=!!o&&(i!=null?st(n,!!o,i,!0):st(n,!!o,o?[]:"",!1));return;case"textarea":ye=me=null;for($ in o)if(m=o[$],o.hasOwnProperty($)&&m!=null&&!u.hasOwnProperty($))switch($){case"value":break;case"children":break;default:Rt(n,i,$,null,u,m)}for(T in u)if(m=u[T],g=o[T],u.hasOwnProperty(T)&&(m!=null||g!=null))switch(T){case"value":me=m;break;case"defaultValue":ye=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(a(91));break;default:m!==g&&Rt(n,i,T,m,u,g)}ht(n,me,ye);return;case"option":for(var De in o)if(me=o[De],o.hasOwnProperty(De)&&me!=null&&!u.hasOwnProperty(De))switch(De){case"selected":n.selected=!1;break;default:Rt(n,i,De,null,u,me)}for(K in u)if(me=u[K],ye=o[K],u.hasOwnProperty(K)&&me!==ye&&(me!=null||ye!=null))switch(K){case"selected":n.selected=me&&typeof me!="function"&&typeof me!="symbol";break;default:Rt(n,i,K,me,u,ye)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ze in o)me=o[Ze],o.hasOwnProperty(Ze)&&me!=null&&!u.hasOwnProperty(Ze)&&Rt(n,i,Ze,null,u,me);for(pe in u)if(me=u[pe],ye=o[pe],u.hasOwnProperty(pe)&&me!==ye&&(me!=null||ye!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(a(137,i));break;default:Rt(n,i,pe,me,u,ye)}return;default:if(fo(i)){for(var jt in o)me=o[jt],o.hasOwnProperty(jt)&&me!==void 0&&!u.hasOwnProperty(jt)&&mp(n,i,jt,void 0,u,me);for(xe in u)me=u[xe],ye=o[xe],!u.hasOwnProperty(xe)||me===ye||me===void 0&&ye===void 0||mp(n,i,xe,me,u,ye);return}}for(var ue in o)me=o[ue],o.hasOwnProperty(ue)&&me!=null&&!u.hasOwnProperty(ue)&&Rt(n,i,ue,null,u,me);for(ke in u)me=u[ke],ye=o[ke],!u.hasOwnProperty(ke)||me===ye||me==null&&ye==null||Rt(n,i,ke,me,u,ye)}function Vy(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function nE(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],g=m.transferSize,T=m.initiatorType,$=m.duration;if(g&&$&&Vy(T)){for(T=0,$=m.responseEnd,u+=1;u<o.length;u++){var K=o[u],pe=K.startTime;if(pe>$)break;var xe=K.transferSize,ke=K.initiatorType;xe&&Vy(ke)&&(K=K.responseEnd,T+=xe*(K<$?1:($-pe)/(K-pe)))}if(--u,i+=8*(g+T)/(m.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var gp=null,yp=null;function lc(n){return n.nodeType===9?n:n.ownerDocument}function Hy(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gy(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function vp(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var bp=null;function rE(){var n=window.event;return n&&n.type==="popstate"?n===bp?!1:(bp=n,!0):(bp=null,!1)}var Zy=typeof setTimeout=="function"?setTimeout:void 0,aE=typeof clearTimeout=="function"?clearTimeout:void 0,Yy=typeof Promise=="function"?Promise:void 0,iE=typeof queueMicrotask=="function"?queueMicrotask:typeof Yy<"u"?function(n){return Yy.resolve(null).then(n).catch(sE)}:Zy;function sE(n){setTimeout(function(){throw n})}function Xa(n){return n==="head"}function Jy(n,i){var o=i,u=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(m),Ms(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Yo(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Yo(o);for(var g=o.firstChild;g;){var T=g.nextSibling,$=g.nodeName;g[pi]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=T}}else o==="body"&&Yo(n.ownerDocument.body);o=m}while(o);Ms(i)}function Xy(n,i){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function xp(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":xp(o),co(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function oE(n,i,o,u){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[pi])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=Tr(n.nextSibling),n===null)break}return null}function lE(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Tr(n.nextSibling),n===null))return null;return n}function Ky(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Tr(n.nextSibling),n===null))return null;return n}function _p(n){return n.data==="$?"||n.data==="$~"}function wp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function uE(n,i){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Tr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var Sp=null;function Qy(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(i===0)return Tr(n.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}n=n.nextSibling}return null}function Wy(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return n;i--}else o!=="/$"&&o!=="/&"||i++}n=n.previousSibling}return null}function ev(n,i,o){switch(i=lc(o),n){case"html":if(n=i.documentElement,!n)throw Error(a(452));return n;case"head":if(n=i.head,!n)throw Error(a(453));return n;case"body":if(n=i.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function Yo(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);co(n)}var Er=new Map,tv=new Set;function uc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ba=te.d;te.d={f:cE,r:dE,D:fE,C:pE,L:hE,m:mE,X:yE,S:gE,M:vE};function cE(){var n=ba.f(),i=ec();return n||i}function dE(n){var i=Ra(n);i!==null&&i.tag===5&&i.type==="form"?v0(i):ba.r(n)}var Rs=typeof document>"u"?null:document;function nv(n,i,o){var u=Rs;if(u&&typeof i=="string"&&i){var m=Ne(i);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),tv.has(m)||(tv.add(m),n={rel:n,crossOrigin:o,href:i},u.querySelector(m)===null&&(i=u.createElement("link"),Cn(i,"link",n),Kt(i),u.head.appendChild(i)))}}function fE(n){ba.D(n),nv("dns-prefetch",n,null)}function pE(n,i){ba.C(n,i),nv("preconnect",n,i)}function hE(n,i,o){ba.L(n,i,o);var u=Rs;if(u&&n&&i){var m='link[rel="preload"][as="'+Ne(i)+'"]';i==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Ne(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Ne(o.imageSizes)+'"]')):m+='[href="'+Ne(n)+'"]';var g=m;switch(i){case"style":g=js(n);break;case"script":g=Os(n)}Er.has(g)||(n=v({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Er.set(g,n),u.querySelector(m)!==null||i==="style"&&u.querySelector(Jo(g))||i==="script"&&u.querySelector(Xo(g))||(i=u.createElement("link"),Cn(i,"link",n),Kt(i),u.head.appendChild(i)))}}function mE(n,i){ba.m(n,i);var o=Rs;if(o&&n){var u=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+Ne(u)+'"][href="'+Ne(n)+'"]',g=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Os(n)}if(!Er.has(g)&&(n=v({rel:"modulepreload",href:n},i),Er.set(g,n),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Xo(g)))return}u=o.createElement("link"),Cn(u,"link",n),Kt(u),o.head.appendChild(u)}}}function gE(n,i,o){ba.S(n,i,o);var u=Rs;if(u&&n){var m=yr(u).hoistableStyles,g=js(n);i=i||"default";var T=m.get(g);if(!T){var $={loading:0,preload:null};if(T=u.querySelector(Jo(g)))$.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Er.get(g))&&kp(n,o);var K=T=u.createElement("link");Kt(K),Cn(K,"link",n),K._p=new Promise(function(pe,xe){K.onload=pe,K.onerror=xe}),K.addEventListener("load",function(){$.loading|=1}),K.addEventListener("error",function(){$.loading|=2}),$.loading|=4,cc(T,i,u)}T={type:"stylesheet",instance:T,count:1,state:$},m.set(g,T)}}}function yE(n,i){ba.X(n,i);var o=Rs;if(o&&n){var u=yr(o).hoistableScripts,m=Os(n),g=u.get(m);g||(g=o.querySelector(Xo(m)),g||(n=v({src:n,async:!0},i),(i=Er.get(m))&&Tp(n,i),g=o.createElement("script"),Kt(g),Cn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function vE(n,i){ba.M(n,i);var o=Rs;if(o&&n){var u=yr(o).hoistableScripts,m=Os(n),g=u.get(m);g||(g=o.querySelector(Xo(m)),g||(n=v({src:n,async:!0,type:"module"},i),(i=Er.get(m))&&Tp(n,i),g=o.createElement("script"),Kt(g),Cn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function rv(n,i,o,u){var m=(m=D.current)?uc(m):null;if(!m)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=js(o.href),o=yr(m).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=js(o.href);var g=yr(m).hoistableStyles,T=g.get(n);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,T),(g=m.querySelector(Jo(n)))&&!g._p&&(T.instance=g,T.state.loading=5),Er.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Er.set(n,o),g||bE(m,n,o,T.state))),i&&u===null)throw Error(a(528,""));return T}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Os(o),o=yr(m).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function js(n){return'href="'+Ne(n)+'"'}function Jo(n){return'link[rel="stylesheet"]['+n+"]"}function av(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function bE(n,i,o,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Cn(i,"link",o),Kt(i),n.head.appendChild(i))}function Os(n){return'[src="'+Ne(n)+'"]'}function Xo(n){return"script[async]"+n}function iv(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+Ne(o.href)+'"]');if(u)return i.instance=u,Kt(u),u;var m=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Kt(u),Cn(u,"style",m),cc(u,o.precedence,n),i.instance=u;case"stylesheet":m=js(o.href);var g=n.querySelector(Jo(m));if(g)return i.state.loading|=4,i.instance=g,Kt(g),g;u=av(o),(m=Er.get(m))&&kp(u,m),g=(n.ownerDocument||n).createElement("link"),Kt(g);var T=g;return T._p=new Promise(function($,K){T.onload=$,T.onerror=K}),Cn(g,"link",u),i.state.loading|=4,cc(g,o.precedence,n),i.instance=g;case"script":return g=Os(o.src),(m=n.querySelector(Xo(g)))?(i.instance=m,Kt(m),m):(u=o,(m=Er.get(g))&&(u=v({},o),Tp(u,m)),n=n.ownerDocument||n,m=n.createElement("script"),Kt(m),Cn(m,"link",u),n.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,cc(u,o.precedence,n));return i.instance}function cc(n,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,g=m,T=0;T<u.length;T++){var $=u[T];if($.dataset.precedence===i)g=$;else if(g!==m)break}g?g.parentNode.insertBefore(n,g.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function kp(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Tp(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var dc=null;function sv(n,i,o){if(dc===null){var u=new Map,m=dc=new Map;m.set(o,u)}else m=dc,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var g=o[m];if(!(g[pi]||g[hn]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(i)||"";T=n+T;var $=u.get(T);$?$.push(g):u.set(T,[g])}}return u}function ov(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function xE(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function lv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function _E(n,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=js(u.href),g=i.querySelector(Jo(m));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=fc.bind(n),i.then(n,n)),o.state.loading|=4,o.instance=g,Kt(g);return}g=i.ownerDocument||i,u=av(u),(m=Er.get(m))&&kp(u,m),g=g.createElement("link"),Kt(g);var T=g;T._p=new Promise(function($,K){T.onload=$,T.onerror=K}),Cn(g,"link",u),o.instance=g}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=fc.bind(n),i.addEventListener("load",o),i.addEventListener("error",o))}}var Ep=0;function wE(n,i){return n.stylesheets&&n.count===0&&hc(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&hc(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4+i);0<n.imgBytes&&Ep===0&&(Ep=62500*nE());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&hc(n,n.stylesheets),n.unsuspend)){var g=n.unsuspend;n.unsuspend=null,g()}},(n.imgBytes>Ep?50:800)+i);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function fc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hc(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var pc=null;function hc(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,pc=new Map,i.forEach(SE,n),pc=null,fc.call(n))}function SE(n,i){if(!(i.state.loading&4)){var o=pc.get(n);if(o)var u=o.get(null);else{o=new Map,pc.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var T=m[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),u=T)}u&&o.set(null,u)}m=i.instance,T=m.getAttribute("data-precedence"),g=o.get(T)||u,g===u&&o.set(null,m),o.set(T,m),this.count++,u=fc.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),g?g.parentNode.insertBefore(m,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),i.state.loading|=4}}var Ko={$$typeof:E,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function kE(n,i,o,u,m,g,T,$,K){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=oo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oo(0),this.hiddenUpdates=oo(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function uv(n,i,o,u,m,g,T,$,K,pe,xe,ke){return n=new kE(n,i,o,T,K,pe,xe,ke,$),i=1,g===!0&&(i|=24),g=ir(3,null,null,i),n.current=g,g.stateNode=n,i=af(),i.refCount++,n.pooledCache=i,i.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:i},uf(g),n}function cv(n){return n?(n=us,n):us}function dv(n,i,o,u,m,g){m=cv(m),u.context===null?u.context=m:u.pendingContext=m,u=Ua(i),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=qa(n,u,i),o!==null&&(Kn(o,n,i),Co(o,n,i))}function fv(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function Np(n,i){fv(n,i),(n=n.alternate)&&fv(n,i)}function pv(n){if(n.tag===13||n.tag===31){var i=yi(n,67108864);i!==null&&Kn(i,n,67108864),Np(n,67108864)}}function hv(n){if(n.tag===13||n.tag===31){var i=cr();i=Ki(i);var o=yi(n,i);o!==null&&Kn(o,n,i),Np(n,i)}}var mc=!0;function TE(n,i,o,u){var m=J.T;J.T=null;var g=te.p;try{te.p=2,Ap(n,i,o,u)}finally{te.p=g,J.T=m}}function EE(n,i,o,u){var m=J.T;J.T=null;var g=te.p;try{te.p=8,Ap(n,i,o,u)}finally{te.p=g,J.T=m}}function Ap(n,i,o,u){if(mc){var m=Cp(u);if(m===null)hp(n,i,u,gc,o),gv(n,u);else if(AE(m,n,i,o,u))u.stopPropagation();else if(gv(n,u),i&4&&-1<NE.indexOf(n)){for(;m!==null;){var g=Ra(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=Vr(g.pendingLanes);if(T!==0){var $=g;for($.pendingLanes|=2,$.entangledLanes|=2;T;){var K=1<<31-$n(T);$.entanglements[1]|=K,T&=~K}Xr(g),(xt&6)===0&&(Qu=rt()+500,Ho(0))}}break;case 31:case 13:$=yi(g,2),$!==null&&Kn($,g,2),ec(),Np(g,2)}if(g=Cp(u),g===null&&hp(n,i,u,gc,o),g===m)break;m=g}m!==null&&u.stopPropagation()}else hp(n,i,u,null,o)}}function Cp(n){return n=Rd(n),Rp(n)}var gc=null;function Rp(n){if(gc=null,n=Ca(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=c(i),n!==null)return n;n=null}else if(o===31){if(n=d(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return gc=n,null}function mv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_n()){case Mt:return 2;case Gt:return 8;case nn:case Ar:return 32;case Cr:return 268435456;default:return 32}default:return 32}}var jp=!1,Ka=null,Qa=null,Wa=null,Qo=new Map,Wo=new Map,ei=[],NE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gv(n,i){switch(n){case"focusin":case"focusout":Ka=null;break;case"dragenter":case"dragleave":Qa=null;break;case"mouseover":case"mouseout":Wa=null;break;case"pointerover":case"pointerout":Qo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wo.delete(i.pointerId)}}function el(n,i,o,u,m,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[m]},i!==null&&(i=Ra(i),i!==null&&pv(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),n)}function AE(n,i,o,u,m){switch(i){case"focusin":return Ka=el(Ka,n,i,o,u,m),!0;case"dragenter":return Qa=el(Qa,n,i,o,u,m),!0;case"mouseover":return Wa=el(Wa,n,i,o,u,m),!0;case"pointerover":var g=m.pointerId;return Qo.set(g,el(Qo.get(g)||null,n,i,o,u,m)),!0;case"gotpointercapture":return g=m.pointerId,Wo.set(g,el(Wo.get(g)||null,n,i,o,u,m)),!0}return!1}function yv(n){var i=Ca(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){n.blockedOn=i,cu(n.priority,function(){hv(o)});return}}else if(i===31){if(i=d(o),i!==null){n.blockedOn=i,cu(n.priority,function(){hv(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function yc(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=Cp(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);ns=u,o.target.dispatchEvent(u),ns=null}else return i=Ra(o),i!==null&&pv(i),n.blockedOn=o,!1;i.shift()}return!0}function vv(n,i,o){yc(n)&&o.delete(i)}function CE(){jp=!1,Ka!==null&&yc(Ka)&&(Ka=null),Qa!==null&&yc(Qa)&&(Qa=null),Wa!==null&&yc(Wa)&&(Wa=null),Qo.forEach(vv),Wo.forEach(vv)}function vc(n,i){n.blockedOn===i&&(n.blockedOn=null,jp||(jp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,CE)))}var bc=null;function bv(n){bc!==n&&(bc=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){bc===n&&(bc=null);for(var i=0;i<n.length;i+=3){var o=n[i],u=n[i+1],m=n[i+2];if(typeof u!="function"){if(Rp(u||o)===null)continue;break}var g=Ra(o);g!==null&&(n.splice(i,3),i-=3,Cf(g,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function Ms(n){function i(K){return vc(K,n)}Ka!==null&&vc(Ka,n),Qa!==null&&vc(Qa,n),Wa!==null&&vc(Wa,n),Qo.forEach(i),Wo.forEach(i);for(var o=0;o<ei.length;o++){var u=ei[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ei.length&&(o=ei[0],o.blockedOn===null);)yv(o),o.blockedOn===null&&ei.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],g=o[u+1],T=m[jn]||null;if(typeof g=="function")T||bv(o);else if(T){var $=null;if(g&&g.hasAttribute("formAction")){if(m=g,T=g[jn]||null)$=T.formAction;else if(Rp(m)!==null)continue}else $=T.action;typeof $=="function"?o[u+1]=$:(o.splice(u,3),u-=3),bv(o)}}}function xv(){function n(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(T){return m=T})},focusReset:"manual",scroll:"manual"})}function i(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),m!==null&&(m(),m=null)}}}function Op(n){this._internalRoot=n}xc.prototype.render=Op.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(a(409));var o=i.current,u=cr();dv(o,u,n,i,null,null)},xc.prototype.unmount=Op.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;dv(n.current,2,null,n,null,null),ec(),i[Aa]=null}};function xc(n){this._internalRoot=n}xc.prototype.unstable_scheduleHydration=function(n){if(n){var i=uu();n={blockedOn:null,target:n,priority:i};for(var o=0;o<ei.length&&i!==0&&i<ei[o].priority;o++);ei.splice(o,0,n),o===0&&yv(n)}};var _v=t.version;if(_v!=="19.2.0")throw Error(a(527,_v,"19.2.0"));te.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=p(i),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var RE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_c.isDisabled&&_c.supportsFiber)try{_t=_c.inject(RE),It=_c}catch{}}return nl.createRoot=function(n,i){if(!s(n))throw Error(a(299));var o=!1,u="",m=A0,g=C0,T=R0;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError)),i=uv(n,1,!1,null,null,o,u,null,m,g,T,xv),n[Aa]=i.current,pp(n),new Op(i)},nl.hydrateRoot=function(n,i,o){if(!s(n))throw Error(a(299));var u=!1,m="",g=A0,T=C0,$=R0,K=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&($=o.onRecoverableError),o.formState!==void 0&&(K=o.formState)),i=uv(n,1,!0,i,o??null,u,m,K,g,T,$,xv),i.context=cv(null),o=i.current,u=cr(),u=Ki(u),m=Ua(u),m.callback=null,qa(o,m,u),o=u,i.current.lanes=o,fi(i,o),Xr(i),n[Aa]=i.current,pp(n),new xc(i)},nl.version="19.2.0",nl}var jv;function UE(){if(jv)return $p.exports;jv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),$p.exports=LE(),$p.exports}var qE=UE(),Up={exports:{}};var Ov;function PE(){return Ov||(Ov=1,(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var l="",c=0;c<arguments.length;c++){var d=arguments[c];d&&(l=s(l,a(d)))}return l}function a(l){if(typeof l=="string"||typeof l=="number")return l;if(typeof l!="object")return"";if(Array.isArray(l))return r.apply(null,l);if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]"))return l.toString();var c="";for(var d in l)t.call(l,d)&&l[d]&&(c=s(c,d));return c}function s(l,c){return c?l?l+" "+c:l+c:l}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Up)),Up.exports}var BE=PE();const FE=Ql(BE);function VE(e,t,r){const[a,s,l]=[e,t,r].map(c=>(c=c/255,c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4)));return .2126*a+.7152*s+.0722*l}function HE(e){const t=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(t)return{r:parseInt(t[1]),g:parseInt(t[2]),b:parseInt(t[3])};const r=e.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null}const GE=.4;function Mv(e){const t=HE(e);return t?VE(t.r,t.g,t.b)>GE:!0}const Xe=({onClick:e,className:t,children:r,size:a="medium",type:s="primary",title:l})=>{const c=U.useRef(null),[d,f]=U.useState(!0),p=v=>{switch(v){case"secondary-text":return"bg-btn-secondary-light";case"secondary":return"bg-secondary-default";case"error-text":return"bg-btn-error-light";case"primary-text":return"bg-btn-primary-light";case"primary":return"bg-primary-default"}};U.useEffect(()=>{const x=setTimeout(()=>{if(!c.current)return;const _=getComputedStyle(c.current).backgroundColor;f(Mv(_))},50);return()=>clearTimeout(x)},[s]),U.useEffect(()=>{const v=()=>{c.current&&requestAnimationFrame(()=>{if(!c.current)return;const _=getComputedStyle(c.current).backgroundColor;f(Mv(_))})},x=new MutationObserver(()=>{requestAnimationFrame(()=>{requestAnimationFrame(v)})});return x.observe(document.documentElement,{attributes:!0,attributeFilter:["class","style"]}),()=>x.disconnect()},[]);const y=d?"text-gray-900":"text-white";return h.jsx("button",{ref:c,type:"button",onClick:e,title:l,className:FE(p(s),y,`${a==="small"?"px-4 py-2":a==="medium"?"px-6 py-3":"px-7 py-4"}`,"rounded-default hover:opacity-70 transition-opacity duration-200 text-base font-medium",t),children:r})},sd=U.forwardRef(({label:e,onChange:t,formats:r},a)=>{const s=U.useRef(null);U.useImperativeHandle(a,()=>({reset:()=>{s.current&&(s.current.value="")}}));const l=()=>{s.current&&s.current.click()};return h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2",children:[h.jsxs("span",{className:"text-text-primary text-xs sm:text-base whitespace-nowrap",children:[e,":"]}),h.jsx("button",{type:"button",onClick:l,className:"px-3 py-2 border border-strong rounded-lg text-text-primary bg-surface-0 hover:bg-surface-hover transition-colors text-sm sm:text-base whitespace-nowrap",children:"Choose File"}),h.jsx("input",{type:"file",accept:r||".json",onChange:t,ref:s,className:"hidden","aria-label":e})]})});sd.displayName="FileInput";const ZE="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3ctitle%3eic_fluent_copy_move_24_regular%3c/title%3e%3cdesc%3eCreated%20with%20Sketch.%3c/desc%3e%3cg%20id='-Product-Icons'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='ic_fluent_copy_move_24_regular'%20fill='%23212121'%20fill-rule='nonzero'%3e%3cpath%20d='M17.5,12%20C20.5375661,12%2023,14.4624339%2023,17.5%20C23,20.5375661%2020.5375661,23%2017.5,23%20C14.4624339,23%2012,20.5375661%2012,17.5%20C12,14.4624339%2014.4624339,12%2017.5,12%20Z%20M5.50280381,4.62704038%20L5.5,6.75%20L5.5,17.2542087%20C5.5,19.0491342%206.95507456,20.5042087%208.75,20.5042087%20L11.7348483,20.5050555%20C12.0226688,21.0561051%2012.3871778,21.5607511%2012.8142135,22.0048315%20L8.75,22.0042087%20C6.12664744,22.0042087%204,19.8775613%204,17.2542087%20L4,6.75%20C4,5.76928848%204.62744523,4.93512464%205.50280381,4.62704038%20Z%20M18.2843055,14.5885912%20C18.1137959,14.4704696%2017.8862041,14.4704696%2017.7156945,14.5885912%20L17.6464466,14.6464466%20L17.5885912,14.7156945%20C17.4704696,14.8862041%2017.4704696,15.1137959%2017.5885912,15.2843055%20L17.6464466,15.3535534%20L19.2917119,16.999%20L14.4937119,17%20L14.4038362,17.0080557%20C14.1997432,17.0450996%2014.0388115,17.2060313%2014.0017675,17.4101244%20L13.9937119,17.5%20L14.0017675,17.5898756%20C14.0388115,17.7939687%2014.1997432,17.9549004%2014.4038362,17.9919443%20L14.4937119,18%20L19.2937119,17.999%20L17.6464466,19.6464466%20L17.5885912,19.7156945%20C17.4535951,19.9105626%2017.4728803,20.179987%2017.6464466,20.3535534%20C17.820013,20.5271197%2018.0894374,20.5464049%2018.2843055,20.4114088%20L18.3535534,20.3535534%20L20.8831913,17.8212104%20L20.9201733,17.7711351%20L20.9622078,17.6910366%20L20.9882445,17.6082776%20L20.9980501,17.5443521%20L20.9980501,17.4557501%20L20.9882655,17.3920225%20L20.9767316,17.3488008%20L20.9444953,17.2708095%20L20.9204888,17.2292723%20L20.8832098,17.1788087%20L18.3535534,14.6464466%20L18.2843055,14.5885912%20Z%20M17.75,2%20C18.9926407,2%2020,3.00735931%2020,4.25%20L20.000576,11.4984036%20C19.5265076,11.3006539%2019.0240064,11.1574367%2018.5009089,11.0765886%20L18.5,4.25%20C18.5,3.83578644%2018.1642136,3.5%2017.75,3.5%20L8.75,3.5%20C8.33578644,3.5%208,3.83578644%208,4.25%20L8,17.25%20C8,17.6642136%208.33578644,18%208.75,18%20L11.0189701,18.000332%20C11.0585148,18.5198198%2011.159124,19.0222369%2011.3136354,19.5004209%20L8.75,19.5%20C7.50735931,19.5%206.5,18.4926407%206.5,17.25%20L6.5,4.25%20C6.5,3.00735931%207.50735931,2%208.75,2%20L17.75,2%20Z'%20id='-Color'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",YE="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='0%200%2032%2032'%20id='icon'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:none;}%3c/style%3e%3c/defs%3e%3ctitle%3epaste%3c/title%3e%3cpath%20d='M26,20H17.83l2.58-2.59L19,16l-5,5,5,5,1.41-1.41L17.83,22H26v8h2V22A2,2,0,0,0,26,20Z'/%3e%3cpath%20d='M23.71,9.29l-7-7A1,1,0,0,0,16,2H6A2,2,0,0,0,4,4V28a2,2,0,0,0,2,2h8V28H6V4h8v6a2,2,0,0,0,2,2h6v2h2V10A1,1,0,0,0,23.71,9.29ZM16,4.41,21.59,10H16Z'/%3e%3crect%20id='_Transparent_Rectangle_'%20data-name='&lt;Transparent%20Rectangle&gt;'%20class='cls-1'%20width='32'%20height='32'/%3e%3c/svg%3e";function i1({onClick:e,title:t="Copy to Clipboard",showLabel:r=!1,label:a="Copy"}){return h.jsxs("button",{type:"button",onClick:e,className:"flex items-center justify-center gap-2 p-2 hover:bg-surface-hover rounded-default transition-colors border border-strong",title:t,children:[h.jsx("img",{src:ZE,alt:"",className:"dark:invert w-5 h-5 sm:w-6 sm:h-6"}),r&&h.jsx("span",{className:"sm:hidden text-sm",children:a})]})}function s1({onClick:e,title:t="Paste from Clipboard",showLabel:r=!1,label:a="Paste"}){return h.jsxs("button",{type:"button",onClick:e,className:"flex items-center justify-center gap-2 p-2 hover:bg-surface-hover rounded-default transition-colors border border-strong",title:t,children:[h.jsx("img",{src:YE,alt:"",className:"dark:invert w-5 h-5 sm:w-6 sm:h-6"}),r&&h.jsx("span",{className:"sm:hidden text-sm",children:a})]})}function JE(e,t=!1){const r=e.length;let a=0,s="",l=0,c=16,d=0,f=0,p=0,y=0,v=0;function x(E,q){let P=0,H=0;for(;P<E;){let I=e.charCodeAt(a);if(I>=48&&I<=57)H=H*16+I-48;else if(I>=65&&I<=70)H=H*16+I-65+10;else if(I>=97&&I<=102)H=H*16+I-97+10;else break;a++,P++}return P<E&&(H=-1),H}function b(E){a=E,s="",l=0,c=16,v=0}function _(){let E=a;if(e.charCodeAt(a)===48)a++;else for(a++;a<e.length&&Is(e.charCodeAt(a));)a++;if(a<e.length&&e.charCodeAt(a)===46)if(a++,a<e.length&&Is(e.charCodeAt(a)))for(a++;a<e.length&&Is(e.charCodeAt(a));)a++;else return v=3,e.substring(E,a);let q=a;if(a<e.length&&(e.charCodeAt(a)===69||e.charCodeAt(a)===101))if(a++,(a<e.length&&e.charCodeAt(a)===43||e.charCodeAt(a)===45)&&a++,a<e.length&&Is(e.charCodeAt(a))){for(a++;a<e.length&&Is(e.charCodeAt(a));)a++;q=a}else v=3;return e.substring(E,q)}function S(){let E="",q=a;for(;;){if(a>=r){E+=e.substring(q,a),v=2;break}const P=e.charCodeAt(a);if(P===34){E+=e.substring(q,a),a++;break}if(P===92){if(E+=e.substring(q,a),a++,a>=r){v=2;break}switch(e.charCodeAt(a++)){case 34:E+='"';break;case 92:E+="\\";break;case 47:E+="/";break;case 98:E+="\b";break;case 102:E+="\f";break;case 110:E+=`
`;break;case 114:E+="\r";break;case 116:E+="	";break;case 117:const I=x(4);I>=0?E+=String.fromCharCode(I):v=4;break;default:v=5}q=a;continue}if(P>=0&&P<=31)if(rl(P)){E+=e.substring(q,a),v=2;break}else v=6;a++}return E}function k(){if(s="",v=0,l=a,f=d,y=p,a>=r)return l=r,c=17;let E=e.charCodeAt(a);if(qp(E)){do a++,s+=String.fromCharCode(E),E=e.charCodeAt(a);while(qp(E));return c=15}if(rl(E))return a++,s+=String.fromCharCode(E),E===13&&e.charCodeAt(a)===10&&(a++,s+=`
`),d++,p=a,c=14;switch(E){case 123:return a++,c=1;case 125:return a++,c=2;case 91:return a++,c=3;case 93:return a++,c=4;case 58:return a++,c=6;case 44:return a++,c=5;case 34:return a++,s=S(),c=10;case 47:const q=a-1;if(e.charCodeAt(a+1)===47){for(a+=2;a<r&&!rl(e.charCodeAt(a));)a++;return s=e.substring(q,a),c=12}if(e.charCodeAt(a+1)===42){a+=2;const P=r-1;let H=!1;for(;a<P;){const I=e.charCodeAt(a);if(I===42&&e.charCodeAt(a+1)===47){a+=2,H=!0;break}a++,rl(I)&&(I===13&&e.charCodeAt(a)===10&&a++,d++,p=a)}return H||(a++,v=1),s=e.substring(q,a),c=13}return s+=String.fromCharCode(E),a++,c=16;case 45:if(s+=String.fromCharCode(E),a++,a===r||!Is(e.charCodeAt(a)))return c=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return s+=_(),c=11;default:for(;a<r&&j(E);)a++,E=e.charCodeAt(a);if(l!==a){switch(s=e.substring(l,a),s){case"true":return c=8;case"false":return c=9;case"null":return c=7}return c=16}return s+=String.fromCharCode(E),a++,c=16}}function j(E){if(qp(E)||rl(E))return!1;switch(E){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function R(){let E;do E=k();while(E>=12&&E<=15);return E}return{setPosition:b,getPosition:()=>a,scan:t?R:k,getToken:()=>c,getTokenValue:()=>s,getTokenOffset:()=>l,getTokenLength:()=>a-l,getTokenStartLine:()=>f,getTokenStartCharacter:()=>l-y,getTokenError:()=>v}}function qp(e){return e===32||e===9}function rl(e){return e===10||e===13}function Is(e){return e>=48&&e<=57}var Iv;(function(e){e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.space=32]="space",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.asterisk=42]="asterisk",e[e.backslash=92]="backslash",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.plus=43]="plus",e[e.slash=47]="slash",e[e.formFeed=12]="formFeed",e[e.tab=9]="tab"})(Iv||(Iv={}));new Array(20).fill(0).map((e,t)=>" ".repeat(t));const $s=200;new Array($s).fill(0).map((e,t)=>`
`+" ".repeat(t)),new Array($s).fill(0).map((e,t)=>"\r"+" ".repeat(t)),new Array($s).fill(0).map((e,t)=>`\r
`+" ".repeat(t)),new Array($s).fill(0).map((e,t)=>`
`+"	".repeat(t)),new Array($s).fill(0).map((e,t)=>"\r"+"	".repeat(t)),new Array($s).fill(0).map((e,t)=>`\r
`+"	".repeat(t));var qc;(function(e){e.DEFAULT={allowTrailingComma:!1}})(qc||(qc={}));function XE(e,t=[],r=qc.DEFAULT){let a=null,s=[];const l=[];function c(f){Array.isArray(s)?s.push(f):a!==null&&(s[a]=f)}return KE(e,{onObjectBegin:()=>{const f={};c(f),l.push(s),s=f,a=null},onObjectProperty:f=>{a=f},onObjectEnd:()=>{s=l.pop()},onArrayBegin:()=>{const f=[];c(f),l.push(s),s=f,a=null},onArrayEnd:()=>{s=l.pop()},onLiteralValue:c,onError:(f,p,y)=>{t.push({error:f,offset:p,length:y})}},r),s[0]}function KE(e,t,r=qc.DEFAULT){const a=JE(e,!1),s=[];let l=0;function c(ee){return ee?()=>l===0&&ee(a.getTokenOffset(),a.getTokenLength(),a.getTokenStartLine(),a.getTokenStartCharacter()):()=>!0}function d(ee){return ee?de=>l===0&&ee(de,a.getTokenOffset(),a.getTokenLength(),a.getTokenStartLine(),a.getTokenStartCharacter()):()=>!0}function f(ee){return ee?de=>l===0&&ee(de,a.getTokenOffset(),a.getTokenLength(),a.getTokenStartLine(),a.getTokenStartCharacter(),()=>s.slice()):()=>!0}function p(ee){return ee?()=>{l>0?l++:ee(a.getTokenOffset(),a.getTokenLength(),a.getTokenStartLine(),a.getTokenStartCharacter(),()=>s.slice())===!1&&(l=1)}:()=>!0}function y(ee){return ee?()=>{l>0&&l--,l===0&&ee(a.getTokenOffset(),a.getTokenLength(),a.getTokenStartLine(),a.getTokenStartCharacter())}:()=>!0}const v=p(t.onObjectBegin),x=f(t.onObjectProperty),b=y(t.onObjectEnd),_=p(t.onArrayBegin),S=y(t.onArrayEnd),k=f(t.onLiteralValue),j=d(t.onSeparator),R=c(t.onComment),E=d(t.onError),q=r&&r.disallowComments,P=r&&r.allowTrailingComma;function H(){for(;;){const ee=a.scan();switch(a.getTokenError()){case 4:I(14);break;case 5:I(15);break;case 3:I(13);break;case 1:q||I(11);break;case 2:I(12);break;case 6:I(16);break}switch(ee){case 12:case 13:q?I(10):R();break;case 16:I(1);break;case 15:case 14:break;default:return ee}}}function I(ee,de=[],J=[]){if(E(ee),de.length+J.length>0){let te=a.getToken();for(;te!==17;){if(de.indexOf(te)!==-1){H();break}else if(J.indexOf(te)!==-1)break;te=H()}}}function A(ee){const de=a.getTokenValue();return ee?k(de):(x(de),s.push(de)),H(),!0}function O(){switch(a.getToken()){case 11:const ee=a.getTokenValue();let de=Number(ee);isNaN(de)&&(I(2),de=0),k(de);break;case 7:k(null);break;case 8:k(!0);break;case 9:k(!1);break;default:return!1}return H(),!0}function M(){return a.getToken()!==10?(I(3,[],[2,5]),!1):(A(!1),a.getToken()===6?(j(":"),H(),ae()||I(4,[],[2,5])):I(5,[],[2,5]),s.pop(),!0)}function F(){v(),H();let ee=!1;for(;a.getToken()!==2&&a.getToken()!==17;){if(a.getToken()===5){if(ee||I(4,[],[]),j(","),H(),a.getToken()===2&&P)break}else ee&&I(6,[],[]);M()||I(4,[],[2,5]),ee=!0}return b(),a.getToken()!==2?I(7,[2],[]):H(),!0}function Y(){_(),H();let ee=!0,de=!1;for(;a.getToken()!==4&&a.getToken()!==17;){if(a.getToken()===5){if(de||I(4,[],[]),j(","),H(),a.getToken()===4&&P)break}else de&&I(6,[],[]);ee?(s.push(0),ee=!1):s[s.length-1]++,ae()||I(4,[],[4,5]),de=!0}return S(),ee||s.pop(),a.getToken()!==4?I(8,[4],[]):H(),!0}function ae(){switch(a.getToken()){case 3:return Y();case 1:return F();case 10:return A(!0);default:return O()}}return H(),a.getToken()===17?r.allowEmptyContent?!0:(I(4,[],[]),!1):ae()?(a.getToken()!==17&&I(9,[],[]),!0):(I(4,[],[]),!1)}var $v;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})($v||($v={}));var Dv;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(Dv||(Dv={}));const QE=XE;var zv;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(zv||(zv={}));var Dc={exports:{}};var WE=Dc.exports,Lv;function e5(){return Lv||(Lv=1,(function(e,t){((r,a)=>{e.exports=a()})(WE,function r(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},s,l=!a.document&&!!a.postMessage,c=a.IS_PAPA_WORKER||!1,d={},f=0,p={};function y(A){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(O){var M=P(O);M.chunkSize=parseInt(M.chunkSize),O.step||O.chunk||(M.chunkSize=null),this._handle=new S(M),(this._handle.streamer=this)._config=M}).call(this,A),this.parseChunk=function(O,M){var F=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<F){let ae=this._config.newline;ae||(Y=this._config.quoteChar||'"',ae=this._handle.guessLineEndings(O,Y)),O=[...O.split(ae).slice(F)].join(ae)}this.isFirstChunk&&I(this._config.beforeFirstChunk)&&(Y=this._config.beforeFirstChunk(O))!==void 0&&(O=Y),this.isFirstChunk=!1,this._halted=!1;var F=this._partialLine+O,Y=(this._partialLine="",this._handle.parse(F,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(O=Y.meta.cursor,F=(this._finished||(this._partialLine=F.substring(O-this._baseIndex),this._baseIndex=O),Y&&Y.data&&(this._rowCount+=Y.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),c)a.postMessage({results:Y,workerId:p.WORKER_ID,finished:F});else if(I(this._config.chunk)&&!M){if(this._config.chunk(Y,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=Y=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(Y.data),this._completeResults.errors=this._completeResults.errors.concat(Y.errors),this._completeResults.meta=Y.meta),this._completed||!F||!I(this._config.complete)||Y&&Y.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),F||Y&&Y.meta.paused||this._nextChunk(),Y}this._halted=!0},this._sendError=function(O){I(this._config.error)?this._config.error(O):c&&this._config.error&&a.postMessage({workerId:p.WORKER_ID,error:O,finished:!1})}}function v(A){var O;(A=A||{}).chunkSize||(A.chunkSize=p.RemoteChunkSize),y.call(this,A),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(M){this._input=M,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(O=new XMLHttpRequest,this._config.withCredentials&&(O.withCredentials=this._config.withCredentials),l||(O.onload=H(this._chunkLoaded,this),O.onerror=H(this._chunkError,this)),O.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var M,F=this._config.downloadRequestHeaders;for(M in F)O.setRequestHeader(M,F[M])}var Y;this._config.chunkSize&&(Y=this._start+this._config.chunkSize-1,O.setRequestHeader("Range","bytes="+this._start+"-"+Y));try{O.send(this._config.downloadRequestBody)}catch(ae){this._chunkError(ae.message)}l&&O.status===0&&this._chunkError()}},this._chunkLoaded=function(){O.readyState===4&&(O.status<200||400<=O.status?this._chunkError():(this._start+=this._config.chunkSize||O.responseText.length,this._finished=!this._config.chunkSize||this._start>=(M=>(M=M.getResponseHeader("Content-Range"))!==null?parseInt(M.substring(M.lastIndexOf("/")+1)):-1)(O),this.parseChunk(O.responseText)))},this._chunkError=function(M){M=O.statusText||M,this._sendError(new Error(M))}}function x(A){(A=A||{}).chunkSize||(A.chunkSize=p.LocalChunkSize),y.call(this,A);var O,M,F=typeof FileReader<"u";this.stream=function(Y){this._input=Y,M=Y.slice||Y.webkitSlice||Y.mozSlice,F?((O=new FileReader).onload=H(this._chunkLoaded,this),O.onerror=H(this._chunkError,this)):O=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var Y=this._input,ae=(this._config.chunkSize&&(ae=Math.min(this._start+this._config.chunkSize,this._input.size),Y=M.call(Y,this._start,ae)),O.readAsText(Y,this._config.encoding));F||this._chunkLoaded({target:{result:ae}})},this._chunkLoaded=function(Y){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(Y.target.result)},this._chunkError=function(){this._sendError(O.error)}}function b(A){var O;y.call(this,A=A||{}),this.stream=function(M){return O=M,this._nextChunk()},this._nextChunk=function(){var M,F;if(!this._finished)return M=this._config.chunkSize,O=M?(F=O.substring(0,M),O.substring(M)):(F=O,""),this._finished=!O,this.parseChunk(F)}}function _(A){y.call(this,A=A||{});var O=[],M=!0,F=!1;this.pause=function(){y.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){y.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(Y){this._input=Y,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){F&&O.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),O.length?this.parseChunk(O.shift()):M=!0},this._streamData=H(function(Y){try{O.push(typeof Y=="string"?Y:Y.toString(this._config.encoding)),M&&(M=!1,this._checkIsFinished(),this.parseChunk(O.shift()))}catch(ae){this._streamError(ae)}},this),this._streamError=H(function(Y){this._streamCleanUp(),this._sendError(Y)},this),this._streamEnd=H(function(){this._streamCleanUp(),F=!0,this._streamData("")},this),this._streamCleanUp=H(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function S(A){var O,M,F,Y,ae=Math.pow(2,53),ee=-ae,de=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,J=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,te=this,he=0,ve=0,se=!1,N=!1,L=[],V={data:[],errors:[],meta:{}};function G(le){return A.skipEmptyLines==="greedy"?le.join("").trim()==="":le.length===1&&le[0].length===0}function X(){if(V&&F&&(ne("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+p.DefaultDelimiter+"'"),F=!1),A.skipEmptyLines&&(V.data=V.data.filter(function(Te){return!G(Te)})),D()){let Te=function($e,Oe){I(A.transformHeader)&&($e=A.transformHeader($e,Oe)),L.push($e)};if(V)if(Array.isArray(V.data[0])){for(var le=0;D()&&le<V.data.length;le++)V.data[le].forEach(Te);V.data.splice(0,1)}else V.data.forEach(Te)}function Se(Te,$e){for(var Oe=A.header?{}:[],Me=0;Me<Te.length;Me++){var Re=Me,Ue=Te[Me],Ue=((wt,Pe)=>(nt=>(A.dynamicTypingFunction&&A.dynamicTyping[nt]===void 0&&(A.dynamicTyping[nt]=A.dynamicTypingFunction(nt)),(A.dynamicTyping[nt]||A.dynamicTyping)===!0))(wt)?Pe==="true"||Pe==="TRUE"||Pe!=="false"&&Pe!=="FALSE"&&((nt=>{if(de.test(nt)&&(nt=parseFloat(nt),ee<nt&&nt<ae))return 1})(Pe)?parseFloat(Pe):J.test(Pe)?new Date(Pe):Pe===""?null:Pe):Pe)(Re=A.header?Me>=L.length?"__parsed_extra":L[Me]:Re,Ue=A.transform?A.transform(Ue,Re):Ue);Re==="__parsed_extra"?(Oe[Re]=Oe[Re]||[],Oe[Re].push(Ue)):Oe[Re]=Ue}return A.header&&(Me>L.length?ne("FieldMismatch","TooManyFields","Too many fields: expected "+L.length+" fields but parsed "+Me,ve+$e):Me<L.length&&ne("FieldMismatch","TooFewFields","Too few fields: expected "+L.length+" fields but parsed "+Me,ve+$e)),Oe}var Ae;V&&(A.header||A.dynamicTyping||A.transform)&&(Ae=1,!V.data.length||Array.isArray(V.data[0])?(V.data=V.data.map(Se),Ae=V.data.length):V.data=Se(V.data,0),A.header&&V.meta&&(V.meta.fields=L),ve+=Ae)}function D(){return A.header&&L.length===0}function ne(le,Se,Ae,Te){le={type:le,code:Se,message:Ae},Te!==void 0&&(le.row=Te),V.errors.push(le)}I(A.step)&&(Y=A.step,A.step=function(le){V=le,D()?X():(X(),V.data.length!==0&&(he+=le.data.length,A.preview&&he>A.preview?M.abort():(V.data=V.data[0],Y(V,te))))}),this.parse=function(le,Se,Ae){var Te=A.quoteChar||'"',Te=(A.newline||(A.newline=this.guessLineEndings(le,Te)),F=!1,A.delimiter?I(A.delimiter)&&(A.delimiter=A.delimiter(le),V.meta.delimiter=A.delimiter):((Te=(($e,Oe,Me,Re,Ue)=>{var wt,Pe,nt,tn;Ue=Ue||[",","	","|",";",p.RECORD_SEP,p.UNIT_SEP];for(var Tn=0;Tn<Ue.length;Tn++){for(var xn,pt=Ue[Tn],rt=0,_n=0,Mt=0,Gt=(nt=void 0,new j({comments:Re,delimiter:pt,newline:Oe,preview:10}).parse($e)),nn=0;nn<Gt.data.length;nn++)Me&&G(Gt.data[nn])?Mt++:(xn=Gt.data[nn].length,_n+=xn,nt===void 0?nt=xn:0<xn&&(rt+=Math.abs(xn-nt),nt=xn));0<Gt.data.length&&(_n/=Gt.data.length-Mt),(Pe===void 0||rt<=Pe)&&(tn===void 0||tn<_n)&&1.99<_n&&(Pe=rt,wt=pt,tn=_n)}return{successful:!!(A.delimiter=wt),bestDelimiter:wt}})(le,A.newline,A.skipEmptyLines,A.comments,A.delimitersToGuess)).successful?A.delimiter=Te.bestDelimiter:(F=!0,A.delimiter=p.DefaultDelimiter),V.meta.delimiter=A.delimiter),P(A));return A.preview&&A.header&&Te.preview++,O=le,M=new j(Te),V=M.parse(O,Se,Ae),X(),se?{meta:{paused:!0}}:V||{meta:{paused:!1}}},this.paused=function(){return se},this.pause=function(){se=!0,M.abort(),O=I(A.chunk)?"":O.substring(M.getCharIndex())},this.resume=function(){te.streamer._halted?(se=!1,te.streamer.parseChunk(O,!0)):setTimeout(te.resume,3)},this.aborted=function(){return N},this.abort=function(){N=!0,M.abort(),V.meta.aborted=!0,I(A.complete)&&A.complete(V),O=""},this.guessLineEndings=function($e,Te){$e=$e.substring(0,1048576);var Te=new RegExp(k(Te)+"([^]*?)"+k(Te),"gm"),Ae=($e=$e.replace(Te,"")).split("\r"),Te=$e.split(`
`),$e=1<Te.length&&Te[0].length<Ae[0].length;if(Ae.length===1||$e)return`
`;for(var Oe=0,Me=0;Me<Ae.length;Me++)Ae[Me][0]===`
`&&Oe++;return Oe>=Ae.length/2?`\r
`:"\r"}}function k(A){return A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function j(A){var O=(A=A||{}).delimiter,M=A.newline,F=A.comments,Y=A.step,ae=A.preview,ee=A.fastMode,de=null,J=!1,te=A.quoteChar==null?'"':A.quoteChar,he=te;if(A.escapeChar!==void 0&&(he=A.escapeChar),(typeof O!="string"||-1<p.BAD_DELIMITERS.indexOf(O))&&(O=","),F===O)throw new Error("Comment character same as delimiter");F===!0?F="#":(typeof F!="string"||-1<p.BAD_DELIMITERS.indexOf(F))&&(F=!1),M!==`
`&&M!=="\r"&&M!==`\r
`&&(M=`
`);var ve=0,se=!1;this.parse=function(N,L,V){if(typeof N!="string")throw new Error("Input must be a string");var G=N.length,X=O.length,D=M.length,ne=F.length,le=I(Y),Se=[],Ae=[],Te=[],$e=ve=0;if(!N)return rt();if(ee||ee!==!1&&N.indexOf(te)===-1){for(var Oe=N.split(M),Me=0;Me<Oe.length;Me++){if(Te=Oe[Me],ve+=Te.length,Me!==Oe.length-1)ve+=M.length;else if(V)return rt();if(!F||Te.substring(0,ne)!==F){if(le){if(Se=[],tn(Te.split(O)),_n(),se)return rt()}else tn(Te.split(O));if(ae&&ae<=Me)return Se=Se.slice(0,ae),rt(!0)}}return rt()}for(var Re=N.indexOf(O,ve),Ue=N.indexOf(M,ve),wt=new RegExp(k(he)+k(te),"g"),Pe=N.indexOf(te,ve);;)if(N[ve]===te)for(Pe=ve,ve++;;){if((Pe=N.indexOf(te,Pe+1))===-1)return V||Ae.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Se.length,index:ve}),xn();if(Pe===G-1)return xn(N.substring(ve,Pe).replace(wt,te));if(te===he&&N[Pe+1]===he)Pe++;else if(te===he||Pe===0||N[Pe-1]!==he){Re!==-1&&Re<Pe+1&&(Re=N.indexOf(O,Pe+1));var nt=Tn((Ue=Ue!==-1&&Ue<Pe+1?N.indexOf(M,Pe+1):Ue)===-1?Re:Math.min(Re,Ue));if(N.substr(Pe+1+nt,X)===O){Te.push(N.substring(ve,Pe).replace(wt,te)),N[ve=Pe+1+nt+X]!==te&&(Pe=N.indexOf(te,ve)),Re=N.indexOf(O,ve),Ue=N.indexOf(M,ve);break}if(nt=Tn(Ue),N.substring(Pe+1+nt,Pe+1+nt+D)===M){if(Te.push(N.substring(ve,Pe).replace(wt,te)),pt(Pe+1+nt+D),Re=N.indexOf(O,ve),Pe=N.indexOf(te,ve),le&&(_n(),se))return rt();if(ae&&Se.length>=ae)return rt(!0);break}Ae.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Se.length,index:ve}),Pe++}}else if(F&&Te.length===0&&N.substring(ve,ve+ne)===F){if(Ue===-1)return rt();ve=Ue+D,Ue=N.indexOf(M,ve),Re=N.indexOf(O,ve)}else if(Re!==-1&&(Re<Ue||Ue===-1))Te.push(N.substring(ve,Re)),ve=Re+X,Re=N.indexOf(O,ve);else{if(Ue===-1)break;if(Te.push(N.substring(ve,Ue)),pt(Ue+D),le&&(_n(),se))return rt();if(ae&&Se.length>=ae)return rt(!0)}return xn();function tn(Mt){Se.push(Mt),$e=ve}function Tn(Mt){var Gt=0;return Gt=Mt!==-1&&(Mt=N.substring(Pe+1,Mt))&&Mt.trim()===""?Mt.length:Gt}function xn(Mt){return V||(Mt===void 0&&(Mt=N.substring(ve)),Te.push(Mt),ve=G,tn(Te),le&&_n()),rt()}function pt(Mt){ve=Mt,tn(Te),Te=[],Ue=N.indexOf(M,ve)}function rt(Mt){if(A.header&&!L&&Se.length&&!J){var Gt=Se[0],nn=Object.create(null),Ar=new Set(Gt);let Cr=!1;for(let Vn=0;Vn<Gt.length;Vn++){let wn=Gt[Vn];if(nn[wn=I(A.transformHeader)?A.transformHeader(wn,Vn):wn]){let _t,It=nn[wn];for(;_t=wn+"_"+It,It++,Ar.has(_t););Ar.add(_t),Gt[Vn]=_t,nn[wn]++,Cr=!0,(de=de===null?{}:de)[_t]=wn}else nn[wn]=1,Gt[Vn]=wn;Ar.add(wn)}Cr&&console.warn("Duplicate headers found and renamed."),J=!0}return{data:Se,errors:Ae,meta:{delimiter:O,linebreak:M,aborted:se,truncated:!!Mt,cursor:$e+(L||0),renamedHeaders:de}}}function _n(){Y(rt()),Se=[],Ae=[]}},this.abort=function(){se=!0},this.getCharIndex=function(){return ve}}function R(A){var O=A.data,M=d[O.workerId],F=!1;if(O.error)M.userError(O.error,O.file);else if(O.results&&O.results.data){var Y={abort:function(){F=!0,E(O.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:q,resume:q};if(I(M.userStep)){for(var ae=0;ae<O.results.data.length&&(M.userStep({data:O.results.data[ae],errors:O.results.errors,meta:O.results.meta},Y),!F);ae++);delete O.results}else I(M.userChunk)&&(M.userChunk(O.results,Y,O.file),delete O.results)}O.finished&&!F&&E(O.workerId,O.results)}function E(A,O){var M=d[A];I(M.userComplete)&&M.userComplete(O),M.terminate(),delete d[A]}function q(){throw new Error("Not implemented.")}function P(A){if(typeof A!="object"||A===null)return A;var O,M=Array.isArray(A)?[]:{};for(O in A)M[O]=P(A[O]);return M}function H(A,O){return function(){A.apply(O,arguments)}}function I(A){return typeof A=="function"}return p.parse=function(A,O){var M=(O=O||{}).dynamicTyping||!1;if(I(M)&&(O.dynamicTypingFunction=M,M={}),O.dynamicTyping=M,O.transform=!!I(O.transform)&&O.transform,!O.worker||!p.WORKERS_SUPPORTED)return M=null,p.NODE_STREAM_INPUT,typeof A=="string"?(A=(F=>F.charCodeAt(0)!==65279?F:F.slice(1))(A),M=new(O.download?v:b)(O)):A.readable===!0&&I(A.read)&&I(A.on)?M=new _(O):(a.File&&A instanceof File||A instanceof Object)&&(M=new x(O)),M.stream(A);(M=(()=>{var F;return!!p.WORKERS_SUPPORTED&&(F=(()=>{var Y=a.URL||a.webkitURL||null,ae=r.toString();return p.BLOB_URL||(p.BLOB_URL=Y.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",ae,")();"],{type:"text/javascript"})))})(),(F=new a.Worker(F)).onmessage=R,F.id=f++,d[F.id]=F)})()).userStep=O.step,M.userChunk=O.chunk,M.userComplete=O.complete,M.userError=O.error,O.step=I(O.step),O.chunk=I(O.chunk),O.complete=I(O.complete),O.error=I(O.error),delete O.worker,M.postMessage({input:A,config:O,workerId:M.id})},p.unparse=function(A,O){var M=!1,F=!0,Y=",",ae=`\r
`,ee='"',de=ee+ee,J=!1,te=null,he=!1,ve=((()=>{if(typeof O=="object"){if(typeof O.delimiter!="string"||p.BAD_DELIMITERS.filter(function(L){return O.delimiter.indexOf(L)!==-1}).length||(Y=O.delimiter),typeof O.quotes!="boolean"&&typeof O.quotes!="function"&&!Array.isArray(O.quotes)||(M=O.quotes),typeof O.skipEmptyLines!="boolean"&&typeof O.skipEmptyLines!="string"||(J=O.skipEmptyLines),typeof O.newline=="string"&&(ae=O.newline),typeof O.quoteChar=="string"&&(ee=O.quoteChar),typeof O.header=="boolean"&&(F=O.header),Array.isArray(O.columns)){if(O.columns.length===0)throw new Error("Option columns is empty");te=O.columns}O.escapeChar!==void 0&&(de=O.escapeChar+ee),O.escapeFormulae instanceof RegExp?he=O.escapeFormulae:typeof O.escapeFormulae=="boolean"&&O.escapeFormulae&&(he=/^[=+\-@\t\r].*$/)}})(),new RegExp(k(ee),"g"));if(typeof A=="string"&&(A=JSON.parse(A)),Array.isArray(A)){if(!A.length||Array.isArray(A[0]))return se(null,A,J);if(typeof A[0]=="object")return se(te||Object.keys(A[0]),A,J)}else if(typeof A=="object")return typeof A.data=="string"&&(A.data=JSON.parse(A.data)),Array.isArray(A.data)&&(A.fields||(A.fields=A.meta&&A.meta.fields||te),A.fields||(A.fields=Array.isArray(A.data[0])?A.fields:typeof A.data[0]=="object"?Object.keys(A.data[0]):[]),Array.isArray(A.data[0])||typeof A.data[0]=="object"||(A.data=[A.data])),se(A.fields||[],A.data||[],J);throw new Error("Unable to serialize unrecognized input");function se(L,V,G){var X="",D=(typeof L=="string"&&(L=JSON.parse(L)),typeof V=="string"&&(V=JSON.parse(V)),Array.isArray(L)&&0<L.length),ne=!Array.isArray(V[0]);if(D&&F){for(var le=0;le<L.length;le++)0<le&&(X+=Y),X+=N(L[le],le);0<V.length&&(X+=ae)}for(var Se=0;Se<V.length;Se++){var Ae=(D?L:V[Se]).length,Te=!1,$e=D?Object.keys(V[Se]).length===0:V[Se].length===0;if(G&&!D&&(Te=G==="greedy"?V[Se].join("").trim()==="":V[Se].length===1&&V[Se][0].length===0),G==="greedy"&&D){for(var Oe=[],Me=0;Me<Ae;Me++){var Re=ne?L[Me]:Me;Oe.push(V[Se][Re])}Te=Oe.join("").trim()===""}if(!Te){for(var Ue=0;Ue<Ae;Ue++){0<Ue&&!$e&&(X+=Y);var wt=D&&ne?L[Ue]:Ue;X+=N(V[Se][wt],Ue)}Se<V.length-1&&(!G||0<Ae&&!$e)&&(X+=ae)}}return X}function N(L,V){var G,X;return L==null?"":L.constructor===Date?JSON.stringify(L).slice(1,25):(X=!1,he&&typeof L=="string"&&he.test(L)&&(L="'"+L,X=!0),G=L.toString().replace(ve,de),(X=X||M===!0||typeof M=="function"&&M(L,V)||Array.isArray(M)&&M[V]||((D,ne)=>{for(var le=0;le<ne.length;le++)if(-1<D.indexOf(ne[le]))return!0;return!1})(G,p.BAD_DELIMITERS)||-1<G.indexOf(Y)||G.charAt(0)===" "||G.charAt(G.length-1)===" ")?ee+G+ee:G)}},p.RECORD_SEP="",p.UNIT_SEP="",p.BYTE_ORDER_MARK="\uFEFF",p.BAD_DELIMITERS=["\r",`
`,'"',p.BYTE_ORDER_MARK],p.WORKERS_SUPPORTED=!l&&!!a.Worker,p.NODE_STREAM_INPUT=1,p.LocalChunkSize=10485760,p.RemoteChunkSize=5242880,p.DefaultDelimiter=",",p.Parser=j,p.ParserHandle=S,p.NetworkStreamer=v,p.FileStreamer=x,p.StringStreamer=b,p.ReadableStreamStreamer=_,a.jQuery&&((s=a.jQuery).fn.parse=function(A){var O=A.config||{},M=[];return this.each(function(ae){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var ee=0;ee<this.files.length;ee++)M.push({file:this.files[ee],inputElem:this,instanceConfig:s.extend({},O)})}),F(),this;function F(){if(M.length===0)I(A.complete)&&A.complete();else{var ae,ee,de,J,te=M[0];if(I(A.before)){var he=A.before(te.file,te.inputElem);if(typeof he=="object"){if(he.action==="abort")return ae="AbortError",ee=te.file,de=te.inputElem,J=he.reason,void(I(A.error)&&A.error({name:ae},ee,de,J));if(he.action==="skip")return void Y();typeof he.config=="object"&&(te.instanceConfig=s.extend(te.instanceConfig,he.config))}else if(he==="skip")return void Y()}var ve=te.instanceConfig.complete;te.instanceConfig.complete=function(se){I(ve)&&ve(se,te.file,te.inputElem),Y()},p.parse(te.file,te.instanceConfig)}}function Y(){M.splice(0,1),F()}}),c&&(a.onmessage=function(A){A=A.data,p.WORKER_ID===void 0&&A&&(p.WORKER_ID=A.workerId),typeof A.input=="string"?a.postMessage({workerId:p.WORKER_ID,results:p.parse(A.input,A.config),finished:!0}):(a.File&&A.input instanceof File||A.input instanceof Object)&&(A=p.parse(A.input,A.config))&&a.postMessage({workerId:p.WORKER_ID,results:A,finished:!0})}),(v.prototype=Object.create(y.prototype)).constructor=v,(x.prototype=Object.create(y.prototype)).constructor=x,(b.prototype=Object.create(b.prototype)).constructor=b,(_.prototype=Object.create(y.prototype)).constructor=_,p})})(Dc)),Dc.exports}var t5=e5();const o1=Ql(t5);function l1(e){return typeof e>"u"||e===null}function n5(e){return typeof e=="object"&&e!==null}function r5(e){return Array.isArray(e)?e:l1(e)?[]:[e]}function a5(e,t){var r,a,s,l;if(t)for(l=Object.keys(t),r=0,a=l.length;r<a;r+=1)s=l[r],e[s]=t[s];return e}function i5(e,t){var r="",a;for(a=0;a<t;a+=1)r+=e;return r}function s5(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var o5=l1,l5=n5,u5=r5,c5=i5,d5=s5,f5=a5,yn={isNothing:o5,isObject:l5,toArray:u5,repeat:c5,isNegativeZero:d5,extend:f5};function u1(e,t){var r="",a=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),a+" "+r):a}function Pl(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=u1(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Pl.prototype=Object.create(Error.prototype);Pl.prototype.constructor=Pl;Pl.prototype.toString=function(t){return this.name+": "+u1(this,t)};var qn=Pl;function Pp(e,t,r,a,s){var l="",c="",d=Math.floor(s/2)-1;return a-t>d&&(l=" ... ",t=a-d+l.length),r-a>d&&(c=" ...",r=a+d-c.length),{str:l+e.slice(t,r).replace(/\t/g,"")+c,pos:a-t+l.length}}function Bp(e,t){return yn.repeat(" ",t-e.length)+e}function p5(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,a=[0],s=[],l,c=-1;l=r.exec(e.buffer);)s.push(l.index),a.push(l.index+l[0].length),e.position<=l.index&&c<0&&(c=a.length-2);c<0&&(c=a.length-1);var d="",f,p,y=Math.min(e.line+t.linesAfter,s.length).toString().length,v=t.maxLength-(t.indent+y+3);for(f=1;f<=t.linesBefore&&!(c-f<0);f++)p=Pp(e.buffer,a[c-f],s[c-f],e.position-(a[c]-a[c-f]),v),d=yn.repeat(" ",t.indent)+Bp((e.line-f+1).toString(),y)+" | "+p.str+`
`+d;for(p=Pp(e.buffer,a[c],s[c],e.position,v),d+=yn.repeat(" ",t.indent)+Bp((e.line+1).toString(),y)+" | "+p.str+`
`,d+=yn.repeat("-",t.indent+y+3+p.pos)+`^
`,f=1;f<=t.linesAfter&&!(c+f>=s.length);f++)p=Pp(e.buffer,a[c+f],s[c+f],e.position-(a[c]-a[c+f]),v),d+=yn.repeat(" ",t.indent)+Bp((e.line+f+1).toString(),y)+" | "+p.str+`
`;return d.replace(/\n$/,"")}var h5=p5,m5=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],g5=["scalar","sequence","mapping"];function y5(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(a){t[String(a)]=r})}),t}function v5(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(m5.indexOf(r)===-1)throw new qn('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=y5(t.styleAliases||null),g5.indexOf(this.kind)===-1)throw new qn('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Rn=v5;function Uv(e,t){var r=[];return e[t].forEach(function(a){var s=r.length;r.forEach(function(l,c){l.tag===a.tag&&l.kind===a.kind&&l.multi===a.multi&&(s=c)}),r[s]=a}),r}function b5(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function a(s){s.multi?(e.multi[s.kind].push(s),e.multi.fallback.push(s)):e[s.kind][s.tag]=e.fallback[s.tag]=s}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(a);return e}function kh(e){return this.extend(e)}kh.prototype.extend=function(t){var r=[],a=[];if(t instanceof Rn)a.push(t);else if(Array.isArray(t))a=a.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(a=a.concat(t.explicit));else throw new qn("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(l){if(!(l instanceof Rn))throw new qn("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(l.loadKind&&l.loadKind!=="scalar")throw new qn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(l.multi)throw new qn("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),a.forEach(function(l){if(!(l instanceof Rn))throw new qn("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(kh.prototype);return s.implicit=(this.implicit||[]).concat(r),s.explicit=(this.explicit||[]).concat(a),s.compiledImplicit=Uv(s,"implicit"),s.compiledExplicit=Uv(s,"explicit"),s.compiledTypeMap=b5(s.compiledImplicit,s.compiledExplicit),s};var c1=kh,d1=new Rn("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),f1=new Rn("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),p1=new Rn("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),h1=new c1({explicit:[d1,f1,p1]});function x5(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function _5(){return null}function w5(e){return e===null}var m1=new Rn("tag:yaml.org,2002:null",{kind:"scalar",resolve:x5,construct:_5,predicate:w5,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function S5(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function k5(e){return e==="true"||e==="True"||e==="TRUE"}function T5(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var g1=new Rn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:S5,construct:k5,predicate:T5,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function E5(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function N5(e){return 48<=e&&e<=55}function A5(e){return 48<=e&&e<=57}function C5(e){if(e===null)return!1;var t=e.length,r=0,a=!1,s;if(!t)return!1;if(s=e[r],(s==="-"||s==="+")&&(s=e[++r]),s==="0"){if(r+1===t)return!0;if(s=e[++r],s==="b"){for(r++;r<t;r++)if(s=e[r],s!=="_"){if(s!=="0"&&s!=="1")return!1;a=!0}return a&&s!=="_"}if(s==="x"){for(r++;r<t;r++)if(s=e[r],s!=="_"){if(!E5(e.charCodeAt(r)))return!1;a=!0}return a&&s!=="_"}if(s==="o"){for(r++;r<t;r++)if(s=e[r],s!=="_"){if(!N5(e.charCodeAt(r)))return!1;a=!0}return a&&s!=="_"}}if(s==="_")return!1;for(;r<t;r++)if(s=e[r],s!=="_"){if(!A5(e.charCodeAt(r)))return!1;a=!0}return!(!a||s==="_")}function R5(e){var t=e,r=1,a;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),a=t[0],(a==="-"||a==="+")&&(a==="-"&&(r=-1),t=t.slice(1),a=t[0]),t==="0")return 0;if(a==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function j5(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!yn.isNegativeZero(e)}var y1=new Rn("tag:yaml.org,2002:int",{kind:"scalar",resolve:C5,construct:R5,predicate:j5,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),O5=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function M5(e){return!(e===null||!O5.test(e)||e[e.length-1]==="_")}function I5(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var $5=/^[-+]?[0-9]+e/;function D5(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(yn.isNegativeZero(e))return"-0.0";return r=e.toString(10),$5.test(r)?r.replace("e",".e"):r}function z5(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||yn.isNegativeZero(e))}var v1=new Rn("tag:yaml.org,2002:float",{kind:"scalar",resolve:M5,construct:I5,predicate:z5,represent:D5,defaultStyle:"lowercase"}),b1=h1.extend({implicit:[m1,g1,y1,v1]}),x1=b1,_1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),w1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function L5(e){return e===null?!1:_1.exec(e)!==null||w1.exec(e)!==null}function U5(e){var t,r,a,s,l,c,d,f=0,p=null,y,v,x;if(t=_1.exec(e),t===null&&(t=w1.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],a=+t[2]-1,s=+t[3],!t[4])return new Date(Date.UTC(r,a,s));if(l=+t[4],c=+t[5],d=+t[6],t[7]){for(f=t[7].slice(0,3);f.length<3;)f+="0";f=+f}return t[9]&&(y=+t[10],v=+(t[11]||0),p=(y*60+v)*6e4,t[9]==="-"&&(p=-p)),x=new Date(Date.UTC(r,a,s,l,c,d,f)),p&&x.setTime(x.getTime()-p),x}function q5(e){return e.toISOString()}var S1=new Rn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:L5,construct:U5,instanceOf:Date,represent:q5});function P5(e){return e==="<<"||e===null}var k1=new Rn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:P5}),em=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function B5(e){if(e===null)return!1;var t,r,a=0,s=e.length,l=em;for(r=0;r<s;r++)if(t=l.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;a+=6}return a%8===0}function F5(e){var t,r,a=e.replace(/[\r\n=]/g,""),s=a.length,l=em,c=0,d=[];for(t=0;t<s;t++)t%4===0&&t&&(d.push(c>>16&255),d.push(c>>8&255),d.push(c&255)),c=c<<6|l.indexOf(a.charAt(t));return r=s%4*6,r===0?(d.push(c>>16&255),d.push(c>>8&255),d.push(c&255)):r===18?(d.push(c>>10&255),d.push(c>>2&255)):r===12&&d.push(c>>4&255),new Uint8Array(d)}function V5(e){var t="",r=0,a,s,l=e.length,c=em;for(a=0;a<l;a++)a%3===0&&a&&(t+=c[r>>18&63],t+=c[r>>12&63],t+=c[r>>6&63],t+=c[r&63]),r=(r<<8)+e[a];return s=l%3,s===0?(t+=c[r>>18&63],t+=c[r>>12&63],t+=c[r>>6&63],t+=c[r&63]):s===2?(t+=c[r>>10&63],t+=c[r>>4&63],t+=c[r<<2&63],t+=c[64]):s===1&&(t+=c[r>>2&63],t+=c[r<<4&63],t+=c[64],t+=c[64]),t}function H5(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var T1=new Rn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:B5,construct:F5,predicate:H5,represent:V5}),G5=Object.prototype.hasOwnProperty,Z5=Object.prototype.toString;function Y5(e){if(e===null)return!0;var t=[],r,a,s,l,c,d=e;for(r=0,a=d.length;r<a;r+=1){if(s=d[r],c=!1,Z5.call(s)!=="[object Object]")return!1;for(l in s)if(G5.call(s,l))if(!c)c=!0;else return!1;if(!c)return!1;if(t.indexOf(l)===-1)t.push(l);else return!1}return!0}function J5(e){return e!==null?e:[]}var E1=new Rn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Y5,construct:J5}),X5=Object.prototype.toString;function K5(e){if(e===null)return!0;var t,r,a,s,l,c=e;for(l=new Array(c.length),t=0,r=c.length;t<r;t+=1){if(a=c[t],X5.call(a)!=="[object Object]"||(s=Object.keys(a),s.length!==1))return!1;l[t]=[s[0],a[s[0]]]}return!0}function Q5(e){if(e===null)return[];var t,r,a,s,l,c=e;for(l=new Array(c.length),t=0,r=c.length;t<r;t+=1)a=c[t],s=Object.keys(a),l[t]=[s[0],a[s[0]]];return l}var N1=new Rn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:K5,construct:Q5}),W5=Object.prototype.hasOwnProperty;function eN(e){if(e===null)return!0;var t,r=e;for(t in r)if(W5.call(r,t)&&r[t]!==null)return!1;return!0}function tN(e){return e!==null?e:{}}var A1=new Rn("tag:yaml.org,2002:set",{kind:"mapping",resolve:eN,construct:tN}),tm=x1.extend({implicit:[S1,k1],explicit:[T1,E1,N1,A1]}),ai=Object.prototype.hasOwnProperty,Pc=1,C1=2,R1=3,Bc=4,Fp=1,nN=2,qv=3,rN=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,aN=/[\x85\u2028\u2029]/,iN=/[,\[\]\{\}]/,j1=/^(?:!|!!|![a-z\-]+!)$/i,O1=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Pv(e){return Object.prototype.toString.call(e)}function ea(e){return e===10||e===13}function Ui(e){return e===9||e===32}function Wn(e){return e===9||e===32||e===10||e===13}function Ps(e){return e===44||e===91||e===93||e===123||e===125}function sN(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function oN(e){return e===120?2:e===117?4:e===85?8:0}function lN(e){return 48<=e&&e<=57?e-48:-1}function Bv(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function uN(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}function M1(e,t,r){t==="__proto__"?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:r}):e[t]=r}var I1=new Array(256),$1=new Array(256);for(var Ds=0;Ds<256;Ds++)I1[Ds]=Bv(Ds)?1:0,$1[Ds]=Bv(Ds);function cN(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||tm,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function D1(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=h5(r),new qn(t,r)}function Fe(e,t){throw D1(e,t)}function Fc(e,t){e.onWarning&&e.onWarning.call(null,D1(e,t))}var Fv={YAML:function(t,r,a){var s,l,c;t.version!==null&&Fe(t,"duplication of %YAML directive"),a.length!==1&&Fe(t,"YAML directive accepts exactly one argument"),s=/^([0-9]+)\.([0-9]+)$/.exec(a[0]),s===null&&Fe(t,"ill-formed argument of the YAML directive"),l=parseInt(s[1],10),c=parseInt(s[2],10),l!==1&&Fe(t,"unacceptable YAML version of the document"),t.version=a[0],t.checkLineBreaks=c<2,c!==1&&c!==2&&Fc(t,"unsupported YAML version of the document")},TAG:function(t,r,a){var s,l;a.length!==2&&Fe(t,"TAG directive accepts exactly two arguments"),s=a[0],l=a[1],j1.test(s)||Fe(t,"ill-formed tag handle (first argument) of the TAG directive"),ai.call(t.tagMap,s)&&Fe(t,'there is a previously declared suffix for "'+s+'" tag handle'),O1.test(l)||Fe(t,"ill-formed tag prefix (second argument) of the TAG directive");try{l=decodeURIComponent(l)}catch{Fe(t,"tag prefix is malformed: "+l)}t.tagMap[s]=l}};function ri(e,t,r,a){var s,l,c,d;if(t<r){if(d=e.input.slice(t,r),a)for(s=0,l=d.length;s<l;s+=1)c=d.charCodeAt(s),c===9||32<=c&&c<=1114111||Fe(e,"expected valid JSON character");else rN.test(d)&&Fe(e,"the stream contains non-printable characters");e.result+=d}}function Vv(e,t,r,a){var s,l,c,d;for(yn.isObject(r)||Fe(e,"cannot merge mappings; the provided source object is unacceptable"),s=Object.keys(r),c=0,d=s.length;c<d;c+=1)l=s[c],ai.call(t,l)||(M1(t,l,r[l]),a[l]=!0)}function Bs(e,t,r,a,s,l,c,d,f){var p,y;if(Array.isArray(s))for(s=Array.prototype.slice.call(s),p=0,y=s.length;p<y;p+=1)Array.isArray(s[p])&&Fe(e,"nested arrays are not supported inside keys"),typeof s=="object"&&Pv(s[p])==="[object Object]"&&(s[p]="[object Object]");if(typeof s=="object"&&Pv(s)==="[object Object]"&&(s="[object Object]"),s=String(s),t===null&&(t={}),a==="tag:yaml.org,2002:merge")if(Array.isArray(l))for(p=0,y=l.length;p<y;p+=1)Vv(e,t,l[p],r);else Vv(e,t,l,r);else!e.json&&!ai.call(r,s)&&ai.call(t,s)&&(e.line=c||e.line,e.lineStart=d||e.lineStart,e.position=f||e.position,Fe(e,"duplicated mapping key")),M1(t,s,l),delete r[s];return t}function nm(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Fe(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function dn(e,t,r){for(var a=0,s=e.input.charCodeAt(e.position);s!==0;){for(;Ui(s);)s===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),s=e.input.charCodeAt(++e.position);if(t&&s===35)do s=e.input.charCodeAt(++e.position);while(s!==10&&s!==13&&s!==0);if(ea(s))for(nm(e),s=e.input.charCodeAt(e.position),a++,e.lineIndent=0;s===32;)e.lineIndent++,s=e.input.charCodeAt(++e.position);else break}return r!==-1&&a!==0&&e.lineIndent<r&&Fc(e,"deficient indentation"),a}function od(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||Wn(r)))}function rm(e,t){t===1?e.result+=" ":t>1&&(e.result+=yn.repeat(`
`,t-1))}function dN(e,t,r){var a,s,l,c,d,f,p,y,v=e.kind,x=e.result,b;if(b=e.input.charCodeAt(e.position),Wn(b)||Ps(b)||b===35||b===38||b===42||b===33||b===124||b===62||b===39||b===34||b===37||b===64||b===96||(b===63||b===45)&&(s=e.input.charCodeAt(e.position+1),Wn(s)||r&&Ps(s)))return!1;for(e.kind="scalar",e.result="",l=c=e.position,d=!1;b!==0;){if(b===58){if(s=e.input.charCodeAt(e.position+1),Wn(s)||r&&Ps(s))break}else if(b===35){if(a=e.input.charCodeAt(e.position-1),Wn(a))break}else{if(e.position===e.lineStart&&od(e)||r&&Ps(b))break;if(ea(b))if(f=e.line,p=e.lineStart,y=e.lineIndent,dn(e,!1,-1),e.lineIndent>=t){d=!0,b=e.input.charCodeAt(e.position);continue}else{e.position=c,e.line=f,e.lineStart=p,e.lineIndent=y;break}}d&&(ri(e,l,c,!1),rm(e,e.line-f),l=c=e.position,d=!1),Ui(b)||(c=e.position+1),b=e.input.charCodeAt(++e.position)}return ri(e,l,c,!1),e.result?!0:(e.kind=v,e.result=x,!1)}function fN(e,t){var r,a,s;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,a=s=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(ri(e,a,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)a=e.position,e.position++,s=e.position;else return!0;else ea(r)?(ri(e,a,s,!0),rm(e,dn(e,!1,t)),a=s=e.position):e.position===e.lineStart&&od(e)?Fe(e,"unexpected end of the document within a single quoted scalar"):(e.position++,s=e.position);Fe(e,"unexpected end of the stream within a single quoted scalar")}function pN(e,t){var r,a,s,l,c,d;if(d=e.input.charCodeAt(e.position),d!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=a=e.position;(d=e.input.charCodeAt(e.position))!==0;){if(d===34)return ri(e,r,e.position,!0),e.position++,!0;if(d===92){if(ri(e,r,e.position,!0),d=e.input.charCodeAt(++e.position),ea(d))dn(e,!1,t);else if(d<256&&I1[d])e.result+=$1[d],e.position++;else if((c=oN(d))>0){for(s=c,l=0;s>0;s--)d=e.input.charCodeAt(++e.position),(c=sN(d))>=0?l=(l<<4)+c:Fe(e,"expected hexadecimal character");e.result+=uN(l),e.position++}else Fe(e,"unknown escape sequence");r=a=e.position}else ea(d)?(ri(e,r,a,!0),rm(e,dn(e,!1,t)),r=a=e.position):e.position===e.lineStart&&od(e)?Fe(e,"unexpected end of the document within a double quoted scalar"):(e.position++,a=e.position)}Fe(e,"unexpected end of the stream within a double quoted scalar")}function hN(e,t){var r=!0,a,s,l,c=e.tag,d,f=e.anchor,p,y,v,x,b,_=Object.create(null),S,k,j,R;if(R=e.input.charCodeAt(e.position),R===91)y=93,b=!1,d=[];else if(R===123)y=125,b=!0,d={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=d),R=e.input.charCodeAt(++e.position);R!==0;){if(dn(e,!0,t),R=e.input.charCodeAt(e.position),R===y)return e.position++,e.tag=c,e.anchor=f,e.kind=b?"mapping":"sequence",e.result=d,!0;r?R===44&&Fe(e,"expected the node content, but found ','"):Fe(e,"missed comma between flow collection entries"),k=S=j=null,v=x=!1,R===63&&(p=e.input.charCodeAt(e.position+1),Wn(p)&&(v=x=!0,e.position++,dn(e,!0,t))),a=e.line,s=e.lineStart,l=e.position,Zs(e,t,Pc,!1,!0),k=e.tag,S=e.result,dn(e,!0,t),R=e.input.charCodeAt(e.position),(x||e.line===a)&&R===58&&(v=!0,R=e.input.charCodeAt(++e.position),dn(e,!0,t),Zs(e,t,Pc,!1,!0),j=e.result),b?Bs(e,d,_,k,S,j,a,s,l):v?d.push(Bs(e,null,_,k,S,j,a,s,l)):d.push(S),dn(e,!0,t),R=e.input.charCodeAt(e.position),R===44?(r=!0,R=e.input.charCodeAt(++e.position)):r=!1}Fe(e,"unexpected end of the stream within a flow collection")}function mN(e,t){var r,a,s=Fp,l=!1,c=!1,d=t,f=0,p=!1,y,v;if(v=e.input.charCodeAt(e.position),v===124)a=!1;else if(v===62)a=!0;else return!1;for(e.kind="scalar",e.result="";v!==0;)if(v=e.input.charCodeAt(++e.position),v===43||v===45)Fp===s?s=v===43?qv:nN:Fe(e,"repeat of a chomping mode identifier");else if((y=lN(v))>=0)y===0?Fe(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?Fe(e,"repeat of an indentation width identifier"):(d=t+y-1,c=!0);else break;if(Ui(v)){do v=e.input.charCodeAt(++e.position);while(Ui(v));if(v===35)do v=e.input.charCodeAt(++e.position);while(!ea(v)&&v!==0)}for(;v!==0;){for(nm(e),e.lineIndent=0,v=e.input.charCodeAt(e.position);(!c||e.lineIndent<d)&&v===32;)e.lineIndent++,v=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>d&&(d=e.lineIndent),ea(v)){f++;continue}if(e.lineIndent<d){s===qv?e.result+=yn.repeat(`
`,l?1+f:f):s===Fp&&l&&(e.result+=`
`);break}for(a?Ui(v)?(p=!0,e.result+=yn.repeat(`
`,l?1+f:f)):p?(p=!1,e.result+=yn.repeat(`
`,f+1)):f===0?l&&(e.result+=" "):e.result+=yn.repeat(`
`,f):e.result+=yn.repeat(`
`,l?1+f:f),l=!0,c=!0,f=0,r=e.position;!ea(v)&&v!==0;)v=e.input.charCodeAt(++e.position);ri(e,r,e.position,!1)}return!0}function Hv(e,t){var r,a=e.tag,s=e.anchor,l=[],c,d=!1,f;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),f=e.input.charCodeAt(e.position);f!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Fe(e,"tab characters must not be used in indentation")),!(f!==45||(c=e.input.charCodeAt(e.position+1),!Wn(c))));){if(d=!0,e.position++,dn(e,!0,-1)&&e.lineIndent<=t){l.push(null),f=e.input.charCodeAt(e.position);continue}if(r=e.line,Zs(e,t,R1,!1,!0),l.push(e.result),dn(e,!0,-1),f=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&f!==0)Fe(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return d?(e.tag=a,e.anchor=s,e.kind="sequence",e.result=l,!0):!1}function gN(e,t,r){var a,s,l,c,d,f,p=e.tag,y=e.anchor,v={},x=Object.create(null),b=null,_=null,S=null,k=!1,j=!1,R;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=v),R=e.input.charCodeAt(e.position);R!==0;){if(!k&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Fe(e,"tab characters must not be used in indentation")),a=e.input.charCodeAt(e.position+1),l=e.line,(R===63||R===58)&&Wn(a))R===63?(k&&(Bs(e,v,x,b,_,null,c,d,f),b=_=S=null),j=!0,k=!0,s=!0):k?(k=!1,s=!0):Fe(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,R=a;else{if(c=e.line,d=e.lineStart,f=e.position,!Zs(e,r,C1,!1,!0))break;if(e.line===l){for(R=e.input.charCodeAt(e.position);Ui(R);)R=e.input.charCodeAt(++e.position);if(R===58)R=e.input.charCodeAt(++e.position),Wn(R)||Fe(e,"a whitespace character is expected after the key-value separator within a block mapping"),k&&(Bs(e,v,x,b,_,null,c,d,f),b=_=S=null),j=!0,k=!1,s=!1,b=e.tag,_=e.result;else if(j)Fe(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=p,e.anchor=y,!0}else if(j)Fe(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=p,e.anchor=y,!0}if((e.line===l||e.lineIndent>t)&&(k&&(c=e.line,d=e.lineStart,f=e.position),Zs(e,t,Bc,!0,s)&&(k?_=e.result:S=e.result),k||(Bs(e,v,x,b,_,S,c,d,f),b=_=S=null),dn(e,!0,-1),R=e.input.charCodeAt(e.position)),(e.line===l||e.lineIndent>t)&&R!==0)Fe(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return k&&Bs(e,v,x,b,_,null,c,d,f),j&&(e.tag=p,e.anchor=y,e.kind="mapping",e.result=v),j}function yN(e){var t,r=!1,a=!1,s,l,c;if(c=e.input.charCodeAt(e.position),c!==33)return!1;if(e.tag!==null&&Fe(e,"duplication of a tag property"),c=e.input.charCodeAt(++e.position),c===60?(r=!0,c=e.input.charCodeAt(++e.position)):c===33?(a=!0,s="!!",c=e.input.charCodeAt(++e.position)):s="!",t=e.position,r){do c=e.input.charCodeAt(++e.position);while(c!==0&&c!==62);e.position<e.length?(l=e.input.slice(t,e.position),c=e.input.charCodeAt(++e.position)):Fe(e,"unexpected end of the stream within a verbatim tag")}else{for(;c!==0&&!Wn(c);)c===33&&(a?Fe(e,"tag suffix cannot contain exclamation marks"):(s=e.input.slice(t-1,e.position+1),j1.test(s)||Fe(e,"named tag handle cannot contain such characters"),a=!0,t=e.position+1)),c=e.input.charCodeAt(++e.position);l=e.input.slice(t,e.position),iN.test(l)&&Fe(e,"tag suffix cannot contain flow indicator characters")}l&&!O1.test(l)&&Fe(e,"tag name cannot contain such characters: "+l);try{l=decodeURIComponent(l)}catch{Fe(e,"tag name is malformed: "+l)}return r?e.tag=l:ai.call(e.tagMap,s)?e.tag=e.tagMap[s]+l:s==="!"?e.tag="!"+l:s==="!!"?e.tag="tag:yaml.org,2002:"+l:Fe(e,'undeclared tag handle "'+s+'"'),!0}function vN(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&Fe(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Wn(r)&&!Ps(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Fe(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function bN(e){var t,r,a;if(a=e.input.charCodeAt(e.position),a!==42)return!1;for(a=e.input.charCodeAt(++e.position),t=e.position;a!==0&&!Wn(a)&&!Ps(a);)a=e.input.charCodeAt(++e.position);return e.position===t&&Fe(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),ai.call(e.anchorMap,r)||Fe(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],dn(e,!0,-1),!0}function Zs(e,t,r,a,s){var l,c,d,f=1,p=!1,y=!1,v,x,b,_,S,k;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,l=c=d=Bc===r||R1===r,a&&dn(e,!0,-1)&&(p=!0,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)),f===1)for(;yN(e)||vN(e);)dn(e,!0,-1)?(p=!0,d=l,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)):d=!1;if(d&&(d=p||s),(f===1||Bc===r)&&(Pc===r||C1===r?S=t:S=t+1,k=e.position-e.lineStart,f===1?d&&(Hv(e,k)||gN(e,k,S))||hN(e,S)?y=!0:(c&&mN(e,S)||fN(e,S)||pN(e,S)?y=!0:bN(e)?(y=!0,(e.tag!==null||e.anchor!==null)&&Fe(e,"alias node should not have any properties")):dN(e,S,Pc===r)&&(y=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):f===0&&(y=d&&Hv(e,k))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Fe(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),v=0,x=e.implicitTypes.length;v<x;v+=1)if(_=e.implicitTypes[v],_.resolve(e.result)){e.result=_.construct(e.result),e.tag=_.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(ai.call(e.typeMap[e.kind||"fallback"],e.tag))_=e.typeMap[e.kind||"fallback"][e.tag];else for(_=null,b=e.typeMap.multi[e.kind||"fallback"],v=0,x=b.length;v<x;v+=1)if(e.tag.slice(0,b[v].tag.length)===b[v].tag){_=b[v];break}_||Fe(e,"unknown tag !<"+e.tag+">"),e.result!==null&&_.kind!==e.kind&&Fe(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+_.kind+'", not "'+e.kind+'"'),_.resolve(e.result,e.tag)?(e.result=_.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Fe(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||y}function xN(e){var t=e.position,r,a,s,l=!1,c;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(c=e.input.charCodeAt(e.position))!==0&&(dn(e,!0,-1),c=e.input.charCodeAt(e.position),!(e.lineIndent>0||c!==37));){for(l=!0,c=e.input.charCodeAt(++e.position),r=e.position;c!==0&&!Wn(c);)c=e.input.charCodeAt(++e.position);for(a=e.input.slice(r,e.position),s=[],a.length<1&&Fe(e,"directive name must not be less than one character in length");c!==0;){for(;Ui(c);)c=e.input.charCodeAt(++e.position);if(c===35){do c=e.input.charCodeAt(++e.position);while(c!==0&&!ea(c));break}if(ea(c))break;for(r=e.position;c!==0&&!Wn(c);)c=e.input.charCodeAt(++e.position);s.push(e.input.slice(r,e.position))}c!==0&&nm(e),ai.call(Fv,a)?Fv[a](e,a,s):Fc(e,'unknown document directive "'+a+'"')}if(dn(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,dn(e,!0,-1)):l&&Fe(e,"directives end mark is expected"),Zs(e,e.lineIndent-1,Bc,!1,!0),dn(e,!0,-1),e.checkLineBreaks&&aN.test(e.input.slice(t,e.position))&&Fc(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&od(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,dn(e,!0,-1));return}if(e.position<e.length-1)Fe(e,"end of the stream or a document separator is expected");else return}function z1(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new cN(e,t),a=e.indexOf("\0");for(a!==-1&&(r.position=a,Fe(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)xN(r);return r.documents}function _N(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var a=z1(e,r);if(typeof t!="function")return a;for(var s=0,l=a.length;s<l;s+=1)t(a[s])}function wN(e,t){var r=z1(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new qn("expected a single document in the stream, but found more")}}var SN=_N,kN=wN,L1={loadAll:SN,load:kN},U1=Object.prototype.toString,q1=Object.prototype.hasOwnProperty,am=65279,TN=9,Bl=10,EN=13,NN=32,AN=33,CN=34,Th=35,RN=37,jN=38,ON=39,MN=42,P1=44,IN=45,Vc=58,$N=61,DN=62,zN=63,LN=64,B1=91,F1=93,UN=96,V1=123,qN=124,H1=125,In={};In[0]="\\0";In[7]="\\a";In[8]="\\b";In[9]="\\t";In[10]="\\n";In[11]="\\v";In[12]="\\f";In[13]="\\r";In[27]="\\e";In[34]='\\"';In[92]="\\\\";In[133]="\\N";In[160]="\\_";In[8232]="\\L";In[8233]="\\P";var PN=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],BN=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function FN(e,t){var r,a,s,l,c,d,f;if(t===null)return{};for(r={},a=Object.keys(t),s=0,l=a.length;s<l;s+=1)c=a[s],d=String(t[c]),c.slice(0,2)==="!!"&&(c="tag:yaml.org,2002:"+c.slice(2)),f=e.compiledTypeMap.fallback[c],f&&q1.call(f.styleAliases,d)&&(d=f.styleAliases[d]),r[c]=d;return r}function VN(e){var t,r,a;if(t=e.toString(16).toUpperCase(),e<=255)r="x",a=2;else if(e<=65535)r="u",a=4;else if(e<=4294967295)r="U",a=8;else throw new qn("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+yn.repeat("0",a-t.length)+t}var HN=1,Fl=2;function GN(e){this.schema=e.schema||tm,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=yn.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=FN(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Fl:HN,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Gv(e,t){for(var r=yn.repeat(" ",t),a=0,s=-1,l="",c,d=e.length;a<d;)s=e.indexOf(`
`,a),s===-1?(c=e.slice(a),a=d):(c=e.slice(a,s+1),a=s+1),c.length&&c!==`
`&&(l+=r),l+=c;return l}function Eh(e,t){return`
`+yn.repeat(" ",e.indent*t)}function ZN(e,t){var r,a,s;for(r=0,a=e.implicitTypes.length;r<a;r+=1)if(s=e.implicitTypes[r],s.resolve(t))return!0;return!1}function Hc(e){return e===NN||e===TN}function Vl(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==am||65536<=e&&e<=1114111}function Zv(e){return Vl(e)&&e!==am&&e!==EN&&e!==Bl}function Yv(e,t,r){var a=Zv(e),s=a&&!Hc(e);return(r?a:a&&e!==P1&&e!==B1&&e!==F1&&e!==V1&&e!==H1)&&e!==Th&&!(t===Vc&&!s)||Zv(t)&&!Hc(t)&&e===Th||t===Vc&&s}function YN(e){return Vl(e)&&e!==am&&!Hc(e)&&e!==IN&&e!==zN&&e!==Vc&&e!==P1&&e!==B1&&e!==F1&&e!==V1&&e!==H1&&e!==Th&&e!==jN&&e!==MN&&e!==AN&&e!==qN&&e!==$N&&e!==DN&&e!==ON&&e!==CN&&e!==RN&&e!==LN&&e!==UN}function JN(e){return!Hc(e)&&e!==Vc}function Il(e,t){var r=e.charCodeAt(t),a;return r>=55296&&r<=56319&&t+1<e.length&&(a=e.charCodeAt(t+1),a>=56320&&a<=57343)?(r-55296)*1024+a-56320+65536:r}function G1(e){var t=/^\n* /;return t.test(e)}var Z1=1,Nh=2,Y1=3,J1=4,Ls=5;function XN(e,t,r,a,s,l,c,d){var f,p=0,y=null,v=!1,x=!1,b=a!==-1,_=-1,S=YN(Il(e,0))&&JN(Il(e,e.length-1));if(t||c)for(f=0;f<e.length;p>=65536?f+=2:f++){if(p=Il(e,f),!Vl(p))return Ls;S=S&&Yv(p,y,d),y=p}else{for(f=0;f<e.length;p>=65536?f+=2:f++){if(p=Il(e,f),p===Bl)v=!0,b&&(x=x||f-_-1>a&&e[_+1]!==" ",_=f);else if(!Vl(p))return Ls;S=S&&Yv(p,y,d),y=p}x=x||b&&f-_-1>a&&e[_+1]!==" "}return!v&&!x?S&&!c&&!s(e)?Z1:l===Fl?Ls:Nh:r>9&&G1(e)?Ls:c?l===Fl?Ls:Nh:x?J1:Y1}function KN(e,t,r,a,s){e.dump=(function(){if(t.length===0)return e.quotingType===Fl?'""':"''";if(!e.noCompatMode&&(PN.indexOf(t)!==-1||BN.test(t)))return e.quotingType===Fl?'"'+t+'"':"'"+t+"'";var l=e.indent*Math.max(1,r),c=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-l),d=a||e.flowLevel>-1&&r>=e.flowLevel;function f(p){return ZN(e,p)}switch(XN(t,d,e.indent,c,f,e.quotingType,e.forceQuotes&&!a,s)){case Z1:return t;case Nh:return"'"+t.replace(/'/g,"''")+"'";case Y1:return"|"+Jv(t,e.indent)+Xv(Gv(t,l));case J1:return">"+Jv(t,e.indent)+Xv(Gv(QN(t,c),l));case Ls:return'"'+WN(t)+'"';default:throw new qn("impossible error: invalid scalar style")}})()}function Jv(e,t){var r=G1(e)?String(t):"",a=e[e.length-1]===`
`,s=a&&(e[e.length-2]===`
`||e===`
`),l=s?"+":a?"":"-";return r+l+`
`}function Xv(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function QN(e,t){for(var r=/(\n+)([^\n]*)/g,a=(function(){var p=e.indexOf(`
`);return p=p!==-1?p:e.length,r.lastIndex=p,Kv(e.slice(0,p),t)})(),s=e[0]===`
`||e[0]===" ",l,c;c=r.exec(e);){var d=c[1],f=c[2];l=f[0]===" ",a+=d+(!s&&!l&&f!==""?`
`:"")+Kv(f,t),s=l}return a}function Kv(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,a,s=0,l,c=0,d=0,f="";a=r.exec(e);)d=a.index,d-s>t&&(l=c>s?c:d,f+=`
`+e.slice(s,l),s=l+1),c=d;return f+=`
`,e.length-s>t&&c>s?f+=e.slice(s,c)+`
`+e.slice(c+1):f+=e.slice(s),f.slice(1)}function WN(e){for(var t="",r=0,a,s=0;s<e.length;r>=65536?s+=2:s++)r=Il(e,s),a=In[r],!a&&Vl(r)?(t+=e[s],r>=65536&&(t+=e[s+1])):t+=a||VN(r);return t}function eA(e,t,r){var a="",s=e.tag,l,c,d;for(l=0,c=r.length;l<c;l+=1)d=r[l],e.replacer&&(d=e.replacer.call(r,String(l),d)),(ka(e,t,d,!1,!1)||typeof d>"u"&&ka(e,t,null,!1,!1))&&(a!==""&&(a+=","+(e.condenseFlow?"":" ")),a+=e.dump);e.tag=s,e.dump="["+a+"]"}function Qv(e,t,r,a){var s="",l=e.tag,c,d,f;for(c=0,d=r.length;c<d;c+=1)f=r[c],e.replacer&&(f=e.replacer.call(r,String(c),f)),(ka(e,t+1,f,!0,!0,!1,!0)||typeof f>"u"&&ka(e,t+1,null,!0,!0,!1,!0))&&((!a||s!=="")&&(s+=Eh(e,t)),e.dump&&Bl===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=l,e.dump=s||"[]"}function tA(e,t,r){var a="",s=e.tag,l=Object.keys(r),c,d,f,p,y;for(c=0,d=l.length;c<d;c+=1)y="",a!==""&&(y+=", "),e.condenseFlow&&(y+='"'),f=l[c],p=r[f],e.replacer&&(p=e.replacer.call(r,f,p)),ka(e,t,f,!1,!1)&&(e.dump.length>1024&&(y+="? "),y+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),ka(e,t,p,!1,!1)&&(y+=e.dump,a+=y));e.tag=s,e.dump="{"+a+"}"}function nA(e,t,r,a){var s="",l=e.tag,c=Object.keys(r),d,f,p,y,v,x;if(e.sortKeys===!0)c.sort();else if(typeof e.sortKeys=="function")c.sort(e.sortKeys);else if(e.sortKeys)throw new qn("sortKeys must be a boolean or a function");for(d=0,f=c.length;d<f;d+=1)x="",(!a||s!=="")&&(x+=Eh(e,t)),p=c[d],y=r[p],e.replacer&&(y=e.replacer.call(r,p,y)),ka(e,t+1,p,!0,!0,!0)&&(v=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,v&&(e.dump&&Bl===e.dump.charCodeAt(0)?x+="?":x+="? "),x+=e.dump,v&&(x+=Eh(e,t)),ka(e,t+1,y,!0,v)&&(e.dump&&Bl===e.dump.charCodeAt(0)?x+=":":x+=": ",x+=e.dump,s+=x));e.tag=l,e.dump=s||"{}"}function Wv(e,t,r){var a,s,l,c,d,f;for(s=r?e.explicitTypes:e.implicitTypes,l=0,c=s.length;l<c;l+=1)if(d=s[l],(d.instanceOf||d.predicate)&&(!d.instanceOf||typeof t=="object"&&t instanceof d.instanceOf)&&(!d.predicate||d.predicate(t))){if(r?d.multi&&d.representName?e.tag=d.representName(t):e.tag=d.tag:e.tag="?",d.represent){if(f=e.styleMap[d.tag]||d.defaultStyle,U1.call(d.represent)==="[object Function]")a=d.represent(t,f);else if(q1.call(d.represent,f))a=d.represent[f](t,f);else throw new qn("!<"+d.tag+'> tag resolver accepts not "'+f+'" style');e.dump=a}return!0}return!1}function ka(e,t,r,a,s,l,c){e.tag=null,e.dump=r,Wv(e,r,!1)||Wv(e,r,!0);var d=U1.call(e.dump),f=a,p;a&&(a=e.flowLevel<0||e.flowLevel>t);var y=d==="[object Object]"||d==="[object Array]",v,x;if(y&&(v=e.duplicates.indexOf(r),x=v!==-1),(e.tag!==null&&e.tag!=="?"||x||e.indent!==2&&t>0)&&(s=!1),x&&e.usedDuplicates[v])e.dump="*ref_"+v;else{if(y&&x&&!e.usedDuplicates[v]&&(e.usedDuplicates[v]=!0),d==="[object Object]")a&&Object.keys(e.dump).length!==0?(nA(e,t,e.dump,s),x&&(e.dump="&ref_"+v+e.dump)):(tA(e,t,e.dump),x&&(e.dump="&ref_"+v+" "+e.dump));else if(d==="[object Array]")a&&e.dump.length!==0?(e.noArrayIndent&&!c&&t>0?Qv(e,t-1,e.dump,s):Qv(e,t,e.dump,s),x&&(e.dump="&ref_"+v+e.dump)):(eA(e,t,e.dump),x&&(e.dump="&ref_"+v+" "+e.dump));else if(d==="[object String]")e.tag!=="?"&&KN(e,e.dump,t,l,f);else{if(d==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new qn("unacceptable kind of an object to dump "+d)}e.tag!==null&&e.tag!=="?"&&(p=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?p="!"+p:p.slice(0,18)==="tag:yaml.org,2002:"?p="!!"+p.slice(18):p="!<"+p+">",e.dump=p+" "+e.dump)}return!0}function rA(e,t){var r=[],a=[],s,l;for(Ah(e,r,a),s=0,l=a.length;s<l;s+=1)t.duplicates.push(r[a[s]]);t.usedDuplicates=new Array(l)}function Ah(e,t,r){var a,s,l;if(e!==null&&typeof e=="object")if(s=t.indexOf(e),s!==-1)r.indexOf(s)===-1&&r.push(s);else if(t.push(e),Array.isArray(e))for(s=0,l=e.length;s<l;s+=1)Ah(e[s],t,r);else for(a=Object.keys(e),s=0,l=a.length;s<l;s+=1)Ah(e[a[s]],t,r)}function aA(e,t){t=t||{};var r=new GN(t);r.noRefs||rA(e,r);var a=e;return r.replacer&&(a=r.replacer.call({"":a},"",a)),ka(r,0,a,!0,!0)?r.dump+`
`:""}var iA=aA,sA={dump:iA};function im(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var oA=Rn,lA=c1,uA=h1,cA=b1,dA=x1,fA=tm,pA=L1.load,hA=L1.loadAll,mA=sA.dump,gA=qn,yA={binary:T1,float:v1,map:p1,null:m1,pairs:N1,set:A1,timestamp:S1,bool:g1,int:y1,merge:k1,omap:E1,seq:f1,str:d1},vA=im("safeLoad","load"),bA=im("safeLoadAll","loadAll"),xA=im("safeDump","dump"),X1={Type:oA,Schema:lA,FAILSAFE_SCHEMA:uA,JSON_SCHEMA:cA,CORE_SCHEMA:dA,DEFAULT_SCHEMA:fA,load:pA,loadAll:hA,dump:mA,YAMLException:gA,types:yA,safeLoad:vA,safeLoadAll:bA,safeDump:xA},Ye=(e=>(e.Set="set",e.SetToValue="set_to_value",e.Contains="contains",e))(Ye||{});function K1(e){if(e==="string"||e==="boolean"||e==="integer"||e==="url")return{rangeType:"scalar",dataType:e};const t=e.match(/^(string|integer|number)\((\d*)\.\.(\d*)\)$/);if(t)return{rangeType:"scalar",dataType:t[1]==="number"?"integer":t[1],min:t[2]?Number(t[2]):void 0,max:t[3]?Number(t[3]):void 0};if(e==="string[]"||e==="integer[]")return{rangeType:"array",itemType:e==="string[]"?"string":"integer"};const r=e.match(/^(string|integer)\[(\d*)\.\.?(\d*)\]$/);if(r)return{rangeType:"array",itemType:r[1],minSize:r[2]?Number(r[2]):void 0,maxSize:r[3]?Number(r[3]):void 0};const a=e.match(/^\(([^)]+)\)\[(\d*)\.\.?(\d*)\]$/);if(a){const s=a[1];return{rangeType:"enum-array",options:s.includes("||")?s.split("||"):s.split(" / ").map(c=>c.trim()),minSize:a[2]?Number(a[2]):void 0,maxSize:a[3]?Number(a[3]):void 0}}return e.includes("||")?{rangeType:"enum",options:e.split("||")}:e.includes(" / ")?{rangeType:"enum",options:e.split(" / ").map(s=>s.trim())}:{rangeType:"pattern",regex:e}}function Hl(e){if(!e||typeof e!="object")return!1;const t=e;return Array.isArray(t.fields)&&t.fields.length>0&&Array.isArray(t.ruleSets)}function _A(e){const t=new Map;return e.forEach(r=>{r.conditions?.forEach(a=>{t.has(a.name)||t.set(a.name,{...a,dependencies:[]});const s=t.get(a.name);r.targets.forEach(l=>{if(a.name===l.name)return;t.has(l.name)||t.set(l.name,{...l,dependencies:[]});const c=t.get(l.name);s.dependencies.some(d=>d.name===l.name)||s.dependencies.push(c)})})}),t}function wA(e){const t=[],r=new Set,a=new Set;function s(l,c){if(a.has(l)){const f=c.indexOf(l),p=c.slice(f).concat(l);return t.push(`Circular dependency detected: ${p.join("  ")}`),!0}if(r.has(l))return!1;r.add(l),a.add(l),c.push(l);const d=e.get(l);if(d)for(const f of d.dependencies)s(f.name,[...c]);return a.delete(l),!1}return e.forEach((l,c)=>{r.has(c)||s(c,[])}),t}function SA(e,t){if(!e.conditions||!t.conditions||e.conditions.length===0||t.conditions.length===0)return!1;const r=new Set(e.conditions.map(c=>c.name)),a=new Set(t.conditions.map(c=>c.name)),s=e.targets.some(c=>a.has(c.name)),l=t.targets.some(c=>r.has(c.name));if(!s||!l)return!1;for(const c of e.targets){const d=t.conditions.find(f=>f.name===c.name);if(d&&c.not===d.not&&c.state===Ye.Set&&d.state===Ye.Set)for(const f of t.targets){const p=e.conditions.find(y=>y.name===f.name);if(p&&f.not!==p.not&&f.state===Ye.Set&&p.state===Ye.Set)return!0}}return!1}function kA(e,t){if(e.length===0)return[];const r=new Set;for(let a=0;a<t.length;a++)for(let s=a+1;s<t.length;s++)SA(t[a],t[s])&&(t[a].conditions?.forEach(l=>r.add(l.name)),t[a].targets.forEach(l=>r.add(l.name)),t[s].conditions?.forEach(l=>r.add(l.name)),t[s].targets.forEach(l=>r.add(l.name)));return e.filter(a=>{const s=a.match(/Circular dependency detected: (.+)/);return s?!s[1].split("  ").map(d=>d.trim()).every(d=>r.has(d)):!0})}function TA(e){const t=[],r=new Map;return e.forEach(a=>{const s=JSON.stringify((a.conditions||[]).map(l=>({name:l.name,state:l.state,not:l.not,value:l.state===Ye.SetToValue||l.state===Ye.Contains?l.value:void 0})));r.has(s)||r.set(s,[]),r.get(s).push(a)}),r.forEach(a=>{const s=new Map;a.forEach(l=>{l.targets.forEach(c=>{s.has(c.name)||s.set(c.name,[]),s.get(c.name).push(c)})}),s.forEach((l,c)=>{for(let d=0;d<l.length;d++)for(let f=d+1;f<l.length;f++){const p=l[d],y=l[f];p.not!==y.not?t.push(`Contradiction detected for field "${c}": cannot be both required (not=${p.not}) and not required (not=${y.not}) under the same conditions`):p.state!==y.state?t.push(`Contradiction detected for field "${c}": has conflicting states (${p.state} vs ${y.state}) under the same conditions`):p.state===Ye.SetToValue&&p.value!==y.value&&t.push(`Contradiction detected for field "${c}": has conflicting values ("${p.value}" vs "${y.value}") under the same conditions`)}})}),t}function EA(e){const t=[];return e.forEach((r,a)=>{const s=new Map,l=new Map;r.conditions?.forEach(c=>{const d=s.get(c.name);d?(d.state!==c.state||d.not!==c.not)&&t.push(`Contradiction detected in rule ${a+1} involving condition ${c.name}`):s.set(c.name,{state:c.state,not:c.not})}),r.targets.forEach(c=>{const d=l.get(c.name);d?(d.state!==c.state||d.not!==c.not)&&t.push(`Contradiction detected in rule ${a+1} involving target ${c.name}`):l.set(c.name,{state:c.state,not:c.not})})}),t}function NA(e){const t=[],r=[],a=new Map;return e.forEach((s,l)=>{if(!s.conditions||s.conditions.length===0)r.push({targets:s.targets,ruleIndex:l});else{const c=JSON.stringify(s.conditions.map(d=>({name:d.name,state:d.state,not:d.not,value:d.value})));a.has(c)||a.set(c,[]),a.get(c).push({targets:s.targets,ruleIndex:l})}}),r.length>1&&t.push(`Rules ${r.map(s=>s.ruleIndex+1).join(", ")} can be merged as they have no conditions.`),a.forEach(s=>{if(s.length>1){let l=!1;const c=new Map;s.forEach(d=>{d.targets.forEach(f=>{c.has(f.name)||c.set(f.name,[]),c.get(f.name).push({state:f.state,not:f.not,value:f.value})})}),c.forEach(d=>{for(let f=0;f<d.length;f++)for(let p=f+1;p<d.length;p++){const y=d[f],v=d[p];(y.not!==v.not||y.state!==v.state||(y.state===Ye.SetToValue||y.state===Ye.Contains)&&y.value!==v.value)&&(l=!0)}}),l||t.push(`Rules ${s.map(d=>d.ruleIndex+1).join(", ")} can be merged as they have identical conditions.`)}}),t}function AA(e){const t=_A(e),r=wA(t),a=kA(r,e),s=TA(e),l=EA(e),c=NA(e),d=[...a,...s,...l],f=[...c];return{isValid:d.length===0,errors:d,warnings:f}}function sm(e,t){const r=e.ruleSets??[],a=typeof t=="number"?r[t]:r.find(d=>d.name===t);if(!a)return[];const s=new Set,l=[];function c(d){if(d){if(s.has(d.name))throw new Error(`Circular inheritance detected in ruleset: ${d.name}`);if(s.add(d.name),d.extends){const f=r.find(p=>p.name===d.extends);f&&c(f)}d.rules&&l.push(...d.rules)}}return c(a),l}const CA=["field_check","field_uncheck","field_value_change","check_all","uncheck_all","ai_change"];class Q1{enabled;prefix;showTimestamp;historyCallback=null;currentTrigger={type:"rules_changed"};constructor(t={}){this.enabled=t.enabled??!1,this.prefix=t.prefix??"[Guido]",this.showTimestamp=t.showTimestamp??!0}getTimestamp(){return new Date().toISOString().split("T")[1].slice(0,-1)}formatMessage(t,r){const a=this.showTimestamp?`[${this.getTimestamp()}]`:"";return`${this.prefix}${a}[${t.toUpperCase()}] ${r}`}onFieldChanges(t){this.historyCallback=t}setTrigger(t){this.currentTrigger=t}getTrigger(){return this.currentTrigger}resetTrigger(){this.currentTrigger={type:"rules_changed"}}debug(t,...r){this.enabled&&console.debug(this.formatMessage("debug",t),...r)}info(t,...r){this.enabled&&console.info(this.formatMessage("info",t),...r)}warn(t,...r){this.enabled&&console.warn(this.formatMessage("warn",t),...r)}error(t,...r){this.enabled&&console.error(this.formatMessage("error",t),...r)}group(t){this.enabled&&console.group(this.formatMessage("info",t))}groupCollapsed(t){this.enabled&&console.groupCollapsed(this.formatMessage("info",t))}groupEnd(){this.enabled&&console.groupEnd()}table(t){this.enabled&&console.table(t)}logFieldChanges(t,r){const a=r||this.currentTrigger;this.historyCallback&&t.length>0&&this.historyCallback(a,t),!(!this.enabled||t.length===0)&&this.info(`applyRules [${a.type}${a.fieldName?`: ${a.fieldName}`:""}]: ${t.length} field(s) modified`)}logRuleEvaluation(t,r,a){}setEnabled(t){this.enabled=t}isEnabled(){return this.enabled}}const RA=new Q1({enabled:!1}),Sa=(e,t)=>{const r=t?e.targets.filter(c=>c.name===t):e.targets,a=e.conditions||[],s=r.map(c=>{const d=c.name,f=c.state,p=c.value??"",y=c.not?"not ":"";let v="";return f===Ye.Set?v=`'${d}' is required to be ${y}set`:f===Ye.SetToValue?v=`'${d}' is required to be ${y}set to the value '${p}'`:f===Ye.Contains?v=`'${d}' must ${y}contain '${p}'`:v="Unknown target state",v}),l=a.map(c=>{const d=c.name,f=c.state,p=c.value??"",y=c.not?"not ":"";let v="";return f===Ye.Set?v=`'${d}' is ${y}set`:f===Ye.SetToValue?v=`'${d}' is ${y}set to the value '${p}'`:f===Ye.Contains?v=`'${d}' ${y}contains '${p}'`:v="Unknown condition state",v});return l.length===0?s.join(" and ")+".":`If ${l.join(" and ")}, then ${s.join(" and ")}.`},jA=(e,t)=>{const r=e.trim(),a=x=>{const b=x.trim().replace(/^['"`]|['"`]$/g,"");if(!t||t.length===0)return b;const _=t.find(k=>k.toLowerCase()===b.toLowerCase());if(_)return _;const S=t.find(k=>k.toLowerCase().includes(b.toLowerCase())||b.toLowerCase().includes(k.toLowerCase()));return S||b},s=x=>{const b=x.trim(),_=[/^not\s+/i,/\s+is\s+not\s+/i,/\s+not\s+/i,/^disable[ds]?\s+/i,/\s+disabled$/i,/^uncheck(?:ed)?\s+/i,/\s+unchecked$/i];let S=!1,k=b;for(const Y of _)if(Y.test(k)){S=!0,k=k.replace(Y," ").trim();break}const j=/^['"`]?(.+?)['"`]?\s+is\s+required\s+to\s+be\s+(?:not\s+)?set\s+to\s+the\s+value\s+['"`](.+?)['"`]$/i,R=k.match(j);if(R)return{name:a(R[1]),state:Ye.SetToValue,value:R[2].trim(),not:S||/not\s+set/.test(k.toLowerCase())};const E=/^['"`]?(.+?)['"`]?\s+is\s+required\s+to\s+be\s+(not\s+)?set$/i,q=k.match(E);if(q)return{name:a(q[1]),state:Ye.Set,not:S||!!q[2]};const P=/^['"`]?(.+?)['"`]?\s+must\s+(not\s+)?contain\s+['"`](.+?)['"`]$/i,H=k.match(P);if(H)return{name:a(H[1]),state:Ye.Contains,value:H[3].trim(),not:S||!!H[2]};const I=/^['"`]?(.+?)['"`]?\s+is\s+(?:not\s+)?set\s+to\s+the\s+value\s+['"`](.+?)['"`]$/i,A=k.match(I);if(A)return{name:a(A[1]),state:Ye.SetToValue,value:A[2].trim(),not:S||/not\s+set/.test(k.toLowerCase())};const O=[/^['"`]?(.+?)['"`]?\s*(?:=|equals?)\s*['"`]?(.+?)['"`]?$/i,/^['"`]?(.+?)['"`]?\s+is\s+(?:set\s+)?to\s+['"`]?(.+?)['"`]?$/i];for(const Y of O){const ae=k.match(Y);if(ae)return{name:a(ae[1]),state:Ye.SetToValue,value:ae[2].trim().replace(/^['"`]|['"`]$/g,""),not:S}}const M=[/^['"`]?(.+?)['"`]?\s+contains?\s+['"`]?(.+?)['"`]?$/i,/^['"`]?(.+?)['"`]?\s+includes?\s+['"`]?(.+?)['"`]?$/i];for(const Y of M){const ae=k.match(Y);if(ae)return{name:a(ae[1]),state:Ye.Contains,value:ae[2].trim().replace(/^['"`]|['"`]$/g,""),not:S}}const F=[/^['"`]?(.+?)['"`]?\s+is\s+(?:set|enabled|checked|required|active)$/i,/^(?:set|enable|check|require|activate)\s+['"`]?(.+?)['"`]?$/i,/^['"`]?(.+?)['"`]?\s+(?:enabled|checked|set)$/i,/^['"`]?(.+?)['"`]?$/i];for(const Y of F){const ae=k.match(Y);if(ae){const ee=ae[1]?.trim();if(ee&&ee.length>0)return{name:a(ee),state:Ye.Set,not:S}}}return null},l=/^(?:if|when)\s+(.+?)\s*,?\s*(?:then|,)\s+(.+?)\.?$/i,c=r.match(l);if(c){const x=c[1],b=c[2],_=x.split(/\s+and\s+/i),S=b.split(/\s+and\s+/i),k=_.map(s).filter(R=>R!==null),j=S.map(s).filter(R=>R!==null);if(j.length>0)return{conditions:k.length>0?k:void 0,targets:j}}const d=/^['"`]?(.+?)['"`]?\s+(?:requires?|needs?)\s+['"`]?(.+?)['"`]?\.?$/i,f=r.match(d);if(f){const x=s(f[1]),b=s(f[2]);if(x&&b)return{conditions:[x],targets:[b]}}const p=/^['"`]?(.+?)['"`]?\s+depends?\s+on\s+['"`]?(.+?)['"`]?\.?$/i,y=r.match(p);if(y){const x=s(y[1]),b=s(y[2]);if(b&&x)return{conditions:[b],targets:[x]}}const v=r.toLowerCase();if(v.includes("always")||v.includes("required")){const x=r.match(/^(?:always\s+(?:set|enable|check|require)\s+)?['"`]?(.+?)['"`]?(?:\s+is\s+(?:always\s+)?(?:required|enabled|set))?\.?$/i);if(x){const b=s(x[1]);if(b)return{targets:[b]}}}return null},OA=(e,t=[],r={})=>{const{logger:a=RA,trigger:s,originalFields:l}=r,c=[...e],d={},f=[],p=new Map;if(c.forEach(y=>p.set(y.name,y)),s&&l)(s.type==="check_all"||s.type==="uncheck_all")&&l.forEach(y=>{const v=p.get(y.name);v&&y.checked!==v.checked&&f.push({fieldName:y.name,property:"checked",oldValue:y.checked,newValue:v.checked,reason:s.type==="check_all"?"Checked all fields":"Unchecked all fields"})});else if(s&&s.fieldName&&s.oldValue!==s.newValue&&["field_check","field_uncheck","field_value_change","ai_change"].includes(s.type)){const v=s.type==="ai_change",x=v?`AI: ${s.aiTool||"changed field"}`:"User action";f.push({fieldName:s.fieldName,property:s.type==="field_value_change"||v?"value":"checked",oldValue:s.oldValue,newValue:s.newValue,reason:x})}return t.forEach(y=>{const v=!y.conditions||y.conditions.every(x=>{const b=p.get(x.name),_=b?W1(b,x):MA(p,c,x);return x.not?!_:_});a.logRuleEvaluation(y.targets.map(x=>x.name).join(", "),v,y.conditions||[]),v&&y.targets.forEach(x=>{const b=p.get(x.name);if(b){const _=b.checked,S=b.value;eb(b,x);const k=Sa(y,x.name);d[x.name]=k,_!==b.checked&&f.push({fieldName:x.name,property:"checked",oldValue:_,newValue:b.checked,reason:k}),S!==b.value&&f.push({fieldName:x.name,property:"value",oldValue:S,newValue:b.value,reason:k})}else c.filter(S=>S.name.startsWith(x.name+".")).forEach(S=>{const k=S.checked,j=S.value;eb(S,x);const R=Sa(y,x.name);d[S.name]=R,k!==S.checked&&f.push({fieldName:S.name,property:"checked",oldValue:k,newValue:S.checked,reason:R}),j!==S.value&&f.push({fieldName:S.name,property:"value",oldValue:j,newValue:S.value,reason:R})})})}),a.logFieldChanges(f,s),{updatedFields:c,disabledReasons:d}},W1=(e,t)=>{const r=e.checked??!1;switch(t.state){case Ye.Set:return e.value!==""&&r;case Ye.SetToValue:return e.value===t.value&&r;case Ye.Contains:if(!t.value)return!1;if(Array.isArray(e.value))return e.value.includes(t.value)&&r;if(typeof e.value=="string"){try{const a=JSON.parse(e.value);if(Array.isArray(a))return a.includes(t.value)&&r}catch{}return e.value.includes(t.value)&&r}return!1;default:return!1}},MA=(e,t,r)=>{const a=r.name+".";return t.filter(l=>l.name.startsWith(a)).every(l=>W1(l,r))},eb=(e,t)=>{const r=!t.not;switch(t.state){case Ye.Set:e.checked=r;break;case Ye.SetToValue:r?(e.value=t.value,e.checked=!0):(e.value="",e.checked=!1);break;case Ye.Contains:if(r&&t.value){if(Array.isArray(e.value)){const a=e.value;a.includes(t.value)||(e.value=[...a,t.value])}else if(typeof e.value=="string")try{const a=JSON.parse(e.value);if(Array.isArray(a)){const s=a;s.includes(t.value)||(e.value=JSON.stringify([...s,t.value]))}else e.value.includes(t.value)||(e.value=e.value?`${e.value} ${t.value}`:t.value)}catch{e.value.includes(t.value)||(e.value=e.value?`${e.value} ${t.value}`:t.value)}else e.value=t.value;e.checked=!0}else if(!r&&t.value){if(Array.isArray(e.value)){const a=e.value;e.value=a.filter(s=>s!==t.value)}else if(typeof e.value=="string")try{const a=JSON.parse(e.value);if(Array.isArray(a)){const l=a.filter(c=>c!==t.value);e.value=JSON.stringify(l)}else e.value=e.value.replace(new RegExp(`\\s*${t.value}\\s*`,"g")," ").trim()}catch{e.value=e.value.replace(new RegExp(`\\s*${t.value}\\s*`,"g")," ").trim()}(e.value===""||e.value==="[]")&&(e.checked=!1)}break}},IA=(e,t)=>t.some(r=>r.targets.some(a=>a.name===e&&(a.state===Ye.Set||a.state===Ye.SetToValue||a.state===Ye.Contains)&&(!r.conditions||r.conditions.length===0))),Vp=e=>{if(!e||e.trim()==="")return"Any value";const t=K1(e);return $A(t,e)};function $A(e,t){switch(e.rangeType){case"scalar":return DA(e);case"array":return zA(e);case"enum":return LA(e);case"enum-array":return UA(e);case"pattern":return qA(e,t)}}function DA(e){const{dataType:t,min:r,max:a}=e;switch(t){case"string":return r!==void 0&&a!==void 0?r===a?`Text with exactly ${r} character${r!==1?"s":""}`:`Text between ${r} and ${a} characters`:r!==void 0?`Text with at least ${r} character${r!==1?"s":""}`:a!==void 0?`Text with up to ${a} character${a!==1?"s":""}`:"Any text";case"boolean":return"Yes or No (true/false)";case"url":return"A valid web address (URL)";case"integer":return r!==void 0&&a!==void 0?`A whole number between ${r} and ${a}`:r!==void 0?`A whole number of ${r} or more`:a!==void 0?`A whole number up to ${a}`:"A whole number";default:return"Any value"}}function zA(e){const{itemType:t,minSize:r,maxSize:a}=e,s=t==="string"?"text values":"whole numbers";return r!==void 0&&a!==void 0?r===a?`A list of exactly ${r} ${s}`:`A list of ${r} to ${a} ${s}`:r!==void 0?`A list of at least ${r} ${s}`:a!==void 0?`A list of up to ${a} ${s}`:`A list of ${s}`}function LA(e){const{options:t}=e;return t.length===0?"Any value":t.length===1?`Must be: ${t[0]}`:t.length===2?`Either "${t[0]}" or "${t[1]}"`:t.length<=5?`One of: ${t.join(", ")}`:`One of: ${t.slice(0,3).join(", ")}, ... (${t.length} options)`}function UA(e){const{options:t,minSize:r,maxSize:a}=e;let s;t.length===0?s="any values":t.length<=5?s=t.join(", "):s=`${t.slice(0,3).join(", ")}, ... (${t.length} options)`;let l="";return r!==void 0&&a!==void 0?r===a?l=` (exactly ${r})`:l=` (${r} to ${a} items)`:r!==void 0?l=` (at least ${r})`:a!==void 0&&(l=` (up to ${a})`),`Multiple of: ${s}${l}`}function qA(e,t){const{regex:r}=e,a=[{pattern:/^\^?\[.*@.*\]\*?\$?$|email/i,description:"A valid email address"},{pattern:/[0-9a-f]{8}.*[0-9a-f]{4}.*[0-9a-f]{4}/i,description:"A unique identifier (UUID/GUID)"},{pattern:/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|\[0-9\].*\[0-9\].*\[0-9\].*\[0-9\]/i,description:"An IP address"},{pattern:/\d{4}.*\d{2}.*\d{2}|yyyy|mm|dd/i,description:"A date"},{pattern:/^\^?\[a-z0-9\]/i,description:"Letters and numbers only"},{pattern:/^\^?\[a-z\]/i,description:"Letters only"},{pattern:/^\^?\[0-9\]|\^?\\d/i,description:"Numbers only"},{pattern:/#?[0-9a-f]{6}|#?[0-9a-f]{3}/i,description:"A color code (e.g., #FF5733)"},{pattern:/path|file|directory|folder/i,description:"A file or folder path"},{pattern:/\d+\.\d+\.\d+|version|semver/i,description:"A version number (e.g., 1.0.0)"}];for(const{pattern:c,description:d}of a)if(c.test(r)||c.test(t))return typeof d=="function"?d(t.match(c)):d;const s=r.match(/^\^?\[([^\]]+)\][+*]?\$?$/);if(s)return`Text containing only: ${s[1]}`;const l=r.match(/\{(\d+),?(\d*)?\}/);if(l){const c=l[1],d=l[2];return d?`Text matching a specific format (${c}-${d} characters)`:`Text matching a specific format (${c}+ characters)`}return"Text matching a specific format"}const Ch=(e,t)=>{const r=K1(t);return PA(e,r)},PA=(e,t)=>{const r=Array.isArray(e)?JSON.stringify(e):String(e??"");switch(t.rangeType){case"scalar":return BA(e,r,t);case"array":return FA(e,r,t);case"enum":return t.options.includes(r);case"enum-array":return VA(e,t);case"pattern":try{return new RegExp(t.regex).test(r)}catch{return!1}}};function BA(e,t,r){switch(r.dataType){case"string":return r.min!==void 0&&t.length<r.min||r.max!==void 0&&t.length>r.max?!1:typeof e=="string"||typeof e=="number"||typeof e=="boolean";case"boolean":return typeof e=="boolean"?!0:t==="true"||t==="false";case"url":try{return new URL(t),!0}catch{return!1}case"integer":{const a=typeof e=="number"?e:Number(t);return!(!Number.isInteger(a)||r.min!==void 0&&a<r.min||r.max!==void 0&&a>r.max)}default:return!0}}function FA(e,t,r){let a;if(Array.isArray(e))a=e;else try{const s=JSON.parse(t);if(!Array.isArray(s))return!1;a=s}catch{return!1}if(r.minSize!==void 0&&a.length<r.minSize||r.maxSize!==void 0&&a.length>r.maxSize)return!1;for(const s of a)if(r.itemType==="integer"){if(typeof s!="number"||!Number.isInteger(s))return!1}else if(r.itemType==="string"&&typeof s!="string")return!1;return!0}function VA(e,t){let r;if(Array.isArray(e))r=e;else if(typeof e=="string")try{const a=JSON.parse(e);if(!Array.isArray(a))return!1;r=a}catch{return!1}else return!1;if(t.minSize!==void 0&&r.length<t.minSize||t.maxSize!==void 0&&r.length>t.maxSize)return!1;for(const a of r){const s=String(a);if(!t.options.includes(s))return!1}return!0}const HA=e=>{const t=new Set;return e.forEach(r=>{const a=r.split(".");for(let s=1;s<=a.length;s++)t.add(a.slice(0,s).join("."))}),Array.from(t).sort()},Rh=(e,t="")=>Object.keys(e).reduce((r,a)=>{const s=t.length?t+".":"",l=e[a];return Array.isArray(l)?l.forEach((c,d)=>{typeof c=="object"&&c!==null?Object.assign(r,Rh(c,`${s}${a}.${d+1}`)):r[`${s}${a}.${d+1}`]=c}):typeof l=="object"&&l!==null?Object.assign(r,Rh(l,s+a)):r[s+a]=l,r},{}),GA=e=>{const t={},r=e.split(`
`);for(const a of r){const s=a.trim();if(!s||s.startsWith("#")||s.startsWith("//"))continue;const l=s.indexOf("=");if(l>0){const c=s.substring(0,l).trim();let d=s.substring(l+1).trim();(d.startsWith('"')&&d.endsWith('"')||d.startsWith("'")&&d.endsWith("'"))&&(d=d.slice(1,-1)),t[c]=d}}return t},jh=e=>e==null?"":typeof e=="string"?e:Array.isArray(e)?JSON.stringify(e):String(e),ZA=e=>e==null?!0:typeof e=="string"?e.trim()==="":Array.isArray(e)?e.length===0:!1,qi=()=>({name:"Default",description:"Default rule set",tags:[],rules:[]}),e2=(e,t)=>{const r=new Map(e.fields.map(d=>[d.name,d]));t.fields.forEach(d=>r.set(d.name,d));const a=Array.from(r.values()),s=e.ruleSets?.length?e.ruleSets:[qi()],l=t.ruleSets?.length?t.ruleSets:[qi()],c=s.map((d,f)=>{const p=l[f];if(!p)return d;const y=new Set(d.rules.map(x=>x.description)),v=p.rules.filter(x=>!y.has(x.description));return{...d,rules:[...d.rules,...v]}});return l.length>s.length&&c.push(...l.slice(s.length)),{...e,name:t.name||e.name,fileName:t.fileName||e.fileName,version:t.version||e.version,description:t.description||e.description,owner:t.owner||e.owner,fields:a,ruleSets:c}},ii={json:{mimeType:"application/json",description:"JSON Files",extensions:[".json"]},yaml:{mimeType:"application/x-yaml",description:"YAML Files",extensions:[".yaml",".yml"]},csv:{mimeType:"text/csv",description:"CSV Files",extensions:[".csv"]},text:{mimeType:"text/plain",description:"Text Files",extensions:[".txt"]}},ld=async(e,t,r)=>{if("showSaveFilePicker"in window)try{const s=await(await window.showSaveFilePicker({suggestedName:t,types:[{description:r.description,accept:{[r.mimeType]:r.extensions}}]})).createWritable();return await s.write(e),await s.close(),`File <code>${t}</code> saved successfully.`}catch(a){return console.error("Error saving file:",a),`Failed to save file <code>${t}</code>`}else try{const a=URL.createObjectURL(e),s=document.createElement("a");return s.href=a,s.download=t,s.click(),URL.revokeObjectURL(a),`File <code>${t}</code> downloaded successfully.`}catch(a){return console.error("Error downloading file:",a),`Failed to download file <code>${t}</code>`}},YA=e=>{const t=[",","	"," "];let r,a="";for(const s of t){if(r=o1.parse(e,{header:!0,delimiter:s,skipEmptyLines:!0}),!r.errors.length)return r.data;a+=`Failed to parse CSV with delimiter "${s}":
`,a+=r.errors.map(l=>l.message).join(`
`)+`

`}throw new Error(`Failed to parse CSV:
${a}`)},JA=e=>X1.load(e),t2=(e,t,r)=>{try{let a=e;r===".csv"?a=JSON.stringify(YA(e)):r===".yaml"||r===".yml"?a=JSON.stringify(JA(e)):(r===".env"||r===".properties"||r===".txt")&&(a=JSON.stringify(GA(e)));const s=QE(a),l=Rh(s);return{name:"",fields:Object.keys(l).map(d=>({name:d,value:Array.isArray(l[d])?JSON.stringify(l[d]):l[d],info:"",example:"",range:""})),fileName:t,version:"",description:"",owner:"",ruleSets:[{name:"Default",description:"Default rule set",tags:[],rules:[]}]}}catch(a){return console.error("Failed to parse settings:",a),null}},XA=e=>e.trim().startsWith("{")||e.trim().startsWith("[")?".json":e.includes(`:
`)||e.includes(": ")?".yaml":e.includes("=")?".properties":".json",tb=async(e,t)=>{let r,a="clipboard-settings",s=".json";if(t)r=t,s=XA(t);else if(e){const l=e.target.files?.[0];if(!l)return console.error("No file selected."),null;r=await l.text(),a=l.name,s=l.name.substring(l.name.lastIndexOf("."))}else return console.error("No input provided."),null;return t2(r,a,s)},KA=(e,t)=>{const r=t.includes(".")?t.substring(t.lastIndexOf(".")):".json";return t2(e,t,r)},QA=async(e,t)=>{const r=new Blob([e],{type:ii.text.mimeType});return ld(r,t,ii.text)},ud=async(e,t)=>{const r=JSON.stringify(e,null,2),a=new Blob([r],{type:ii.json.mimeType});return ld(a,t,ii.json)},nb=async(e,t,r=!1)=>{if(e.length===0)return"Please check some fields to save!";const a=e.reduce((c,d)=>{const f=d.name.split(".");let p=c;return f.forEach((y,v)=>{if(v===f.length-1)if(Array.isArray(d.value)&&d.value.every(x=>typeof x=="string"))p[y]=d.value;else if(typeof d.value=="string")try{const x=JSON.parse(d.value);Array.isArray(x)&&x.every(b=>typeof b=="string")?p[y]=x:p[y]=d.value}catch{p[y]=d.value}else p[y]=d.value;else{p[y]||(p[y]=isNaN(Number(f[v+1]))?{}:[]);const x=p[y];if(typeof x=="object"&&x!==null&&!Array.isArray(x))p=x;else if(Array.isArray(x)){const b=Number(f[v+1]);x[b]||(x[b]=isNaN(Number(f[v+2]))?{}:[]);const _=x[b];typeof _=="object"&&_!==null&&(p=_)}}}),c},{}),s=c=>{if(Array.isArray(c))return c.filter(d=>d!==null).map(d=>typeof d=="object"&&d!==null?s(d):d);if(typeof c=="object"&&c!==null){const d={};return Object.keys(c).forEach(f=>{const p=c[f];typeof p=="object"&&p!==null?d[f]=s(p):d[f]=p}),d}return c},l=s(a);return r?JSON.stringify(l,null,2):WA(l,t??"appsettings.instance.json")},WA=(e,t)=>{if(t.endsWith(".json"))return ud(e,t);if(t.endsWith(".csv"))return tC(e,t);if(t.endsWith(".yaml")||t.endsWith(".yml"))return eC(e,t);if(t.endsWith(".txt")||t.endsWith(".properties")||t.endsWith(".env")){const r=Object.entries(e).map(([a,s])=>`${a}=${typeof s=="object"?JSON.stringify(s):String(s)}`).join(`
`);return QA(r,t)}return Promise.resolve("File type not supported.")},eC=async(e,t)=>{const r=X1.dump(e),a=new Blob([r],{type:ii.yaml.mimeType});return ld(a,t,ii.yaml)},tC=async(e,t)=>{const r=Object.keys(e).map(l=>e[l]),a=o1.unparse(r),s=new Blob([a],{type:ii.csv.mimeType});return ld(s,t,ii.csv)},nC=e=>{const t=e.map(({checked:r,...a})=>a);ud(t,"appsettings.fields.json")},rC=e=>{ud(JSON.parse(JSON.stringify({rules:e})),"appsettings.rules.json")},aC=async e=>{if(!e)return console.error("No template to download."),"No template to download.";const t={...e,fields:e.fields.map(r=>({...r,value:r.value}))};return ud(JSON.parse(JSON.stringify(t)),(e.name||"unnamed")+".guido.json")},n2=U.createContext(void 0),Ea=()=>{const e=U.useContext(n2);if(!e)throw new Error("useAlert must be used within an AlertProvider");return e},r2=U.createContext(void 0),er=()=>{const e=U.useContext(r2);if(!e)throw new Error("useTemplateContext must be used within a TemplateProvider");return e},iC=()=>{const{template:e,fields:t,updateTemplate:r}=er(),{alert:a}=Ea(),s=async()=>{const p=t.filter(x=>x.checked),y=p.filter(x=>!Ch(x.value,x.range));if(y.length>0){a(`The following fields have invalid values: <br> ${y.map(x=>x.name).join(",<br>")} <br> <br> Please correct them before saving.`);return}const v=await nb(p,e?.fileName===""?void 0:e?.fileName);v&&a(v)},l=async p=>{const y=p.target,v=await tb(p);if(!v){a("Invalid file format. Please upload a valid settings file.");return}d(v),y.value=""},c=async()=>{if(!navigator.clipboard){a("Clipboard API not available");return}try{const p=await navigator.clipboard.readText(),y=await tb(null,p);if(!y){a("Invalid clipboard content. Please copy valid settings data.");return}d(y)}catch(p){console.error("Failed to read clipboard:",p),a("Failed to read clipboard. Please try again.")}},d=p=>{if(!p)return;const y=t.map(j=>{const R=p.fields.find(E=>E.name===j.name);return R?{...j,value:R.value,checked:!0}:j}),v=p.fields.filter(j=>!t.some(R=>R.name===j.name)).map(j=>({...j,checked:!0})),x=[...y,...v],b={...e,fileName:p.fileName,fields:x};r(b);const _=y.filter(j=>p.fields.some(R=>R.name===j.name)).map(j=>j.name).join("<br>"),S=v.map(j=>j.name).join("<br>");let k="Settings imported successfully!<br>";S&&(k+=`<br>New fields added:<br>${S}<br>`),_&&(k+=`<br>Updated fields:<br>${_}`),a(k)},f=async()=>{if(!navigator.clipboard){a("Clipboard API not available");return}const p=t.filter(x=>x.checked),y=p.filter(x=>!Ch(x.value,x.range));if(y.length>0){a(`The following fields have invalid values: <br> ${y.map(x=>x.name).join(",<br>")} <br> <br> Please correct them before copying.`);return}const v=await nb(p,e?.fileName===""?void 0:e?.fileName,!0);if(typeof v=="string"&&!v.startsWith("Settings"))try{await navigator.clipboard.writeText(v),a("Settings copied to clipboard successfully!")}catch(x){console.error("Failed to copy to clipboard:",x),a("Failed to copy to clipboard. Please try again.")}else a(v||"Failed to generate settings")};return h.jsx("div",{className:"mb-4",children:h.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4",children:[h.jsxs("div",{className:"contents sm:flex sm:items-center sm:gap-2",children:[h.jsx(sd,{label:"Import Settings",onChange:p=>void l(p),formats:".json,.csv,.yml,.yaml,.txt,.properties,.env"}),h.jsx(s1,{onClick:()=>void c(),showLabel:!0})]}),h.jsxs("div",{className:"contents sm:flex sm:items-center sm:gap-2",children:[h.jsx(i1,{onClick:()=>void f(),showLabel:!0}),h.jsx(Xe,{onClick:()=>void s(),children:"Download"})]})]})})},a2=bn.createContext(void 0),Ws=()=>{const e=U.useContext(a2);if(!e)throw new Error("useFieldContext must be used within a FieldProvider");return e},i2=U.createContext(void 0),Pr=()=>{const e=U.useContext(i2);if(!e)throw new Error("useAppContext must be used within an AppProvider");return e},s2=U.createContext(void 0);function Br(){const e=U.useContext(s2);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e}const o2=U.createContext(void 0),om=()=>{const e=U.useContext(o2);if(e===void 0)throw new Error("useEasterEgg must be used within an EasterEggProvider");return e},sC=()=>{const{alert:e,confirm:t}=Ea(),{isExpertMode:r}=Pr(),[a,s]=U.useState(!1),{template:l,updateTemplate:c,fields:d,ruleSets:f,loadTemplateFromFile:p,removeTemplate:y,isEmpty:v}=er(),[x,b]=U.useState({name:"",fileName:"",version:"",description:"",owner:"",application:"",docs:"",command:"",fields:[],ruleSets:[]}),_=()=>{if(l){if(!navigator.clipboard){e("Clipboard API not available");return}if(!l.command){e("No command to copy");return}navigator.clipboard.writeText(l.command).then(()=>{e("Command copied to clipboard")}).catch(H=>{console.error("Failed to copy command: ",H)})}},S=H=>{const{name:I,value:A}=H.target;b(O=>({...O,[I]:A}))},k=()=>{c({...x,fields:d,ruleSets:f}),s(!1)},j=()=>{l&&b(l),s(!a)},R=()=>{t("Are you sure you want to remove this template?",y)},E=async()=>{if(l)try{const H=await aC(l);H&&e(H)}catch(H){console.error("Failed to download template:",H),e("An error occurred while downloading the template.")}},q=async()=>{if(l){if(!navigator.clipboard){e("Clipboard API not available");return}try{const H=JSON.stringify(l,null,2);await navigator.clipboard.writeText(H),e("Template copied to clipboard successfully!")}catch(H){console.error("Failed to copy template:",H),e("Failed to copy template to clipboard. Please try again.")}}},P=async()=>{if(!navigator.clipboard){e("Clipboard API not available");return}try{const H=await navigator.clipboard.readText(),I=JSON.parse(H);if(!I.fields||!Array.isArray(I.fields)){e("Invalid template format in clipboard. Please copy a valid Guido template.");return}c(I),e("Template imported from clipboard successfully!")}catch(H){console.error("Failed to read clipboard:",H),H instanceof SyntaxError?e("Invalid JSON in clipboard. Please copy a valid Guido template."):e("Failed to read clipboard. Please try again.")}};return l?h.jsxs("div",{className:"my-4 p-6 border border-strong rounded-lg bg-surface-2 shadow-sm",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4",children:[h.jsx("h2",{className:"text-2xl font-bold mb-2 sm:mb-0 text-text-primary",children:a?"Edit Template":l.name}),h.jsxs("div",{className:"flex gap-4",children:[!a&&!v()&&h.jsx(Xe,{type:"error-text",onClick:()=>R(),children:"Remove"}),r&&h.jsxs(h.Fragment,{children:[h.jsx(Xe,{type:"primary-text",onClick:()=>j(),children:a?"Cancel":"Edit"}),a&&h.jsx(Xe,{type:"primary",onClick:()=>k(),children:"Save"})]})]})]}),a?h.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[h.jsxs("label",{htmlFor:"template-name",className:"text-text-primary",children:[h.jsx("strong",{children:"Name:"}),h.jsx("input",{id:"template-name",type:"text",name:"name",value:x.name,onChange:S,className:"mt-1 p-2 border rounded-default w-full bg-surface-0 text-text-primary"})]}),h.jsxs("label",{htmlFor:"template-application",className:"text-text-primary",children:[h.jsx("strong",{children:"Application:"}),h.jsx("input",{id:"template-application",type:"text",name:"application",value:x.application,onChange:S,className:"mt-1 p-2 border rounded-default w-full bg-surface-0 text-text-primary"})]}),h.jsxs("label",{htmlFor:"template-version",className:"text-text-primary",children:[h.jsx("strong",{children:"Version:"}),h.jsx("input",{id:"template-version",type:"text",name:"version",value:x.version,onChange:S,className:"mt-1 p-2 border rounded-default w-full bg-surface-0 text-text-primary"})]}),h.jsxs("label",{htmlFor:"template-owner",className:"text-text-primary",children:[h.jsx("strong",{children:"Owner:"}),h.jsx("input",{id:"template-owner",type:"text",name:"owner",value:x.owner,onChange:S,className:"mt-1 p-2 border rounded-default w-full bg-surface-0 text-text-primary"})]}),h.jsxs("label",{htmlFor:"template-fileName",className:"text-text-primary",children:[h.jsx("strong",{children:"File Name:"}),h.jsx("input",{id:"template-fileName",type:"text",name:"fileName",value:x.fileName,onChange:S,className:"mt-1 p-2 border rounded-default w-full bg-surface-0 text-text-primary"})]}),h.jsxs("label",{htmlFor:"template-description",className:"text-text-primary",children:[h.jsx("strong",{children:"Description:"}),h.jsx("textarea",{id:"template-description",name:"description",value:x.description,onChange:S,className:"mt-1 p-2 border rounded-default w-full h-24 bg-surface-0 text-text-primary"})]}),h.jsxs("label",{htmlFor:"template-command",className:"text-text-primary",children:[h.jsx("strong",{children:"Command:"}),h.jsx("input",{id:"template-command",type:"text",name:"command",value:x.command,onChange:S,className:"mt-1 p-2 border rounded-default w-full bg-surface-0 text-text-primary"})]}),h.jsxs("label",{htmlFor:"template-docs",className:"text-text-primary",children:[h.jsx("strong",{children:"Documentation URL:"}),h.jsx("input",{id:"template-docs",type:"url",name:"docs",value:x.docs||"",onChange:S,placeholder:"https://docs.example.com/...",className:"mt-1 p-2 border rounded-default w-full bg-surface-0 text-text-primary"})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex flex-wrap justify-between mb-4 pb-4 border-b border-strong",children:[l.application&&h.jsxs("p",{className:"w-full sm:w-auto text-text-primary",children:[h.jsx("strong",{children:"Application:"})," ",l.application]}),h.jsxs("p",{className:"w-full sm:w-auto text-text-primary",children:[h.jsx("strong",{children:"Version:"})," ",l.version]}),h.jsxs("p",{className:"w-full sm:w-auto text-text-primary",children:[h.jsx("strong",{children:"Owner:"})," ",l.owner]}),h.jsxs("p",{className:"w-full sm:w-auto text-text-primary",children:[h.jsx("strong",{children:"File Name:"})," ",l.fileName]})]}),h.jsx("div",{className:"pb-4 mb-4 border-b border-strong",children:h.jsxs("p",{className:"text-text-primary",children:[h.jsx("strong",{children:"Description:"})," ",l.description]})}),l.command&&h.jsxs("div",{className:"mb-2",children:[h.jsx("strong",{className:"text-text-primary",children:"Command: "}),h.jsx("code",{onClick:_,style:{cursor:"pointer"},className:"text-text-primary bg-surface-1 px-1 rounded",children:l.command})]}),l.docs&&h.jsxs("div",{className:"mb-4",children:[h.jsx("strong",{className:"text-text-primary",children:"Documentation: "}),h.jsx("a",{href:l.docs,target:"_blank",rel:"noopener noreferrer",className:"text-primary-500 hover:text-primary-600 underline",children:l.docs})]}),r&&h.jsx("div",{className:"my-4",children:h.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4",children:[h.jsxs("div",{className:"contents sm:flex sm:items-center sm:gap-2",children:[h.jsx(sd,{label:"Load Template",onChange:p}),h.jsx(s1,{onClick:()=>void P(),showLabel:!0})]}),h.jsxs("div",{className:"contents sm:flex sm:items-center sm:gap-2",children:[h.jsx(i1,{onClick:()=>void q(),showLabel:!0}),h.jsx(Xe,{onClick:()=>void E(),size:"small",children:"Download"})]})]})})]})]}):h.jsx("div",{className:"my-4 p-6 border border-strong rounded-lg bg-surface-2 shadow-sm",children:h.jsx("p",{className:"text-center text-text-primary",children:"No template selected"})})},l2=U.createContext(void 0),rb={openai:"OpenAI",anthropic:"Anthropic",google:"Google Gemini",ollama:"Ollama (Local)"},oC={openai:"sk-...",anthropic:"sk-ant-...",google:"AIza...",ollama:""},Fi=()=>{const e=U.useContext(l2);if(!e)throw new Error("useAI must be used within an AIProvider");return e};function wc(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Hp={exports:{}};var ab;function lC(){return ab||(ab=1,(function(e,t){(function(r){e.exports=r()})(function(){return(function r(a,s,l){function c(p,y){if(!s[p]){if(!a[p]){var v=typeof wc=="function"&&wc;if(!y&&v)return v(p,!0);if(d)return d(p,!0);var x=new Error("Cannot find module '"+p+"'");throw x.code="MODULE_NOT_FOUND",x}var b=s[p]={exports:{}};a[p][0].call(b.exports,function(_){var S=a[p][1][_];return c(S||_)},b,b.exports,r,a,s,l)}return s[p].exports}for(var d=typeof wc=="function"&&wc,f=0;f<l.length;f++)c(l[f]);return c})({1:[function(r,a,s){(function(l){var c=l.MutationObserver||l.WebKitMutationObserver,d;if(c){var f=0,p=new c(_),y=l.document.createTextNode("");p.observe(y,{characterData:!0}),d=function(){y.data=f=++f%2}}else if(!l.setImmediate&&typeof l.MessageChannel<"u"){var v=new l.MessageChannel;v.port1.onmessage=_,d=function(){v.port2.postMessage(0)}}else"document"in l&&"onreadystatechange"in l.document.createElement("script")?d=function(){var k=l.document.createElement("script");k.onreadystatechange=function(){_(),k.onreadystatechange=null,k.parentNode.removeChild(k),k=null},l.document.documentElement.appendChild(k)}:d=function(){setTimeout(_,0)};var x,b=[];function _(){x=!0;for(var k,j,R=b.length;R;){for(j=b,b=[],k=-1;++k<R;)j[k]();R=b.length}x=!1}a.exports=S;function S(k){b.push(k)===1&&!x&&d()}}).call(this,typeof qs<"u"?qs:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,a,s){var l=r(1);function c(){}var d={},f=["REJECTED"],p=["FULFILLED"],y=["PENDING"];a.exports=v;function v(P){if(typeof P!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,P!==c&&S(this,P)}v.prototype.catch=function(P){return this.then(null,P)},v.prototype.then=function(P,H){if(typeof P!="function"&&this.state===p||typeof H!="function"&&this.state===f)return this;var I=new this.constructor(c);if(this.state!==y){var A=this.state===p?P:H;b(I,A,this.outcome)}else this.queue.push(new x(I,P,H));return I};function x(P,H,I){this.promise=P,typeof H=="function"&&(this.onFulfilled=H,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}x.prototype.callFulfilled=function(P){d.resolve(this.promise,P)},x.prototype.otherCallFulfilled=function(P){b(this.promise,this.onFulfilled,P)},x.prototype.callRejected=function(P){d.reject(this.promise,P)},x.prototype.otherCallRejected=function(P){b(this.promise,this.onRejected,P)};function b(P,H,I){l(function(){var A;try{A=H(I)}catch(O){return d.reject(P,O)}A===P?d.reject(P,new TypeError("Cannot resolve promise with itself")):d.resolve(P,A)})}d.resolve=function(P,H){var I=k(_,H);if(I.status==="error")return d.reject(P,I.value);var A=I.value;if(A)S(P,A);else{P.state=p,P.outcome=H;for(var O=-1,M=P.queue.length;++O<M;)P.queue[O].callFulfilled(H)}return P},d.reject=function(P,H){P.state=f,P.outcome=H;for(var I=-1,A=P.queue.length;++I<A;)P.queue[I].callRejected(H);return P};function _(P){var H=P&&P.then;if(P&&(typeof P=="object"||typeof P=="function")&&typeof H=="function")return function(){H.apply(P,arguments)}}function S(P,H){var I=!1;function A(Y){I||(I=!0,d.reject(P,Y))}function O(Y){I||(I=!0,d.resolve(P,Y))}function M(){H(O,A)}var F=k(M);F.status==="error"&&A(F.value)}function k(P,H){var I={};try{I.value=P(H),I.status="success"}catch(A){I.status="error",I.value=A}return I}v.resolve=j;function j(P){return P instanceof this?P:d.resolve(new this(c),P)}v.reject=R;function R(P){var H=new this(c);return d.reject(H,P)}v.all=E;function E(P){var H=this;if(Object.prototype.toString.call(P)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=P.length,A=!1;if(!I)return this.resolve([]);for(var O=new Array(I),M=0,F=-1,Y=new this(c);++F<I;)ae(P[F],F);return Y;function ae(ee,de){H.resolve(ee).then(J,function(te){A||(A=!0,d.reject(Y,te))});function J(te){O[de]=te,++M===I&&!A&&(A=!0,d.resolve(Y,O))}}}v.race=q;function q(P){var H=this;if(Object.prototype.toString.call(P)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=P.length,A=!1;if(!I)return this.resolve([]);for(var O=-1,M=new this(c);++O<I;)F(P[O]);return M;function F(Y){H.resolve(Y).then(function(ae){A||(A=!0,d.resolve(M,ae))},function(ae){A||(A=!0,d.reject(M,ae))})}}},{1:1}],3:[function(r,a,s){(function(l){typeof l.Promise!="function"&&(l.Promise=r(2))}).call(this,typeof qs<"u"?qs:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,a,s){var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z};function c(z,W){if(!(z instanceof W))throw new TypeError("Cannot call a class as a function")}function d(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var f=d();function p(){try{if(!f||!f.open)return!1;var z=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),W=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!z||W)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function y(z,W){z=z||[],W=W||{};try{return new Blob(z,W)}catch(ie){if(ie.name!=="TypeError")throw ie;for(var B=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,oe=new B,ce=0;ce<z.length;ce+=1)oe.append(z[ce]);return oe.getBlob(W.type)}}typeof Promise>"u"&&r(3);var v=Promise;function x(z,W){W&&z.then(function(B){W(null,B)},function(B){W(B)})}function b(z,W,B){typeof W=="function"&&z.then(W),typeof B=="function"&&z.catch(B)}function _(z){return typeof z!="string"&&(console.warn(z+" used as a key, but it is not a string."),z=String(z)),z}function S(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var k="local-forage-detect-blob-support",j=void 0,R={},E=Object.prototype.toString,q="readonly",P="readwrite";function H(z){for(var W=z.length,B=new ArrayBuffer(W),oe=new Uint8Array(B),ce=0;ce<W;ce++)oe[ce]=z.charCodeAt(ce);return B}function I(z){return new v(function(W){var B=z.transaction(k,P),oe=y([""]);B.objectStore(k).put(oe,"key"),B.onabort=function(ce){ce.preventDefault(),ce.stopPropagation(),W(!1)},B.oncomplete=function(){var ce=navigator.userAgent.match(/Chrome\/(\d+)/),ie=navigator.userAgent.match(/Edge\//);W(ie||!ce||parseInt(ce[1],10)>=43)}}).catch(function(){return!1})}function A(z){return typeof j=="boolean"?v.resolve(j):I(z).then(function(W){return j=W,j})}function O(z){var W=R[z.name],B={};B.promise=new v(function(oe,ce){B.resolve=oe,B.reject=ce}),W.deferredOperations.push(B),W.dbReady?W.dbReady=W.dbReady.then(function(){return B.promise}):W.dbReady=B.promise}function M(z){var W=R[z.name],B=W.deferredOperations.pop();if(B)return B.resolve(),B.promise}function F(z,W){var B=R[z.name],oe=B.deferredOperations.pop();if(oe)return oe.reject(W),oe.promise}function Y(z,W){return new v(function(B,oe){if(R[z.name]=R[z.name]||L(),z.db)if(W)O(z),z.db.close();else return B(z.db);var ce=[z.name];W&&ce.push(z.version);var ie=f.open.apply(f,ce);W&&(ie.onupgradeneeded=function(_e){var Ee=ie.result;try{Ee.createObjectStore(z.storeName),_e.oldVersion<=1&&Ee.createObjectStore(k)}catch(Ce){if(Ce.name==="ConstraintError")console.warn('The database "'+z.name+'" has been upgraded from version '+_e.oldVersion+" to version "+_e.newVersion+', but the storage "'+z.storeName+'" already exists.');else throw Ce}}),ie.onerror=function(_e){_e.preventDefault(),oe(ie.error)},ie.onsuccess=function(){var _e=ie.result;_e.onversionchange=function(Ee){Ee.target.close()},B(_e),M(z)}})}function ae(z){return Y(z,!1)}function ee(z){return Y(z,!0)}function de(z,W){if(!z.db)return!0;var B=!z.db.objectStoreNames.contains(z.storeName),oe=z.version<z.db.version,ce=z.version>z.db.version;if(oe&&(z.version!==W&&console.warn('The database "'+z.name+`" can't be downgraded from version `+z.db.version+" to version "+z.version+"."),z.version=z.db.version),ce||B){if(B){var ie=z.db.version+1;ie>z.version&&(z.version=ie)}return!0}return!1}function J(z){return new v(function(W,B){var oe=new FileReader;oe.onerror=B,oe.onloadend=function(ce){var ie=btoa(ce.target.result||"");W({__local_forage_encoded_blob:!0,data:ie,type:z.type})},oe.readAsBinaryString(z)})}function te(z){var W=H(atob(z.data));return y([W],{type:z.type})}function he(z){return z&&z.__local_forage_encoded_blob}function ve(z){var W=this,B=W._initReady().then(function(){var oe=R[W._dbInfo.name];if(oe&&oe.dbReady)return oe.dbReady});return b(B,z,z),B}function se(z){O(z);for(var W=R[z.name],B=W.forages,oe=0;oe<B.length;oe++){var ce=B[oe];ce._dbInfo.db&&(ce._dbInfo.db.close(),ce._dbInfo.db=null)}return z.db=null,ae(z).then(function(ie){return z.db=ie,de(z)?ee(z):ie}).then(function(ie){z.db=W.db=ie;for(var _e=0;_e<B.length;_e++)B[_e]._dbInfo.db=ie}).catch(function(ie){throw F(z,ie),ie})}function N(z,W,B,oe){oe===void 0&&(oe=1);try{var ce=z.db.transaction(z.storeName,W);B(null,ce)}catch(ie){if(oe>0&&(!z.db||ie.name==="InvalidStateError"||ie.name==="NotFoundError"))return v.resolve().then(function(){if(!z.db||ie.name==="NotFoundError"&&!z.db.objectStoreNames.contains(z.storeName)&&z.version<=z.db.version)return z.db&&(z.version=z.db.version+1),ee(z)}).then(function(){return se(z).then(function(){N(z,W,B,oe-1)})}).catch(B);B(ie)}}function L(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function V(z){var W=this,B={db:null};if(z)for(var oe in z)B[oe]=z[oe];var ce=R[B.name];ce||(ce=L(),R[B.name]=ce),ce.forages.push(W),W._initReady||(W._initReady=W.ready,W.ready=ve);var ie=[];function _e(){return v.resolve()}for(var Ee=0;Ee<ce.forages.length;Ee++){var Ce=ce.forages[Ee];Ce!==W&&ie.push(Ce._initReady().catch(_e))}var Ne=ce.forages.slice(0);return v.all(ie).then(function(){return B.db=ce.db,ae(B)}).then(function(je){return B.db=je,de(B,W._defaultConfig.version)?ee(B):je}).then(function(je){B.db=ce.db=je,W._dbInfo=B;for(var ze=0;ze<Ne.length;ze++){var et=Ne[ze];et!==W&&(et._dbInfo.db=B.db,et._dbInfo.version=B.version)}})}function G(z,W){var B=this;z=_(z);var oe=new v(function(ce,ie){B.ready().then(function(){N(B._dbInfo,q,function(_e,Ee){if(_e)return ie(_e);try{var Ce=Ee.objectStore(B._dbInfo.storeName),Ne=Ce.get(z);Ne.onsuccess=function(){var je=Ne.result;je===void 0&&(je=null),he(je)&&(je=te(je)),ce(je)},Ne.onerror=function(){ie(Ne.error)}}catch(je){ie(je)}})}).catch(ie)});return x(oe,W),oe}function X(z,W){var B=this,oe=new v(function(ce,ie){B.ready().then(function(){N(B._dbInfo,q,function(_e,Ee){if(_e)return ie(_e);try{var Ce=Ee.objectStore(B._dbInfo.storeName),Ne=Ce.openCursor(),je=1;Ne.onsuccess=function(){var ze=Ne.result;if(ze){var et=ze.value;he(et)&&(et=te(et));var st=z(et,ze.key,je++);st!==void 0?ce(st):ze.continue()}else ce()},Ne.onerror=function(){ie(Ne.error)}}catch(ze){ie(ze)}})}).catch(ie)});return x(oe,W),oe}function D(z,W,B){var oe=this;z=_(z);var ce=new v(function(ie,_e){var Ee;oe.ready().then(function(){return Ee=oe._dbInfo,E.call(W)==="[object Blob]"?A(Ee.db).then(function(Ce){return Ce?W:J(W)}):W}).then(function(Ce){N(oe._dbInfo,P,function(Ne,je){if(Ne)return _e(Ne);try{var ze=je.objectStore(oe._dbInfo.storeName);Ce===null&&(Ce=void 0);var et=ze.put(Ce,z);je.oncomplete=function(){Ce===void 0&&(Ce=null),ie(Ce)},je.onabort=je.onerror=function(){var st=et.error?et.error:et.transaction.error;_e(st)}}catch(st){_e(st)}})}).catch(_e)});return x(ce,B),ce}function ne(z,W){var B=this;z=_(z);var oe=new v(function(ce,ie){B.ready().then(function(){N(B._dbInfo,P,function(_e,Ee){if(_e)return ie(_e);try{var Ce=Ee.objectStore(B._dbInfo.storeName),Ne=Ce.delete(z);Ee.oncomplete=function(){ce()},Ee.onerror=function(){ie(Ne.error)},Ee.onabort=function(){var je=Ne.error?Ne.error:Ne.transaction.error;ie(je)}}catch(je){ie(je)}})}).catch(ie)});return x(oe,W),oe}function le(z){var W=this,B=new v(function(oe,ce){W.ready().then(function(){N(W._dbInfo,P,function(ie,_e){if(ie)return ce(ie);try{var Ee=_e.objectStore(W._dbInfo.storeName),Ce=Ee.clear();_e.oncomplete=function(){oe()},_e.onabort=_e.onerror=function(){var Ne=Ce.error?Ce.error:Ce.transaction.error;ce(Ne)}}catch(Ne){ce(Ne)}})}).catch(ce)});return x(B,z),B}function Se(z){var W=this,B=new v(function(oe,ce){W.ready().then(function(){N(W._dbInfo,q,function(ie,_e){if(ie)return ce(ie);try{var Ee=_e.objectStore(W._dbInfo.storeName),Ce=Ee.count();Ce.onsuccess=function(){oe(Ce.result)},Ce.onerror=function(){ce(Ce.error)}}catch(Ne){ce(Ne)}})}).catch(ce)});return x(B,z),B}function Ae(z,W){var B=this,oe=new v(function(ce,ie){if(z<0){ce(null);return}B.ready().then(function(){N(B._dbInfo,q,function(_e,Ee){if(_e)return ie(_e);try{var Ce=Ee.objectStore(B._dbInfo.storeName),Ne=!1,je=Ce.openKeyCursor();je.onsuccess=function(){var ze=je.result;if(!ze){ce(null);return}z===0||Ne?ce(ze.key):(Ne=!0,ze.advance(z))},je.onerror=function(){ie(je.error)}}catch(ze){ie(ze)}})}).catch(ie)});return x(oe,W),oe}function Te(z){var W=this,B=new v(function(oe,ce){W.ready().then(function(){N(W._dbInfo,q,function(ie,_e){if(ie)return ce(ie);try{var Ee=_e.objectStore(W._dbInfo.storeName),Ce=Ee.openKeyCursor(),Ne=[];Ce.onsuccess=function(){var je=Ce.result;if(!je){oe(Ne);return}Ne.push(je.key),je.continue()},Ce.onerror=function(){ce(Ce.error)}}catch(je){ce(je)}})}).catch(ce)});return x(B,z),B}function $e(z,W){W=S.apply(this,arguments);var B=this.config();z=typeof z!="function"&&z||{},z.name||(z.name=z.name||B.name,z.storeName=z.storeName||B.storeName);var oe=this,ce;if(!z.name)ce=v.reject("Invalid arguments");else{var ie=z.name===B.name&&oe._dbInfo.db,_e=ie?v.resolve(oe._dbInfo.db):ae(z).then(function(Ee){var Ce=R[z.name],Ne=Ce.forages;Ce.db=Ee;for(var je=0;je<Ne.length;je++)Ne[je]._dbInfo.db=Ee;return Ee});z.storeName?ce=_e.then(function(Ee){if(Ee.objectStoreNames.contains(z.storeName)){var Ce=Ee.version+1;O(z);var Ne=R[z.name],je=Ne.forages;Ee.close();for(var ze=0;ze<je.length;ze++){var et=je[ze];et._dbInfo.db=null,et._dbInfo.version=Ce}var st=new v(function(ht,Zt){var At=f.open(z.name,Ce);At.onerror=function(Hn){var Oa=At.result;Oa.close(),Zt(Hn)},At.onupgradeneeded=function(){var Hn=At.result;Hn.deleteObjectStore(z.storeName)},At.onsuccess=function(){var Hn=At.result;Hn.close(),ht(Hn)}});return st.then(function(ht){Ne.db=ht;for(var Zt=0;Zt<je.length;Zt++){var At=je[Zt];At._dbInfo.db=ht,M(At._dbInfo)}}).catch(function(ht){throw(F(z,ht)||v.resolve()).catch(function(){}),ht})}}):ce=_e.then(function(Ee){O(z);var Ce=R[z.name],Ne=Ce.forages;Ee.close();for(var je=0;je<Ne.length;je++){var ze=Ne[je];ze._dbInfo.db=null}var et=new v(function(st,ht){var Zt=f.deleteDatabase(z.name);Zt.onerror=function(){var At=Zt.result;At&&At.close(),ht(Zt.error)},Zt.onblocked=function(){console.warn('dropInstance blocked for database "'+z.name+'" until all open connections are closed')},Zt.onsuccess=function(){var At=Zt.result;At&&At.close(),st(At)}});return et.then(function(st){Ce.db=st;for(var ht=0;ht<Ne.length;ht++){var Zt=Ne[ht];M(Zt._dbInfo)}}).catch(function(st){throw(F(z,st)||v.resolve()).catch(function(){}),st})})}return x(ce,W),ce}var Oe={_driver:"asyncStorage",_initStorage:V,_support:p(),iterate:X,getItem:G,setItem:D,removeItem:ne,clear:le,length:Se,key:Ae,keys:Te,dropInstance:$e};function Me(){return typeof openDatabase=="function"}var Re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ue="~~local_forage_type~",wt=/^~~local_forage_type~([^~]+)~/,Pe="__lfsc__:",nt=Pe.length,tn="arbf",Tn="blob",xn="si08",pt="ui08",rt="uic8",_n="si16",Mt="si32",Gt="ur16",nn="ui32",Ar="fl32",Cr="fl64",Vn=nt+tn.length,wn=Object.prototype.toString;function _t(z){var W=z.length*.75,B=z.length,oe,ce=0,ie,_e,Ee,Ce;z[z.length-1]==="="&&(W--,z[z.length-2]==="="&&W--);var Ne=new ArrayBuffer(W),je=new Uint8Array(Ne);for(oe=0;oe<B;oe+=4)ie=Re.indexOf(z[oe]),_e=Re.indexOf(z[oe+1]),Ee=Re.indexOf(z[oe+2]),Ce=Re.indexOf(z[oe+3]),je[ce++]=ie<<2|_e>>4,je[ce++]=(_e&15)<<4|Ee>>2,je[ce++]=(Ee&3)<<6|Ce&63;return Ne}function It(z){var W=new Uint8Array(z),B="",oe;for(oe=0;oe<W.length;oe+=3)B+=Re[W[oe]>>2],B+=Re[(W[oe]&3)<<4|W[oe+1]>>4],B+=Re[(W[oe+1]&15)<<2|W[oe+2]>>6],B+=Re[W[oe+2]&63];return W.length%3===2?B=B.substring(0,B.length-1)+"=":W.length%3===1&&(B=B.substring(0,B.length-2)+"=="),B}function nr(z,W){var B="";if(z&&(B=wn.call(z)),z&&(B==="[object ArrayBuffer]"||z.buffer&&wn.call(z.buffer)==="[object ArrayBuffer]")){var oe,ce=Pe;z instanceof ArrayBuffer?(oe=z,ce+=tn):(oe=z.buffer,B==="[object Int8Array]"?ce+=xn:B==="[object Uint8Array]"?ce+=pt:B==="[object Uint8ClampedArray]"?ce+=rt:B==="[object Int16Array]"?ce+=_n:B==="[object Uint16Array]"?ce+=Gt:B==="[object Int32Array]"?ce+=Mt:B==="[object Uint32Array]"?ce+=nn:B==="[object Float32Array]"?ce+=Ar:B==="[object Float64Array]"?ce+=Cr:W(new Error("Failed to get type for BinaryArray"))),W(ce+It(oe))}else if(B==="[object Blob]"){var ie=new FileReader;ie.onload=function(){var _e=Ue+z.type+"~"+It(this.result);W(Pe+Tn+_e)},ie.readAsArrayBuffer(z)}else try{W(JSON.stringify(z))}catch(_e){console.error("Couldn't convert value into a JSON string: ",z),W(null,_e)}}function $n(z){if(z.substring(0,nt)!==Pe)return JSON.parse(z);var W=z.substring(Vn),B=z.substring(nt,Vn),oe;if(B===Tn&&wt.test(W)){var ce=W.match(wt);oe=ce[1],W=W.substring(ce[0].length)}var ie=_t(W);switch(B){case tn:return ie;case Tn:return y([ie],{type:oe});case xn:return new Int8Array(ie);case pt:return new Uint8Array(ie);case rt:return new Uint8ClampedArray(ie);case _n:return new Int16Array(ie);case Gt:return new Uint16Array(ie);case Mt:return new Int32Array(ie);case nn:return new Uint32Array(ie);case Ar:return new Float32Array(ie);case Cr:return new Float64Array(ie);default:throw new Error("Unkown type: "+B)}}var so={serialize:nr,deserialize:$n,stringToBuffer:_t,bufferToString:It};function au(z,W,B,oe){z.executeSql("CREATE TABLE IF NOT EXISTS "+W.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],B,oe)}function Sd(z){var W=this,B={db:null};if(z)for(var oe in z)B[oe]=typeof z[oe]!="string"?z[oe].toString():z[oe];var ce=new v(function(ie,_e){try{B.db=openDatabase(B.name,String(B.version),B.description,B.size)}catch(Ee){return _e(Ee)}B.db.transaction(function(Ee){au(Ee,B,function(){W._dbInfo=B,ie()},function(Ce,Ne){_e(Ne)})},_e)});return B.serializer=so,ce}function rr(z,W,B,oe,ce,ie){z.executeSql(B,oe,ce,function(_e,Ee){Ee.code===Ee.SYNTAX_ERR?_e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[W.storeName],function(Ce,Ne){Ne.rows.length?ie(Ce,Ee):au(Ce,W,function(){Ce.executeSql(B,oe,ce,ie)},ie)},ie):ie(_e,Ee)},ie)}function Yi(z,W){var B=this;z=_(z);var oe=new v(function(ce,ie){B.ready().then(function(){var _e=B._dbInfo;_e.db.transaction(function(Ee){rr(Ee,_e,"SELECT * FROM "+_e.storeName+" WHERE key = ? LIMIT 1",[z],function(Ce,Ne){var je=Ne.rows.length?Ne.rows.item(0).value:null;je&&(je=_e.serializer.deserialize(je)),ce(je)},function(Ce,Ne){ie(Ne)})})}).catch(ie)});return x(oe,W),oe}function Ji(z,W){var B=this,oe=new v(function(ce,ie){B.ready().then(function(){var _e=B._dbInfo;_e.db.transaction(function(Ee){rr(Ee,_e,"SELECT * FROM "+_e.storeName,[],function(Ce,Ne){for(var je=Ne.rows,ze=je.length,et=0;et<ze;et++){var st=je.item(et),ht=st.value;if(ht&&(ht=_e.serializer.deserialize(ht)),ht=z(ht,st.key,et+1),ht!==void 0){ce(ht);return}}ce()},function(Ce,Ne){ie(Ne)})})}).catch(ie)});return x(oe,W),oe}function Vr(z,W,B,oe){var ce=this;z=_(z);var ie=new v(function(_e,Ee){ce.ready().then(function(){W===void 0&&(W=null);var Ce=W,Ne=ce._dbInfo;Ne.serializer.serialize(W,function(je,ze){ze?Ee(ze):Ne.db.transaction(function(et){rr(et,Ne,"INSERT OR REPLACE INTO "+Ne.storeName+" (key, value) VALUES (?, ?)",[z,je],function(){_e(Ce)},function(st,ht){Ee(ht)})},function(et){if(et.code===et.QUOTA_ERR){if(oe>0){_e(Vr.apply(ce,[z,Ce,B,oe-1]));return}Ee(et)}})})}).catch(Ee)});return x(ie,B),ie}function Xi(z,W,B){return Vr.apply(this,[z,W,B,1])}function di(z,W){var B=this;z=_(z);var oe=new v(function(ce,ie){B.ready().then(function(){var _e=B._dbInfo;_e.db.transaction(function(Ee){rr(Ee,_e,"DELETE FROM "+_e.storeName+" WHERE key = ?",[z],function(){ce()},function(Ce,Ne){ie(Ne)})})}).catch(ie)});return x(oe,W),oe}function kd(z){var W=this,B=new v(function(oe,ce){W.ready().then(function(){var ie=W._dbInfo;ie.db.transaction(function(_e){rr(_e,ie,"DELETE FROM "+ie.storeName,[],function(){oe()},function(Ee,Ce){ce(Ce)})})}).catch(ce)});return x(B,z),B}function iu(z){var W=this,B=new v(function(oe,ce){W.ready().then(function(){var ie=W._dbInfo;ie.db.transaction(function(_e){rr(_e,ie,"SELECT COUNT(key) as c FROM "+ie.storeName,[],function(Ee,Ce){var Ne=Ce.rows.item(0).c;oe(Ne)},function(Ee,Ce){ce(Ce)})})}).catch(ce)});return x(B,z),B}function oo(z,W){var B=this,oe=new v(function(ce,ie){B.ready().then(function(){var _e=B._dbInfo;_e.db.transaction(function(Ee){rr(Ee,_e,"SELECT key FROM "+_e.storeName+" WHERE id = ? LIMIT 1",[z+1],function(Ce,Ne){var je=Ne.rows.length?Ne.rows.item(0).key:null;ce(je)},function(Ce,Ne){ie(Ne)})})}).catch(ie)});return x(oe,W),oe}function fi(z){var W=this,B=new v(function(oe,ce){W.ready().then(function(){var ie=W._dbInfo;ie.db.transaction(function(_e){rr(_e,ie,"SELECT key FROM "+ie.storeName,[],function(Ee,Ce){for(var Ne=[],je=0;je<Ce.rows.length;je++)Ne.push(Ce.rows.item(je).key);oe(Ne)},function(Ee,Ce){ce(Ce)})})}).catch(ce)});return x(B,z),B}function Td(z){return new v(function(W,B){z.transaction(function(oe){oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ce,ie){for(var _e=[],Ee=0;Ee<ie.rows.length;Ee++)_e.push(ie.rows.item(Ee).name);W({db:z,storeNames:_e})},function(ce,ie){B(ie)})},function(oe){B(oe)})})}function su(z,W){W=S.apply(this,arguments);var B=this.config();z=typeof z!="function"&&z||{},z.name||(z.name=z.name||B.name,z.storeName=z.storeName||B.storeName);var oe=this,ce;return z.name?ce=new v(function(ie){var _e;z.name===B.name?_e=oe._dbInfo.db:_e=openDatabase(z.name,"","",0),z.storeName?ie({db:_e,storeNames:[z.storeName]}):ie(Td(_e))}).then(function(ie){return new v(function(_e,Ee){ie.db.transaction(function(Ce){function Ne(st){return new v(function(ht,Zt){Ce.executeSql("DROP TABLE IF EXISTS "+st,[],function(){ht()},function(At,Hn){Zt(Hn)})})}for(var je=[],ze=0,et=ie.storeNames.length;ze<et;ze++)je.push(Ne(ie.storeNames[ze]));v.all(je).then(function(){_e()}).catch(function(st){Ee(st)})},function(Ce){Ee(Ce)})})}):ce=v.reject("Invalid arguments"),x(ce,W),ce}var ou={_driver:"webSQLStorage",_initStorage:Sd,_support:Me(),iterate:Ji,getItem:Yi,setItem:Xi,removeItem:di,clear:kd,length:iu,key:oo,keys:fi,dropInstance:su};function lu(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Ki(z,W){var B=z.name+"/";return z.storeName!==W.storeName&&(B+=z.storeName+"/"),B}function lo(){var z="_localforage_support_test";try{return localStorage.setItem(z,!0),localStorage.removeItem(z),!1}catch{return!0}}function uu(){return!lo()||localStorage.length>0}function cu(z){var W=this,B={};if(z)for(var oe in z)B[oe]=z[oe];return B.keyPrefix=Ki(z,W._defaultConfig),uu()?(W._dbInfo=B,B.serializer=so,v.resolve()):v.reject()}function Hr(z){var W=this,B=W.ready().then(function(){for(var oe=W._dbInfo.keyPrefix,ce=localStorage.length-1;ce>=0;ce--){var ie=localStorage.key(ce);ie.indexOf(oe)===0&&localStorage.removeItem(ie)}});return x(B,z),B}function hn(z,W){var B=this;z=_(z);var oe=B.ready().then(function(){var ce=B._dbInfo,ie=localStorage.getItem(ce.keyPrefix+z);return ie&&(ie=ce.serializer.deserialize(ie)),ie});return x(oe,W),oe}function jn(z,W){var B=this,oe=B.ready().then(function(){for(var ce=B._dbInfo,ie=ce.keyPrefix,_e=ie.length,Ee=localStorage.length,Ce=1,Ne=0;Ne<Ee;Ne++){var je=localStorage.key(Ne);if(je.indexOf(ie)===0){var ze=localStorage.getItem(je);if(ze&&(ze=ce.serializer.deserialize(ze)),ze=z(ze,je.substring(_e),Ce++),ze!==void 0)return ze}}});return x(oe,W),oe}function Aa(z,W){var B=this,oe=B.ready().then(function(){var ce=B._dbInfo,ie;try{ie=localStorage.key(z)}catch{ie=null}return ie&&(ie=ie.substring(ce.keyPrefix.length)),ie});return x(oe,W),oe}function uo(z){var W=this,B=W.ready().then(function(){for(var oe=W._dbInfo,ce=localStorage.length,ie=[],_e=0;_e<ce;_e++){var Ee=localStorage.key(_e);Ee.indexOf(oe.keyPrefix)===0&&ie.push(Ee.substring(oe.keyPrefix.length))}return ie});return x(B,z),B}function Ed(z){var W=this,B=W.keys().then(function(oe){return oe.length});return x(B,z),B}function Nd(z,W){var B=this;z=_(z);var oe=B.ready().then(function(){var ce=B._dbInfo;localStorage.removeItem(ce.keyPrefix+z)});return x(oe,W),oe}function du(z,W,B){var oe=this;z=_(z);var ce=oe.ready().then(function(){W===void 0&&(W=null);var ie=W;return new v(function(_e,Ee){var Ce=oe._dbInfo;Ce.serializer.serialize(W,function(Ne,je){if(je)Ee(je);else try{localStorage.setItem(Ce.keyPrefix+z,Ne),_e(ie)}catch(ze){(ze.name==="QuotaExceededError"||ze.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ee(ze),Ee(ze)}})})});return x(ce,B),ce}function pi(z,W){if(W=S.apply(this,arguments),z=typeof z!="function"&&z||{},!z.name){var B=this.config();z.name=z.name||B.name,z.storeName=z.storeName||B.storeName}var oe=this,ce;return z.name?ce=new v(function(ie){z.storeName?ie(Ki(z,oe._defaultConfig)):ie(z.name+"/")}).then(function(ie){for(var _e=localStorage.length-1;_e>=0;_e--){var Ee=localStorage.key(_e);Ee.indexOf(ie)===0&&localStorage.removeItem(Ee)}}):ce=v.reject("Invalid arguments"),x(ce,W),ce}var co={_driver:"localStorageWrapper",_initStorage:cu,_support:lu(),iterate:jn,getItem:hn,setItem:du,removeItem:Nd,clear:Hr,length:Ed,key:Aa,keys:uo,dropInstance:pi},Ca=function(W,B){return W===B||typeof W=="number"&&typeof B=="number"&&isNaN(W)&&isNaN(B)},Ra=function(W,B){for(var oe=W.length,ce=0;ce<oe;){if(Ca(W[ce],B))return!0;ce++}return!1},ja=Array.isArray||function(z){return Object.prototype.toString.call(z)==="[object Array]"},yr={},Kt={},ra={INDEXEDDB:Oe,WEBSQL:ou,LOCALSTORAGE:co},fu=[ra.INDEXEDDB._driver,ra.WEBSQL._driver,ra.LOCALSTORAGE._driver],vr=["dropInstance"],Gr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(vr),Ad={description:"",driver:fu.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function pu(z,W){z[W]=function(){var B=arguments;return z.ready().then(function(){return z[W].apply(z,B)})}}function Qi(){for(var z=1;z<arguments.length;z++){var W=arguments[z];if(W)for(var B in W)W.hasOwnProperty(B)&&(ja(W[B])?arguments[0][B]=W[B].slice():arguments[0][B]=W[B])}return arguments[0]}var Cd=(function(){function z(W){c(this,z);for(var B in ra)if(ra.hasOwnProperty(B)){var oe=ra[B],ce=oe._driver;this[B]=ce,yr[ce]||this.defineDriver(oe)}this._defaultConfig=Qi({},Ad),this._config=Qi({},this._defaultConfig,W),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return z.prototype.config=function(B){if((typeof B>"u"?"undefined":l(B))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var oe in B){if(oe==="storeName"&&(B[oe]=B[oe].replace(/\W/g,"_")),oe==="version"&&typeof B[oe]!="number")return new Error("Database version must be a number.");this._config[oe]=B[oe]}return"driver"in B&&B.driver?this.setDriver(this._config.driver):!0}else return typeof B=="string"?this._config[B]:this._config},z.prototype.defineDriver=function(B,oe,ce){var ie=new v(function(_e,Ee){try{var Ce=B._driver,Ne=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!B._driver){Ee(Ne);return}for(var je=Gr.concat("_initStorage"),ze=0,et=je.length;ze<et;ze++){var st=je[ze],ht=!Ra(vr,st);if((ht||B[st])&&typeof B[st]!="function"){Ee(Ne);return}}var Zt=function(){for(var Oa=function(ts){return function(){var Rr=new Error("Method "+ts+" is not implemented by the current driver"),ns=v.reject(Rr);return x(ns,arguments[arguments.length-1]),ns}},es=0,fo=vr.length;es<fo;es++){var po=vr[es];B[po]||(B[po]=Oa(po))}};Zt();var At=function(Oa){yr[Ce]&&console.info("Redefining LocalForage driver: "+Ce),yr[Ce]=B,Kt[Ce]=Oa,_e()};"_support"in B?B._support&&typeof B._support=="function"?B._support().then(At,Ee):At(!!B._support):At(!0)}catch(Hn){Ee(Hn)}});return b(ie,oe,ce),ie},z.prototype.driver=function(){return this._driver||null},z.prototype.getDriver=function(B,oe,ce){var ie=yr[B]?v.resolve(yr[B]):v.reject(new Error("Driver not found."));return b(ie,oe,ce),ie},z.prototype.getSerializer=function(B){var oe=v.resolve(so);return b(oe,B),oe},z.prototype.ready=function(B){var oe=this,ce=oe._driverSet.then(function(){return oe._ready===null&&(oe._ready=oe._initDriver()),oe._ready});return b(ce,B,B),ce},z.prototype.setDriver=function(B,oe,ce){var ie=this;ja(B)||(B=[B]);var _e=this._getSupportedDrivers(B);function Ee(){ie._config.driver=ie.driver()}function Ce(ze){return ie._extend(ze),Ee(),ie._ready=ie._initStorage(ie._config),ie._ready}function Ne(ze){return function(){var et=0;function st(){for(;et<ze.length;){var ht=ze[et];return et++,ie._dbInfo=null,ie._ready=null,ie.getDriver(ht).then(Ce).catch(st)}Ee();var Zt=new Error("No available storage method found.");return ie._driverSet=v.reject(Zt),ie._driverSet}return st()}}var je=this._driverSet!==null?this._driverSet.catch(function(){return v.resolve()}):v.resolve();return this._driverSet=je.then(function(){var ze=_e[0];return ie._dbInfo=null,ie._ready=null,ie.getDriver(ze).then(function(et){ie._driver=et._driver,Ee(),ie._wrapLibraryMethodsWithReady(),ie._initDriver=Ne(_e)})}).catch(function(){Ee();var ze=new Error("No available storage method found.");return ie._driverSet=v.reject(ze),ie._driverSet}),b(this._driverSet,oe,ce),this._driverSet},z.prototype.supports=function(B){return!!Kt[B]},z.prototype._extend=function(B){Qi(this,B)},z.prototype._getSupportedDrivers=function(B){for(var oe=[],ce=0,ie=B.length;ce<ie;ce++){var _e=B[ce];this.supports(_e)&&oe.push(_e)}return oe},z.prototype._wrapLibraryMethodsWithReady=function(){for(var B=0,oe=Gr.length;B<oe;B++)pu(this,Gr[B])},z.prototype.createInstance=function(B){return new z(B)},z})(),Wi=new Cd;a.exports=Wi},{3:3}]},{},[4])(4)})})(Hp)),Hp.exports}var uC=lC();const ft=Ql(uC);const cC=new TextEncoder,dC=e=>cC.encode(e),fC=new TextDecoder,lm=e=>fC.decode(e);function pC(e){return typeof e=="string"?dC(e).buffer:e instanceof ArrayBuffer?e:ArrayBuffer.isView(e)?new Uint8Array(e).buffer:e.arrayBuffer()}class Gc{static async load(t){const r=await pC(t),a=hC(r);return new Gc(r,a)}#e;constructor(t,r){this.fileInfos=r,this.#e=t}getTextFile(t){const r=this.fileInfos.find(a=>a.name===t);if(!r)throw new Error(`File not found: ${t}`);return xC(this.#e,r.headerOffset+512,r.size)}getFileBlob(t,r=""){const a=this.fileInfos.find(s=>s.name===t);if(!a)throw new Error(`File not found: ${t}`);return bC(this.#e,a.headerOffset+512,a.size,r)}}function hC(e){const t=[];let r=0;for(;r<e.byteLength-512;){const a=gC(e,r);if(!a)break;const s=yC(e,r),l=vC(e,r);t.push({name:a,type:s,size:l,headerOffset:r}),r+=512+512*Math.floor((l+511)/512)}return t}function mC(e,t,r){let a=0,s=new Uint8Array(e,t,r);for(;a<r&&s[a];)a+=1;return s=new Uint8Array(e,t,a),lm(s)}function gC(e,t){return mC(e,t,100)}function yC(e,t){return new Uint8Array(e,t+156,1)[0]}function vC(e,t){const r=new Uint8Array(e,t+124,12),a=lm(r);return parseInt(a,8)}function bC(e,t,r,a){const s=new Uint8Array(e,t,r);return new Blob([s],{type:a})}function xC(e,t,r){const a=new Uint8Array(e,t,r);return lm(a)}const _C=typeof import.meta<"u"&&"env"in import.meta&&!1,Be=new Q1({enabled:_C,prefix:"[Guido]",showTimestamp:!0}),zi=new Map;function u2(){const e="/Guido";return e.endsWith("/")?e:`${e}/`}async function Gp(e){const t=`builtin:${e}`;if(zi.has(t))return zi.get(t);const a=`${u2()}registries/${e}.registry.json`,s=await fetch(a);if(!s.ok)throw new Error(`Failed to load registry definition for ${e}: ${s.statusText}`);const l=await s.json();return zi.set(t,l),l}async function Zp(e){const t=`custom:${e}`;if(zi.has(t))return zi.get(t);const r=new URL("/.well-known/guido.json",e).toString();try{const c=await fetch(r);if(c.ok){const d=await c.json();return d.baseUrl==="{baseUrl}"&&(d.baseUrl=e),zi.set(t,d),Be.debug(`Loaded custom registry from well-known: ${d.name}`),d}}catch{Be.debug(`No well-known endpoint found for ${e}, using template`)}const a=u2(),s=await fetch(`${a}registries/_template.registry.json`);if(!s.ok)throw new Error("Failed to load template registry definition");const l=await s.json();return l.name="Custom Registry",l.baseUrl=e,zi.set(t,l),l}function Yp(e,t){return e.replace(/\{(\w+)\}/g,(r,a)=>{const s=t[a];return s!==void 0?String(s):""})}function wC(e,t){if(!t||t.enabled===!1)return e;let r=e;return t.prefix&&(r=`${t.prefix} ${r}`),t.suffix&&(r=`${r} ${t.suffix}`),r.trim()}function dr(e,t){if(!t||t==="$")return e;const r=t.startsWith("$.")?t.slice(2):t.startsWith("$")?t.slice(1):t;if(!r)return e;const a=r.split(/\.|\[|\]/).filter(Boolean);let s=e;for(let l=0;l<a.length;l++){const c=a[l];if(s==null)return;if(c==="*"){let d;if(Array.isArray(s))d=s;else if(typeof s=="object")d=Object.values(s);else return;const f=a.slice(l+1);if(f.length>0){const p=f.join(".");return d.map(y=>dr(y,p))}return d}if(typeof s=="object"&&s!==null)s=s[c];else return}return s}function SC(e,t){if(!t){const a=e,s=a.name??a.Name??"",l=a.version??a.Version,c=a.description??a.Description,d=a.author,f=a.dist,p=y=>y==null?"":typeof y=="string"?y:typeof y=="number"||typeof y=="boolean"?String(y):JSON.stringify(y);return{name:typeof s=="string"?s:JSON.stringify(s),version:l!==void 0?typeof l=="string"?l:JSON.stringify(l):void 0,description:c!==void 0?typeof c=="string"?c:JSON.stringify(c):void 0,author:d?p(typeof d=="object"?d.name:d):void 0,downloadUrl:a.downloadUrl?p(a.downloadUrl):f?.tarball?p(f.tarball):void 0,homepage:a.homepage?p(a.homepage):void 0,repository:a.repository?typeof a.repository=="string"?a.repository:JSON.stringify(a.repository):void 0}}const r=a=>a==null?"":typeof a=="string"?a:typeof a=="number"||typeof a=="boolean"?String(a):JSON.stringify(a);return{name:t.name?r(dr(e,t.name)):"",version:t.version&&r(dr(e,t.version))||void 0,description:t.description&&r(dr(e,t.description))||void 0,author:t.author&&r(dr(e,t.author))||void 0,downloadUrl:t.downloadUrl&&r(dr(e,t.downloadUrl))||void 0,homepage:t.homepage&&r(dr(e,t.homepage))||void 0,repository:t.repository&&r(dr(e,t.repository))||void 0}}async function um(e,t,r,a={},s,l){const c={...r};typeof r.name=="string"&&r.name.startsWith("@")&&(c.name=encodeURIComponent(r.name));const d=Yp(t.path,c),f=new URL(d,e);if(t.queryParams)for(const[v,x]of Object.entries(t.queryParams)){const b=Yp(x,r);b&&f.searchParams.set(v,b)}const p={...a,...t.headers};if(s&&l&&l.type!=="none"){if(l.location==="query"&&l.name)f.searchParams.set(l.name,s);else if(l.name){const v=l.prefix||"";p[l.name]=`${v}${s}`}}return Be.debug(`Registry API call: ${t.method} ${f.toString()}`),await fetch(f.toString(),{method:t.method,headers:p,body:t.method==="POST"&&t.body?JSON.stringify(Yp(JSON.stringify(t.body),r)):void 0})}async function Sc(e,t,r={}){const a=e.api.search||e.api.list;if(!a)throw new Error(`Registry ${e.name} does not support search or list`);const{limit:s=a.pagination?.defaultLimit||20,offset:l=0,page:c=1,authToken:d}=r,f=wC(t,a.filter),p=await um(e.baseUrl,a,{query:f,limit:s,offset:l,page:c},e.headers||{},d,e.auth);if(!p.ok)throw new Error(`Registry search failed: ${p.statusText}`);const y=await p.json(),v=a.response.items||"$",x=dr(y,v),b=Array.isArray(x)?x.map(S=>SC(S,a.response.item)):[],_=a.response.total?Number(dr(y,a.response.total)):void 0;return Be.info(`Registry search: found ${b.length} items${_?` of ${_} total`:""}`),{items:b,total:_,hasMore:_?l+b.length<_:b.length===s}}async function kC(e,t,r,a){const s=e.api.fetch;if(!s)throw new Error(`Registry ${e.name} does not support fetching templates`);const[l,c]=t.includes("/")?t.split("/"):[void 0,t],d=await um(e.baseUrl,s,{name:t,version:r||"latest",owner:l,repo:c},e.headers||{},a,e.auth);if(!d.ok)throw new Error(`Failed to fetch template: ${d.statusText}`);const f=d.headers.get("content-type")||"";if(f.includes("gzip")||f.includes("octet-stream")||f.includes("tar")||f.includes("application/x-tgz"))return Be.debug(`Fetching binary content (${f}) for ${t}`),await d.arrayBuffer();const p=await d.json();return s.response.template?dr(p,s.response.template):p}async function TC(e,t,r){const a=e.api.versions;if(!a)return Be.debug(`Registry ${e.name} does not support version listing`),[];const[s,l]=t.includes("/")?t.split("/"):[void 0,t],c=await um(e.baseUrl,a,{name:t,owner:s,repo:l},e.headers||{},r,e.auth);if(!c.ok)throw new Error(`Failed to get versions: ${c.statusText}`);const d=await c.json(),f=a.response.items||"$",p=dr(d,f);return Array.isArray(p)?p.map(y=>{if(typeof y=="string")return y;if(a.response.item?.version){const b=dr(y,a.response.item.version);return typeof b=="string"?b:typeof b=="number"?String(b):""}const x=y.version;return typeof x=="string"?x:typeof x=="number"?String(x):""}).filter(Boolean):typeof p=="object"&&p!==null?Object.keys(p):[]}const EC=["registry.guido.json"],NC=()=>{let e="/Guido";return e.endsWith("/")||(e=e+"/"),Be.debug(`Template base path: ${e}templates/`),`${e}templates/`};let zc=null,kc=null;function AC(e){return e.replace(/\.guido\.json$/,"")}function cd(){if(zc)return zc;const e=NC(),t=EC.map(r=>({path:`/templates/${r}`,url:`${e}${encodeURIComponent(r)}`,name:AC(r)}));return zc=t,Be.info(`Registered ${t.length} built-in template(s)`),t}async function CC(){return kc||(kc=(async()=>{const e=cd(),t=[];for(const r of e)try{const a=await fetch(r.url,{method:"HEAD"});a.ok?(t.push(r),Be.debug(`Verified built-in template: ${r.name}`)):Be.warn(`Built-in template not found: ${r.name} (${a.status})`)}catch(a){Be.warn(`Failed to verify built-in template: ${r.name}`,a)}return zc=t,Be.info(`Verified ${t.length}/${e.length} built-in template(s)`),t})(),kc)}async function RC(e){if(e.template)return e.template;try{Be.debug(`Fetching template from URL: ${e.url}`);const t=await fetch(e.url);if(!t.ok)throw new Error(`Failed to fetch template: ${t.statusText}`);const r=await t.json();if(Hl(r))return e.template=r,r.name&&(e.name=r.name),r;Be.warn(`Invalid template structure in ${e.path}`);return}catch(t){Be.error(`Failed to load built-in template: ${e.path}`,t);return}}function jC(e){const t=cd(),r=e.toLowerCase().trim();return r?t.filter(a=>a.name.toLowerCase().includes(r)):t}function OC(e){return cd().find(r=>r.path===e||r.name===e)}async function MC(e){const t=OC(e);if(t)return RC(t)}class Lc extends Error{alternatives;tarballData;isRawContent;constructor(t,r,a=!1){super("No .guido.json files found in the tarball"),this.name="NoGuidoTemplatesError",this.alternatives=t,this.tarballData=r,this.isRawContent=a}}const c2="custom-registries",d2="registry-toggles";async function Jp(e){try{const t=e.map(r=>({url:r.url,enabled:r.enabled}));await ft.setItem(c2,t)}catch(t){Be.error("Failed to save custom registries to storage",t)}}async function Tc(e){try{await ft.setItem(d2,e)}catch(t){Be.error("Failed to save registry toggles to storage",t)}}const eo=()=>{const[e,t]=U.useState(!1),[r,a]=U.useState([]),[s,l]=U.useState(null),[c,d]=U.useState(!0),[f,p]=U.useState(!0),[y,v]=U.useState(!0),[x,b]=U.useState(!0),[_,S]=U.useState(new Map),[k,j]=U.useState(null),[R,E]=U.useState(!0),[q,P]=U.useState([]),[H,I]=U.useState(!1),A=U.useRef(!1),O=G=>{d(G),Tc({github:G,npm:f,simplifier:y,builtIn:x})},M=G=>{p(G),Tc({github:c,npm:G,simplifier:y,builtIn:x})},F=G=>{v(G),Tc({github:c,npm:f,simplifier:G,builtIn:x})},Y=G=>{b(G),Tc({github:c,npm:f,simplifier:y,builtIn:G})};U.useEffect(()=>{(async()=>{try{const X=await ft.getItem(d2);X&&(d(X.github),p(X.npm),v(X.simplifier),b(X.builtIn))}catch(X){Be.error("Failed to load registry toggles from storage",X)}})()},[]),U.useEffect(()=>{(async()=>{E(!0);try{const X=new Map,[D,ne,le]=await Promise.allSettled([Gp("npm"),Gp("github"),Gp("simplifier")]);D.status==="fulfilled"&&X.set("npm",D.value),ne.status==="fulfilled"&&X.set("github",ne.value),le.status==="fulfilled"&&X.set("simplifier",le.value),S(X)}catch(X){Be.error("Failed to load registry definitions",X)}finally{E(!1)}})()},[]),U.useEffect(()=>{(async()=>{try{const X=await ft.getItem(c2);if(!X)return;const D=await Promise.all(X.map(async ne=>{try{const le=await Zp(ne.url);return{...ne,definition:le}}catch(le){return Be.error(`Failed to load custom registry: ${ne.url}`,le),{...ne,definition:null}}}));P(D)}catch(X){Be.error("Failed to load custom registries from storage",X)}})()},[]),U.useEffect(()=>{(async()=>{if(s)try{const X=await Zp(s);j(X),Be.info(`Loaded custom registry: ${X.name}`)}catch(X){Be.error("Failed to load custom registry",X),j(null)}else j(null)})()},[s]);const ae=U.useCallback(async()=>{try{if(s&&!(await fetch(s,{method:"HEAD"})).ok)throw new Error("Custom registry URL is unreachable");I(!0)}catch(G){console.error("Error connecting to registry:",G),I(!1)}},[s]);U.useEffect(()=>{A.current||(ae(),A.current=!0)},[ae]);const ee=async(G,X)=>{if(q.some(Se=>Se.url===G))throw new Error("Registry already added");let D=X||null;if(!D)try{D=await Zp(G)}catch(Se){Be.warn(`Could not load registry definition for ${G}`,Se),D={name:"Custom Registry",description:`Custom registry at ${G}`,baseUrl:G,api:{}}}const ne={url:G,definition:D,enabled:!0},le=[...q,ne];P(le),Jp(le),Be.info(`Added custom registry: ${D?.name||G}`)},de=G=>{const X=q.filter(D=>D.url!==G);P(X),Jp(X),Be.info(`Removed custom registry: ${G}`)},J=(G,X)=>{const D=q.map(ne=>ne.url===G?{...ne,enabled:X}:ne);P(D),Jp(D)},te=async G=>{if(!G.trim()){a([]);return}t(!0);try{const X=[];if(c&&_.has("github")){const le=_.get("github");X.push(Sc(le,G).then(Se=>Se.items.map(Ae=>({...Ae,source:"github",registryName:le.name}))).catch(Se=>(Be.error("GitHub search failed",Se),[])))}if(f&&_.has("npm")){const le=_.get("npm");X.push(Sc(le,G).then(Se=>Se.items.map(Ae=>({...Ae,source:"npm",registryName:le.name}))).catch(Se=>(Be.error("NPM search failed",Se),[])))}if(y&&_.has("simplifier")){const le=_.get("simplifier");X.push(Sc(le,G).then(Se=>Se.items.map(Ae=>({...Ae,source:"simplifier",registryName:le.name}))).catch(Se=>(Be.error("Simplifier search failed",Se),[])))}for(const le of q)le.enabled&&le.definition&&X.push(Sc(le.definition,G).then(Se=>Se.items.map(Ae=>({...Ae,source:"custom",registryName:le.definition?.name||"Custom"}))).catch(Se=>(Be.error(`Custom registry search failed: ${le.url}`,Se),[])));let ne=(await Promise.all(X)).flat();x&&(ne=[...jC(G).map(Ae=>({name:Ae.name,description:Ae.template?.description||"",source:"builtIn",registryName:"Built-in Templates",downloadUrl:Ae.path})),...ne]),a(ne),Be.info(`Search completed: ${ne.length} results from ${X.length+(x?1:0)} sources`)}catch(X){Be.error("Search failed",X),a([])}finally{t(!1)}},he=async G=>{if(G.source==="builtIn")return[];const X=G.source==="custom"?q.find(D=>D.definition?.name===G.registryName)?.definition:_.get(G.source);if(!X)return Be.warn(`No definition found for registry: ${G.source}`),[];try{return await TC(X,G.name)}catch(D){return Be.error(`Failed to get versions for ${G.name}`,D),[]}},ve=async(G,X)=>{if(G.source==="builtIn"){const ne=await MC(G.downloadUrl||G.name);if(ne)return[ne];throw new Error(`Built-in template not found: ${G.name}`)}const D=G.source==="custom"?q.find(ne=>ne.definition?.name===G.registryName)?.definition:_.get(G.source);if(!D)throw new Error(`No definition found for registry: ${G.source}`);try{const ne=await kC(D,G.name,X);if(ne instanceof ArrayBuffer)return Be.debug(`Received ArrayBuffer (${ne.byteLength} bytes), extracting templates...`),await L(ne);if(ne&&typeof ne=="object"&&!Array.isArray(ne)){const le=ne;if(le.versions&&typeof le.versions=="object"){const Te=le.versions,$e=X||le["dist-tags"]?.latest,Oe=Te[$e];if(Oe?.dist&&typeof Oe.dist=="object"){const Me=Oe.dist.tarball;if(Me)return Be.debug(`Fetching NPM tarball: ${Me}`),await se(Me)}}if(Hl(le))return[ne];const Se=G.name.split("/").pop()||"config.json",Ae=JSON.stringify(ne,null,2);throw new Lc([{name:Se,path:G.name,size:Ae.length}],new TextEncoder().encode(Ae).buffer,!0)}if(Array.isArray(ne)){const le=ne.filter(Ae=>Hl(Ae));if(le.length>0)return le;if(ne.length>0&&ne.every(Ae=>typeof Ae=="object"&&Ae!==null&&"name"in Ae&&"path"in Ae&&"type"in Ae)){const Ae=ne.filter(Te=>Te.type==="file"&&N.test(Te.name)).filter(Te=>!Te.name.startsWith(".")&&Te.name!=="package.json"&&Te.name!=="tsconfig.json"&&Te.name!=="package-lock.json").map(Te=>({name:Te.name,path:Te.path,size:Te.size||0,downloadUrl:Te.download_url}));if(Ae.length>0)throw new Lc(Ae,new TextEncoder().encode(JSON.stringify(ne)).buffer,!0)}}if(G.downloadUrl)return await se(G.downloadUrl);throw new Error("Could not extract template from package")}catch(ne){throw Be.error(`Failed to fetch templates for ${G.name}`,ne),ne}},se=async G=>{const X=await fetch(G);if(!X.ok)throw new Error(`Failed to fetch tarball: ${X.statusText}`);const D=await X.arrayBuffer();return L(D)},N=/\.(json|yml|yaml|txt|properties|env|config|ini|conf|xml|toml)$/i,L=async G=>{const D=new ReadableStream({start(Te){Te.enqueue(G),Te.close()}}).pipeThrough(new DecompressionStream("gzip")),ne=await new Response(D).arrayBuffer(),le=await Gc.load(ne),Se=[],Ae=[];for(const Te of le.fileInfos)if(!Te.name.endsWith("/")){if(Te.name.endsWith(".guido.json")){const $e=le.getTextFile(Te.name);if($e){const Oe=JSON.parse($e);Se.push(Oe)}}else if(N.test(Te.name)){const $e=Te.name.split("/").pop()||Te.name;!$e.startsWith(".")&&$e!=="package.json"&&$e!=="tsconfig.json"&&$e!=="package-lock.json"&&Ae.push({name:$e,path:Te.name,size:Te.size||0})}}if(Se.length===0)throw Ae.sort((Te,$e)=>Te.name.localeCompare($e.name)),new Lc(Ae,G);return Se};return{isConnected:H,isLoading:e,checkConnection:ae,setIsGitHubEnabled:O,setIsNpmEnabled:M,setIsFhirEnabled:F,setIsBuiltInEnabled:Y,isGitHubEnabled:c,isNpmEnabled:f,isFhirEnabled:y,isBuiltInEnabled:x,customRegistryUrl:s,setCustomRegistryUrl:l,customRegistryDefinition:k,customRegistries:q,addCustomRegistry:ee,removeCustomRegistry:de,toggleCustomRegistry:J,registryDefinitions:_,isLoadingDefinitions:R,searchResults:r,searchAllRegistries:te,getPackageVersions:he,fetchPackageTemplates:ve,fetchTarballFromUrl:se,extractFileFromTarball:async(G,X,D=!1)=>{if(D)return new TextDecoder().decode(G);const le=new ReadableStream({start(Te){Te.enqueue(G),Te.close()}}).pipeThrough(new DecompressionStream("gzip")),Se=await new Response(le).arrayBuffer();return(await Gc.load(Se)).getTextFile(X)||null}}},IC="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%20-5%2032%2032'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xmlns:sketch='http://www.bohemiancoding.com/sketch/ns'%3e%3ctitle%3edelete%3c/title%3e%3cdesc%3eCreated%20with%20Sketch%20Beta.%3c/desc%3e%3cdefs%3e%3c/defs%3e%3cg%20id='Page-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20sketch:type='MSPage'%3e%3cg%20id='Icon-Set'%20sketch:type='MSLayerGroup'%20transform='translate(-516.000000,%20-1144.000000)'%20fill='%23000000'%3e%3cpath%20d='M538.708,1151.28%20C538.314,1150.89%20537.676,1150.89%20537.281,1151.28%20L534.981,1153.58%20L532.742,1151.34%20C532.352,1150.95%20531.718,1150.95%20531.327,1151.34%20C530.936,1151.73%20530.936,1152.37%20531.327,1152.76%20L533.566,1154.99%20L531.298,1157.26%20C530.904,1157.65%20530.904,1158.29%20531.298,1158.69%20C531.692,1159.08%20532.331,1159.08%20532.725,1158.69%20L534.993,1156.42%20L537.232,1158.66%20C537.623,1159.05%20538.257,1159.05%20538.647,1158.66%20C539.039,1158.27%20539.039,1157.63%20538.647,1157.24%20L536.408,1155.01%20L538.708,1152.71%20C539.103,1152.31%20539.103,1151.68%20538.708,1151.28%20L538.708,1151.28%20Z%20M545.998,1162%20C545.998,1163.1%20545.102,1164%20543.996,1164%20L526.467,1164%20L518.316,1154.98%20L526.438,1146%20L543.996,1146%20C545.102,1146%20545.998,1146.9%20545.998,1148%20L545.998,1162%20L545.998,1162%20Z%20M543.996,1144%20L526.051,1144%20C525.771,1143.98%20525.485,1144.07%20525.271,1144.28%20L516.285,1154.22%20C516.074,1154.43%20515.983,1154.71%20515.998,1154.98%20C515.983,1155.26%20516.074,1155.54%20516.285,1155.75%20L525.271,1165.69%20C525.467,1165.88%20525.723,1165.98%20525.979,1165.98%20L525.979,1166%20L543.996,1166%20C546.207,1166%20548,1164.21%20548,1162%20L548,1148%20C548,1145.79%20546.207,1144%20543.996,1144%20L543.996,1144%20Z'%20id='delete'%20sketch:type='MSShapeGroup'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",$C="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24'%20height='24'%20fill='currentColor'%20%3e%3cpath%20d='M12%202C6.48%202%202%206.48%202%2012s4.48%2010%2010%2010%2010-4.48%2010-10S17.52%202%2012%202zm5%2013h-2v-2h2v2zm-4%200h-2v-2h2v2zm-4%200H7v-2h2v2zm1.41-6.41L12%208.59l1.59-1.59L15%208l-3%203-3-3%201.41-1.41z'%20/%3e%3c/svg%3e",DC="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M14.9536%2014.9458L21%2021M17%2010C17%2013.866%2013.866%2017%2010%2017C6.13401%2017%203%2013.866%203%2010C3%206.13401%206.13401%203%2010%203C13.866%203%2017%206.13401%2017%2010Z'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Oh=({text:e})=>{const t=e.split(`
`),r=e.length>200||t.length>5,a=t.map((s,l)=>h.jsxs(bn.Fragment,{children:[s,l<t.length-1&&h.jsx("br",{})]},l));return h.jsxs("div",{className:`
        tooltip-content absolute z-50
        bg-surface-0 dark:bg-surface-2
        border border-strong
        shadow-lg rounded-lg
        p-3
        top-full left-1/2 transform -translate-x-1/2
        mt-2
        text-sm text-text-primary
        ${r?"max-h-48 overflow-y-auto":""}
        min-w-[150px] max-w-[320px] w-max
      `,style:{whiteSpace:"normal",wordBreak:"break-word"},children:[h.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 w-0 h-0 border-l-8 border-r-8 border-b-8 border-l-transparent border-r-transparent border-b-strong"}),h.jsx("div",{className:"absolute -top-[6px] left-1/2 -translate-x-1/2 w-0 h-0 border-l-[7px] border-r-[7px] border-b-[7px] border-l-transparent border-r-transparent border-b-surface-0 dark:border-b-surface-2"}),a,r&&h.jsx("div",{className:"text-[10px] text-text-disabled mt-2 pt-2 border-t border-weak text-center",children:"Scroll for more"})]})},Mh=({text:e,children:t,delay:r=300})=>{const[a,s]=U.useState(!1),l=U.useRef(null);if(!e||e.length===0)return h.jsx(h.Fragment,{children:t});const c=()=>{l.current=setTimeout(()=>{s(!0)},r)},d=()=>{l.current&&(clearTimeout(l.current),l.current=null),s(!1)};return h.jsxs("div",{className:"relative inline-block",onMouseEnter:c,onMouseLeave:d,children:[t,a&&h.jsx(Oh,{text:e})]})},Qn=({text:e,icon:t,onClick:r,className:a})=>h.jsx(Mh,{text:e,children:h.jsx("span",{onClick:r,className:`${a} cursor-help`,children:t})}),zC=({searchTerm:e,onSearchChange:t,onClearSearch:r,inputRef:a,onFocus:s,onKeyDown:l})=>{const{isConnected:c,checkConnection:d}=eo(),f=()=>{const p=new KeyboardEvent("keydown",{key:"Enter"});l(p)};return h.jsxs("div",{className:"relative w-full",children:[h.jsx("input",{ref:a,id:"registry-search",name:"registry-search",type:"text",onFocus:s,value:e,onChange:t,placeholder:"Search registries...","aria-label":"Search registries",className:"border  p-2 rounded w-full bg-surface-0 text-text-primary",onKeyDown:l}),h.jsxs("div",{className:"flex items-center space-x-2 absolute right-2 top-1/2 transform -translate-y-1/2",children:[e&&h.jsxs(h.Fragment,{children:[h.jsx("button",{type:"button",onClick:f,className:"bg-surface-4 rounded-full w-6 h-6 flex items-center justify-center",children:h.jsx("img",{src:DC,alt:"Enter",className:"h-4 w-4 dark:invert"})}),h.jsx("button",{type:"button",onClick:r,className:"bg-surface-4 rounded-full w-6 h-6 flex items-center justify-center",children:h.jsx("img",{src:IC,alt:"Clear",className:"h-4 w-4 dark:invert"})})]}),!c&&h.jsx(Qn,{text:"Disconnected, click to try again.",icon:h.jsx("img",{src:$C,alt:"Disconnected",className:"h-4 w-4 dark:invert"}),onClick:()=>void d(),className:"bg-red-200 rounded-full w-6 h-6 flex items-center justify-center cursor-pointer"})]})]})};var f2="vercel.ai.error",LC=Symbol.for(f2),p2,UC=class h2 extends Error{constructor({name:t,message:r,cause:a}){super(r),this[p2]=!0,this.name=t,this.cause=a}static isInstance(t){return h2.hasMarker(t,f2)}static hasMarker(t,r){const a=Symbol.for(r);return t!=null&&typeof t=="object"&&a in t&&typeof t[a]=="boolean"&&t[a]===!0}};p2=LC;var We=UC,m2="AI_APICallError",g2=`vercel.ai.error.${m2}`,qC=Symbol.for(g2),y2,vn=class extends We{constructor({message:e,url:t,requestBodyValues:r,statusCode:a,responseHeaders:s,responseBody:l,cause:c,isRetryable:d=a!=null&&(a===408||a===409||a===429||a>=500),data:f}){super({name:m2,message:e,cause:c}),this[y2]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=s,this.responseBody=l,this.isRetryable=d,this.data=f}static isInstance(e){return We.hasMarker(e,g2)}};y2=qC;var v2="AI_EmptyResponseBodyError",b2=`vercel.ai.error.${v2}`,PC=Symbol.for(b2),x2,BC=class extends We{constructor({message:e="Empty response body"}={}){super({name:v2,message:e}),this[x2]=!0}static isInstance(e){return We.hasMarker(e,b2)}};x2=PC;function Wl(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var _2="AI_InvalidArgumentError",w2=`vercel.ai.error.${_2}`,FC=Symbol.for(w2),S2,k2=class extends We{constructor({message:t,cause:r,argument:a}){super({name:_2,message:t,cause:r}),this[S2]=!0,this.argument=a}static isInstance(t){return We.hasMarker(t,w2)}};S2=FC;var T2="AI_InvalidPromptError",E2=`vercel.ai.error.${T2}`,VC=Symbol.for(E2),N2,ni=class extends We{constructor({prompt:e,message:t,cause:r}){super({name:T2,message:`Invalid prompt: ${t}`,cause:r}),this[N2]=!0,this.prompt=e}static isInstance(e){return We.hasMarker(e,E2)}};N2=VC;var A2="AI_InvalidResponseDataError",C2=`vercel.ai.error.${A2}`,HC=Symbol.for(C2),R2,Ul=class extends We{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:A2,message:t}),this[R2]=!0,this.data=e}static isInstance(e){return We.hasMarker(e,C2)}};R2=HC;var j2="AI_JSONParseError",O2=`vercel.ai.error.${j2}`,GC=Symbol.for(O2),M2,Zc=class extends We{constructor({text:e,cause:t}){super({name:j2,message:`JSON parsing failed: Text: ${e}.
Error message: ${Wl(t)}`,cause:t}),this[M2]=!0,this.text=e}static isInstance(e){return We.hasMarker(e,O2)}};M2=GC;var I2="AI_LoadAPIKeyError",$2=`vercel.ai.error.${I2}`,ZC=Symbol.for($2),D2,Ec=class extends We{constructor({message:e}){super({name:I2,message:e}),this[D2]=!0}static isInstance(e){return We.hasMarker(e,$2)}};D2=ZC;var z2="AI_NoSuchModelError",L2=`vercel.ai.error.${z2}`,YC=Symbol.for(L2),U2,ib=class extends We{constructor({errorName:e=z2,modelId:t,modelType:r,message:a=`No such ${r}: ${t}`}){super({name:e,message:a}),this[U2]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return We.hasMarker(e,L2)}};U2=YC;var q2="AI_TooManyEmbeddingValuesForCallError",P2=`vercel.ai.error.${q2}`,JC=Symbol.for(P2),B2,cm=class extends We{constructor(e){super({name:q2,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[B2]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return We.hasMarker(e,P2)}};B2=JC;var F2="AI_TypeValidationError",V2=`vercel.ai.error.${F2}`,XC=Symbol.for(V2),H2,KC=class Ih extends We{constructor({value:t,cause:r}){super({name:F2,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${Wl(r)}`,cause:r}),this[H2]=!0,this.value=t}static isInstance(t){return We.hasMarker(t,V2)}static wrap({value:t,cause:r}){return Ih.isInstance(r)&&r.value===t?r:new Ih({value:t,cause:r})}};H2=XC;var Gl=KC,G2="AI_UnsupportedFunctionalityError",Z2=`vercel.ai.error.${G2}`,QC=Symbol.for(Z2),Y2,Ft=class extends We{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:G2,message:t}),this[Y2]=!0,this.functionality=e}static isInstance(e){return We.hasMarker(e,Z2)}};Y2=QC;class sb extends Error{constructor(t,r){super(t),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}}function Xp(e){}function WC(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=Xp,onError:r=Xp,onRetry:a=Xp,onComment:s}=e;let l="",c=!0,d,f="",p="";function y(S){const k=c?S.replace(/^\xEF\xBB\xBF/,""):S,[j,R]=e4(`${l}${k}`);for(const E of j)v(E);l=R,c=!1}function v(S){if(S===""){b();return}if(S.startsWith(":")){s&&s(S.slice(S.startsWith(": ")?2:1));return}const k=S.indexOf(":");if(k!==-1){const j=S.slice(0,k),R=S[k+1]===" "?2:1,E=S.slice(k+R);x(j,E,S);return}x(S,"",S)}function x(S,k,j){switch(S){case"event":p=k;break;case"data":f=`${f}${k}
`;break;case"id":d=k.includes("\0")?void 0:k;break;case"retry":/^\d+$/.test(k)?a(parseInt(k,10)):r(new sb(`Invalid \`retry\` value: "${k}"`,{type:"invalid-retry",value:k,line:j}));break;default:r(new sb(`Unknown field "${S.length>20?`${S.slice(0,20)}`:S}"`,{type:"unknown-field",field:S,value:k,line:j}));break}}function b(){f.length>0&&t({id:d,event:p||void 0,data:f.endsWith(`
`)?f.slice(0,-1):f}),d=void 0,f="",p=""}function _(S={}){l&&S.consume&&v(l),c=!0,d=void 0,f="",p="",l=""}return{feed:y,reset:_}}function e4(e){const t=[];let r="",a=0;for(;a<e.length;){const s=e.indexOf("\r",a),l=e.indexOf(`
`,a);let c=-1;if(s!==-1&&l!==-1?c=Math.min(s,l):s!==-1?s===e.length-1?c=-1:c=s:l!==-1&&(c=l),c===-1){r=e.slice(a);break}else{const d=e.slice(a,c);t.push(d),a=c+1,e[a-1]==="\r"&&e[a]===`
`&&a++}}return[t,r]}class t4 extends TransformStream{constructor({onError:t,onRetry:r,onComment:a}={}){let s;super({start(l){s=WC({onEvent:c=>{l.enqueue(c)},onError(c){t==="terminate"?l.error(c):typeof t=="function"&&t(c)},onRetry:r,onComment:a})},transform(l){s.feed(l)}})}}function be(e,t,r){function a(d,f){if(d._zod||Object.defineProperty(d,"_zod",{value:{def:f,constr:c,traits:new Set},enumerable:!1}),d._zod.traits.has(e))return;d._zod.traits.add(e),t(d,f);const p=c.prototype,y=Object.keys(p);for(let v=0;v<y.length;v++){const x=y[v];x in d||(d[x]=p[x].bind(d))}}const s=r?.Parent??Object;class l extends s{}Object.defineProperty(l,"name",{value:e});function c(d){var f;const p=r?.Parent?new l:this;a(p,d),(f=p._zod).deferred??(f.deferred=[]);for(const y of p._zod.deferred)y();return p}return Object.defineProperty(c,"init",{value:a}),Object.defineProperty(c,Symbol.hasInstance,{value:d=>r?.Parent&&d instanceof r.Parent?!0:d?._zod?.traits?.has(e)}),Object.defineProperty(c,"name",{value:e}),c}class Hs extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class J2 extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const X2={};function si(e){return X2}function K2(e){const t=Object.values(e).filter(a=>typeof a=="number");return Object.entries(e).filter(([a,s])=>t.indexOf(+a)===-1).map(([a,s])=>s)}function $h(e,t){return typeof t=="bigint"?t.toString():t}function dd(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function dm(e){return e==null}function fm(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function n4(e,t){const r=(e.toString().split(".")[1]||"").length,a=t.toString();let s=(a.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(a)){const f=a.match(/\d?e-(\d?)/);f?.[1]&&(s=Number.parseInt(f[1]))}const l=r>s?r:s,c=Number.parseInt(e.toFixed(l).replace(".","")),d=Number.parseInt(t.toFixed(l).replace(".",""));return c%d/10**l}const ob=Symbol("evaluating");function vt(e,t,r){let a;Object.defineProperty(e,t,{get(){if(a!==ob)return a===void 0&&(a=ob,a=r()),a},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function Vi(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Hi(...e){const t={};for(const r of e){const a=Object.getOwnPropertyDescriptors(r);Object.assign(t,a)}return Object.defineProperties({},t)}function lb(e){return JSON.stringify(e)}function r4(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Q2="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Zl(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const a4=dd(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Ys(e){if(Zl(e)===!1)return!1;const t=e.constructor;if(t===void 0||typeof t!="function")return!0;const r=t.prototype;return!(Zl(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function W2(e){return Ys(e)?{...e}:Array.isArray(e)?[...e]:e}const i4=new Set(["string","number","symbol"]);function Js(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ui(e,t,r){const a=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(a._zod.parent=e),a}function Le(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function s4(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const o4={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function l4(e,t){const r=e._zod.def,a=Hi(e._zod.def,{get shape(){const s={};for(const l in t){if(!(l in r.shape))throw new Error(`Unrecognized key: "${l}"`);t[l]&&(s[l]=r.shape[l])}return Vi(this,"shape",s),s},checks:[]});return ui(e,a)}function u4(e,t){const r=e._zod.def,a=Hi(e._zod.def,{get shape(){const s={...e._zod.def.shape};for(const l in t){if(!(l in r.shape))throw new Error(`Unrecognized key: "${l}"`);t[l]&&delete s[l]}return Vi(this,"shape",s),s},checks:[]});return ui(e,a)}function c4(e,t){if(!Ys(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=Hi(e._zod.def,{get shape(){const l={...e._zod.def.shape,...t};return Vi(this,"shape",l),l},checks:[]});return ui(e,s)}function d4(e,t){if(!Ys(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r={...e._zod.def,get shape(){const a={...e._zod.def.shape,...t};return Vi(this,"shape",a),a},checks:e._zod.def.checks};return ui(e,r)}function f4(e,t){const r=Hi(e._zod.def,{get shape(){const a={...e._zod.def.shape,...t._zod.def.shape};return Vi(this,"shape",a),a},get catchall(){return t._zod.def.catchall},checks:[]});return ui(e,r)}function p4(e,t,r){const a=Hi(t._zod.def,{get shape(){const s=t._zod.def.shape,l={...s};if(r)for(const c in r){if(!(c in s))throw new Error(`Unrecognized key: "${c}"`);r[c]&&(l[c]=e?new e({type:"optional",innerType:s[c]}):s[c])}else for(const c in s)l[c]=e?new e({type:"optional",innerType:s[c]}):s[c];return Vi(this,"shape",l),l},checks:[]});return ui(t,a)}function h4(e,t,r){const a=Hi(t._zod.def,{get shape(){const s=t._zod.def.shape,l={...s};if(r)for(const c in r){if(!(c in l))throw new Error(`Unrecognized key: "${c}"`);r[c]&&(l[c]=new e({type:"nonoptional",innerType:s[c]}))}else for(const c in s)l[c]=new e({type:"nonoptional",innerType:s[c]});return Vi(this,"shape",l),l},checks:[]});return ui(t,a)}function Fs(e,t=0){if(e.aborted===!0)return!0;for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function Li(e,t){return t.map(r=>{var a;return(a=r).path??(a.path=[]),r.path.unshift(e),r})}function Nc(e){return typeof e=="string"?e:e?.message}function oi(e,t,r){const a={...e,path:e.path??[]};if(!e.message){const s=Nc(e.inst?._zod.def?.error?.(e))??Nc(t?.error?.(e))??Nc(r.customError?.(e))??Nc(r.localeError?.(e))??"Invalid input";a.message=s}return delete a.inst,delete a.continue,t?.reportInput||delete a.input,a}function pm(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Yl(...e){const[t,r,a]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:a}:{...t}}const ew=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,$h,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},tw=be("$ZodError",ew),nw=be("$ZodError",ew,{Parent:Error});function m4(e,t=r=>r.message){const r={},a=[];for(const s of e.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):a.push(t(s));return{formErrors:a,fieldErrors:r}}function g4(e,t=r=>r.message){const r={_errors:[]},a=s=>{for(const l of s.issues)if(l.code==="invalid_union"&&l.errors.length)l.errors.map(c=>a({issues:c}));else if(l.code==="invalid_key")a({issues:l.issues});else if(l.code==="invalid_element")a({issues:l.issues});else if(l.path.length===0)r._errors.push(t(l));else{let c=r,d=0;for(;d<l.path.length;){const f=l.path[d];d===l.path.length-1?(c[f]=c[f]||{_errors:[]},c[f]._errors.push(t(l))):c[f]=c[f]||{_errors:[]},c=c[f],d++}}};return a(e),r}const hm=e=>(t,r,a,s)=>{const l=a?Object.assign(a,{async:!1}):{async:!1},c=t._zod.run({value:r,issues:[]},l);if(c instanceof Promise)throw new Hs;if(c.issues.length){const d=new(s?.Err??e)(c.issues.map(f=>oi(f,l,si())));throw Q2(d,s?.callee),d}return c.value},mm=e=>async(t,r,a,s)=>{const l=a?Object.assign(a,{async:!0}):{async:!0};let c=t._zod.run({value:r,issues:[]},l);if(c instanceof Promise&&(c=await c),c.issues.length){const d=new(s?.Err??e)(c.issues.map(f=>oi(f,l,si())));throw Q2(d,s?.callee),d}return c.value},fd=e=>(t,r,a)=>{const s=a?{...a,async:!1}:{async:!1},l=t._zod.run({value:r,issues:[]},s);if(l instanceof Promise)throw new Hs;return l.issues.length?{success:!1,error:new(e??tw)(l.issues.map(c=>oi(c,s,si())))}:{success:!0,data:l.value}},y4=fd(nw),pd=e=>async(t,r,a)=>{const s=a?Object.assign(a,{async:!0}):{async:!0};let l=t._zod.run({value:r,issues:[]},s);return l instanceof Promise&&(l=await l),l.issues.length?{success:!1,error:new e(l.issues.map(c=>oi(c,s,si())))}:{success:!0,data:l.value}},v4=pd(nw),b4=e=>(t,r,a)=>{const s=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return hm(e)(t,r,s)},x4=e=>(t,r,a)=>hm(e)(t,r,a),_4=e=>async(t,r,a)=>{const s=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return mm(e)(t,r,s)},w4=e=>async(t,r,a)=>mm(e)(t,r,a),S4=e=>(t,r,a)=>{const s=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return fd(e)(t,r,s)},k4=e=>(t,r,a)=>fd(e)(t,r,a),T4=e=>async(t,r,a)=>{const s=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return pd(e)(t,r,s)},E4=e=>async(t,r,a)=>pd(e)(t,r,a),N4=/^[cC][^\s-]{8,}$/,A4=/^[0-9a-z]+$/,C4=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,R4=/^[0-9a-vA-V]{20}$/,j4=/^[A-Za-z0-9]{27}$/,O4=/^[a-zA-Z0-9_-]{21}$/,M4=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,I4=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ub=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,$4=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,D4="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function z4(){return new RegExp(D4,"u")}const L4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,U4=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,q4=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,P4=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,B4=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,rw=/^[A-Za-z0-9_-]*$/,F4=/^\+(?:[0-9]){6,14}[0-9]$/,aw="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",V4=new RegExp(`^${aw}$`);function iw(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function H4(e){return new RegExp(`^${iw(e)}$`)}function G4(e){const t=iw({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const a=`${t}(?:${r.join("|")})`;return new RegExp(`^${aw}T(?:${a})$`)}const Z4=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Y4=/^-?\d+$/,J4=/^-?\d+(?:\.\d+)?/,X4=/^(?:true|false)$/i,K4=/^null$/i,Q4=/^[^A-Z]*$/,W4=/^[^a-z]*$/,tr=be("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),sw={number:"number",bigint:"bigint",object:"date"},ow=be("$ZodCheckLessThan",(e,t)=>{tr.init(e,t);const r=sw[typeof t.value];e._zod.onattach.push(a=>{const s=a._zod.bag,l=(t.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<l&&(t.inclusive?s.maximum=t.value:s.exclusiveMaximum=t.value)}),e._zod.check=a=>{(t.inclusive?a.value<=t.value:a.value<t.value)||a.issues.push({origin:r,code:"too_big",maximum:t.value,input:a.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),lw=be("$ZodCheckGreaterThan",(e,t)=>{tr.init(e,t);const r=sw[typeof t.value];e._zod.onattach.push(a=>{const s=a._zod.bag,l=(t.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>l&&(t.inclusive?s.minimum=t.value:s.exclusiveMinimum=t.value)}),e._zod.check=a=>{(t.inclusive?a.value>=t.value:a.value>t.value)||a.issues.push({origin:r,code:"too_small",minimum:t.value,input:a.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),e3=be("$ZodCheckMultipleOf",(e,t)=>{tr.init(e,t),e._zod.onattach.push(r=>{var a;(a=r._zod.bag).multipleOf??(a.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):n4(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),t3=be("$ZodCheckNumberFormat",(e,t)=>{tr.init(e,t),t.format=t.format||"float64";const r=t.format?.includes("int"),a=r?"int":"number",[s,l]=o4[t.format];e._zod.onattach.push(c=>{const d=c._zod.bag;d.format=t.format,d.minimum=s,d.maximum=l,r&&(d.pattern=Y4)}),e._zod.check=c=>{const d=c.value;if(r){if(!Number.isInteger(d)){c.issues.push({expected:a,format:t.format,code:"invalid_type",continue:!1,input:d,inst:e});return}if(!Number.isSafeInteger(d)){d>0?c.issues.push({input:d,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:a,continue:!t.abort}):c.issues.push({input:d,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:a,continue:!t.abort});return}}d<s&&c.issues.push({origin:"number",input:d,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),d>l&&c.issues.push({origin:"number",input:d,code:"too_big",maximum:l,inst:e})}}),n3=be("$ZodCheckMaxLength",(e,t)=>{var r;tr.init(e,t),(r=e._zod.def).when??(r.when=a=>{const s=a.value;return!dm(s)&&s.length!==void 0}),e._zod.onattach.push(a=>{const s=a._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(a._zod.bag.maximum=t.maximum)}),e._zod.check=a=>{const s=a.value;if(s.length<=t.maximum)return;const c=pm(s);a.issues.push({origin:c,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),r3=be("$ZodCheckMinLength",(e,t)=>{var r;tr.init(e,t),(r=e._zod.def).when??(r.when=a=>{const s=a.value;return!dm(s)&&s.length!==void 0}),e._zod.onattach.push(a=>{const s=a._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(a._zod.bag.minimum=t.minimum)}),e._zod.check=a=>{const s=a.value;if(s.length>=t.minimum)return;const c=pm(s);a.issues.push({origin:c,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),a3=be("$ZodCheckLengthEquals",(e,t)=>{var r;tr.init(e,t),(r=e._zod.def).when??(r.when=a=>{const s=a.value;return!dm(s)&&s.length!==void 0}),e._zod.onattach.push(a=>{const s=a._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=a=>{const s=a.value,l=s.length;if(l===t.length)return;const c=pm(s),d=l>t.length;a.issues.push({origin:c,...d?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:a.value,inst:e,continue:!t.abort})}}),hd=be("$ZodCheckStringFormat",(e,t)=>{var r,a;tr.init(e,t),e._zod.onattach.push(s=>{const l=s._zod.bag;l.format=t.format,t.pattern&&(l.patterns??(l.patterns=new Set),l.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(a=e._zod).check??(a.check=()=>{})}),i3=be("$ZodCheckRegex",(e,t)=>{hd.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),s3=be("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Q4),hd.init(e,t)}),o3=be("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=W4),hd.init(e,t)}),l3=be("$ZodCheckIncludes",(e,t)=>{tr.init(e,t);const r=Js(t.includes),a=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=a,e._zod.onattach.push(s=>{const l=s._zod.bag;l.patterns??(l.patterns=new Set),l.patterns.add(a)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),u3=be("$ZodCheckStartsWith",(e,t)=>{tr.init(e,t);const r=new RegExp(`^${Js(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(a=>{const s=a._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=a=>{a.value.startsWith(t.prefix)||a.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:a.value,inst:e,continue:!t.abort})}}),c3=be("$ZodCheckEndsWith",(e,t)=>{tr.init(e,t);const r=new RegExp(`.*${Js(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(a=>{const s=a._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=a=>{a.value.endsWith(t.suffix)||a.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:a.value,inst:e,continue:!t.abort})}}),d3=be("$ZodCheckOverwrite",(e,t)=>{tr.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class f3{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const a=t.split(`
`).filter(c=>c),s=Math.min(...a.map(c=>c.length-c.trimStart().length)),l=a.map(c=>c.slice(s)).map(c=>" ".repeat(this.indent*2)+c);for(const c of l)this.content.push(c)}compile(){const t=Function,r=this?.args,s=[...(this?.content??[""]).map(l=>`  ${l}`)];return new t(...r,s.join(`
`))}}const p3={major:4,minor:1,patch:13},Ot=be("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=p3;const a=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&a.unshift(e);for(const s of a)for(const l of s._zod.onattach)l(e);if(a.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const s=(c,d,f)=>{let p=Fs(c),y;for(const v of d){if(v._zod.def.when){if(!v._zod.def.when(c))continue}else if(p)continue;const x=c.issues.length,b=v._zod.check(c);if(b instanceof Promise&&f?.async===!1)throw new Hs;if(y||b instanceof Promise)y=(y??Promise.resolve()).then(async()=>{await b,c.issues.length!==x&&(p||(p=Fs(c,x)))});else{if(c.issues.length===x)continue;p||(p=Fs(c,x))}}return y?y.then(()=>c):c},l=(c,d,f)=>{if(Fs(c))return c.aborted=!0,c;const p=s(d,a,f);if(p instanceof Promise){if(f.async===!1)throw new Hs;return p.then(y=>e._zod.parse(y,f))}return e._zod.parse(p,f)};e._zod.run=(c,d)=>{if(d.skipChecks)return e._zod.parse(c,d);if(d.direction==="backward"){const p=e._zod.parse({value:c.value,issues:[]},{...d,skipChecks:!0});return p instanceof Promise?p.then(y=>l(y,c,d)):l(p,c,d)}const f=e._zod.parse(c,d);if(f instanceof Promise){if(d.async===!1)throw new Hs;return f.then(p=>s(p,a,d))}return s(f,a,d)}}e["~standard"]={validate:s=>{try{const l=y4(e,s);return l.success?{value:l.data}:{issues:l.error?.issues}}catch{return v4(e,s).then(c=>c.success?{value:c.data}:{issues:c.error?.issues})}},vendor:"zod",version:1}}),gm=be("$ZodString",(e,t)=>{Ot.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??Z4(e._zod.bag),e._zod.parse=(r,a)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),Ht=be("$ZodStringFormat",(e,t)=>{hd.init(e,t),gm.init(e,t)}),h3=be("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=I4),Ht.init(e,t)}),m3=be("$ZodUUID",(e,t)=>{if(t.version){const a={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(a===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=ub(a))}else t.pattern??(t.pattern=ub());Ht.init(e,t)}),g3=be("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=$4),Ht.init(e,t)}),y3=be("$ZodURL",(e,t)=>{Ht.init(e,t),e._zod.check=r=>{try{const a=r.value.trim(),s=new URL(a);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=s.href:r.value=a;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),v3=be("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=z4()),Ht.init(e,t)}),b3=be("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=O4),Ht.init(e,t)}),x3=be("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=N4),Ht.init(e,t)}),_3=be("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=A4),Ht.init(e,t)}),w3=be("$ZodULID",(e,t)=>{t.pattern??(t.pattern=C4),Ht.init(e,t)}),S3=be("$ZodXID",(e,t)=>{t.pattern??(t.pattern=R4),Ht.init(e,t)}),k3=be("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=j4),Ht.init(e,t)}),T3=be("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=G4(t)),Ht.init(e,t)}),E3=be("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=V4),Ht.init(e,t)}),N3=be("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=H4(t)),Ht.init(e,t)}),A3=be("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=M4),Ht.init(e,t)}),C3=be("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=L4),Ht.init(e,t),e._zod.bag.format="ipv4"}),R3=be("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=U4),Ht.init(e,t),e._zod.bag.format="ipv6",e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),j3=be("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=q4),Ht.init(e,t)}),O3=be("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=P4),Ht.init(e,t),e._zod.check=r=>{const a=r.value.split("/");try{if(a.length!==2)throw new Error;const[s,l]=a;if(!l)throw new Error;const c=Number(l);if(`${c}`!==l)throw new Error;if(c<0||c>128)throw new Error;new URL(`http://[${s}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function uw(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const M3=be("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=B4),Ht.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=r=>{uw(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function I3(e){if(!rw.test(e))return!1;const t=e.replace(/[-_]/g,a=>a==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return uw(r)}const $3=be("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=rw),Ht.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=r=>{I3(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),D3=be("$ZodE164",(e,t)=>{t.pattern??(t.pattern=F4),Ht.init(e,t)});function z3(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[a]=r;if(!a)return!1;const s=JSON.parse(atob(a));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const L3=be("$ZodJWT",(e,t)=>{Ht.init(e,t),e._zod.check=r=>{z3(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),cw=be("$ZodNumber",(e,t)=>{Ot.init(e,t),e._zod.pattern=e._zod.bag.pattern??J4,e._zod.parse=(r,a)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const s=r.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return r;const l=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...l?{received:l}:{}}),r}}),U3=be("$ZodNumberFormat",(e,t)=>{t3.init(e,t),cw.init(e,t)}),q3=be("$ZodBoolean",(e,t)=>{Ot.init(e,t),e._zod.pattern=X4,e._zod.parse=(r,a)=>{if(t.coerce)try{r.value=!!r.value}catch{}const s=r.value;return typeof s=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),r}}),P3=be("$ZodNull",(e,t)=>{Ot.init(e,t),e._zod.pattern=K4,e._zod.values=new Set([null]),e._zod.parse=(r,a)=>{const s=r.value;return s===null||r.issues.push({expected:"null",code:"invalid_type",input:s,inst:e}),r}}),B3=be("$ZodAny",(e,t)=>{Ot.init(e,t),e._zod.parse=r=>r}),F3=be("$ZodUnknown",(e,t)=>{Ot.init(e,t),e._zod.parse=r=>r}),V3=be("$ZodNever",(e,t)=>{Ot.init(e,t),e._zod.parse=(r,a)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function cb(e,t,r){e.issues.length&&t.issues.push(...Li(r,e.issues)),t.value[r]=e.value}const H3=be("$ZodArray",(e,t)=>{Ot.init(e,t),e._zod.parse=(r,a)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),r;r.value=Array(s.length);const l=[];for(let c=0;c<s.length;c++){const d=s[c],f=t.element._zod.run({value:d,issues:[]},a);f instanceof Promise?l.push(f.then(p=>cb(p,r,c))):cb(f,r,c)}return l.length?Promise.all(l).then(()=>r):r}});function Yc(e,t,r,a){e.issues.length&&t.issues.push(...Li(r,e.issues)),e.value===void 0?r in a&&(t.value[r]=void 0):t.value[r]=e.value}function dw(e){const t=Object.keys(e.shape);for(const a of t)if(!e.shape?.[a]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${a}": expected a Zod schema`);const r=s4(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function fw(e,t,r,a,s,l){const c=[],d=s.keySet,f=s.catchall._zod,p=f.def.type;for(const y in t){if(d.has(y))continue;if(p==="never"){c.push(y);continue}const v=f.run({value:t[y],issues:[]},a);v instanceof Promise?e.push(v.then(x=>Yc(x,r,y,t))):Yc(v,r,y,t)}return c.length&&r.issues.push({code:"unrecognized_keys",keys:c,input:t,inst:l}),e.length?Promise.all(e).then(()=>r):r}const G3=be("$ZodObject",(e,t)=>{if(Ot.init(e,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){const d=t.shape;Object.defineProperty(t,"shape",{get:()=>{const f={...d};return Object.defineProperty(t,"shape",{value:f}),f}})}const a=dd(()=>dw(t));vt(e._zod,"propValues",()=>{const d=t.shape,f={};for(const p in d){const y=d[p]._zod;if(y.values){f[p]??(f[p]=new Set);for(const v of y.values)f[p].add(v)}}return f});const s=Zl,l=t.catchall;let c;e._zod.parse=(d,f)=>{c??(c=a.value);const p=d.value;if(!s(p))return d.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),d;d.value={};const y=[],v=c.shape;for(const x of c.keys){const _=v[x]._zod.run({value:p[x],issues:[]},f);_ instanceof Promise?y.push(_.then(S=>Yc(S,d,x,p))):Yc(_,d,x,p)}return l?fw(y,p,d,f,a.value,e):y.length?Promise.all(y).then(()=>d):d}}),Z3=be("$ZodObjectJIT",(e,t)=>{G3.init(e,t);const r=e._zod.parse,a=dd(()=>dw(t)),s=x=>{const b=new f3(["shape","payload","ctx"]),_=a.value,S=E=>{const q=lb(E);return`shape[${q}]._zod.run({ value: input[${q}], issues: [] }, ctx)`};b.write("const input = payload.value;");const k=Object.create(null);let j=0;for(const E of _.keys)k[E]=`key_${j++}`;b.write("const newResult = {};");for(const E of _.keys){const q=k[E],P=lb(E);b.write(`const ${q} = ${S(E)};`),b.write(`
        if (${q}.issues.length) {
          payload.issues = payload.issues.concat(${q}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${P}, ...iss.path] : [${P}]
          })));
        }
        
        
        if (${q}.value === undefined) {
          if (${P} in input) {
            newResult[${P}] = undefined;
          }
        } else {
          newResult[${P}] = ${q}.value;
        }
        
      `)}b.write("payload.value = newResult;"),b.write("return payload;");const R=b.compile();return(E,q)=>R(x,E,q)};let l;const c=Zl,d=!X2.jitless,p=d&&a4.value,y=t.catchall;let v;e._zod.parse=(x,b)=>{v??(v=a.value);const _=x.value;return c(_)?d&&p&&b?.async===!1&&b.jitless!==!0?(l||(l=s(t.shape)),x=l(x,b),y?fw([],_,x,b,v,e):x):r(x,b):(x.issues.push({expected:"object",code:"invalid_type",input:_,inst:e}),x)}});function db(e,t,r,a){for(const l of e)if(l.issues.length===0)return t.value=l.value,t;const s=e.filter(l=>!Fs(l));return s.length===1?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(l=>l.issues.map(c=>oi(c,a,si())))}),t)}const pw=be("$ZodUnion",(e,t)=>{Ot.init(e,t),vt(e._zod,"optin",()=>t.options.some(s=>s._zod.optin==="optional")?"optional":void 0),vt(e._zod,"optout",()=>t.options.some(s=>s._zod.optout==="optional")?"optional":void 0),vt(e._zod,"values",()=>{if(t.options.every(s=>s._zod.values))return new Set(t.options.flatMap(s=>Array.from(s._zod.values)))}),vt(e._zod,"pattern",()=>{if(t.options.every(s=>s._zod.pattern)){const s=t.options.map(l=>l._zod.pattern);return new RegExp(`^(${s.map(l=>fm(l.source)).join("|")})$`)}});const r=t.options.length===1,a=t.options[0]._zod.run;e._zod.parse=(s,l)=>{if(r)return a(s,l);let c=!1;const d=[];for(const f of t.options){const p=f._zod.run({value:s.value,issues:[]},l);if(p instanceof Promise)d.push(p),c=!0;else{if(p.issues.length===0)return p;d.push(p)}}return c?Promise.all(d).then(f=>db(f,s,e,l)):db(d,s,e,l)}}),Y3=be("$ZodDiscriminatedUnion",(e,t)=>{pw.init(e,t);const r=e._zod.parse;vt(e._zod,"propValues",()=>{const s={};for(const l of t.options){const c=l._zod.propValues;if(!c||Object.keys(c).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(l)}"`);for(const[d,f]of Object.entries(c)){s[d]||(s[d]=new Set);for(const p of f)s[d].add(p)}}return s});const a=dd(()=>{const s=t.options,l=new Map;for(const c of s){const d=c._zod.propValues?.[t.discriminator];if(!d||d.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(c)}"`);for(const f of d){if(l.has(f))throw new Error(`Duplicate discriminator value "${String(f)}"`);l.set(f,c)}}return l});e._zod.parse=(s,l)=>{const c=s.value;if(!Zl(c))return s.issues.push({code:"invalid_type",expected:"object",input:c,inst:e}),s;const d=a.value.get(c?.[t.discriminator]);return d?d._zod.run(s,l):t.unionFallback?r(s,l):(s.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:c,path:[t.discriminator],inst:e}),s)}}),J3=be("$ZodIntersection",(e,t)=>{Ot.init(e,t),e._zod.parse=(r,a)=>{const s=r.value,l=t.left._zod.run({value:s,issues:[]},a),c=t.right._zod.run({value:s,issues:[]},a);return l instanceof Promise||c instanceof Promise?Promise.all([l,c]).then(([f,p])=>fb(r,f,p)):fb(r,l,c)}});function Dh(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Ys(e)&&Ys(t)){const r=Object.keys(t),a=Object.keys(e).filter(l=>r.indexOf(l)!==-1),s={...e,...t};for(const l of a){const c=Dh(e[l],t[l]);if(!c.valid)return{valid:!1,mergeErrorPath:[l,...c.mergeErrorPath]};s[l]=c.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let a=0;a<e.length;a++){const s=e[a],l=t[a],c=Dh(s,l);if(!c.valid)return{valid:!1,mergeErrorPath:[a,...c.mergeErrorPath]};r.push(c.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function fb(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),Fs(e))return e;const a=Dh(t.value,r.value);if(!a.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(a.mergeErrorPath)}`);return e.value=a.data,e}const X3=be("$ZodTuple",(e,t)=>{Ot.init(e,t);const r=t.items;e._zod.parse=(a,s)=>{const l=a.value;if(!Array.isArray(l))return a.issues.push({input:l,inst:e,expected:"tuple",code:"invalid_type"}),a;a.value=[];const c=[],d=[...r].reverse().findIndex(y=>y._zod.optin!=="optional"),f=d===-1?0:r.length-d;if(!t.rest){const y=l.length>r.length,v=l.length<f-1;if(y||v)return a.issues.push({...y?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},input:l,inst:e,origin:"array"}),a}let p=-1;for(const y of r){if(p++,p>=l.length&&p>=f)continue;const v=y._zod.run({value:l[p],issues:[]},s);v instanceof Promise?c.push(v.then(x=>Ac(x,a,p))):Ac(v,a,p)}if(t.rest){const y=l.slice(r.length);for(const v of y){p++;const x=t.rest._zod.run({value:v,issues:[]},s);x instanceof Promise?c.push(x.then(b=>Ac(b,a,p))):Ac(x,a,p)}}return c.length?Promise.all(c).then(()=>a):a}});function Ac(e,t,r){e.issues.length&&t.issues.push(...Li(r,e.issues)),t.value[r]=e.value}const K3=be("$ZodRecord",(e,t)=>{Ot.init(e,t),e._zod.parse=(r,a)=>{const s=r.value;if(!Ys(s))return r.issues.push({expected:"record",code:"invalid_type",input:s,inst:e}),r;const l=[],c=t.keyType._zod.values;if(c){r.value={};const d=new Set;for(const p of c)if(typeof p=="string"||typeof p=="number"||typeof p=="symbol"){d.add(typeof p=="number"?p.toString():p);const y=t.valueType._zod.run({value:s[p],issues:[]},a);y instanceof Promise?l.push(y.then(v=>{v.issues.length&&r.issues.push(...Li(p,v.issues)),r.value[p]=v.value})):(y.issues.length&&r.issues.push(...Li(p,y.issues)),r.value[p]=y.value)}let f;for(const p in s)d.has(p)||(f=f??[],f.push(p));f&&f.length>0&&r.issues.push({code:"unrecognized_keys",input:s,inst:e,keys:f})}else{r.value={};for(const d of Reflect.ownKeys(s)){if(d==="__proto__")continue;const f=t.keyType._zod.run({value:d,issues:[]},a);if(f instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(f.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:f.issues.map(y=>oi(y,a,si())),input:d,path:[d],inst:e}),r.value[f.value]=f.value;continue}const p=t.valueType._zod.run({value:s[d],issues:[]},a);p instanceof Promise?l.push(p.then(y=>{y.issues.length&&r.issues.push(...Li(d,y.issues)),r.value[f.value]=y.value})):(p.issues.length&&r.issues.push(...Li(d,p.issues)),r.value[f.value]=p.value)}}return l.length?Promise.all(l).then(()=>r):r}}),Q3=be("$ZodEnum",(e,t)=>{Ot.init(e,t);const r=K2(t.entries),a=new Set(r);e._zod.values=a,e._zod.pattern=new RegExp(`^(${r.filter(s=>i4.has(typeof s)).map(s=>typeof s=="string"?Js(s):s.toString()).join("|")})$`),e._zod.parse=(s,l)=>{const c=s.value;return a.has(c)||s.issues.push({code:"invalid_value",values:r,input:c,inst:e}),s}}),W3=be("$ZodLiteral",(e,t)=>{if(Ot.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");const r=new Set(t.values);e._zod.values=r,e._zod.pattern=new RegExp(`^(${t.values.map(a=>typeof a=="string"?Js(a):a?Js(a.toString()):String(a)).join("|")})$`),e._zod.parse=(a,s)=>{const l=a.value;return r.has(l)||a.issues.push({code:"invalid_value",values:t.values,input:l,inst:e}),a}}),eR=be("$ZodTransform",(e,t)=>{Ot.init(e,t),e._zod.parse=(r,a)=>{if(a.direction==="backward")throw new J2(e.constructor.name);const s=t.transform(r.value,r);if(a.async)return(s instanceof Promise?s:Promise.resolve(s)).then(c=>(r.value=c,r));if(s instanceof Promise)throw new Hs;return r.value=s,r}});function pb(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const tR=be("$ZodOptional",(e,t)=>{Ot.init(e,t),e._zod.optin="optional",e._zod.optout="optional",vt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),vt(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${fm(r.source)})?$`):void 0}),e._zod.parse=(r,a)=>{if(t.innerType._zod.optin==="optional"){const s=t.innerType._zod.run(r,a);return s instanceof Promise?s.then(l=>pb(l,r.value)):pb(s,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,a)}}),nR=be("$ZodNullable",(e,t)=>{Ot.init(e,t),vt(e._zod,"optin",()=>t.innerType._zod.optin),vt(e._zod,"optout",()=>t.innerType._zod.optout),vt(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${fm(r.source)}|null)$`):void 0}),vt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,a)=>r.value===null?r:t.innerType._zod.run(r,a)}),rR=be("$ZodDefault",(e,t)=>{Ot.init(e,t),e._zod.optin="optional",vt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,a)=>{if(a.direction==="backward")return t.innerType._zod.run(r,a);if(r.value===void 0)return r.value=t.defaultValue,r;const s=t.innerType._zod.run(r,a);return s instanceof Promise?s.then(l=>hb(l,t)):hb(s,t)}});function hb(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const aR=be("$ZodPrefault",(e,t)=>{Ot.init(e,t),e._zod.optin="optional",vt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,a)=>(a.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,a))}),iR=be("$ZodNonOptional",(e,t)=>{Ot.init(e,t),vt(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(a=>a!==void 0)):void 0}),e._zod.parse=(r,a)=>{const s=t.innerType._zod.run(r,a);return s instanceof Promise?s.then(l=>mb(l,e)):mb(s,e)}});function mb(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const sR=be("$ZodCatch",(e,t)=>{Ot.init(e,t),vt(e._zod,"optin",()=>t.innerType._zod.optin),vt(e._zod,"optout",()=>t.innerType._zod.optout),vt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,a)=>{if(a.direction==="backward")return t.innerType._zod.run(r,a);const s=t.innerType._zod.run(r,a);return s instanceof Promise?s.then(l=>(r.value=l.value,l.issues.length&&(r.value=t.catchValue({...r,error:{issues:l.issues.map(c=>oi(c,a,si()))},input:r.value}),r.issues=[]),r)):(r.value=s.value,s.issues.length&&(r.value=t.catchValue({...r,error:{issues:s.issues.map(l=>oi(l,a,si()))},input:r.value}),r.issues=[]),r)}}),oR=be("$ZodPipe",(e,t)=>{Ot.init(e,t),vt(e._zod,"values",()=>t.in._zod.values),vt(e._zod,"optin",()=>t.in._zod.optin),vt(e._zod,"optout",()=>t.out._zod.optout),vt(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,a)=>{if(a.direction==="backward"){const l=t.out._zod.run(r,a);return l instanceof Promise?l.then(c=>Cc(c,t.in,a)):Cc(l,t.in,a)}const s=t.in._zod.run(r,a);return s instanceof Promise?s.then(l=>Cc(l,t.out,a)):Cc(s,t.out,a)}});function Cc(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const lR=be("$ZodReadonly",(e,t)=>{Ot.init(e,t),vt(e._zod,"propValues",()=>t.innerType._zod.propValues),vt(e._zod,"values",()=>t.innerType._zod.values),vt(e._zod,"optin",()=>t.innerType?._zod?.optin),vt(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(r,a)=>{if(a.direction==="backward")return t.innerType._zod.run(r,a);const s=t.innerType._zod.run(r,a);return s instanceof Promise?s.then(gb):gb(s)}});function gb(e){return e.value=Object.freeze(e.value),e}const uR=be("$ZodLazy",(e,t)=>{Ot.init(e,t),vt(e._zod,"innerType",()=>t.getter()),vt(e._zod,"pattern",()=>e._zod.innerType?._zod?.pattern),vt(e._zod,"propValues",()=>e._zod.innerType?._zod?.propValues),vt(e._zod,"optin",()=>e._zod.innerType?._zod?.optin??void 0),vt(e._zod,"optout",()=>e._zod.innerType?._zod?.optout??void 0),e._zod.parse=(r,a)=>e._zod.innerType._zod.run(r,a)}),cR=be("$ZodCustom",(e,t)=>{tr.init(e,t),Ot.init(e,t),e._zod.parse=(r,a)=>r,e._zod.check=r=>{const a=r.value,s=t.fn(a);if(s instanceof Promise)return s.then(l=>yb(l,r,a,e));yb(s,r,a,e)}});function yb(e,t,r,a){if(!e){const s={code:"custom",input:r,inst:a,path:[...a._zod.def.path??[]],continue:!a._zod.def.abort};a._zod.def.params&&(s.params=a._zod.def.params),t.issues.push(Yl(s))}}var vb;class hw{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){const a=r[0];if(this._map.set(t,a),a&&typeof a=="object"&&"id"in a){if(this._idmap.has(a.id))throw new Error(`ID ${a.id} already exists in the registry`);this._idmap.set(a.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const a={...this.get(r)??{}};delete a.id;const s={...a,...this._map.get(t)};return Object.keys(s).length?s:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function dR(){return new hw}(vb=globalThis).__zod_globalRegistry??(vb.__zod_globalRegistry=dR());const $l=globalThis.__zod_globalRegistry;function fR(e,t){return new e({type:"string",...Le(t)})}function pR(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Le(t)})}function bb(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Le(t)})}function hR(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Le(t)})}function mR(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Le(t)})}function gR(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Le(t)})}function yR(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Le(t)})}function vR(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Le(t)})}function bR(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Le(t)})}function xR(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Le(t)})}function _R(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Le(t)})}function wR(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Le(t)})}function SR(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Le(t)})}function kR(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Le(t)})}function TR(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Le(t)})}function ER(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Le(t)})}function NR(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Le(t)})}function AR(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Le(t)})}function CR(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Le(t)})}function RR(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Le(t)})}function jR(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Le(t)})}function OR(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Le(t)})}function MR(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Le(t)})}function IR(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Le(t)})}function $R(e,t){return new e({type:"string",format:"date",check:"string_format",...Le(t)})}function DR(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...Le(t)})}function zR(e,t){return new e({type:"string",format:"duration",check:"string_format",...Le(t)})}function LR(e,t){return new e({type:"number",checks:[],...Le(t)})}function UR(e,t){return new e({type:"number",coerce:!0,checks:[],...Le(t)})}function qR(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Le(t)})}function PR(e,t){return new e({type:"boolean",...Le(t)})}function BR(e,t){return new e({type:"null",...Le(t)})}function FR(e){return new e({type:"any"})}function VR(e){return new e({type:"unknown"})}function HR(e,t){return new e({type:"never",...Le(t)})}function xb(e,t){return new ow({check:"less_than",...Le(t),value:e,inclusive:!1})}function Kp(e,t){return new ow({check:"less_than",...Le(t),value:e,inclusive:!0})}function _b(e,t){return new lw({check:"greater_than",...Le(t),value:e,inclusive:!1})}function Qp(e,t){return new lw({check:"greater_than",...Le(t),value:e,inclusive:!0})}function wb(e,t){return new e3({check:"multiple_of",...Le(t),value:e})}function mw(e,t){return new n3({check:"max_length",...Le(t),maximum:e})}function Jc(e,t){return new r3({check:"min_length",...Le(t),minimum:e})}function gw(e,t){return new a3({check:"length_equals",...Le(t),length:e})}function GR(e,t){return new i3({check:"string_format",format:"regex",...Le(t),pattern:e})}function ZR(e){return new s3({check:"string_format",format:"lowercase",...Le(e)})}function YR(e){return new o3({check:"string_format",format:"uppercase",...Le(e)})}function JR(e,t){return new l3({check:"string_format",format:"includes",...Le(t),includes:e})}function XR(e,t){return new u3({check:"string_format",format:"starts_with",...Le(t),prefix:e})}function KR(e,t){return new c3({check:"string_format",format:"ends_with",...Le(t),suffix:e})}function to(e){return new d3({check:"overwrite",tx:e})}function QR(e){return to(t=>t.normalize(e))}function WR(){return to(e=>e.trim())}function ej(){return to(e=>e.toLowerCase())}function tj(){return to(e=>e.toUpperCase())}function nj(){return to(e=>r4(e))}function rj(e,t,r){return new e({type:"array",element:t,...Le(r)})}function aj(e,t,r){const a=Le(r);return a.abort??(a.abort=!0),new e({type:"custom",check:"custom",fn:t,...a})}function ij(e,t,r){return new e({type:"custom",check:"custom",fn:t,...Le(r)})}function sj(e){const t=oj(r=>(r.addIssue=a=>{if(typeof a=="string")r.issues.push(Yl(a,r.value,t._zod.def));else{const s=a;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),r.issues.push(Yl(s))}},e(r.value,r)));return t}function oj(e,t){const r=new tr({check:"custom",...Le(t)});return r._zod.check=e,r}class Sb{constructor(t){this.counter=0,this.metadataRegistry=t?.metadata??$l,this.target=t?.target??"draft-2020-12",this.unrepresentable=t?.unrepresentable??"throw",this.override=t?.override??(()=>{}),this.io=t?.io??"output",this.seen=new Map}process(t,r={path:[],schemaPath:[]}){var a;const s=t._zod.def,l={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},c=this.seen.get(t);if(c)return c.count++,r.schemaPath.includes(t)&&(c.cycle=r.path),c.schema;const d={schema:{},count:1,cycle:void 0,path:r.path};this.seen.set(t,d);const f=t._zod.toJSONSchema?.();if(f)d.schema=f;else{const v={...r,schemaPath:[...r.schemaPath,t],path:r.path},x=t._zod.parent;if(x)d.ref=x,this.process(x,v),this.seen.get(x).isParent=!0;else{const b=d.schema;switch(s.type){case"string":{const _=b;_.type="string";const{minimum:S,maximum:k,format:j,patterns:R,contentEncoding:E}=t._zod.bag;if(typeof S=="number"&&(_.minLength=S),typeof k=="number"&&(_.maxLength=k),j&&(_.format=l[j]??j,_.format===""&&delete _.format),E&&(_.contentEncoding=E),R&&R.size>0){const q=[...R];q.length===1?_.pattern=q[0].source:q.length>1&&(d.schema.allOf=[...q.map(P=>({...this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{},pattern:P.source}))])}break}case"number":{const _=b,{minimum:S,maximum:k,format:j,multipleOf:R,exclusiveMaximum:E,exclusiveMinimum:q}=t._zod.bag;typeof j=="string"&&j.includes("int")?_.type="integer":_.type="number",typeof q=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(_.minimum=q,_.exclusiveMinimum=!0):_.exclusiveMinimum=q),typeof S=="number"&&(_.minimum=S,typeof q=="number"&&this.target!=="draft-4"&&(q>=S?delete _.minimum:delete _.exclusiveMinimum)),typeof E=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(_.maximum=E,_.exclusiveMaximum=!0):_.exclusiveMaximum=E),typeof k=="number"&&(_.maximum=k,typeof E=="number"&&this.target!=="draft-4"&&(E<=k?delete _.maximum:delete _.exclusiveMaximum)),typeof R=="number"&&(_.multipleOf=R);break}case"boolean":{const _=b;_.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{this.target==="openapi-3.0"?(b.type="string",b.nullable=!0,b.enum=[null]):b.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{b.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const _=b,{minimum:S,maximum:k}=t._zod.bag;typeof S=="number"&&(_.minItems=S),typeof k=="number"&&(_.maxItems=k),_.type="array",_.items=this.process(s.element,{...v,path:[...v.path,"items"]});break}case"object":{const _=b;_.type="object",_.properties={};const S=s.shape;for(const R in S)_.properties[R]=this.process(S[R],{...v,path:[...v.path,"properties",R]});const k=new Set(Object.keys(S)),j=new Set([...k].filter(R=>{const E=s.shape[R]._zod;return this.io==="input"?E.optin===void 0:E.optout===void 0}));j.size>0&&(_.required=Array.from(j)),s.catchall?._zod.def.type==="never"?_.additionalProperties=!1:s.catchall?s.catchall&&(_.additionalProperties=this.process(s.catchall,{...v,path:[...v.path,"additionalProperties"]})):this.io==="output"&&(_.additionalProperties=!1);break}case"union":{const _=b,S=s.discriminator!==void 0,k=s.options.map((j,R)=>this.process(j,{...v,path:[...v.path,S?"oneOf":"anyOf",R]}));S?_.oneOf=k:_.anyOf=k;break}case"intersection":{const _=b,S=this.process(s.left,{...v,path:[...v.path,"allOf",0]}),k=this.process(s.right,{...v,path:[...v.path,"allOf",1]}),j=E=>"allOf"in E&&Object.keys(E).length===1,R=[...j(S)?S.allOf:[S],...j(k)?k.allOf:[k]];_.allOf=R;break}case"tuple":{const _=b;_.type="array";const S=this.target==="draft-2020-12"?"prefixItems":"items",k=this.target==="draft-2020-12"||this.target==="openapi-3.0"?"items":"additionalItems",j=s.items.map((P,H)=>this.process(P,{...v,path:[...v.path,S,H]})),R=s.rest?this.process(s.rest,{...v,path:[...v.path,k,...this.target==="openapi-3.0"?[s.items.length]:[]]}):null;this.target==="draft-2020-12"?(_.prefixItems=j,R&&(_.items=R)):this.target==="openapi-3.0"?(_.items={anyOf:j},R&&_.items.anyOf.push(R),_.minItems=j.length,R||(_.maxItems=j.length)):(_.items=j,R&&(_.additionalItems=R));const{minimum:E,maximum:q}=t._zod.bag;typeof E=="number"&&(_.minItems=E),typeof q=="number"&&(_.maxItems=q);break}case"record":{const _=b;_.type="object",(this.target==="draft-7"||this.target==="draft-2020-12")&&(_.propertyNames=this.process(s.keyType,{...v,path:[...v.path,"propertyNames"]})),_.additionalProperties=this.process(s.valueType,{...v,path:[...v.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const _=b,S=K2(s.entries);S.every(k=>typeof k=="number")&&(_.type="number"),S.every(k=>typeof k=="string")&&(_.type="string"),_.enum=S;break}case"literal":{const _=b,S=[];for(const k of s.values)if(k===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof k=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");S.push(Number(k))}else S.push(k);if(S.length!==0)if(S.length===1){const k=S[0];_.type=k===null?"null":typeof k,this.target==="draft-4"||this.target==="openapi-3.0"?_.enum=[k]:_.const=k}else S.every(k=>typeof k=="number")&&(_.type="number"),S.every(k=>typeof k=="string")&&(_.type="string"),S.every(k=>typeof k=="boolean")&&(_.type="string"),S.every(k=>k===null)&&(_.type="null"),_.enum=S;break}case"file":{const _=b,S={type:"string",format:"binary",contentEncoding:"binary"},{minimum:k,maximum:j,mime:R}=t._zod.bag;k!==void 0&&(S.minLength=k),j!==void 0&&(S.maxLength=j),R?R.length===1?(S.contentMediaType=R[0],Object.assign(_,S)):_.anyOf=R.map(E=>({...S,contentMediaType:E})):Object.assign(_,S);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const _=this.process(s.innerType,v);this.target==="openapi-3.0"?(d.ref=s.innerType,b.nullable=!0):b.anyOf=[_,{type:"null"}];break}case"nonoptional":{this.process(s.innerType,v),d.ref=s.innerType;break}case"success":{const _=b;_.type="boolean";break}case"default":{this.process(s.innerType,v),d.ref=s.innerType,b.default=JSON.parse(JSON.stringify(s.defaultValue));break}case"prefault":{this.process(s.innerType,v),d.ref=s.innerType,this.io==="input"&&(b._prefault=JSON.parse(JSON.stringify(s.defaultValue)));break}case"catch":{this.process(s.innerType,v),d.ref=s.innerType;let _;try{_=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}b.default=_;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const _=b,S=t._zod.pattern;if(!S)throw new Error("Pattern not found in template literal");_.type="string",_.pattern=S.source;break}case"pipe":{const _=this.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;this.process(_,v),d.ref=_;break}case"readonly":{this.process(s.innerType,v),d.ref=s.innerType,b.readOnly=!0;break}case"promise":{this.process(s.innerType,v),d.ref=s.innerType;break}case"optional":{this.process(s.innerType,v),d.ref=s.innerType;break}case"lazy":{const _=t._zod.innerType;this.process(_,v),d.ref=_;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema");break}}}}const p=this.metadataRegistry.get(t);return p&&Object.assign(d.schema,p),this.io==="input"&&Un(t)&&(delete d.schema.examples,delete d.schema.default),this.io==="input"&&d.schema._prefault&&((a=d.schema).default??(a.default=d.schema._prefault)),delete d.schema._prefault,this.seen.get(t).schema}emit(t,r){const a={cycles:r?.cycles??"ref",reused:r?.reused??"inline",external:r?.external??void 0},s=this.seen.get(t);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const l=y=>{const v=this.target==="draft-2020-12"?"$defs":"definitions";if(a.external){const S=a.external.registry.get(y[0])?.id,k=a.external.uri??(R=>R);if(S)return{ref:k(S)};const j=y[1].defId??y[1].schema.id??`schema${this.counter++}`;return y[1].defId=j,{defId:j,ref:`${k("__shared")}#/${v}/${j}`}}if(y[1]===s)return{ref:"#"};const b=`#/${v}/`,_=y[1].schema.id??`__schema${this.counter++}`;return{defId:_,ref:b+_}},c=y=>{if(y[1].schema.$ref)return;const v=y[1],{ref:x,defId:b}=l(y);v.def={...v.schema},b&&(v.defId=b);const _=v.schema;for(const S in _)delete _[S];_.$ref=x};if(a.cycles==="throw")for(const y of this.seen.entries()){const v=y[1];if(v.cycle)throw new Error(`Cycle detected: #/${v.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const y of this.seen.entries()){const v=y[1];if(t===y[0]){c(y);continue}if(a.external){const b=a.external.registry.get(y[0])?.id;if(t!==y[0]&&b){c(y);continue}}if(this.metadataRegistry.get(y[0])?.id){c(y);continue}if(v.cycle){c(y);continue}if(v.count>1&&a.reused==="ref"){c(y);continue}}const d=(y,v)=>{const x=this.seen.get(y),b=x.def??x.schema,_={...b};if(x.ref===null)return;const S=x.ref;if(x.ref=null,S){d(S,v);const k=this.seen.get(S).schema;k.$ref&&(v.target==="draft-7"||v.target==="draft-4"||v.target==="openapi-3.0")?(b.allOf=b.allOf??[],b.allOf.push(k)):(Object.assign(b,k),Object.assign(b,_))}x.isParent||this.override({zodSchema:y,jsonSchema:b,path:x.path??[]})};for(const y of[...this.seen.entries()].reverse())d(y[0],{target:this.target});const f={};if(this.target==="draft-2020-12"?f.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?f.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?f.$schema="http://json-schema.org/draft-04/schema#":this.target==="openapi-3.0"||console.warn(`Invalid target: ${this.target}`),a.external?.uri){const y=a.external.registry.get(t)?.id;if(!y)throw new Error("Schema is missing an `id` property");f.$id=a.external.uri(y)}Object.assign(f,s.def);const p=a.external?.defs??{};for(const y of this.seen.entries()){const v=y[1];v.def&&v.defId&&(p[v.defId]=v.def)}a.external||Object.keys(p).length>0&&(this.target==="draft-2020-12"?f.$defs=p:f.definitions=p);try{return JSON.parse(JSON.stringify(f))}catch{throw new Error("Error converting schema to JSON.")}}}function lj(e,t){if(e instanceof hw){const a=new Sb(t),s={};for(const d of e._idmap.entries()){const[f,p]=d;a.process(p)}const l={},c={registry:e,uri:t?.uri,defs:s};for(const d of e._idmap.entries()){const[f,p]=d;l[f]=a.emit(p,{...t,external:c})}if(Object.keys(s).length>0){const d=a.target==="draft-2020-12"?"$defs":"definitions";l.__shared={[d]:s}}return{schemas:l}}const r=new Sb(t);return r.process(e),r.emit(e,t)}function Un(e,t){const r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);const a=e._zod.def;if(a.type==="transform")return!0;if(a.type==="array")return Un(a.element,r);if(a.type==="set")return Un(a.valueType,r);if(a.type==="lazy")return Un(a.getter(),r);if(a.type==="promise"||a.type==="optional"||a.type==="nonoptional"||a.type==="nullable"||a.type==="readonly"||a.type==="default"||a.type==="prefault")return Un(a.innerType,r);if(a.type==="intersection")return Un(a.left,r)||Un(a.right,r);if(a.type==="record"||a.type==="map")return Un(a.keyType,r)||Un(a.valueType,r);if(a.type==="pipe")return Un(a.in,r)||Un(a.out,r);if(a.type==="object"){for(const s in a.shape)if(Un(a.shape[s],r))return!0;return!1}if(a.type==="union"){for(const s of a.options)if(Un(s,r))return!0;return!1}if(a.type==="tuple"){for(const s of a.items)if(Un(s,r))return!0;return!!(a.rest&&Un(a.rest,r))}return!1}const uj=be("ZodISODateTime",(e,t)=>{T3.init(e,t),Yt.init(e,t)});function cj(e){return IR(uj,e)}const dj=be("ZodISODate",(e,t)=>{E3.init(e,t),Yt.init(e,t)});function fj(e){return $R(dj,e)}const pj=be("ZodISOTime",(e,t)=>{N3.init(e,t),Yt.init(e,t)});function hj(e){return DR(pj,e)}const mj=be("ZodISODuration",(e,t)=>{A3.init(e,t),Yt.init(e,t)});function gj(e){return zR(mj,e)}const yj=(e,t)=>{tw.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>g4(e,r)},flatten:{value:r=>m4(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,$h,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,$h,2)}},isEmpty:{get(){return e.issues.length===0}}})},Nr=be("ZodError",yj,{Parent:Error}),vj=hm(Nr),bj=mm(Nr),xj=fd(Nr),yw=pd(Nr),_j=b4(Nr),wj=x4(Nr),Sj=_4(Nr),kj=w4(Nr),Tj=S4(Nr),Ej=k4(Nr),Nj=T4(Nr),Aj=E4(Nr),Lt=be("ZodType",(e,t)=>(Ot.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(Hi(t,{checks:[...t.checks??[],...r.map(a=>typeof a=="function"?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]})),e.clone=(r,a)=>ui(e,r,a),e.brand=()=>e,e.register=((r,a)=>(r.add(e,a),e)),e.parse=(r,a)=>vj(e,r,a,{callee:e.parse}),e.safeParse=(r,a)=>xj(e,r,a),e.parseAsync=async(r,a)=>bj(e,r,a,{callee:e.parseAsync}),e.safeParseAsync=async(r,a)=>yw(e,r,a),e.spa=e.safeParseAsync,e.encode=(r,a)=>_j(e,r,a),e.decode=(r,a)=>wj(e,r,a),e.encodeAsync=async(r,a)=>Sj(e,r,a),e.decodeAsync=async(r,a)=>kj(e,r,a),e.safeEncode=(r,a)=>Tj(e,r,a),e.safeDecode=(r,a)=>Ej(e,r,a),e.safeEncodeAsync=async(r,a)=>Nj(e,r,a),e.safeDecodeAsync=async(r,a)=>Aj(e,r,a),e.refine=(r,a)=>e.check(SO(r,a)),e.superRefine=r=>e.check(kO(r)),e.overwrite=r=>e.check(to(r)),e.optional=()=>Eb(e),e.nullable=()=>Nb(e),e.nullish=()=>Eb(Nb(e)),e.nonoptional=r=>mO(e,r),e.array=()=>ge(e),e.or=r=>Qe([e,r]),e.and=r=>aO(e,r),e.transform=r=>Ab(e,uO(r)),e.default=r=>fO(e,r),e.prefault=r=>hO(e,r),e.catch=r=>yO(e,r),e.pipe=r=>Ab(e,r),e.readonly=()=>xO(e),e.describe=r=>{const a=e.clone();return $l.add(a,{description:r}),a},Object.defineProperty(e,"description",{get(){return $l.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return $l.get(e);const a=e.clone();return $l.add(a,r[0]),a},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),vw=be("_ZodString",(e,t)=>{gm.init(e,t),Lt.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...a)=>e.check(GR(...a)),e.includes=(...a)=>e.check(JR(...a)),e.startsWith=(...a)=>e.check(XR(...a)),e.endsWith=(...a)=>e.check(KR(...a)),e.min=(...a)=>e.check(Jc(...a)),e.max=(...a)=>e.check(mw(...a)),e.length=(...a)=>e.check(gw(...a)),e.nonempty=(...a)=>e.check(Jc(1,...a)),e.lowercase=a=>e.check(ZR(a)),e.uppercase=a=>e.check(YR(a)),e.trim=()=>e.check(WR()),e.normalize=(...a)=>e.check(QR(...a)),e.toLowerCase=()=>e.check(ej()),e.toUpperCase=()=>e.check(tj()),e.slugify=()=>e.check(nj())}),Cj=be("ZodString",(e,t)=>{gm.init(e,t),vw.init(e,t),e.email=r=>e.check(pR(Rj,r)),e.url=r=>e.check(vR(jj,r)),e.jwt=r=>e.check(MR(Gj,r)),e.emoji=r=>e.check(bR(Oj,r)),e.guid=r=>e.check(bb(kb,r)),e.uuid=r=>e.check(hR(Rc,r)),e.uuidv4=r=>e.check(mR(Rc,r)),e.uuidv6=r=>e.check(gR(Rc,r)),e.uuidv7=r=>e.check(yR(Rc,r)),e.nanoid=r=>e.check(xR(Mj,r)),e.guid=r=>e.check(bb(kb,r)),e.cuid=r=>e.check(_R(Ij,r)),e.cuid2=r=>e.check(wR($j,r)),e.ulid=r=>e.check(SR(Dj,r)),e.base64=r=>e.check(RR(Fj,r)),e.base64url=r=>e.check(jR(Vj,r)),e.xid=r=>e.check(kR(zj,r)),e.ksuid=r=>e.check(TR(Lj,r)),e.ipv4=r=>e.check(ER(Uj,r)),e.ipv6=r=>e.check(NR(qj,r)),e.cidrv4=r=>e.check(AR(Pj,r)),e.cidrv6=r=>e.check(CR(Bj,r)),e.e164=r=>e.check(OR(Hj,r)),e.datetime=r=>e.check(cj(r)),e.date=r=>e.check(fj(r)),e.time=r=>e.check(hj(r)),e.duration=r=>e.check(gj(r))});function w(e){return fR(Cj,e)}const Yt=be("ZodStringFormat",(e,t)=>{Ht.init(e,t),vw.init(e,t)}),Rj=be("ZodEmail",(e,t)=>{g3.init(e,t),Yt.init(e,t)}),kb=be("ZodGUID",(e,t)=>{h3.init(e,t),Yt.init(e,t)}),Rc=be("ZodUUID",(e,t)=>{m3.init(e,t),Yt.init(e,t)}),jj=be("ZodURL",(e,t)=>{y3.init(e,t),Yt.init(e,t)}),Oj=be("ZodEmoji",(e,t)=>{v3.init(e,t),Yt.init(e,t)}),Mj=be("ZodNanoID",(e,t)=>{b3.init(e,t),Yt.init(e,t)}),Ij=be("ZodCUID",(e,t)=>{x3.init(e,t),Yt.init(e,t)}),$j=be("ZodCUID2",(e,t)=>{_3.init(e,t),Yt.init(e,t)}),Dj=be("ZodULID",(e,t)=>{w3.init(e,t),Yt.init(e,t)}),zj=be("ZodXID",(e,t)=>{S3.init(e,t),Yt.init(e,t)}),Lj=be("ZodKSUID",(e,t)=>{k3.init(e,t),Yt.init(e,t)}),Uj=be("ZodIPv4",(e,t)=>{C3.init(e,t),Yt.init(e,t)}),qj=be("ZodIPv6",(e,t)=>{R3.init(e,t),Yt.init(e,t)}),Pj=be("ZodCIDRv4",(e,t)=>{j3.init(e,t),Yt.init(e,t)}),Bj=be("ZodCIDRv6",(e,t)=>{O3.init(e,t),Yt.init(e,t)}),Fj=be("ZodBase64",(e,t)=>{M3.init(e,t),Yt.init(e,t)}),Vj=be("ZodBase64URL",(e,t)=>{$3.init(e,t),Yt.init(e,t)}),Hj=be("ZodE164",(e,t)=>{D3.init(e,t),Yt.init(e,t)}),Gj=be("ZodJWT",(e,t)=>{L3.init(e,t),Yt.init(e,t)}),ym=be("ZodNumber",(e,t)=>{cw.init(e,t),Lt.init(e,t),e.gt=(a,s)=>e.check(_b(a,s)),e.gte=(a,s)=>e.check(Qp(a,s)),e.min=(a,s)=>e.check(Qp(a,s)),e.lt=(a,s)=>e.check(xb(a,s)),e.lte=(a,s)=>e.check(Kp(a,s)),e.max=(a,s)=>e.check(Kp(a,s)),e.int=a=>e.check(Tb(a)),e.safe=a=>e.check(Tb(a)),e.positive=a=>e.check(_b(0,a)),e.nonnegative=a=>e.check(Qp(0,a)),e.negative=a=>e.check(xb(0,a)),e.nonpositive=a=>e.check(Kp(0,a)),e.multipleOf=(a,s)=>e.check(wb(a,s)),e.step=(a,s)=>e.check(wb(a,s)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function Z(e){return LR(ym,e)}const Zj=be("ZodNumberFormat",(e,t)=>{U3.init(e,t),ym.init(e,t)});function Tb(e){return qR(Zj,e)}const Yj=be("ZodBoolean",(e,t)=>{q3.init(e,t),Lt.init(e,t)});function it(e){return PR(Yj,e)}const Jj=be("ZodNull",(e,t)=>{P3.init(e,t),Lt.init(e,t)});function Xj(e){return BR(Jj,e)}const Kj=be("ZodAny",(e,t)=>{B3.init(e,t),Lt.init(e,t)});function fr(){return FR(Kj)}const Qj=be("ZodUnknown",(e,t)=>{F3.init(e,t),Lt.init(e,t)});function Fn(){return VR(Qj)}const Wj=be("ZodNever",(e,t)=>{V3.init(e,t),Lt.init(e,t)});function eO(e){return HR(Wj,e)}const tO=be("ZodArray",(e,t)=>{H3.init(e,t),Lt.init(e,t),e.element=t.element,e.min=(r,a)=>e.check(Jc(r,a)),e.nonempty=r=>e.check(Jc(1,r)),e.max=(r,a)=>e.check(mw(r,a)),e.length=(r,a)=>e.check(gw(r,a)),e.unwrap=()=>e.element});function ge(e,t){return rj(tO,e,t)}const bw=be("ZodObject",(e,t)=>{Z3.init(e,t),Lt.init(e,t),vt(e,"shape",()=>t.shape),e.keyof=()=>He(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Fn()}),e.loose=()=>e.clone({...e._zod.def,catchall:Fn()}),e.strict=()=>e.clone({...e._zod.def,catchall:eO()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>c4(e,r),e.safeExtend=r=>d4(e,r),e.merge=r=>f4(e,r),e.pick=r=>l4(e,r),e.omit=r=>u4(e,r),e.partial=(...r)=>p4(_w,e,r[0]),e.required=(...r)=>h4(ww,e,r[0])});function C(e,t){const r={type:"object",shape:e??{},...Le(t)};return new bw(r)}function zh(e,t){return new bw({type:"object",shape:e,catchall:Fn(),...Le(t)})}const xw=be("ZodUnion",(e,t)=>{pw.init(e,t),Lt.init(e,t),e.options=t.options});function Qe(e,t){return new xw({type:"union",options:e,...Le(t)})}const nO=be("ZodDiscriminatedUnion",(e,t)=>{xw.init(e,t),Y3.init(e,t)});function yt(e,t,r){return new nO({type:"union",options:t,discriminator:e,...Le(r)})}const rO=be("ZodIntersection",(e,t)=>{J3.init(e,t),Lt.init(e,t)});function aO(e,t){return new rO({type:"intersection",left:e,right:t})}const iO=be("ZodTuple",(e,t)=>{X3.init(e,t),Lt.init(e,t),e.rest=r=>e.clone({...e._zod.def,rest:r})});function Lh(e,t,r){const a=t instanceof Ot,s=a?r:t,l=a?t:null;return new iO({type:"tuple",items:e,rest:l,...Le(s)})}const sO=be("ZodRecord",(e,t)=>{K3.init(e,t),Lt.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Vt(e,t,r){return new sO({type:"record",keyType:e,valueType:t,...Le(r)})}const Uh=be("ZodEnum",(e,t)=>{Q3.init(e,t),Lt.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(a,s)=>{const l={};for(const c of a)if(r.has(c))l[c]=t.entries[c];else throw new Error(`Key ${c} not found in enum`);return new Uh({...t,checks:[],...Le(s),entries:l})},e.exclude=(a,s)=>{const l={...t.entries};for(const c of a)if(r.has(c))delete l[c];else throw new Error(`Key ${c} not found in enum`);return new Uh({...t,checks:[],...Le(s),entries:l})}});function He(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(a=>[a,a])):e;return new Uh({type:"enum",entries:r,...Le(t)})}const oO=be("ZodLiteral",(e,t)=>{W3.init(e,t),Lt.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function Q(e,t){return new oO({type:"literal",values:Array.isArray(e)?e:[e],...Le(t)})}const lO=be("ZodTransform",(e,t)=>{eR.init(e,t),Lt.init(e,t),e._zod.parse=(r,a)=>{if(a.direction==="backward")throw new J2(e.constructor.name);r.addIssue=l=>{if(typeof l=="string")r.issues.push(Yl(l,r.value,t));else{const c=l;c.fatal&&(c.continue=!1),c.code??(c.code="custom"),c.input??(c.input=r.value),c.inst??(c.inst=e),r.issues.push(Yl(c))}};const s=t.transform(r.value,r);return s instanceof Promise?s.then(l=>(r.value=l,r)):(r.value=s,r)}});function uO(e){return new lO({type:"transform",transform:e})}const _w=be("ZodOptional",(e,t)=>{tR.init(e,t),Lt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Eb(e){return new _w({type:"optional",innerType:e})}const cO=be("ZodNullable",(e,t)=>{nR.init(e,t),Lt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Nb(e){return new cO({type:"nullable",innerType:e})}const dO=be("ZodDefault",(e,t)=>{rR.init(e,t),Lt.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function fO(e,t){return new dO({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():W2(t)}})}const pO=be("ZodPrefault",(e,t)=>{aR.init(e,t),Lt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function hO(e,t){return new pO({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():W2(t)}})}const ww=be("ZodNonOptional",(e,t)=>{iR.init(e,t),Lt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function mO(e,t){return new ww({type:"nonoptional",innerType:e,...Le(t)})}const gO=be("ZodCatch",(e,t)=>{sR.init(e,t),Lt.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function yO(e,t){return new gO({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const vO=be("ZodPipe",(e,t)=>{oR.init(e,t),Lt.init(e,t),e.in=t.in,e.out=t.out});function Ab(e,t){return new vO({type:"pipe",in:e,out:t})}const bO=be("ZodReadonly",(e,t)=>{lR.init(e,t),Lt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function xO(e){return new bO({type:"readonly",innerType:e})}const _O=be("ZodLazy",(e,t)=>{uR.init(e,t),Lt.init(e,t),e.unwrap=()=>e._zod.def.getter()});function vm(e){return new _O({type:"lazy",getter:e})}const bm=be("ZodCustom",(e,t)=>{cR.init(e,t),Lt.init(e,t)});function wO(e,t){return aj(bm,e??(()=>!0),t)}function SO(e,t={}){return ij(bm,e,t)}function kO(e){return sj(e)}function Xc(e,t={error:`Input not instance of ${e.name}`}){const r=new bm({type:"custom",check:"custom",fn:a=>a instanceof e,abort:!0,...Le(t)});return r._zod.bag.Class=e,r}function TO(e){return UR(ym,e)}var Jl;(function(e){e.assertEqual=s=>{};function t(s){}e.assertIs=t;function r(s){throw new Error}e.assertNever=r,e.arrayToEnum=s=>{const l={};for(const c of s)l[c]=c;return l},e.getValidEnumValues=s=>{const l=e.objectKeys(s).filter(d=>typeof s[s[d]]!="number"),c={};for(const d of l)c[d]=s[d];return e.objectValues(c)},e.objectValues=s=>e.objectKeys(s).map(function(l){return s[l]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const l=[];for(const c in s)Object.prototype.hasOwnProperty.call(s,c)&&l.push(c);return l},e.find=(s,l)=>{for(const c of s)if(l(c))return c},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function a(s,l=" | "){return s.map(c=>typeof c=="string"?`'${c}'`:c).join(l)}e.joinValues=a,e.jsonStringifyReplacer=(s,l)=>typeof l=="bigint"?l.toString():l})(Jl||(Jl={}));var Cb;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(Cb||(Cb={}));Jl.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);Jl.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Kc extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(l){return l.message},a={_errors:[]},s=l=>{for(const c of l.issues)if(c.code==="invalid_union")c.unionErrors.map(s);else if(c.code==="invalid_return_type")s(c.returnTypeError);else if(c.code==="invalid_arguments")s(c.argumentsError);else if(c.path.length===0)a._errors.push(r(c));else{let d=a,f=0;for(;f<c.path.length;){const p=c.path[f];f===c.path.length-1?(d[p]=d[p]||{_errors:[]},d[p]._errors.push(r(c))):d[p]=d[p]||{_errors:[]},d=d[p],f++}}};return s(this),a}static assert(t){if(!(t instanceof Kc))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Jl.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r=Object.create(null),a=[];for(const s of this.issues)if(s.path.length>0){const l=s.path[0];r[l]=r[l]||[],r[l].push(t(s))}else a.push(t(s));return{formErrors:a,fieldErrors:r}}get formErrors(){return this.flatten()}}Kc.create=e=>new Kc(e);var Rb;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(Rb||(Rb={}));var Ke;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Ke||(Ke={}));var Sw={};function Pt(...e){return e.reduce((t,r)=>({...t,...r??{}}),{})}async function EO(e,t){if(e==null)return Promise.resolve();const r=t?.abortSignal;return new Promise((a,s)=>{if(r?.aborted){s(jb());return}const l=setTimeout(()=>{c(),a()},e),c=()=>{clearTimeout(l),r?.removeEventListener("abort",d)},d=()=>{c(),s(jb())};r?.addEventListener("abort",d)})}function jb(){return new DOMException("Delay was aborted","AbortError")}function no(e){return Object.fromEntries([...e.headers])}var eu=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:a="-"}={})=>{const s=()=>{const l=r.length,c=new Array(t);for(let d=0;d<t;d++)c[d]=r[Math.random()*l|0];return c.join("")};if(e==null)return s;if(r.includes(a))throw new k2({argument:"separator",message:`The separator "${a}" must not be part of the alphabet "${r}".`});return()=>`${e}${a}${s()}`},gn=eu();function kw(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function Xs(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}var NO=["fetch failed","failed to fetch"];function Tw({error:e,url:t,requestBodyValues:r}){if(Xs(e))return e;if(e instanceof TypeError&&NO.includes(e.message.toLowerCase())){const a=e.cause;if(a!=null)return new vn({message:`Cannot connect to API: ${a.message}`,cause:a,url:t,requestBodyValues:r,isRetryable:!0})}return e}function xm(e=globalThis){var t,r,a;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(a=(r=e.process)==null?void 0:r.versions)!=null&&a.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function AO(e){if(e==null)return{};const t={};if(e instanceof Headers)e.forEach((r,a)=>{t[a.toLowerCase()]=r});else{Array.isArray(e)||(e=Object.entries(e));for(const[r,a]of e)a!=null&&(t[r.toLowerCase()]=a)}return t}function Na(e,...t){const r=new Headers(AO(e)),a=r.get("user-agent")||"";return r.set("user-agent",[a,...t].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}var Ew="3.0.18",CO=()=>globalThis.fetch,Ob=async({url:e,headers:t={},successfulResponseHandler:r,failedResponseHandler:a,abortSignal:s,fetch:l=CO()})=>{try{const c=await l(e,{method:"GET",headers:Na(t,`ai-sdk/provider-utils/${Ew}`,xm()),signal:s}),d=no(c);if(!c.ok){let f;try{f=await a({response:c,url:e,requestBodyValues:{}})}catch(p){throw Xs(p)||vn.isInstance(p)?p:new vn({message:"Failed to process error response",cause:p,statusCode:c.status,url:e,responseHeaders:d,requestBodyValues:{}})}throw f.value}try{return await r({response:c,url:e,requestBodyValues:{}})}catch(f){throw f instanceof Error&&(Xs(f)||vn.isInstance(f))?f:new vn({message:"Failed to process successful response",cause:f,statusCode:c.status,url:e,responseHeaders:d,requestBodyValues:{}})}}catch(c){throw Tw({error:c,url:e,requestBodyValues:{}})}};function RO({mediaType:e,url:t,supportedUrls:r}){return t=t.toLowerCase(),e=e.toLowerCase(),Object.entries(r).map(([a,s])=>{const l=a.toLowerCase();return l==="*"||l==="*/*"?{mediaTypePrefix:"",regexes:s}:{mediaTypePrefix:l.replace(/\*/,""),regexes:s}}).filter(({mediaTypePrefix:a})=>e.startsWith(a)).flatMap(({regexes:a})=>a).some(a=>a.test(t))}function _m({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:a}){if(typeof e=="string")return e;if(e!=null)throw new Ec({message:`${a} API key must be a string.`});if(typeof process>"u")throw new Ec({message:`${a} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=Sw[t],e==null)throw new Ec({message:`${a} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Ec({message:`${a} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}function Gs({settingValue:e,environmentVariableName:t}){if(typeof e=="string")return e;if(!(e!=null||typeof process>"u")&&(e=Sw[t],!(e==null||typeof e!="string")))return e}function jO(e){var t;const[r,a=""]=e.toLowerCase().split("/");return(t={mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"}[a])!=null?t:a}var OO=/"__proto__"\s*:/,MO=/"constructor"\s*:/;function Mb(e){const t=JSON.parse(e);return t===null||typeof t!="object"||OO.test(e)===!1&&MO.test(e)===!1?t:IO(t)}function IO(e){let t=[e];for(;t.length;){const r=t;t=[];for(const a of r){if(Object.prototype.hasOwnProperty.call(a,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(a,"constructor")&&Object.prototype.hasOwnProperty.call(a.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const s in a){const l=a[s];l&&typeof l=="object"&&t.push(l)}}}return e}function wm(e){const{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch{return Mb(e)}try{return Mb(e)}finally{Error.stackTraceLimit=t}}var Qc=Symbol.for("vercel.ai.validator");function $O(e){return{[Qc]:!0,validate:e}}function DO(e){return typeof e=="object"&&e!==null&&Qc in e&&e[Qc]===!0&&"validate"in e}function en(e){let t;return()=>(t==null&&(t=e()),t)}function zO(e){return DO(e)?e:typeof e=="function"?e():LO(e)}function LO(e){return $O(async t=>{const r=await e["~standard"].validate(t);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new Gl({value:t,cause:r.issues})}})}async function Pn({value:e,schema:t}){const r=await Ta({value:e,schema:t});if(!r.success)throw Gl.wrap({value:e,cause:r.error});return r.value}async function Ta({value:e,schema:t}){const r=zO(t);try{if(r.validate==null)return{success:!0,value:e,rawValue:e};const a=await r.validate(e);return a.success?{success:!0,value:a.value,rawValue:e}:{success:!1,error:Gl.wrap({value:e,cause:a.error}),rawValue:e}}catch(a){return{success:!1,error:Gl.wrap({value:e,cause:a}),rawValue:e}}}async function UO({text:e,schema:t}){try{const r=wm(e);return t==null?r:Pn({value:r,schema:t})}catch(r){throw Zc.isInstance(r)||Gl.isInstance(r)?r:new Zc({text:e,cause:r})}}async function Pi({text:e,schema:t}){try{const r=wm(e);return t==null?{success:!0,value:r,rawValue:r}:await Ta({value:r,schema:t})}catch(r){return{success:!1,error:Zc.isInstance(r)?r:new Zc({text:e,cause:r}),rawValue:void 0}}}function Wc(e){try{return wm(e),!0}catch{return!1}}function qO({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new t4).pipeThrough(new TransformStream({async transform({data:r},a){r!=="[DONE]"&&a.enqueue(await Pi({text:r,schema:t}))}}))}async function fn({provider:e,providerOptions:t,schema:r}){if(t?.[e]==null)return;const a=await Ta({value:t[e],schema:r});if(!a.success)throw new k2({argument:"providerOptions",message:`invalid ${e} provider options`,cause:a.error});return a.value}var PO=()=>globalThis.fetch,zt=async({url:e,headers:t,body:r,failedResponseHandler:a,successfulResponseHandler:s,abortSignal:l,fetch:c})=>Nw({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:a,successfulResponseHandler:s,abortSignal:l,fetch:c}),BO=async({url:e,headers:t,formData:r,failedResponseHandler:a,successfulResponseHandler:s,abortSignal:l,fetch:c})=>Nw({url:e,headers:t,body:{content:r,values:Object.fromEntries(r.entries())},failedResponseHandler:a,successfulResponseHandler:s,abortSignal:l,fetch:c}),Nw=async({url:e,headers:t={},body:r,successfulResponseHandler:a,failedResponseHandler:s,abortSignal:l,fetch:c=PO()})=>{try{const d=await c(e,{method:"POST",headers:Na(t,`ai-sdk/provider-utils/${Ew}`,xm()),body:r.content,signal:l}),f=no(d);if(!d.ok){let p;try{p=await s({response:d,url:e,requestBodyValues:r.values})}catch(y){throw Xs(y)||vn.isInstance(y)?y:new vn({message:"Failed to process error response",cause:y,statusCode:d.status,url:e,responseHeaders:f,requestBodyValues:r.values})}throw p.value}try{return await a({response:d,url:e,requestBodyValues:r.values})}catch(p){throw p instanceof Error&&(Xs(p)||vn.isInstance(p))?p:new vn({message:"Failed to process successful response",cause:p,statusCode:d.status,url:e,responseHeaders:f,requestBodyValues:r.values})}}catch(d){throw Tw({error:d,url:e,requestBodyValues:r.values})}};function gr({id:e,name:t,inputSchema:r}){return({execute:a,outputSchema:s,toModelOutput:l,onInputStart:c,onInputDelta:d,onInputAvailable:f,...p})=>({type:"provider-defined",id:e,name:t,args:p,inputSchema:r,outputSchema:s,execute:a,toModelOutput:l,onInputStart:c,onInputDelta:d,onInputAvailable:f})}function Fr({id:e,name:t,inputSchema:r,outputSchema:a}){return({execute:s,toModelOutput:l,onInputStart:c,onInputDelta:d,onInputAvailable:f,...p})=>({type:"provider-defined",id:e,name:t,args:p,inputSchema:r,outputSchema:a,execute:s,toModelOutput:l,onInputStart:c,onInputDelta:d,onInputAvailable:f})}async function Mn(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var pr=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:a,url:s,requestBodyValues:l})=>{const c=await a.text(),d=no(a);if(c.trim()==="")return{responseHeaders:d,value:new vn({message:a.statusText,url:s,requestBodyValues:l,statusCode:a.status,responseHeaders:d,responseBody:c,isRetryable:r?.(a)})};try{const f=await UO({text:c,schema:e});return{responseHeaders:d,value:new vn({message:t(f),url:s,requestBodyValues:l,statusCode:a.status,responseHeaders:d,responseBody:c,data:f,isRetryable:r?.(a,f)})}}catch{return{responseHeaders:d,value:new vn({message:a.statusText,url:s,requestBodyValues:l,statusCode:a.status,responseHeaders:d,responseBody:c,isRetryable:r?.(a)})}}},ci=e=>async({response:t})=>{const r=no(t);if(t.body==null)throw new BC({});return{responseHeaders:r,value:qO({stream:t.body,schema:e})}},pn=e=>async({response:t,url:r,requestBodyValues:a})=>{const s=await t.text(),l=await Pi({text:s,schema:e}),c=no(t);if(!l.success)throw new vn({message:"Invalid JSON response",cause:l.error,statusCode:t.status,responseHeaders:c,responseBody:s,url:r,requestBodyValues:a});return{responseHeaders:c,value:l.value,rawValue:l.rawValue}},FO=()=>async({response:e,url:t,requestBodyValues:r})=>{const a=no(e);if(!e.body)throw new vn({message:"Response body is empty",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:a,responseBody:void 0});try{const s=await e.arrayBuffer();return{responseHeaders:a,value:new Uint8Array(s)}}catch(s){throw new vn({message:"Failed to read response as array buffer",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:a,responseBody:void 0,cause:s})}},VO=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},HO=Symbol("Let zodToJsonSchema decide on which parser to use"),Ib={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},GO=e=>typeof e=="string"?{...Ib,name:e}:{...Ib,...e};function hr(){return{}}function ZO(e,t){var r,a,s;const l={type:"array"};return(r=e.type)!=null&&r._def&&((s=(a=e.type)==null?void 0:a._def)==null?void 0:s.typeName)!==Ke.ZodAny&&(l.items=Nt(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(l.minItems=e.minLength.value),e.maxLength&&(l.maxItems=e.maxLength.value),e.exactLength&&(l.minItems=e.exactLength.value,l.maxItems=e.exactLength.value),l}function YO(e){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function JO(){return{type:"boolean"}}function Aw(e,t){return Nt(e.type._def,t)}var XO=(e,t)=>Nt(e.innerType._def,t);function Cw(e,t,r){const a=r??t.dateStrategy;if(Array.isArray(a))return{anyOf:a.map((s,l)=>Cw(e,t,s))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return KO(e)}}var KO=e=>{const t={type:"integer",format:"unix-time"};for(const r of e.checks)switch(r.kind){case"min":t.minimum=r.value;break;case"max":t.maximum=r.value;break}return t};function QO(e,t){return{...Nt(e.innerType._def,t),default:e.defaultValue()}}function WO(e,t){return t.effectStrategy==="input"?Nt(e.schema._def,t):hr()}function eM(e){return{type:"string",enum:Array.from(e.values)}}var tM=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function nM(e,t){const r=[Nt(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),Nt(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(s=>!!s),a=[];return r.forEach(s=>{if(tM(s))a.push(...s.allOf);else{let l=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:c,...d}=s;l=d}a.push(l)}}),a.length?{allOf:a}:void 0}function rM(e){const t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var Wp=void 0,Ir={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Wp===void 0&&(Wp=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Wp),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Rw(e,t){const r={type:"string"};if(e.checks)for(const a of e.checks)switch(a.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,a.value):a.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,a.value):a.value;break;case"email":switch(t.emailStrategy){case"format:email":$r(r,"email",a.message,t);break;case"format:idn-email":$r(r,"idn-email",a.message,t);break;case"pattern:zod":zn(r,Ir.email,a.message,t);break}break;case"url":$r(r,"uri",a.message,t);break;case"uuid":$r(r,"uuid",a.message,t);break;case"regex":zn(r,a.regex,a.message,t);break;case"cuid":zn(r,Ir.cuid,a.message,t);break;case"cuid2":zn(r,Ir.cuid2,a.message,t);break;case"startsWith":zn(r,RegExp(`^${eh(a.value,t)}`),a.message,t);break;case"endsWith":zn(r,RegExp(`${eh(a.value,t)}$`),a.message,t);break;case"datetime":$r(r,"date-time",a.message,t);break;case"date":$r(r,"date",a.message,t);break;case"time":$r(r,"time",a.message,t);break;case"duration":$r(r,"duration",a.message,t);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,a.value):a.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,a.value):a.value;break;case"includes":{zn(r,RegExp(eh(a.value,t)),a.message,t);break}case"ip":{a.version!=="v6"&&$r(r,"ipv4",a.message,t),a.version!=="v4"&&$r(r,"ipv6",a.message,t);break}case"base64url":zn(r,Ir.base64url,a.message,t);break;case"jwt":zn(r,Ir.jwt,a.message,t);break;case"cidr":{a.version!=="v6"&&zn(r,Ir.ipv4Cidr,a.message,t),a.version!=="v4"&&zn(r,Ir.ipv6Cidr,a.message,t);break}case"emoji":zn(r,Ir.emoji(),a.message,t);break;case"ulid":{zn(r,Ir.ulid,a.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{$r(r,"binary",a.message,t);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{zn(r,Ir.base64,a.message,t);break}}break}case"nanoid":zn(r,Ir.nanoid,a.message,t)}return r}function eh(e,t){return t.patternStrategy==="escape"?iM(e):e}var aM=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function iM(e){let t="";for(let r=0;r<e.length;r++)aM.has(e[r])||(t+="\\"),t+=e[r];return t}function $r(e,t,r,a){var s;e.format||(s=e.anyOf)!=null&&s.some(l=>l.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...r&&a.errorMessages&&{errorMessage:{format:r}}})):e.format=t}function zn(e,t,r,a){var s;e.pattern||(s=e.allOf)!=null&&s.some(l=>l.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:$b(t,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):e.pattern=$b(t,a)}function $b(e,t){var r;if(!t.applyRegexFlags||!e.flags)return e.source;const a={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},s=a.i?e.source.toLowerCase():e.source;let l="",c=!1,d=!1,f=!1;for(let p=0;p<s.length;p++){if(c){l+=s[p],c=!1;continue}if(a.i){if(d){if(s[p].match(/[a-z]/)){f?(l+=s[p],l+=`${s[p-2]}-${s[p]}`.toUpperCase(),f=!1):s[p+1]==="-"&&((r=s[p+2])!=null&&r.match(/[a-z]/))?(l+=s[p],f=!0):l+=`${s[p]}${s[p].toUpperCase()}`;continue}}else if(s[p].match(/[a-z]/)){l+=`[${s[p]}${s[p].toUpperCase()}]`;continue}}if(a.m){if(s[p]==="^"){l+=`(^|(?<=[\r
]))`;continue}else if(s[p]==="$"){l+=`($|(?=[\r
]))`;continue}}if(a.s&&s[p]==="."){l+=d?`${s[p]}\r
`:`[${s[p]}\r
]`;continue}l+=s[p],s[p]==="\\"?c=!0:d&&s[p]==="]"?d=!1:!d&&s[p]==="["&&(d=!0)}try{new RegExp(l)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return l}function jw(e,t){var r,a,s,l,c,d;const f={type:"object",additionalProperties:(r=Nt(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?r:t.allowedAdditionalProperties};if(((a=e.keyType)==null?void 0:a._def.typeName)===Ke.ZodString&&((s=e.keyType._def.checks)!=null&&s.length)){const{type:p,...y}=Rw(e.keyType._def,t);return{...f,propertyNames:y}}else{if(((l=e.keyType)==null?void 0:l._def.typeName)===Ke.ZodEnum)return{...f,propertyNames:{enum:e.keyType._def.values}};if(((c=e.keyType)==null?void 0:c._def.typeName)===Ke.ZodBranded&&e.keyType._def.type._def.typeName===Ke.ZodString&&((d=e.keyType._def.type._def.checks)!=null&&d.length)){const{type:p,...y}=Aw(e.keyType._def,t);return{...f,propertyNames:y}}}return f}function sM(e,t){if(t.mapStrategy==="record")return jw(e,t);const r=Nt(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||hr(),a=Nt(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||hr();return{type:"array",maxItems:125,items:{type:"array",items:[r,a],minItems:2,maxItems:2}}}function oM(e){const t=e.values,a=Object.keys(e.values).filter(l=>typeof t[t[l]]!="number").map(l=>t[l]),s=Array.from(new Set(a.map(l=>typeof l)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:a}}function lM(){return{not:hr()}}function uM(){return{type:"null"}}var qh={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function cM(e,t){const r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(a=>a._def.typeName in qh&&(!a._def.checks||!a._def.checks.length))){const a=r.reduce((s,l)=>{const c=qh[l._def.typeName];return c&&!s.includes(c)?[...s,c]:s},[]);return{type:a.length>1?a:a[0]}}else if(r.every(a=>a._def.typeName==="ZodLiteral"&&!a.description)){const a=r.reduce((s,l)=>{const c=typeof l._def.value;switch(c){case"string":case"number":case"boolean":return[...s,c];case"bigint":return[...s,"integer"];case"object":if(l._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(a.length===r.length){const s=a.filter((l,c,d)=>d.indexOf(l)===c);return{type:s.length>1?s:s[0],enum:r.reduce((l,c)=>l.includes(c._def.value)?l:[...l,c._def.value],[])}}}else if(r.every(a=>a._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((a,s)=>[...a,...s._def.values.filter(l=>!a.includes(l))],[])};return dM(e,t)}var dM=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((a,s)=>Nt(a._def,{...t,currentPath:[...t.currentPath,"anyOf",`${s}`]})).filter(a=>!!a&&(!t.strictUnions||typeof a=="object"&&Object.keys(a).length>0));return r.length?{anyOf:r}:void 0};function fM(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[qh[e.innerType._def.typeName],"null"]};const r=Nt(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function pM(e){const t={type:"number"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"int":t.type="integer";break;case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function hM(e,t){const r={type:"object",properties:{}},a=[],s=e.shape();for(const c in s){let d=s[c];if(d===void 0||d._def===void 0)continue;const f=gM(d),p=Nt(d._def,{...t,currentPath:[...t.currentPath,"properties",c],propertyPath:[...t.currentPath,"properties",c]});p!==void 0&&(r.properties[c]=p,f||a.push(c))}a.length&&(r.required=a);const l=mM(e,t);return l!==void 0&&(r.additionalProperties=l),r}function mM(e,t){if(e.catchall._def.typeName!=="ZodNever")return Nt(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function gM(e){try{return e.isOptional()}catch{return!0}}var yM=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return Nt(e.innerType._def,t);const a=Nt(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return a?{anyOf:[{not:hr()},a]}:hr()},vM=(e,t)=>{if(t.pipeStrategy==="input")return Nt(e.in._def,t);if(t.pipeStrategy==="output")return Nt(e.out._def,t);const r=Nt(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),a=Nt(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,a].filter(s=>s!==void 0)}};function bM(e,t){return Nt(e.type._def,t)}function xM(e,t){const a={type:"array",uniqueItems:!0,items:Nt(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(a.minItems=e.minSize.value),e.maxSize&&(a.maxItems=e.maxSize.value),a}function _M(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,a)=>Nt(r._def,{...t,currentPath:[...t.currentPath,"items",`${a}`]})).reduce((r,a)=>a===void 0?r:[...r,a],[]),additionalItems:Nt(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,a)=>Nt(r._def,{...t,currentPath:[...t.currentPath,"items",`${a}`]})).reduce((r,a)=>a===void 0?r:[...r,a],[])}}function wM(){return{not:hr()}}function SM(){return hr()}var kM=(e,t)=>Nt(e.innerType._def,t),TM=(e,t,r)=>{switch(t){case Ke.ZodString:return Rw(e,r);case Ke.ZodNumber:return pM(e);case Ke.ZodObject:return hM(e,r);case Ke.ZodBigInt:return YO(e);case Ke.ZodBoolean:return JO();case Ke.ZodDate:return Cw(e,r);case Ke.ZodUndefined:return wM();case Ke.ZodNull:return uM();case Ke.ZodArray:return ZO(e,r);case Ke.ZodUnion:case Ke.ZodDiscriminatedUnion:return cM(e,r);case Ke.ZodIntersection:return nM(e,r);case Ke.ZodTuple:return _M(e,r);case Ke.ZodRecord:return jw(e,r);case Ke.ZodLiteral:return rM(e);case Ke.ZodEnum:return eM(e);case Ke.ZodNativeEnum:return oM(e);case Ke.ZodNullable:return fM(e,r);case Ke.ZodOptional:return yM(e,r);case Ke.ZodMap:return sM(e,r);case Ke.ZodSet:return xM(e,r);case Ke.ZodLazy:return()=>e.getter()._def;case Ke.ZodPromise:return bM(e,r);case Ke.ZodNaN:case Ke.ZodNever:return lM();case Ke.ZodEffects:return WO(e,r);case Ke.ZodAny:return hr();case Ke.ZodUnknown:return SM();case Ke.ZodDefault:return QO(e,r);case Ke.ZodBranded:return Aw(e,r);case Ke.ZodReadonly:return kM(e,r);case Ke.ZodCatch:return XO(e,r);case Ke.ZodPipeline:return vM(e,r);case Ke.ZodFunction:case Ke.ZodVoid:case Ke.ZodSymbol:return;default:return(a=>{})()}};function Nt(e,t,r=!1){var a;const s=t.seen.get(e);if(t.override){const f=(a=t.override)==null?void 0:a.call(t,e,t,s,r);if(f!==HO)return f}if(s&&!r){const f=EM(s,t);if(f!==void 0)return f}const l={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,l);const c=TM(e,e.typeName,t),d=typeof c=="function"?Nt(c(),t):c;if(d&&NM(e,t,d),t.postProcess){const f=t.postProcess(d,e,t);return l.jsonSchema=d,f}return l.jsonSchema=d,d}var EM=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:VO(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,a)=>t.currentPath[a]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),hr()):t.$refStrategy==="seen"?hr():void 0}},NM=(e,t,r)=>(e.description&&(r.description=e.description),r),AM=e=>{const t=GO(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([a,s])=>[s._def,{def:s._def,path:[...t.basePath,t.definitionPath,a],jsonSchema:void 0}]))}},CM=(e,t)=>{var r;const a=AM(t);let s=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((p,[y,v])=>{var x;return{...p,[y]:(x=Nt(v._def,{...a,currentPath:[...a.basePath,a.definitionPath,y]},!0))!=null?x:hr()}},{}):void 0;const l=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,c=(r=Nt(e._def,l===void 0?a:{...a,currentPath:[...a.basePath,a.definitionPath,l]},!1))!=null?r:hr(),d=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;d!==void 0&&(c.title=d);const f=l===void 0?s?{...c,[a.definitionPath]:s}:c:{$ref:[...a.$refStrategy==="relative"?[]:a.basePath,a.definitionPath,l].join("/"),[a.definitionPath]:{...s,[l]:c}};return f.$schema="http://json-schema.org/draft-07/schema#",f},RM=CM;function jM(e,t){var r;const a=(r=void 0)!=null?r:!1;return Sm(()=>RM(e,{$refStrategy:a?"root":"none"}),{validate:async s=>{const l=await e.safeParseAsync(s);return l.success?{success:!0,value:l.data}:{success:!1,error:l.error}}})}function OM(e,t){var r;const a=(r=void 0)!=null?r:!1;return Sm(()=>lj(e,{target:"draft-7",io:"output",reused:a?"ref":"inline"}),{validate:async s=>{const l=await yw(e,s);return l.success?{success:!0,value:l.data}:{success:!1,error:l.error}}})}function MM(e){return"_zod"in e}function Ie(e,t){return MM(e)?OM(e):jM(e)}var Ph=Symbol.for("vercel.ai.schema");function Ge(e){let t;return()=>(t==null&&(t=e()),t)}function Sm(e,{validate:t}={}){return{[Ph]:!0,_type:void 0,[Qc]:!0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function IM(e){return typeof e=="object"&&e!==null&&Ph in e&&e[Ph]===!0&&"jsonSchema"in e&&"validate"in e}function md(e){return e==null?Sm({properties:{},additionalProperties:!1}):IM(e)?e:typeof e=="function"?e():Ie(e)}var{btoa:$M,atob:DM}=globalThis;function gd(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),r=DM(t);return Uint8Array.from(r,a=>a.codePointAt(0))}function ed(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return $M(t)}function qr(e){return e instanceof Uint8Array?ed(e):e}function tu(e){return e?.replace(/\/$/,"")}function zM(e){return e!=null&&typeof e[Symbol.asyncIterator]=="function"}async function*LM({execute:e,input:t,options:r}){const a=e(t,r);if(zM(a)){let s;for await(const l of a)s=l,yield{type:"preliminary",output:l};yield{type:"final",output:s}}else yield{type:"final",output:await a}}const UM="modulepreload",qM=function(e){return"/Guido/"+e},Db={},zb=function(t,r,a){let s=Promise.resolve();if(r&&r.length>0){let f=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");s=f(r.map(p=>{if(p=qM(p),p in Db)return;Db[p]=!0;const y=p.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${v}`))return;const x=document.createElement("link");if(x.rel=y?"stylesheet":UM,y||(x.as="script"),x.crossOrigin="",x.href=p,d&&x.setAttribute("nonce",d),document.head.appendChild(x),y)return new Promise((b,_)=>{x.addEventListener("load",b),x.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return s.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return t().catch(l)})};var th,Lb;function Ow(){if(Lb)return th;Lb=1;var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(y,v)=>{for(var x in v)e(y,x,{get:v[x],enumerable:!0})},l=(y,v,x,b)=>{if(v&&typeof v=="object"||typeof v=="function")for(let _ of r(v))!a.call(y,_)&&_!==x&&e(y,_,{get:()=>v[_],enumerable:!(b=t(v,_))||b.enumerable});return y},c=y=>l(e({},"__esModule",{value:!0}),y),d={};s(d,{SYMBOL_FOR_REQ_CONTEXT:()=>f,getContext:()=>p}),th=c(d);const f=Symbol.for("@vercel/request-context");function p(){return globalThis[f]?.get?.()??{}}return th}var nh,Ub;function PM(){if(Ub)return nh;Ub=1;var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(p,y)=>{for(var v in y)e(p,v,{get:y[v],enumerable:!0})},l=(p,y,v,x)=>{if(y&&typeof y=="object"||typeof y=="function")for(let b of r(y))!a.call(p,b)&&b!==v&&e(p,b,{get:()=>y[b],enumerable:!(x=t(y,b))||x.enumerable});return p},c=p=>l(e({},"__esModule",{value:!0}),p),d={};s(d,{VercelOidcTokenError:()=>f}),nh=c(d);class f extends Error{constructor(y,v){super(y),this.name="VercelOidcTokenError",this.cause=v}toString(){return this.cause?`${this.name}: ${this.message}: ${this.cause}`:`${this.name}: ${this.message}`}}return nh}var rh,qb;function BM(){if(qb)return rh;qb=1;var e={},t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,l=(b,_)=>{for(var S in _)t(b,S,{get:_[S],enumerable:!0})},c=(b,_,S,k)=>{if(_&&typeof _=="object"||typeof _=="function")for(let j of a(_))!s.call(b,j)&&j!==S&&t(b,j,{get:()=>_[j],enumerable:!(k=r(_,j))||k.enumerable});return b},d=b=>c(t({},"__esModule",{value:!0}),b),f={};l(f,{getVercelOidcToken:()=>v,getVercelOidcTokenSync:()=>x}),rh=d(f);var p=Ow(),y=PM();async function v(){let b="",_;try{b=x()}catch(S){_=S}try{const[{getTokenPayload:S,isExpired:k},{refreshToken:j}]=await Promise.all([await zb(()=>import("./token-util-Sm2JKhoD.js").then(R=>R.t),__vite__mapDeps([0,1])),await zb(()=>import("./token-BPS6PKUo.js").then(R=>R.t),__vite__mapDeps([2,1]))]);(!b||k(S(b)))&&(await j(),b=x())}catch(S){throw _?.message&&S instanceof Error&&(S.message=`${_.message}
${S.message}`),new y.VercelOidcTokenError("Failed to refresh OIDC token",S)}return b}function x(){const b=(0,p.getContext)().headers?.["x-vercel-oidc-token"]??e.VERCEL_OIDC_TOKEN;if(!b)throw new Error("The 'x-vercel-oidc-token' header is missing from the request. Do you have the OIDC option enabled in the Vercel project settings?");return b}return rh}var ah,Pb;function FM(){if(Pb)return ah;Pb=1;var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(y,v)=>{for(var x in v)e(y,x,{get:v[x],enumerable:!0})},l=(y,v,x,b)=>{if(v&&typeof v=="object"||typeof v=="function")for(let _ of r(v))!a.call(y,_)&&_!==x&&e(y,_,{get:()=>v[_],enumerable:!(b=t(v,_))||b.enumerable});return y},c=y=>l(e({},"__esModule",{value:!0}),y),d={};s(d,{getContext:()=>p.getContext,getVercelOidcToken:()=>f.getVercelOidcToken,getVercelOidcTokenSync:()=>f.getVercelOidcTokenSync}),ah=c(d);var f=BM(),p=Ow();return ah}var Mw=FM(),VM="vercel.ai.gateway.error",ih=Symbol.for(VM),Bb,Fb,mr=class Iw extends(Fb=Error,Bb=ih,Fb){constructor({message:t,statusCode:r=500,cause:a}){super(t),this[Bb]=!0,this.statusCode=r,this.cause=a}static isInstance(t){return Iw.hasMarker(t)}static hasMarker(t){return typeof t=="object"&&t!==null&&ih in t&&t[ih]===!0}},$w="GatewayAuthenticationError",HM=`vercel.ai.gateway.error.${$w}`,Vb=Symbol.for(HM),Hb,Gb,km=class Dw extends(Gb=mr,Hb=Vb,Gb){constructor({message:t="Authentication failed",statusCode:r=401,cause:a}={}){super({message:t,statusCode:r,cause:a}),this[Hb]=!0,this.name=$w,this.type="authentication_error"}static isInstance(t){return mr.hasMarker(t)&&Vb in t}static createContextualError({apiKeyProvided:t,oidcTokenProvided:r,message:a="Authentication failed",statusCode:s=401,cause:l}){let c;return t?c=`AI Gateway authentication failed: Invalid API key.

Create a new API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys

Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:r?c=`AI Gateway authentication failed: Invalid OIDC token.

Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.

Alternatively, use an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys`:c=`AI Gateway authentication failed: No authentication provided.

Option 1 - API key:
Create an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys
Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

Option 2 - OIDC token:
Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.`,new Dw({message:c,statusCode:s,cause:l})}},zw="GatewayInvalidRequestError",GM=`vercel.ai.gateway.error.${zw}`,Zb=Symbol.for(GM),Yb,Jb,ZM=class extends(Jb=mr,Yb=Zb,Jb){constructor({message:e="Invalid request",statusCode:t=400,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[Yb]=!0,this.name=zw,this.type="invalid_request_error"}static isInstance(e){return mr.hasMarker(e)&&Zb in e}},Lw="GatewayRateLimitError",YM=`vercel.ai.gateway.error.${Lw}`,Xb=Symbol.for(YM),Kb,Qb,JM=class extends(Qb=mr,Kb=Xb,Qb){constructor({message:e="Rate limit exceeded",statusCode:t=429,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[Kb]=!0,this.name=Lw,this.type="rate_limit_exceeded"}static isInstance(e){return mr.hasMarker(e)&&Xb in e}},Uw="GatewayModelNotFoundError",XM=`vercel.ai.gateway.error.${Uw}`,Wb=Symbol.for(XM),KM=en(()=>Ie(C({modelId:w()}))),ex,tx,qw=class extends(tx=mr,ex=Wb,tx){constructor({message:e="Model not found",statusCode:t=404,modelId:r,cause:a}={}){super({message:e,statusCode:t,cause:a}),this[ex]=!0,this.name=Uw,this.type="model_not_found",this.modelId=r}static isInstance(e){return mr.hasMarker(e)&&Wb in e}},Pw="GatewayInternalServerError",QM=`vercel.ai.gateway.error.${Pw}`,nx=Symbol.for(QM),rx,ax,ix=class extends(ax=mr,rx=nx,ax){constructor({message:e="Internal server error",statusCode:t=500,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[rx]=!0,this.name=Pw,this.type="internal_server_error"}static isInstance(e){return mr.hasMarker(e)&&nx in e}},Bw="GatewayResponseError",WM=`vercel.ai.gateway.error.${Bw}`,sx=Symbol.for(WM),ox,lx,eI=class extends(lx=mr,ox=sx,lx){constructor({message:e="Invalid response from Gateway",statusCode:t=502,response:r,validationError:a,cause:s}={}){super({message:e,statusCode:t,cause:s}),this[ox]=!0,this.name=Bw,this.type="response_error",this.response=r,this.validationError=a}static isInstance(e){return mr.hasMarker(e)&&sx in e}};async function ux({response:e,statusCode:t,defaultMessage:r="Gateway request failed",cause:a,authMethod:s}){const l=await Ta({value:e,schema:tI});if(!l.success)return new eI({message:`Invalid error response format: ${r}`,statusCode:t,response:e,validationError:l.error,cause:a});const c=l.value,d=c.error.type,f=c.error.message;switch(d){case"authentication_error":return km.createContextualError({apiKeyProvided:s==="api-key",oidcTokenProvided:s==="oidc",statusCode:t,cause:a});case"invalid_request_error":return new ZM({message:f,statusCode:t,cause:a});case"rate_limit_exceeded":return new JM({message:f,statusCode:t,cause:a});case"model_not_found":{const p=await Ta({value:c.error.param,schema:KM});return new qw({message:f,statusCode:t,modelId:p.success?p.value.modelId:void 0,cause:a})}case"internal_server_error":return new ix({message:f,statusCode:t,cause:a});default:return new ix({message:f,statusCode:t,cause:a})}}var tI=en(()=>Ie(C({error:C({message:w(),type:w().nullish(),param:Fn().nullish(),code:Qe([w(),Z()]).nullish()})})));function li(e,t){var r;return mr.isInstance(e)?e:vn.isInstance(e)?ux({response:nI(e),statusCode:(r=e.statusCode)!=null?r:500,defaultMessage:"Gateway request failed",cause:e,authMethod:t}):ux({response:{},statusCode:500,defaultMessage:e instanceof Error?`Gateway request failed: ${e.message}`:"Unknown Gateway error",cause:e,authMethod:t})}function nI(e){if(e.data!==void 0)return e.data;if(e.responseBody!=null)try{return JSON.parse(e.responseBody)}catch{return e.responseBody}return{}}var Fw="ai-gateway-auth-method";async function Ks(e){const t=await Ta({value:e[Fw],schema:rI});return t.success?t.value:void 0}var rI=en(()=>Ie(Qe([Q("api-key"),Q("oidc")]))),cx=class{constructor(e){this.config=e}async getAvailableModels(){try{const{value:e}=await Ob({url:`${this.config.baseURL}/config`,headers:await Mn(this.config.headers()),successfulResponseHandler:pn(aI),failedResponseHandler:pr({errorSchema:fr(),errorToMessage:t=>t}),fetch:this.config.fetch});return e}catch(e){throw await li(e)}}async getCredits(){try{const e=new URL(this.config.baseURL),{value:t}=await Ob({url:`${e.origin}/v1/credits`,headers:await Mn(this.config.headers()),successfulResponseHandler:pn(iI),failedResponseHandler:pr({errorSchema:fr(),errorToMessage:r=>r}),fetch:this.config.fetch});return t}catch(e){throw await li(e)}}},aI=en(()=>Ie(C({models:ge(C({id:w(),name:w(),description:w().nullish(),pricing:C({input:w(),output:w(),input_cache_read:w().nullish(),input_cache_write:w().nullish()}).transform(({input:e,output:t,input_cache_read:r,input_cache_write:a})=>({input:e,output:t,...r?{cachedInputTokens:r}:{},...a?{cacheCreationInputTokens:a}:{}})).nullish(),specification:C({specificationVersion:Q("v2"),provider:w(),modelId:w()}),modelType:He(["language","embedding","image"]).nullish()}))}))),iI=en(()=>Ie(C({balance:w(),total_used:w()}).transform(({balance:e,total_used:t})=>({balance:e,totalUsed:t})))),sI=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs(e){const{abortSignal:t,...r}=e;return{args:this.maybeEncodeFileParts(r),warnings:[]}}async doGenerate(e){const{args:t,warnings:r}=await this.getArgs(e),{abortSignal:a}=e,s=await Mn(this.config.headers());try{const{responseHeaders:l,value:c,rawValue:d}=await zt({url:this.getUrl(),headers:Pt(s,e.headers,this.getModelConfigHeaders(this.modelId,!1),await Mn(this.config.o11yHeaders)),body:t,successfulResponseHandler:pn(fr()),failedResponseHandler:pr({errorSchema:fr(),errorToMessage:f=>f}),...a&&{abortSignal:a},fetch:this.config.fetch});return{...c,request:{body:t},response:{headers:l,body:d},warnings:r}}catch(l){throw await li(l,await Ks(s))}}async doStream(e){const{args:t,warnings:r}=await this.getArgs(e),{abortSignal:a}=e,s=await Mn(this.config.headers());try{const{value:l,responseHeaders:c}=await zt({url:this.getUrl(),headers:Pt(s,e.headers,this.getModelConfigHeaders(this.modelId,!0),await Mn(this.config.o11yHeaders)),body:t,successfulResponseHandler:ci(fr()),failedResponseHandler:pr({errorSchema:fr(),errorToMessage:d=>d}),...a&&{abortSignal:a},fetch:this.config.fetch});return{stream:l.pipeThrough(new TransformStream({start(d){r.length>0&&d.enqueue({type:"stream-start",warnings:r})},transform(d,f){if(d.success){const p=d.value;if(p.type==="raw"&&!e.includeRawChunks)return;p.type==="response-metadata"&&p.timestamp&&typeof p.timestamp=="string"&&(p.timestamp=new Date(p.timestamp)),f.enqueue(p)}else f.error(d.error)}})),request:{body:t},response:{headers:c}}}catch(l){throw await li(l,await Ks(s))}}isFilePart(e){return e&&typeof e=="object"&&"type"in e&&e.type==="file"}maybeEncodeFileParts(e){for(const t of e.prompt)for(const r of t.content)if(this.isFilePart(r)){const a=r;if(a.data instanceof Uint8Array){const s=Uint8Array.from(a.data),l=Buffer.from(s).toString("base64");a.data=new URL(`data:${a.mediaType||"application/octet-stream"};base64,${l}`)}}return e}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders(e,t){return{"ai-language-model-specification-version":"2","ai-language-model-id":e,"ai-language-model-streaming":String(t)}}},oI=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:r,providerOptions:a}){var s;const l=await Mn(this.config.headers());try{const{responseHeaders:c,value:d,rawValue:f}=await zt({url:this.getUrl(),headers:Pt(l,t??{},this.getModelConfigHeaders(),await Mn(this.config.o11yHeaders)),body:{input:e.length===1?e[0]:e,...a?{providerOptions:a}:{}},successfulResponseHandler:pn(lI),failedResponseHandler:pr({errorSchema:fr(),errorToMessage:p=>p}),...r&&{abortSignal:r},fetch:this.config.fetch});return{embeddings:d.embeddings,usage:(s=d.usage)!=null?s:void 0,providerMetadata:d.providerMetadata,response:{headers:c,body:f}}}catch(c){throw await li(c,await Ks(l))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"2","ai-model-id":this.modelId}}},lI=en(()=>Ie(C({embeddings:ge(ge(Z())),usage:C({tokens:Z()}).nullish(),providerMetadata:Vt(w(),Vt(w(),Fn())).optional()}))),uI=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.maxImagesPerCall=Number.MAX_SAFE_INTEGER}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:r,aspectRatio:a,seed:s,providerOptions:l,headers:c,abortSignal:d}){var f;const p=await Mn(this.config.headers());try{const{responseHeaders:y,value:v,rawValue:x}=await zt({url:this.getUrl(),headers:Pt(p,c??{},this.getModelConfigHeaders(),await Mn(this.config.o11yHeaders)),body:{prompt:e,n:t,...r&&{size:r},...a&&{aspectRatio:a},...s&&{seed:s},...l&&{providerOptions:l}},successfulResponseHandler:pn(dI),failedResponseHandler:pr({errorSchema:fr(),errorToMessage:b=>b}),...d&&{abortSignal:d},fetch:this.config.fetch});return{images:v.images,warnings:(f=v.warnings)!=null?f:[],providerMetadata:v.providerMetadata,response:{timestamp:new Date,modelId:this.modelId,headers:y}}}catch(y){throw li(y,await Ks(p))}}getUrl(){return`${this.config.baseURL}/image-model`}getModelConfigHeaders(){return{"ai-image-model-specification-version":"2","ai-model-id":this.modelId}}},cI=C({images:ge(Fn()).optional()}).catchall(Fn()),dI=C({images:ge(w()),warnings:ge(C({type:Q("other"),message:w()})).optional(),providerMetadata:Vt(w(),cI).optional()});async function fI(){var e;return(e=Mw.getContext().headers)==null?void 0:e["x-vercel-id"]}var pI="2.0.18",hI="0.0.1";function mI(e={}){var t,r;let a=null,s=null;const l=(t=e.metadataCacheRefreshMillis)!=null?t:1e3*60*5;let c=0;const d=(r=tu(e.baseURL))!=null?r:"https://ai-gateway.vercel.sh/v1/ai",f=async()=>{const _=await yI(e);if(_)return Na({Authorization:`Bearer ${_.token}`,"ai-gateway-protocol-version":hI,[Fw]:_.authMethod,...e.headers},`ai-sdk/gateway/${pI}`);throw km.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401})},p=()=>{const _=Gs({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"}),S=Gs({settingValue:void 0,environmentVariableName:"VERCEL_ENV"}),k=Gs({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return async()=>{const j=await fI();return{..._&&{"ai-o11y-deployment-id":_},...S&&{"ai-o11y-environment":S},...k&&{"ai-o11y-region":k},...j&&{"ai-o11y-request-id":j}}}},y=_=>new sI(_,{provider:"gateway",baseURL:d,headers:f,fetch:e.fetch,o11yHeaders:p()}),v=async()=>{var _,S,k;const j=(k=(S=(_=e._internal)==null?void 0:_.currentDate)==null?void 0:S.call(_).getTime())!=null?k:Date.now();return(!a||j-c>l)&&(c=j,a=new cx({baseURL:d,headers:f,fetch:e.fetch}).getAvailableModels().then(R=>(s=R,R)).catch(async R=>{throw await li(R,await Ks(await f()))})),s?Promise.resolve(s):a},x=async()=>new cx({baseURL:d,headers:f,fetch:e.fetch}).getCredits().catch(async _=>{throw await li(_,await Ks(await f()))}),b=function(_){if(new.target)throw new Error("The Gateway Provider model function cannot be called with the new keyword.");return y(_)};return b.getAvailableModels=v,b.getCredits=x,b.imageModel=_=>new uI(_,{provider:"gateway",baseURL:d,headers:f,fetch:e.fetch,o11yHeaders:p()}),b.languageModel=y,b.textEmbeddingModel=_=>new oI(_,{provider:"gateway",baseURL:d,headers:f,fetch:e.fetch,o11yHeaders:p()}),b}var gI=mI();async function yI(e){const t=Gs({settingValue:e.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});if(t)return{token:t,authMethod:"api-key"};try{return{token:await Mw.getVercelOidcToken(),authMethod:"oidc"}}catch{return null}}var sh={},Ri={},al={},il={},xa={},ji={},sl={},dx;function vI(){return dx||(dx=1,Object.defineProperty(sl,"__esModule",{value:!0}),sl._globalThis=void 0,sl._globalThis=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof qs=="object"?qs:{}),sl}var fx;function bI(){return fx||(fx=1,(function(e){var t=ji&&ji.__createBinding||(Object.create?(function(a,s,l,c){c===void 0&&(c=l),Object.defineProperty(a,c,{enumerable:!0,get:function(){return s[l]}})}):(function(a,s,l,c){c===void 0&&(c=l),a[c]=s[l]})),r=ji&&ji.__exportStar||function(a,s){for(var l in a)l!=="default"&&!Object.prototype.hasOwnProperty.call(s,l)&&t(s,a,l)};Object.defineProperty(e,"__esModule",{value:!0}),r(vI(),e)})(ji)),ji}var ol={},px;function Vw(){return px||(px=1,Object.defineProperty(ol,"__esModule",{value:!0}),ol.VERSION=void 0,ol.VERSION="1.9.0"),ol}var Oi={},hx;function xI(){if(hx)return Oi;hx=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.isCompatible=Oi._makeCompatibilityCheck=void 0;const e=Vw(),t=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function r(a){const s=new Set([a]),l=new Set,c=a.match(t);if(!c)return()=>!1;const d={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};if(d.prerelease!=null)return function(v){return v===a};function f(y){return l.add(y),!1}function p(y){return s.add(y),!0}return function(v){if(s.has(v))return!0;if(l.has(v))return!1;const x=v.match(t);if(!x)return f(v);const b={major:+x[1],minor:+x[2],patch:+x[3],prerelease:x[4]};return b.prerelease!=null||d.major!==b.major?f(v):d.major===0?d.minor===b.minor&&d.patch<=b.patch?p(v):f(v):d.minor<=b.minor?p(v):f(v)}}return Oi._makeCompatibilityCheck=r,Oi.isCompatible=r(e.VERSION),Oi}var mx;function ro(){if(mx)return xa;mx=1,Object.defineProperty(xa,"__esModule",{value:!0}),xa.unregisterGlobal=xa.getGlobal=xa.registerGlobal=void 0;const e=bI(),t=Vw(),r=xI(),a=t.VERSION.split(".")[0],s=Symbol.for(`opentelemetry.js.api.${a}`),l=e._globalThis;function c(p,y,v,x=!1){var b;const _=l[s]=(b=l[s])!==null&&b!==void 0?b:{version:t.VERSION};if(!x&&_[p]){const S=new Error(`@opentelemetry/api: Attempted duplicate registration of API: ${p}`);return v.error(S.stack||S.message),!1}if(_.version!==t.VERSION){const S=new Error(`@opentelemetry/api: Registration of version v${_.version} for ${p} does not match previously registered API v${t.VERSION}`);return v.error(S.stack||S.message),!1}return _[p]=y,v.debug(`@opentelemetry/api: Registered a global for ${p} v${t.VERSION}.`),!0}xa.registerGlobal=c;function d(p){var y,v;const x=(y=l[s])===null||y===void 0?void 0:y.version;if(!(!x||!(0,r.isCompatible)(x)))return(v=l[s])===null||v===void 0?void 0:v[p]}xa.getGlobal=d;function f(p,y){y.debug(`@opentelemetry/api: Unregistering a global for ${p} v${t.VERSION}.`);const v=l[s];v&&delete v[p]}return xa.unregisterGlobal=f,xa}var gx;function _I(){if(gx)return il;gx=1,Object.defineProperty(il,"__esModule",{value:!0}),il.DiagComponentLogger=void 0;const e=ro();class t{constructor(s){this._namespace=s.namespace||"DiagComponentLogger"}debug(...s){return r("debug",this._namespace,s)}error(...s){return r("error",this._namespace,s)}info(...s){return r("info",this._namespace,s)}warn(...s){return r("warn",this._namespace,s)}verbose(...s){return r("verbose",this._namespace,s)}}il.DiagComponentLogger=t;function r(a,s,l){const c=(0,e.getGlobal)("diag");if(c)return l.unshift(s),c[a](...l)}return il}var ll={},oh={},yx;function Tm(){return yx||(yx=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiagLogLevel=void 0,(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(e.DiagLogLevel||(e.DiagLogLevel={}))})(oh)),oh}var vx;function wI(){if(vx)return ll;vx=1,Object.defineProperty(ll,"__esModule",{value:!0}),ll.createLogLevelDiagLogger=void 0;const e=Tm();function t(r,a){r<e.DiagLogLevel.NONE?r=e.DiagLogLevel.NONE:r>e.DiagLogLevel.ALL&&(r=e.DiagLogLevel.ALL),a=a||{};function s(l,c){const d=a[l];return typeof d=="function"&&r>=c?d.bind(a):function(){}}return{error:s("error",e.DiagLogLevel.ERROR),warn:s("warn",e.DiagLogLevel.WARN),info:s("info",e.DiagLogLevel.INFO),debug:s("debug",e.DiagLogLevel.DEBUG),verbose:s("verbose",e.DiagLogLevel.VERBOSE)}}return ll.createLogLevelDiagLogger=t,ll}var bx;function ao(){if(bx)return al;bx=1,Object.defineProperty(al,"__esModule",{value:!0}),al.DiagAPI=void 0;const e=_I(),t=wI(),r=Tm(),a=ro(),s="diag";class l{constructor(){function d(y){return function(...v){const x=(0,a.getGlobal)("diag");if(x)return x[y](...v)}}const f=this,p=(y,v={logLevel:r.DiagLogLevel.INFO})=>{var x,b,_;if(y===f){const j=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return f.error((x=j.stack)!==null&&x!==void 0?x:j.message),!1}typeof v=="number"&&(v={logLevel:v});const S=(0,a.getGlobal)("diag"),k=(0,t.createLogLevelDiagLogger)((b=v.logLevel)!==null&&b!==void 0?b:r.DiagLogLevel.INFO,y);if(S&&!v.suppressOverrideMessage){const j=(_=new Error().stack)!==null&&_!==void 0?_:"<failed to generate stacktrace>";S.warn(`Current logger will be overwritten from ${j}`),k.warn(`Current logger will overwrite one already registered from ${j}`)}return(0,a.registerGlobal)("diag",k,f,!0)};f.setLogger=p,f.disable=()=>{(0,a.unregisterGlobal)(s,f)},f.createComponentLogger=y=>new e.DiagComponentLogger(y),f.verbose=d("verbose"),f.debug=d("debug"),f.info=d("info"),f.warn=d("warn"),f.error=d("error")}static instance(){return this._instance||(this._instance=new l),this._instance}}return al.DiagAPI=l,al}var ul={},xx;function SI(){if(xx)return ul;xx=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.BaggageImpl=void 0;class e{constructor(r){this._entries=r?new Map(r):new Map}getEntry(r){const a=this._entries.get(r);if(a)return Object.assign({},a)}getAllEntries(){return Array.from(this._entries.entries()).map(([r,a])=>[r,a])}setEntry(r,a){const s=new e(this._entries);return s._entries.set(r,a),s}removeEntry(r){const a=new e(this._entries);return a._entries.delete(r),a}removeEntries(...r){const a=new e(this._entries);for(const s of r)a._entries.delete(s);return a}clear(){return new e}}return ul.BaggageImpl=e,ul}var cl={},_x;function kI(){return _x||(_x=1,Object.defineProperty(cl,"__esModule",{value:!0}),cl.baggageEntryMetadataSymbol=void 0,cl.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")),cl}var wx;function Hw(){if(wx)return Ri;wx=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.baggageEntryMetadataFromString=Ri.createBaggage=void 0;const e=ao(),t=SI(),r=kI(),a=e.DiagAPI.instance();function s(c={}){return new t.BaggageImpl(new Map(Object.entries(c)))}Ri.createBaggage=s;function l(c){return typeof c!="string"&&(a.error(`Cannot create baggage metadata from unknown type: ${typeof c}`),c=""),{__TYPE__:r.baggageEntryMetadataSymbol,toString(){return c}}}return Ri.baggageEntryMetadataFromString=l,Ri}var Mi={},Sx;function yd(){if(Sx)return Mi;Sx=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.ROOT_CONTEXT=Mi.createContextKey=void 0;function e(r){return Symbol.for(r)}Mi.createContextKey=e;class t{constructor(a){const s=this;s._currentContext=a?new Map(a):new Map,s.getValue=l=>s._currentContext.get(l),s.setValue=(l,c)=>{const d=new t(s._currentContext);return d._currentContext.set(l,c),d},s.deleteValue=l=>{const c=new t(s._currentContext);return c._currentContext.delete(l),c}}}return Mi.ROOT_CONTEXT=new t,Mi}var dl={},kx;function TI(){if(kx)return dl;kx=1,Object.defineProperty(dl,"__esModule",{value:!0}),dl.DiagConsoleLogger=void 0;const e=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class t{constructor(){function a(s){return function(...l){if(console){let c=console[s];if(typeof c!="function"&&(c=console.log),typeof c=="function")return c.apply(console,l)}}}for(let s=0;s<e.length;s++)this[e[s].n]=a(e[s].c)}}return dl.DiagConsoleLogger=t,dl}var lh={},Tx;function Gw(){return Tx||(Tx=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createNoopMeter=e.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=e.NOOP_OBSERVABLE_GAUGE_METRIC=e.NOOP_OBSERVABLE_COUNTER_METRIC=e.NOOP_UP_DOWN_COUNTER_METRIC=e.NOOP_HISTOGRAM_METRIC=e.NOOP_GAUGE_METRIC=e.NOOP_COUNTER_METRIC=e.NOOP_METER=e.NoopObservableUpDownCounterMetric=e.NoopObservableGaugeMetric=e.NoopObservableCounterMetric=e.NoopObservableMetric=e.NoopHistogramMetric=e.NoopGaugeMetric=e.NoopUpDownCounterMetric=e.NoopCounterMetric=e.NoopMetric=e.NoopMeter=void 0;class t{constructor(){}createGauge(b,_){return e.NOOP_GAUGE_METRIC}createHistogram(b,_){return e.NOOP_HISTOGRAM_METRIC}createCounter(b,_){return e.NOOP_COUNTER_METRIC}createUpDownCounter(b,_){return e.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(b,_){return e.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(b,_){return e.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(b,_){return e.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(b,_){}removeBatchObservableCallback(b){}}e.NoopMeter=t;class r{}e.NoopMetric=r;class a extends r{add(b,_){}}e.NoopCounterMetric=a;class s extends r{add(b,_){}}e.NoopUpDownCounterMetric=s;class l extends r{record(b,_){}}e.NoopGaugeMetric=l;class c extends r{record(b,_){}}e.NoopHistogramMetric=c;class d{addCallback(b){}removeCallback(b){}}e.NoopObservableMetric=d;class f extends d{}e.NoopObservableCounterMetric=f;class p extends d{}e.NoopObservableGaugeMetric=p;class y extends d{}e.NoopObservableUpDownCounterMetric=y,e.NOOP_METER=new t,e.NOOP_COUNTER_METRIC=new a,e.NOOP_GAUGE_METRIC=new l,e.NOOP_HISTOGRAM_METRIC=new c,e.NOOP_UP_DOWN_COUNTER_METRIC=new s,e.NOOP_OBSERVABLE_COUNTER_METRIC=new f,e.NOOP_OBSERVABLE_GAUGE_METRIC=new p,e.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new y;function v(){return e.NOOP_METER}e.createNoopMeter=v})(lh)),lh}var uh={},Ex;function EI(){return Ex||(Ex=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueType=void 0,(function(t){t[t.INT=0]="INT",t[t.DOUBLE=1]="DOUBLE"})(e.ValueType||(e.ValueType={}))})(uh)),uh}var Ii={},Nx;function Zw(){return Nx||(Nx=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.defaultTextMapSetter=Ii.defaultTextMapGetter=void 0,Ii.defaultTextMapGetter={get(e,t){if(e!=null)return e[t]},keys(e){return e==null?[]:Object.keys(e)}},Ii.defaultTextMapSetter={set(e,t,r){e!=null&&(e[t]=r)}}),Ii}var fl={},pl={},hl={},ml={},Ax;function NI(){if(Ax)return ml;Ax=1,Object.defineProperty(ml,"__esModule",{value:!0}),ml.NoopContextManager=void 0;const e=yd();let t=class{active(){return e.ROOT_CONTEXT}with(a,s,l,...c){return s.call(l,...c)}bind(a,s){return s}enable(){return this}disable(){return this}};return ml.NoopContextManager=t,ml}var Cx;function vd(){if(Cx)return hl;Cx=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.ContextAPI=void 0;const e=NI(),t=ro(),r=ao(),a="context",s=new e.NoopContextManager;class l{constructor(){}static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalContextManager(d){return(0,t.registerGlobal)(a,d,r.DiagAPI.instance())}active(){return this._getContextManager().active()}with(d,f,p,...y){return this._getContextManager().with(d,f,p,...y)}bind(d,f){return this._getContextManager().bind(d,f)}_getContextManager(){return(0,t.getGlobal)(a)||s}disable(){this._getContextManager().disable(),(0,t.unregisterGlobal)(a,r.DiagAPI.instance())}}return hl.ContextAPI=l,hl}var Ln={},gl={},ch={},dh={},Rx;function Yw(){return Rx||(Rx=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFlags=void 0,(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(e.TraceFlags||(e.TraceFlags={}))})(dh)),dh}var jx;function Em(){return jx||(jx=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=void 0;const t=Yw();e.INVALID_SPANID="0000000000000000",e.INVALID_TRACEID="00000000000000000000000000000000",e.INVALID_SPAN_CONTEXT={traceId:e.INVALID_TRACEID,spanId:e.INVALID_SPANID,traceFlags:t.TraceFlags.NONE}})(ch)),ch}var Ox;function Nm(){if(Ox)return gl;Ox=1,Object.defineProperty(gl,"__esModule",{value:!0}),gl.NonRecordingSpan=void 0;const e=Em();let t=class{constructor(a=e.INVALID_SPAN_CONTEXT){this._spanContext=a}spanContext(){return this._spanContext}setAttribute(a,s){return this}setAttributes(a){return this}addEvent(a,s){return this}addLink(a){return this}addLinks(a){return this}setStatus(a){return this}updateName(a){return this}end(a){}isRecording(){return!1}recordException(a,s){}};return gl.NonRecordingSpan=t,gl}var Mx;function Jw(){if(Mx)return Ln;Mx=1,Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.getSpanContext=Ln.setSpanContext=Ln.deleteSpan=Ln.setSpan=Ln.getActiveSpan=Ln.getSpan=void 0;const e=yd(),t=Nm(),r=vd(),a=(0,e.createContextKey)("OpenTelemetry Context Key SPAN");function s(y){return y.getValue(a)||void 0}Ln.getSpan=s;function l(){return s(r.ContextAPI.getInstance().active())}Ln.getActiveSpan=l;function c(y,v){return y.setValue(a,v)}Ln.setSpan=c;function d(y){return y.deleteValue(a)}Ln.deleteSpan=d;function f(y,v){return c(y,new t.NonRecordingSpan(v))}Ln.setSpanContext=f;function p(y){var v;return(v=s(y))===null||v===void 0?void 0:v.spanContext()}return Ln.getSpanContext=p,Ln}var Dr={},Ix;function Am(){if(Ix)return Dr;Ix=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.wrapSpanContext=Dr.isSpanContextValid=Dr.isValidSpanId=Dr.isValidTraceId=void 0;const e=Em(),t=Nm(),r=/^([0-9a-f]{32})$/i,a=/^[0-9a-f]{16}$/i;function s(f){return r.test(f)&&f!==e.INVALID_TRACEID}Dr.isValidTraceId=s;function l(f){return a.test(f)&&f!==e.INVALID_SPANID}Dr.isValidSpanId=l;function c(f){return s(f.traceId)&&l(f.spanId)}Dr.isSpanContextValid=c;function d(f){return new t.NonRecordingSpan(f)}return Dr.wrapSpanContext=d,Dr}var $x;function Xw(){if($x)return pl;$x=1,Object.defineProperty(pl,"__esModule",{value:!0}),pl.NoopTracer=void 0;const e=vd(),t=Jw(),r=Nm(),a=Am(),s=e.ContextAPI.getInstance();let l=class{startSpan(f,p,y=s.active()){if(!!p?.root)return new r.NonRecordingSpan;const x=y&&(0,t.getSpanContext)(y);return c(x)&&(0,a.isSpanContextValid)(x)?new r.NonRecordingSpan(x):new r.NonRecordingSpan}startActiveSpan(f,p,y,v){let x,b,_;if(arguments.length<2)return;arguments.length===2?_=p:arguments.length===3?(x=p,_=y):(x=p,b=y,_=v);const S=b??s.active(),k=this.startSpan(f,x,S),j=(0,t.setSpan)(S,k);return s.with(j,_,void 0,k)}};pl.NoopTracer=l;function c(d){return typeof d=="object"&&typeof d.spanId=="string"&&typeof d.traceId=="string"&&typeof d.traceFlags=="number"}return pl}var Dx;function Kw(){if(Dx)return fl;Dx=1,Object.defineProperty(fl,"__esModule",{value:!0}),fl.ProxyTracer=void 0;const e=Xw(),t=new e.NoopTracer;let r=class{constructor(s,l,c,d){this._provider=s,this.name=l,this.version=c,this.options=d}startSpan(s,l,c){return this._getTracer().startSpan(s,l,c)}startActiveSpan(s,l,c,d){const f=this._getTracer();return Reflect.apply(f.startActiveSpan,f,arguments)}_getTracer(){if(this._delegate)return this._delegate;const s=this._provider.getDelegateTracer(this.name,this.version,this.options);return s?(this._delegate=s,this._delegate):t}};return fl.ProxyTracer=r,fl}var yl={},vl={},zx;function AI(){if(zx)return vl;zx=1,Object.defineProperty(vl,"__esModule",{value:!0}),vl.NoopTracerProvider=void 0;const e=Xw();let t=class{getTracer(a,s,l){return new e.NoopTracer}};return vl.NoopTracerProvider=t,vl}var Lx;function Qw(){if(Lx)return yl;Lx=1,Object.defineProperty(yl,"__esModule",{value:!0}),yl.ProxyTracerProvider=void 0;const e=Kw(),t=AI(),r=new t.NoopTracerProvider;let a=class{getTracer(l,c,d){var f;return(f=this.getDelegateTracer(l,c,d))!==null&&f!==void 0?f:new e.ProxyTracer(this,l,c,d)}getDelegate(){var l;return(l=this._delegate)!==null&&l!==void 0?l:r}setDelegate(l){this._delegate=l}getDelegateTracer(l,c,d){var f;return(f=this._delegate)===null||f===void 0?void 0:f.getTracer(l,c,d)}};return yl.ProxyTracerProvider=a,yl}var fh={},Ux;function CI(){return Ux||(Ux=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SamplingDecision=void 0,(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(e.SamplingDecision||(e.SamplingDecision={}))})(fh)),fh}var ph={},qx;function RI(){return qx||(qx=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpanKind=void 0,(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(e.SpanKind||(e.SpanKind={}))})(ph)),ph}var hh={},Px;function jI(){return Px||(Px=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpanStatusCode=void 0,(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(e.SpanStatusCode||(e.SpanStatusCode={}))})(hh)),hh}var bl={},xl={},$i={},Bx;function OI(){if(Bx)return $i;Bx=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.validateValue=$i.validateKey=void 0;const e="[_0-9a-z-*/]",t=`[a-z]${e}{0,255}`,r=`[a-z0-9]${e}{0,240}@[a-z]${e}{0,13}`,a=new RegExp(`^(?:${t}|${r})$`),s=/^[ -~]{0,255}[!-~]$/,l=/,|=/;function c(f){return a.test(f)}$i.validateKey=c;function d(f){return s.test(f)&&!l.test(f)}return $i.validateValue=d,$i}var Fx;function MI(){if(Fx)return xl;Fx=1,Object.defineProperty(xl,"__esModule",{value:!0}),xl.TraceStateImpl=void 0;const e=OI(),t=32,r=512,a=",",s="=";class l{constructor(d){this._internalState=new Map,d&&this._parse(d)}set(d,f){const p=this._clone();return p._internalState.has(d)&&p._internalState.delete(d),p._internalState.set(d,f),p}unset(d){const f=this._clone();return f._internalState.delete(d),f}get(d){return this._internalState.get(d)}serialize(){return this._keys().reduce((d,f)=>(d.push(f+s+this.get(f)),d),[]).join(a)}_parse(d){d.length>r||(this._internalState=d.split(a).reverse().reduce((f,p)=>{const y=p.trim(),v=y.indexOf(s);if(v!==-1){const x=y.slice(0,v),b=y.slice(v+1,p.length);(0,e.validateKey)(x)&&(0,e.validateValue)(b)&&f.set(x,b)}return f},new Map),this._internalState.size>t&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,t))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){const d=new l;return d._internalState=new Map(this._internalState),d}}return xl.TraceStateImpl=l,xl}var Vx;function II(){if(Vx)return bl;Vx=1,Object.defineProperty(bl,"__esModule",{value:!0}),bl.createTraceState=void 0;const e=MI();function t(r){return new e.TraceStateImpl(r)}return bl.createTraceState=t,bl}var _l={},Hx;function $I(){if(Hx)return _l;Hx=1,Object.defineProperty(_l,"__esModule",{value:!0}),_l.context=void 0;const e=vd();return _l.context=e.ContextAPI.getInstance(),_l}var wl={},Gx;function DI(){if(Gx)return wl;Gx=1,Object.defineProperty(wl,"__esModule",{value:!0}),wl.diag=void 0;const e=ao();return wl.diag=e.DiagAPI.instance(),wl}var Sl={},kl={},Di={},Zx;function zI(){if(Zx)return Di;Zx=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.NOOP_METER_PROVIDER=Di.NoopMeterProvider=void 0;const e=Gw();let t=class{getMeter(a,s,l){return e.NOOP_METER}};return Di.NoopMeterProvider=t,Di.NOOP_METER_PROVIDER=new t,Di}var Yx;function LI(){if(Yx)return kl;Yx=1,Object.defineProperty(kl,"__esModule",{value:!0}),kl.MetricsAPI=void 0;const e=zI(),t=ro(),r=ao(),a="metrics";class s{constructor(){}static getInstance(){return this._instance||(this._instance=new s),this._instance}setGlobalMeterProvider(c){return(0,t.registerGlobal)(a,c,r.DiagAPI.instance())}getMeterProvider(){return(0,t.getGlobal)(a)||e.NOOP_METER_PROVIDER}getMeter(c,d,f){return this.getMeterProvider().getMeter(c,d,f)}disable(){(0,t.unregisterGlobal)(a,r.DiagAPI.instance())}}return kl.MetricsAPI=s,kl}var Jx;function UI(){if(Jx)return Sl;Jx=1,Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.metrics=void 0;const e=LI();return Sl.metrics=e.MetricsAPI.getInstance(),Sl}var Tl={},El={},Nl={},Xx;function qI(){if(Xx)return Nl;Xx=1,Object.defineProperty(Nl,"__esModule",{value:!0}),Nl.NoopTextMapPropagator=void 0;let e=class{inject(r,a){}extract(r,a){return r}fields(){return[]}};return Nl.NoopTextMapPropagator=e,Nl}var zr={},Kx;function PI(){if(Kx)return zr;Kx=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.deleteBaggage=zr.setBaggage=zr.getActiveBaggage=zr.getBaggage=void 0;const e=vd(),r=(0,yd().createContextKey)("OpenTelemetry Baggage Key");function a(d){return d.getValue(r)||void 0}zr.getBaggage=a;function s(){return a(e.ContextAPI.getInstance().active())}zr.getActiveBaggage=s;function l(d,f){return d.setValue(r,f)}zr.setBaggage=l;function c(d){return d.deleteValue(r)}return zr.deleteBaggage=c,zr}var Qx;function BI(){if(Qx)return El;Qx=1,Object.defineProperty(El,"__esModule",{value:!0}),El.PropagationAPI=void 0;const e=ro(),t=qI(),r=Zw(),a=PI(),s=Hw(),l=ao(),c="propagation",d=new t.NoopTextMapPropagator;class f{constructor(){this.createBaggage=s.createBaggage,this.getBaggage=a.getBaggage,this.getActiveBaggage=a.getActiveBaggage,this.setBaggage=a.setBaggage,this.deleteBaggage=a.deleteBaggage}static getInstance(){return this._instance||(this._instance=new f),this._instance}setGlobalPropagator(y){return(0,e.registerGlobal)(c,y,l.DiagAPI.instance())}inject(y,v,x=r.defaultTextMapSetter){return this._getGlobalPropagator().inject(y,v,x)}extract(y,v,x=r.defaultTextMapGetter){return this._getGlobalPropagator().extract(y,v,x)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,e.unregisterGlobal)(c,l.DiagAPI.instance())}_getGlobalPropagator(){return(0,e.getGlobal)(c)||d}}return El.PropagationAPI=f,El}var Wx;function FI(){if(Wx)return Tl;Wx=1,Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.propagation=void 0;const e=BI();return Tl.propagation=e.PropagationAPI.getInstance(),Tl}var Al={},Cl={},e_;function VI(){if(e_)return Cl;e_=1,Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.TraceAPI=void 0;const e=ro(),t=Qw(),r=Am(),a=Jw(),s=ao(),l="trace";class c{constructor(){this._proxyTracerProvider=new t.ProxyTracerProvider,this.wrapSpanContext=r.wrapSpanContext,this.isSpanContextValid=r.isSpanContextValid,this.deleteSpan=a.deleteSpan,this.getSpan=a.getSpan,this.getActiveSpan=a.getActiveSpan,this.getSpanContext=a.getSpanContext,this.setSpan=a.setSpan,this.setSpanContext=a.setSpanContext}static getInstance(){return this._instance||(this._instance=new c),this._instance}setGlobalTracerProvider(f){const p=(0,e.registerGlobal)(l,this._proxyTracerProvider,s.DiagAPI.instance());return p&&this._proxyTracerProvider.setDelegate(f),p}getTracerProvider(){return(0,e.getGlobal)(l)||this._proxyTracerProvider}getTracer(f,p){return this.getTracerProvider().getTracer(f,p)}disable(){(0,e.unregisterGlobal)(l,s.DiagAPI.instance()),this._proxyTracerProvider=new t.ProxyTracerProvider}}return Cl.TraceAPI=c,Cl}var t_;function HI(){if(t_)return Al;t_=1,Object.defineProperty(Al,"__esModule",{value:!0}),Al.trace=void 0;const e=VI();return Al.trace=e.TraceAPI.getInstance(),Al}var n_;function GI(){return n_||(n_=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.trace=e.propagation=e.metrics=e.diag=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.createTraceState=e.TraceFlags=e.SpanStatusCode=e.SpanKind=e.SamplingDecision=e.ProxyTracerProvider=e.ProxyTracer=e.defaultTextMapSetter=e.defaultTextMapGetter=e.ValueType=e.createNoopMeter=e.DiagLogLevel=e.DiagConsoleLogger=e.ROOT_CONTEXT=e.createContextKey=e.baggageEntryMetadataFromString=void 0;var t=Hw();Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return t.baggageEntryMetadataFromString}});var r=yd();Object.defineProperty(e,"createContextKey",{enumerable:!0,get:function(){return r.createContextKey}}),Object.defineProperty(e,"ROOT_CONTEXT",{enumerable:!0,get:function(){return r.ROOT_CONTEXT}});var a=TI();Object.defineProperty(e,"DiagConsoleLogger",{enumerable:!0,get:function(){return a.DiagConsoleLogger}});var s=Tm();Object.defineProperty(e,"DiagLogLevel",{enumerable:!0,get:function(){return s.DiagLogLevel}});var l=Gw();Object.defineProperty(e,"createNoopMeter",{enumerable:!0,get:function(){return l.createNoopMeter}});var c=EI();Object.defineProperty(e,"ValueType",{enumerable:!0,get:function(){return c.ValueType}});var d=Zw();Object.defineProperty(e,"defaultTextMapGetter",{enumerable:!0,get:function(){return d.defaultTextMapGetter}}),Object.defineProperty(e,"defaultTextMapSetter",{enumerable:!0,get:function(){return d.defaultTextMapSetter}});var f=Kw();Object.defineProperty(e,"ProxyTracer",{enumerable:!0,get:function(){return f.ProxyTracer}});var p=Qw();Object.defineProperty(e,"ProxyTracerProvider",{enumerable:!0,get:function(){return p.ProxyTracerProvider}});var y=CI();Object.defineProperty(e,"SamplingDecision",{enumerable:!0,get:function(){return y.SamplingDecision}});var v=RI();Object.defineProperty(e,"SpanKind",{enumerable:!0,get:function(){return v.SpanKind}});var x=jI();Object.defineProperty(e,"SpanStatusCode",{enumerable:!0,get:function(){return x.SpanStatusCode}});var b=Yw();Object.defineProperty(e,"TraceFlags",{enumerable:!0,get:function(){return b.TraceFlags}});var _=II();Object.defineProperty(e,"createTraceState",{enumerable:!0,get:function(){return _.createTraceState}});var S=Am();Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return S.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return S.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return S.isValidSpanId}});var k=Em();Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return k.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return k.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return k.INVALID_SPAN_CONTEXT}});const j=$I();Object.defineProperty(e,"context",{enumerable:!0,get:function(){return j.context}});const R=DI();Object.defineProperty(e,"diag",{enumerable:!0,get:function(){return R.diag}});const E=UI();Object.defineProperty(e,"metrics",{enumerable:!0,get:function(){return E.metrics}});const q=FI();Object.defineProperty(e,"propagation",{enumerable:!0,get:function(){return q.propagation}});const P=HI();Object.defineProperty(e,"trace",{enumerable:!0,get:function(){return P.trace}}),e.default={context:j.context,diag:R.diag,metrics:E.metrics,propagation:q.propagation,trace:P.trace}})(sh)),sh}var Bh=GI(),ZI=Object.defineProperty,YI=(e,t)=>{for(var r in t)ZI(e,r,{get:t[r],enumerable:!0})},Ww="AI_NoOutputSpecifiedError",eS=`vercel.ai.error.${Ww}`,JI=Symbol.for(eS),tS,XI=class extends We{constructor({message:e="No output specified."}={}){super({name:Ww,message:e}),this[tS]=!0}static isInstance(e){return We.hasMarker(e,eS)}};tS=JI;function KI(e){const t="AI SDK Warning:";switch(e.type){case"unsupported-setting":{let r=`${t} The "${e.setting}" setting is not supported by this model`;return e.details&&(r+=` - ${e.details}`),r}case"unsupported-tool":{const r="name"in e.tool?e.tool.name:"unknown tool";let a=`${t} The tool "${r}" is not supported by this model`;return e.details&&(a+=` - ${e.details}`),a}case"other":return`${t} ${e.message}`;default:return`${t} ${JSON.stringify(e,null,2)}`}}var QI="AI SDK Warning System: To turn off warning logging, set the AI_SDK_LOG_WARNINGS global to false.",r_=!1,WI=e=>{if(e.length===0)return;const t=globalThis.AI_SDK_LOG_WARNINGS;if(t!==!1){if(typeof t=="function"){t(e);return}r_||(r_=!0,console.info(QI));for(const r of e)console.warn(KI(r))}},nS="AI_InvalidArgumentError",rS=`vercel.ai.error.${nS}`,e8=Symbol.for(rS),aS,Kr=class extends We{constructor({parameter:e,value:t,message:r}){super({name:nS,message:`Invalid argument for parameter ${e}: ${r}`}),this[aS]=!0,this.parameter=e,this.value=t}static isInstance(e){return We.hasMarker(e,rS)}};aS=e8;var iS="AI_InvalidToolInputError",sS=`vercel.ai.error.${iS}`,t8=Symbol.for(sS),oS,lS=class extends We{constructor({toolInput:e,toolName:t,cause:r,message:a=`Invalid input for tool ${t}: ${Wl(r)}`}){super({name:iS,message:a,cause:r}),this[oS]=!0,this.toolInput=e,this.toolName=t}static isInstance(e){return We.hasMarker(e,sS)}};oS=t8;var uS="AI_NoObjectGeneratedError",cS=`vercel.ai.error.${uS}`,n8=Symbol.for(cS),dS,a_=class extends We{constructor({message:e="No object generated.",cause:t,text:r,response:a,usage:s,finishReason:l}){super({name:uS,message:e,cause:t}),this[dS]=!0,this.text=r,this.response=a,this.usage=s,this.finishReason=l}static isInstance(e){return We.hasMarker(e,cS)}};dS=n8;var fS="AI_NoSuchToolError",pS=`vercel.ai.error.${fS}`,r8=Symbol.for(pS),hS,Fh=class extends We{constructor({toolName:e,availableTools:t=void 0,message:r=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:fS,message:r}),this[hS]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return We.hasMarker(e,pS)}};hS=r8;var mS="AI_ToolCallRepairError",gS=`vercel.ai.error.${mS}`,a8=Symbol.for(gS),yS,i8=class extends We{constructor({cause:e,originalError:t,message:r=`Error repairing tool call: ${Wl(e)}`}){super({name:mS,message:r,cause:e}),this[yS]=!0,this.originalError=t}static isInstance(e){return We.hasMarker(e,gS)}};yS=a8;var s8=class extends We{constructor(e){super({name:"AI_UnsupportedModelVersionError",message:`Unsupported model version ${e.version} for provider "${e.provider}" and model "${e.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=e.version,this.provider=e.provider,this.modelId=e.modelId}},vS="AI_InvalidMessageRoleError",bS=`vercel.ai.error.${vS}`,o8=Symbol.for(bS),xS,l8=class extends We{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:vS,message:t}),this[xS]=!0,this.role=e}static isInstance(e){return We.hasMarker(e,bS)}};xS=o8;var _S="AI_DownloadError",wS=`vercel.ai.error.${_S}`,u8=Symbol.for(wS),SS,mh=class extends We{constructor({url:e,statusCode:t,statusText:r,cause:a,message:s=a==null?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${a}`}){super({name:_S,message:s,cause:a}),this[SS]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return We.hasMarker(e,wS)}};SS=u8;var kS="AI_RetryError",TS=`vercel.ai.error.${kS}`,c8=Symbol.for(TS),ES,i_=class extends We{constructor({message:e,reason:t,errors:r}){super({name:kS,message:e}),this[ES]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return We.hasMarker(e,TS)}};ES=c8;function s_(e){if(typeof e!="string"){if(e.specificationVersion!=="v2")throw new s8({version:e.specificationVersion,provider:e.provider,modelId:e.modelId});return e}return d8().languageModel(e)}function d8(){var e;return(e=globalThis.AI_SDK_DEFAULT_PROVIDER)!=null?e:gI}var f8=[{mediaType:"image/gif",bytesPrefix:[71,73,70]},{mediaType:"image/png",bytesPrefix:[137,80,78,71]},{mediaType:"image/jpeg",bytesPrefix:[255,216]},{mediaType:"image/webp",bytesPrefix:[82,73,70,70,null,null,null,null,87,69,66,80]},{mediaType:"image/bmp",bytesPrefix:[66,77]},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0]},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42]},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102]},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99]}],p8=e=>{const t=typeof e=="string"?gd(e):e,r=(t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127;return t.slice(r+10)};function h8(e){return typeof e=="string"&&e.startsWith("SUQz")||typeof e!="string"&&e.length>10&&e[0]===73&&e[1]===68&&e[2]===51?p8(e):e}function m8({data:e,signatures:t}){const r=h8(e),a=typeof r=="string"?gd(r.substring(0,Math.min(r.length,24))):r;for(const s of t)if(a.length>=s.bytesPrefix.length&&s.bytesPrefix.every((l,c)=>l===null||a[c]===l))return s.mediaType}var NS="5.0.106",g8=async({url:e})=>{var t;const r=e.toString();try{const a=await fetch(r,{headers:Na({},`ai-sdk/${NS}`,xm())});if(!a.ok)throw new mh({url:r,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mediaType:(t=a.headers.get("content-type"))!=null?t:void 0}}catch(a){throw mh.isInstance(a)?a:new mh({url:r,cause:a})}},y8=(e=g8)=>t=>Promise.all(t.map(async r=>r.isUrlSupportedByModel?null:e(r)));function v8(e){try{const[t,r]=e.split(",");return{mediaType:t.split(";")[0].split(":")[1],base64Content:r}}catch{return{mediaType:void 0,base64Content:void 0}}}var AS=Qe([w(),Xc(Uint8Array),Xc(ArrayBuffer),wO(e=>{var t,r;return(r=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?r:!1},{message:"Must be a Buffer"})]);function CS(e){if(e instanceof Uint8Array)return{data:e,mediaType:void 0};if(e instanceof ArrayBuffer)return{data:new Uint8Array(e),mediaType:void 0};if(typeof e=="string")try{e=new URL(e)}catch{}if(e instanceof URL&&e.protocol==="data:"){const{mediaType:t,base64Content:r}=v8(e.toString());if(t==null||r==null)throw new We({name:"InvalidDataContentError",message:`Invalid data URL format in content ${e.toString()}`});return{data:r,mediaType:t}}return{data:e,mediaType:void 0}}function b8(e){return typeof e=="string"?e:e instanceof ArrayBuffer?ed(new Uint8Array(e)):ed(e)}async function x8({prompt:e,supportedUrls:t,download:r=y8()}){const a=await w8(e.messages,r,t);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(s=>_8({message:s,downloadedAssets:a}))]}function _8({message:e,downloadedAssets:t}){const r=e.role;switch(r){case"system":return{role:"system",content:e.content,providerOptions:e.providerOptions};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions}:{role:"user",content:e.content.map(a=>S8(a,t)).filter(a=>a.type!=="text"||a.text!==""),providerOptions:e.providerOptions};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions}:{role:"assistant",content:e.content.filter(a=>a.type!=="text"||a.text!==""||a.providerOptions!=null).map(a=>{const s=a.providerOptions;switch(a.type){case"file":{const{data:l,mediaType:c}=CS(a.data);return{type:"file",data:l,filename:a.filename,mediaType:c??a.mediaType,providerOptions:s}}case"reasoning":return{type:"reasoning",text:a.text,providerOptions:s};case"text":return{type:"text",text:a.text,providerOptions:s};case"tool-call":return{type:"tool-call",toolCallId:a.toolCallId,toolName:a.toolName,input:a.input,providerExecuted:a.providerExecuted,providerOptions:s};case"tool-result":return{type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,output:a.output,providerOptions:s}}}),providerOptions:e.providerOptions};case"tool":return{role:"tool",content:e.content.map(a=>({type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,output:a.output,providerOptions:a.providerOptions})),providerOptions:e.providerOptions};default:{const a=r;throw new l8({role:a})}}}async function w8(e,t,r){const a=e.filter(l=>l.role==="user").map(l=>l.content).filter(l=>Array.isArray(l)).flat().filter(l=>l.type==="image"||l.type==="file").map(l=>{var c;const d=(c=l.mediaType)!=null?c:l.type==="image"?"image/*":void 0;let f=l.type==="image"?l.image:l.data;if(typeof f=="string")try{f=new URL(f)}catch{}return{mediaType:d,data:f}}).filter(l=>l.data instanceof URL).map(l=>({url:l.data,isUrlSupportedByModel:l.mediaType!=null&&RO({url:l.data.toString(),mediaType:l.mediaType,supportedUrls:r})})),s=await t(a);return Object.fromEntries(s.map((l,c)=>l==null?null:[a[c].url.toString(),{data:l.data,mediaType:l.mediaType}]).filter(l=>l!=null))}function S8(e,t){var r;if(e.type==="text")return{type:"text",text:e.text,providerOptions:e.providerOptions};let a;const s=e.type;switch(s){case"image":a=e.image;break;case"file":a=e.data;break;default:throw new Error(`Unsupported part type: ${s}`)}const{data:l,mediaType:c}=CS(a);let d=c??e.mediaType,f=l;if(f instanceof URL){const p=t[f.toString()];p&&(f=p.data,d??(d=p.mediaType))}switch(s){case"image":return(f instanceof Uint8Array||typeof f=="string")&&(d=(r=m8({data:f,signatures:f8}))!=null?r:d),{type:"file",mediaType:d??"image/*",filename:void 0,data:f,providerOptions:e.providerOptions};case"file":{if(d==null)throw new Error("Media type is missing for file part");return{type:"file",mediaType:d,filename:e.filename,data:f,providerOptions:e.providerOptions}}}}function o_({maxOutputTokens:e,temperature:t,topP:r,topK:a,presencePenalty:s,frequencyPenalty:l,seed:c,stopSequences:d}){if(e!=null){if(!Number.isInteger(e))throw new Kr({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be an integer"});if(e<1)throw new Kr({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Kr({parameter:"temperature",value:t,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new Kr({parameter:"topP",value:r,message:"topP must be a number"});if(a!=null&&typeof a!="number")throw new Kr({parameter:"topK",value:a,message:"topK must be a number"});if(s!=null&&typeof s!="number")throw new Kr({parameter:"presencePenalty",value:s,message:"presencePenalty must be a number"});if(l!=null&&typeof l!="number")throw new Kr({parameter:"frequencyPenalty",value:l,message:"frequencyPenalty must be a number"});if(c!=null&&!Number.isInteger(c))throw new Kr({parameter:"seed",value:c,message:"seed must be an integer"});return{maxOutputTokens:e,temperature:t,topP:r,topK:a,presencePenalty:s,frequencyPenalty:l,stopSequences:d,seed:c}}function k8(e){return e!=null&&Object.keys(e).length>0}function T8({tools:e,toolChoice:t,activeTools:r}){return k8(e)?{tools:(r!=null?Object.entries(e).filter(([s])=>r.includes(s)):Object.entries(e)).map(([s,l])=>{const c=l.type;switch(c){case void 0:case"dynamic":case"function":return{type:"function",name:s,description:l.description,inputSchema:md(l.inputSchema).jsonSchema,providerOptions:l.providerOptions};case"provider-defined":return{type:"provider-defined",name:s,id:l.id,args:l.args};default:{const d=c;throw new Error(`Unsupported tool type: ${d}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var Xl=vm(()=>Qe([Xj(),w(),Z(),it(),Vt(w(),Xl),ge(Xl)])),na=Vt(w(),Vt(w(),Xl)),RS=C({type:Q("text"),text:w(),providerOptions:na.optional()}),E8=C({type:Q("image"),image:Qe([AS,Xc(URL)]),mediaType:w().optional(),providerOptions:na.optional()}),jS=C({type:Q("file"),data:Qe([AS,Xc(URL)]),filename:w().optional(),mediaType:w(),providerOptions:na.optional()}),N8=C({type:Q("reasoning"),text:w(),providerOptions:na.optional()}),A8=C({type:Q("tool-call"),toolCallId:w(),toolName:w(),input:Fn(),providerOptions:na.optional(),providerExecuted:it().optional()}),C8=yt("type",[C({type:Q("text"),value:w()}),C({type:Q("json"),value:Xl}),C({type:Q("error-text"),value:w()}),C({type:Q("error-json"),value:Xl}),C({type:Q("content"),value:ge(Qe([C({type:Q("text"),text:w()}),C({type:Q("media"),data:w(),mediaType:w()})]))})]),OS=C({type:Q("tool-result"),toolCallId:w(),toolName:w(),output:C8,providerOptions:na.optional()}),R8=C({role:Q("system"),content:w(),providerOptions:na.optional()}),j8=C({role:Q("user"),content:Qe([w(),ge(Qe([RS,E8,jS]))]),providerOptions:na.optional()}),O8=C({role:Q("assistant"),content:Qe([w(),ge(Qe([RS,jS,N8,A8,OS]))]),providerOptions:na.optional()}),M8=C({role:Q("tool"),content:ge(OS),providerOptions:na.optional()}),I8=Qe([R8,j8,O8,M8]);async function $8(e){if(e.prompt==null&&e.messages==null)throw new ni({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new ni({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new ni({prompt:e,message:"system must be a string"});let t;if(e.prompt!=null&&typeof e.prompt=="string")t=[{role:"user",content:e.prompt}];else if(e.prompt!=null&&Array.isArray(e.prompt))t=e.prompt;else if(e.messages!=null)t=e.messages;else throw new ni({prompt:e,message:"prompt or messages must be defined"});if(t.length===0)throw new ni({prompt:e,message:"messages must not be empty"});const r=await Ta({value:t,schema:ge(I8)});if(!r.success)throw new ni({prompt:e,message:"The messages must be a ModelMessage[]. If you have passed a UIMessage[], you can use convertToModelMessages to convert them.",cause:r.error});return{messages:t,system:e.system}}function D8(e){return km.isInstance(e)||qw.isInstance(e)?new We({name:"GatewayError",message:"Vercel AI Gateway access failed. If you want to use AI SDK providers directly, use the providers, e.g. @ai-sdk/openai, or register a different global default provider.",cause:e}):e}function Vh({operationId:e,telemetry:t}){return{"operation.name":`${e}${t?.functionId!=null?` ${t.functionId}`:""}`,"resource.name":t?.functionId,"ai.operationId":e,"ai.telemetry.functionId":t?.functionId}}function z8({model:e,settings:t,telemetry:r,headers:a}){var s;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((l,[c,d])=>(l[`ai.settings.${c}`]=d,l),{}),...Object.entries((s=r?.metadata)!=null?s:{}).reduce((l,[c,d])=>(l[`ai.telemetry.metadata.${c}`]=d,l),{}),...Object.entries(a??{}).reduce((l,[c,d])=>(d!==void 0&&(l[`ai.request.headers.${c}`]=d),l),{})}}var L8={startSpan(){return jc},startActiveSpan(e,t,r,a){if(typeof t=="function")return t(jc);if(typeof r=="function")return r(jc);if(typeof a=="function")return a(jc)}},jc={spanContext(){return U8},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},U8={traceId:"",spanId:"",traceFlags:0};function q8({isEnabled:e=!1,tracer:t}={}){return e?t||Bh.trace.getTracer("ai"):L8}function Hh({name:e,tracer:t,attributes:r,fn:a,endWhenDone:s=!0}){return t.startActiveSpan(e,{attributes:r},async l=>{try{const c=await a(l);return s&&l.end(),c}catch(c){try{MS(l,c)}finally{l.end()}throw c}})}function MS(e,t){t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:Bh.SpanStatusCode.ERROR,message:t.message})):e.setStatus({code:Bh.SpanStatusCode.ERROR})}function Vs({telemetry:e,attributes:t}){return e?.isEnabled!==!0?{}:Object.entries(t).reduce((r,[a,s])=>{if(s==null)return r;if(typeof s=="object"&&"input"in s&&typeof s.input=="function"){if(e?.recordInputs===!1)return r;const l=s.input();return l==null?r:{...r,[a]:l}}if(typeof s=="object"&&"output"in s&&typeof s.output=="function"){if(e?.recordOutputs===!1)return r;const l=s.output();return l==null?r:{...r,[a]:l}}return{...r,[a]:s}},{})}function P8(e){return JSON.stringify(e.map(t=>({...t,content:typeof t.content=="string"?t.content:t.content.map(r=>r.type==="file"?{...r,data:r.data instanceof Uint8Array?b8(r.data):r.data}:r)})))}function B8(e,t){return{inputTokens:Rl(e.inputTokens,t.inputTokens),outputTokens:Rl(e.outputTokens,t.outputTokens),totalTokens:Rl(e.totalTokens,t.totalTokens),reasoningTokens:Rl(e.reasoningTokens,t.reasoningTokens),cachedInputTokens:Rl(e.cachedInputTokens,t.cachedInputTokens)}}function Rl(e,t){return e==null&&t==null?void 0:(e??0)+(t??0)}function F8(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function V8({error:e,exponentialBackoffDelay:t}){const r=e.responseHeaders;if(!r)return t;let a;const s=r["retry-after-ms"];if(s){const c=parseFloat(s);Number.isNaN(c)||(a=c)}const l=r["retry-after"];if(l&&a===void 0){const c=parseFloat(l);Number.isNaN(c)?a=Date.parse(l)-Date.now():a=c*1e3}return a!=null&&!Number.isNaN(a)&&0<=a&&(a<60*1e3||a<t)?a:t}var H8=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2,abortSignal:a}={})=>async s=>IS(s,{maxRetries:e,delayInMs:t,backoffFactor:r,abortSignal:a});async function IS(e,{maxRetries:t,delayInMs:r,backoffFactor:a,abortSignal:s},l=[]){try{return await e()}catch(c){if(Xs(c)||t===0)throw c;const d=kw(c),f=[...l,c],p=f.length;if(p>t)throw new i_({message:`Failed after ${p} attempts. Last error: ${d}`,reason:"maxRetriesExceeded",errors:f});if(c instanceof Error&&vn.isInstance(c)&&c.isRetryable===!0&&p<=t)return await EO(V8({error:c,exponentialBackoffDelay:r}),{abortSignal:s}),IS(e,{maxRetries:t,delayInMs:a*r,backoffFactor:a,abortSignal:s},f);throw p===1?c:new i_({message:`Failed after ${p} attempts with non-retryable error: '${d}'`,reason:"errorNotRetryable",errors:f})}}function G8({maxRetries:e,abortSignal:t}){if(e!=null){if(!Number.isInteger(e))throw new Kr({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Kr({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const r=e??2;return{maxRetries:r,retry:H8({maxRetries:r,abortSignal:t})}}function l_(e){const t=e.filter(r=>r.type==="text");if(t.length!==0)return t.map(r=>r.text).join("")}var Z8=class{constructor({data:e,mediaType:t}){const r=e instanceof Uint8Array;this.base64Data=r?void 0:e,this.uint8ArrayData=r?e:void 0,this.mediaType=t}get base64(){return this.base64Data==null&&(this.base64Data=ed(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=gd(this.base64Data)),this.uint8ArrayData}};async function Y8({toolCall:e,tools:t,repairToolCall:r,system:a,messages:s}){try{if(t==null)throw new Fh({toolName:e.toolName});try{return await u_({toolCall:e,tools:t})}catch(l){if(r==null||!(Fh.isInstance(l)||lS.isInstance(l)))throw l;let c=null;try{c=await r({toolCall:e,tools:t,inputSchema:({toolName:d})=>{const{inputSchema:f}=t[d];return md(f).jsonSchema},system:a,messages:s,error:l})}catch(d){throw new i8({cause:d,originalError:l})}if(c==null)throw l;return await u_({toolCall:c,tools:t})}}catch(l){const c=await Pi({text:e.input}),d=c.success?c.value:e.input;return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:d,dynamic:!0,invalid:!0,error:l,providerMetadata:e.providerMetadata}}}async function u_({toolCall:e,tools:t}){const r=e.toolName,a=t[r];if(a==null)throw new Fh({toolName:e.toolName,availableTools:Object.keys(t)});const s=md(a.inputSchema),l=e.input.trim()===""?await Ta({value:{},schema:s}):await Pi({text:e.input,schema:s});if(l.success===!1)throw new lS({toolName:r,toolInput:e.input,cause:l.error});return a.type==="dynamic"?{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:l.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,dynamic:!0}:{type:"tool-call",toolCallId:e.toolCallId,toolName:r,input:l.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}}var J8=class{constructor({content:e,finishReason:t,usage:r,warnings:a,request:s,response:l,providerMetadata:c}){this.content=e,this.finishReason=t,this.usage=r,this.warnings=a,this.request=s,this.response=l,this.providerMetadata=c}get text(){return this.content.filter(e=>e.type==="text").map(e=>e.text).join("")}get reasoning(){return this.content.filter(e=>e.type==="reasoning")}get reasoningText(){return this.reasoning.length===0?void 0:this.reasoning.map(e=>e.text).join("")}get files(){return this.content.filter(e=>e.type==="file").map(e=>e.file)}get sources(){return this.content.filter(e=>e.type==="source")}get toolCalls(){return this.content.filter(e=>e.type==="tool-call")}get staticToolCalls(){return this.toolCalls.filter(e=>e.dynamic!==!0)}get dynamicToolCalls(){return this.toolCalls.filter(e=>e.dynamic===!0)}get toolResults(){return this.content.filter(e=>e.type==="tool-result")}get staticToolResults(){return this.toolResults.filter(e=>e.dynamic!==!0)}get dynamicToolResults(){return this.toolResults.filter(e=>e.dynamic===!0)}};function X8(e){return({steps:t})=>t.length===e}async function K8({stopConditions:e,steps:t}){return(await Promise.all(e.map(r=>r({steps:t})))).some(r=>r)}function gh({output:e,tool:t,errorMode:r}){return r==="text"?{type:"error-text",value:Wl(e)}:r==="json"?{type:"error-json",value:c_(e)}:t?.toModelOutput?t.toModelOutput(e):typeof e=="string"?{type:"text",value:e}:{type:"json",value:c_(e)}}function c_(e){return e===void 0?null:e}function Q8({content:e,tools:t}){const r=[],a=e.filter(l=>l.type!=="source").filter(l=>(l.type!=="tool-result"||l.providerExecuted)&&(l.type!=="tool-error"||l.providerExecuted)).filter(l=>l.type!=="text"||l.text.length>0).map(l=>{switch(l.type){case"text":return{type:"text",text:l.text,providerOptions:l.providerMetadata};case"reasoning":return{type:"reasoning",text:l.text,providerOptions:l.providerMetadata};case"file":return{type:"file",data:l.file.base64,mediaType:l.file.mediaType,providerOptions:l.providerMetadata};case"tool-call":return{type:"tool-call",toolCallId:l.toolCallId,toolName:l.toolName,input:l.input,providerExecuted:l.providerExecuted,providerOptions:l.providerMetadata};case"tool-result":return{type:"tool-result",toolCallId:l.toolCallId,toolName:l.toolName,output:gh({tool:t?.[l.toolName],output:l.output,errorMode:"none"}),providerExecuted:!0,providerOptions:l.providerMetadata};case"tool-error":return{type:"tool-result",toolCallId:l.toolCallId,toolName:l.toolName,output:gh({tool:t?.[l.toolName],output:l.error,errorMode:"json"}),providerOptions:l.providerMetadata}}});a.length>0&&r.push({role:"assistant",content:a});const s=e.filter(l=>l.type==="tool-result"||l.type==="tool-error").filter(l=>!l.providerExecuted).map(l=>({type:"tool-result",toolCallId:l.toolCallId,toolName:l.toolName,output:gh({tool:t?.[l.toolName],output:l.type==="tool-result"?l.output:l.error,errorMode:l.type==="tool-error"?"text":"none"}),...l.providerMetadata!=null?{providerOptions:l.providerMetadata}:{}}));return s.length>0&&r.push({role:"tool",content:s}),r}var W8=eu({prefix:"aitxt",size:24});async function e6({model:e,tools:t,toolChoice:r,system:a,prompt:s,messages:l,maxRetries:c,abortSignal:d,headers:f,stopWhen:p=X8(1),experimental_output:y,experimental_telemetry:v,providerOptions:x,experimental_activeTools:b,activeTools:_=b,experimental_prepareStep:S,prepareStep:k=S,experimental_repairToolCall:j,experimental_download:R,experimental_context:E,_internal:{generateId:q=W8,currentDate:P=()=>new Date}={},onStepFinish:H,...I}){const A=s_(e),O=F8(p),{maxRetries:M,retry:F}=G8({maxRetries:c,abortSignal:d}),Y=o_(I),ae=Na(f??{},`ai/${NS}`),ee=z8({model:A,telemetry:v,headers:ae,settings:{...Y,maxRetries:M}}),de=await $8({system:a,prompt:s,messages:l}),J=q8(v);try{return await Hh({name:"ai.generateText",attributes:Vs({telemetry:v,attributes:{...Vh({operationId:"ai.generateText",telemetry:v}),...ee,"ai.model.provider":A.provider,"ai.model.id":A.modelId,"ai.prompt":{input:()=>JSON.stringify({system:a,prompt:s,messages:l})}}}),tracer:J,fn:async te=>{var he,ve,se,N,L,V,G;const X=o_(I);let D,ne=[],le=[];const Se=[],Ae=[];do{const Oe=[...de.messages,...Se],Me=await k?.({model:A,steps:Ae,stepNumber:Ae.length,messages:Oe}),Re=s_((he=Me?.model)!=null?he:A),Ue=await x8({prompt:{system:(ve=Me?.system)!=null?ve:de.system,messages:(se=Me?.messages)!=null?se:Oe},supportedUrls:await Re.supportedUrls,download:R}),{toolChoice:wt,tools:Pe}=T8({tools:t,toolChoice:(N=Me?.toolChoice)!=null?N:r,activeTools:(L=Me?.activeTools)!=null?L:_});D=await F(()=>{var pt;return Hh({name:"ai.generateText.doGenerate",attributes:Vs({telemetry:v,attributes:{...Vh({operationId:"ai.generateText.doGenerate",telemetry:v}),...ee,"ai.model.provider":Re.provider,"ai.model.id":Re.modelId,"ai.prompt.messages":{input:()=>P8(Ue)},"ai.prompt.tools":{input:()=>Pe?.map(rt=>JSON.stringify(rt))},"ai.prompt.toolChoice":{input:()=>wt!=null?JSON.stringify(wt):void 0},"gen_ai.system":Re.provider,"gen_ai.request.model":Re.modelId,"gen_ai.request.frequency_penalty":I.frequencyPenalty,"gen_ai.request.max_tokens":I.maxOutputTokens,"gen_ai.request.presence_penalty":I.presencePenalty,"gen_ai.request.stop_sequences":I.stopSequences,"gen_ai.request.temperature":(pt=I.temperature)!=null?pt:void 0,"gen_ai.request.top_k":I.topK,"gen_ai.request.top_p":I.topP}}),tracer:J,fn:async rt=>{var _n,Mt,Gt,nn,Ar,Cr,Vn,wn;const _t=await Re.doGenerate({...X,tools:Pe,toolChoice:wt,responseFormat:y?.responseFormat,prompt:Ue,providerOptions:x,abortSignal:d,headers:ae}),It={id:(Mt=(_n=_t.response)==null?void 0:_n.id)!=null?Mt:q(),timestamp:(nn=(Gt=_t.response)==null?void 0:Gt.timestamp)!=null?nn:P(),modelId:(Cr=(Ar=_t.response)==null?void 0:Ar.modelId)!=null?Cr:Re.modelId,headers:(Vn=_t.response)==null?void 0:Vn.headers,body:(wn=_t.response)==null?void 0:wn.body};return rt.setAttributes(Vs({telemetry:v,attributes:{"ai.response.finishReason":_t.finishReason,"ai.response.text":{output:()=>l_(_t.content)},"ai.response.toolCalls":{output:()=>{const nr=d_(_t.content);return nr==null?void 0:JSON.stringify(nr)}},"ai.response.id":It.id,"ai.response.model":It.modelId,"ai.response.timestamp":It.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(_t.providerMetadata),"ai.usage.promptTokens":_t.usage.inputTokens,"ai.usage.completionTokens":_t.usage.outputTokens,"gen_ai.response.finish_reasons":[_t.finishReason],"gen_ai.response.id":It.id,"gen_ai.response.model":It.modelId,"gen_ai.usage.input_tokens":_t.usage.inputTokens,"gen_ai.usage.output_tokens":_t.usage.outputTokens}})),{..._t,response:It}}})});const nt=await Promise.all(D.content.filter(pt=>pt.type==="tool-call").map(pt=>Y8({toolCall:pt,tools:t,repairToolCall:j,system:a,messages:Oe})));for(const pt of nt){if(pt.invalid)continue;const rt=t[pt.toolName];rt?.onInputAvailable!=null&&await rt.onInputAvailable({input:pt.input,toolCallId:pt.toolCallId,messages:Oe,abortSignal:d,experimental_context:E})}const tn=nt.filter(pt=>pt.invalid&&pt.dynamic);le=[];for(const pt of tn)le.push({type:"tool-error",toolCallId:pt.toolCallId,toolName:pt.toolName,input:pt.input,error:kw(pt.error),dynamic:!0});ne=nt.filter(pt=>!pt.providerExecuted),t!=null&&le.push(...await t6({toolCalls:ne.filter(pt=>!pt.invalid),tools:t,tracer:J,telemetry:v,messages:Oe,abortSignal:d,experimental_context:E}));const Tn=r6({content:D.content,toolCalls:nt,toolOutputs:le});Se.push(...Q8({content:Tn,tools:t}));const xn=new J8({content:Tn,finishReason:D.finishReason,usage:D.usage,warnings:D.warnings,providerMetadata:D.providerMetadata,request:(V=D.request)!=null?V:{},response:{...D.response,messages:structuredClone(Se)}});WI((G=D.warnings)!=null?G:[]),Ae.push(xn),await H?.(xn)}while(ne.length>0&&le.length===ne.length&&!await K8({stopConditions:O,steps:Ae}));te.setAttributes(Vs({telemetry:v,attributes:{"ai.response.finishReason":D.finishReason,"ai.response.text":{output:()=>l_(D.content)},"ai.response.toolCalls":{output:()=>{const Oe=d_(D.content);return Oe==null?void 0:JSON.stringify(Oe)}},"ai.response.providerMetadata":JSON.stringify(D.providerMetadata),"ai.usage.promptTokens":D.usage.inputTokens,"ai.usage.completionTokens":D.usage.outputTokens}}));const Te=Ae[Ae.length-1];let $e;return Te.finishReason==="stop"&&($e=await y?.parseOutput({text:Te.text},{response:Te.response,usage:Te.usage,finishReason:Te.finishReason})),new n6({steps:Ae,resolvedOutput:$e})}})}catch(te){throw D8(te)}}async function t6({toolCalls:e,tools:t,tracer:r,telemetry:a,messages:s,abortSignal:l,experimental_context:c}){return(await Promise.all(e.map(async({toolCallId:f,toolName:p,input:y})=>{const v=t[p];if(v?.execute!=null)return Hh({name:"ai.toolCall",attributes:Vs({telemetry:a,attributes:{...Vh({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":p,"ai.toolCall.id":f,"ai.toolCall.args":{output:()=>JSON.stringify(y)}}}),tracer:r,fn:async x=>{try{const b=LM({execute:v.execute.bind(v),input:y,options:{toolCallId:f,messages:s,abortSignal:l,experimental_context:c}});let _;for await(const S of b)S.type==="final"&&(_=S.output);try{x.setAttributes(Vs({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(_)}}}))}catch{}return{type:"tool-result",toolCallId:f,toolName:p,input:y,output:_,dynamic:v.type==="dynamic"}}catch(b){return MS(x,b),{type:"tool-error",toolCallId:f,toolName:p,input:y,error:b,dynamic:v.type==="dynamic"}}}})}))).filter(f=>f!=null)}var n6=class{constructor(e){this.steps=e.steps,this.resolvedOutput=e.resolvedOutput}get finalStep(){return this.steps[this.steps.length-1]}get content(){return this.finalStep.content}get text(){return this.finalStep.text}get files(){return this.finalStep.files}get reasoningText(){return this.finalStep.reasoningText}get reasoning(){return this.finalStep.reasoning}get toolCalls(){return this.finalStep.toolCalls}get staticToolCalls(){return this.finalStep.staticToolCalls}get dynamicToolCalls(){return this.finalStep.dynamicToolCalls}get toolResults(){return this.finalStep.toolResults}get staticToolResults(){return this.finalStep.staticToolResults}get dynamicToolResults(){return this.finalStep.dynamicToolResults}get sources(){return this.finalStep.sources}get finishReason(){return this.finalStep.finishReason}get warnings(){return this.finalStep.warnings}get providerMetadata(){return this.finalStep.providerMetadata}get response(){return this.finalStep.response}get request(){return this.finalStep.request}get usage(){return this.finalStep.usage}get totalUsage(){return this.steps.reduce((e,t)=>B8(e,t.usage),{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0,reasoningTokens:void 0,cachedInputTokens:void 0})}get experimental_output(){if(this.resolvedOutput==null)throw new XI;return this.resolvedOutput}};function d_(e){const t=e.filter(r=>r.type==="tool-call");if(t.length!==0)return t.map(r=>({toolCallId:r.toolCallId,toolName:r.toolName,input:r.input}))}function r6({content:e,toolCalls:t,toolOutputs:r}){return[...e.map(a=>{switch(a.type){case"text":case"reasoning":case"source":return a;case"file":return{type:"file",file:new Z8(a)};case"tool-call":return t.find(s=>s.toolCallId===a.toolCallId);case"tool-result":{const s=t.find(l=>l.toolCallId===a.toolCallId);if(s==null)throw new Error(`Tool call ${a.toolCallId} not found.`);return a.isError?{type:"tool-error",toolCallId:a.toolCallId,toolName:a.toolName,input:s.input,error:a.result,providerExecuted:!0,dynamic:s.dynamic}:{type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,input:s.input,output:a.result,providerExecuted:!0,dynamic:s.dynamic}}}}),...r]}(class extends TransformStream{constructor(){super({transform(e,t){t.enqueue(`data: ${JSON.stringify(e)}

`)},flush(e){e.enqueue(`data: [DONE]

`)}})}});function a6(e){const t=["ROOT"];let r=-1,a=null;function s(f,p,y){switch(f){case'"':{r=p,t.pop(),t.push(y),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=p,a=p,t.pop(),t.push(y),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(y),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=p,t.pop(),t.push(y),t.push("INSIDE_NUMBER");break}case"{":{r=p,t.pop(),t.push(y),t.push("INSIDE_OBJECT_START");break}case"[":{r=p,t.pop(),t.push(y),t.push("INSIDE_ARRAY_START");break}}}function l(f,p){switch(f){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=p,t.pop();break}}}function c(f,p){switch(f){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=p,t.pop();break}}}for(let f=0;f<e.length;f++){const p=e[f];switch(t[t.length-1]){case"ROOT":s(p,f,"FINISH");break;case"INSIDE_OBJECT_START":{switch(p){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{r=f,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(p){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(p){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(p){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{s(p,f,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{l(p,f);break}case"INSIDE_STRING":{switch(p){case'"':{t.pop(),r=f;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:r=f}break}case"INSIDE_ARRAY_START":{switch(p){case"]":{r=f,t.pop();break}default:{r=f,s(p,f,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(p){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=f,t.pop();break}default:{r=f;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{s(p,f,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),r=f;break}case"INSIDE_NUMBER":{switch(p){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=f;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&c(p,f),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&l(p,f);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&l(p,f);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&c(p,f);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const v=e.substring(a,f+1);!"false".startsWith(v)&&!"true".startsWith(v)&&!"null".startsWith(v)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?l(p,f):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&c(p,f)):r=f;break}}}let d=e.slice(0,r+1);for(let f=t.length-1;f>=0;f--)switch(t[f]){case"INSIDE_STRING":{d+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{d+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{d+="]";break}case"INSIDE_LITERAL":{const y=e.substring(a,e.length);"true".startsWith(y)?d+="true".slice(y.length):"false".startsWith(y)?d+="false".slice(y.length):"null".startsWith(y)&&(d+="null".slice(y.length))}}return d}async function i6(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=await Pi({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await Pi({text:a6(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}eu({prefix:"aitxt",size:24});eu({prefix:"aiobj",size:24});eu({prefix:"aiobj",size:24});var s6={};YI(s6,{object:()=>l6,text:()=>o6});var o6=()=>({type:"text",responseFormat:{type:"text"},async parsePartial({text:e}){return{partial:e}},async parseOutput({text:e}){return e}}),l6=({schema:e})=>{const t=md(e);return{type:"object",responseFormat:{type:"json",schema:t.jsonSchema},async parsePartial({text:r}){const a=await i6(r);switch(a.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:a.value};default:{const s=a.state;throw new Error(`Unsupported parse state: ${s}`)}}},async parseOutput({text:r},a){const s=await Pi({text:r});if(!s.success)throw new a_({message:"No object generated: could not parse the response.",cause:s.error,text:r,response:a.response,usage:a.usage,finishReason:a.finishReason});const l=await Ta({value:s.value,schema:t});if(!l.success)throw new a_({message:"No object generated: response did not match schema.",cause:l.error,text:r,response:a.response,usage:a.usage,finishReason:a.finishReason});return l.value}}},Cm=C({error:C({message:w(),type:w().nullish(),param:fr().nullish(),code:Qe([w(),Z()]).nullish()})}),ta=pr({errorSchema:Cm,errorToMessage:e=>e.error.message});function u6({prompt:e,systemMessageMode:t="system"}){const r=[],a=[];for(const{role:s,content:l}of e)switch(s){case"system":{switch(t){case"system":{r.push({role:"system",content:l});break}case"developer":{r.push({role:"developer",content:l});break}case"remove":{a.push({type:"other",message:"system messages are removed for this model"});break}default:{const c=t;throw new Error(`Unsupported system message mode: ${c}`)}}break}case"user":{if(l.length===1&&l[0].type==="text"){r.push({role:"user",content:l[0].text});break}r.push({role:"user",content:l.map((c,d)=>{var f,p,y;switch(c.type){case"text":return{type:"text",text:c.text};case"file":if(c.mediaType.startsWith("image/")){const v=c.mediaType==="image/*"?"image/jpeg":c.mediaType;return{type:"image_url",image_url:{url:c.data instanceof URL?c.data.toString():`data:${v};base64,${qr(c.data)}`,detail:(p=(f=c.providerOptions)==null?void 0:f.openai)==null?void 0:p.imageDetail}}}else if(c.mediaType.startsWith("audio/")){if(c.data instanceof URL)throw new Ft({functionality:"audio file parts with URLs"});switch(c.mediaType){case"audio/wav":return{type:"input_audio",input_audio:{data:qr(c.data),format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:qr(c.data),format:"mp3"}};default:throw new Ft({functionality:`audio content parts with media type ${c.mediaType}`})}}else if(c.mediaType==="application/pdf"){if(c.data instanceof URL)throw new Ft({functionality:"PDF file parts with URLs"});return{type:"file",file:typeof c.data=="string"&&c.data.startsWith("file-")?{file_id:c.data}:{filename:(y=c.filename)!=null?y:`part-${d}.pdf`,file_data:`data:application/pdf;base64,${qr(c.data)}`}}}else throw new Ft({functionality:`file part media type ${c.mediaType}`})}})});break}case"assistant":{let c="";const d=[];for(const f of l)switch(f.type){case"text":{c+=f.text;break}case"tool-call":{d.push({id:f.toolCallId,type:"function",function:{name:f.toolName,arguments:JSON.stringify(f.input)}});break}}r.push({role:"assistant",content:c,tool_calls:d.length>0?d:void 0});break}case"tool":{for(const c of l){const d=c.output;let f;switch(d.type){case"text":case"error-text":f=d.value;break;case"content":case"json":case"error-json":f=JSON.stringify(d.value);break}r.push({role:"tool",tool_call_id:c.toolCallId,content:f})}break}default:{const c=s;throw new Error(`Unsupported role: ${c}`)}}return{messages:r,warnings:a}}function yh({id:e,model:t,created:r}){return{id:e??void 0,modelId:t??void 0,timestamp:r?new Date(r*1e3):void 0}}function f_(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var c6=en(()=>Ie(C({id:w().nullish(),created:Z().nullish(),model:w().nullish(),choices:ge(C({message:C({role:Q("assistant").nullish(),content:w().nullish(),tool_calls:ge(C({id:w().nullish(),type:Q("function"),function:C({name:w(),arguments:w()})})).nullish(),annotations:ge(C({type:Q("url_citation"),start_index:Z(),end_index:Z(),url:w(),title:w()})).nullish()}),index:Z(),logprobs:C({content:ge(C({token:w(),logprob:Z(),top_logprobs:ge(C({token:w(),logprob:Z()}))})).nullish()}).nullish(),finish_reason:w().nullish()})),usage:C({prompt_tokens:Z().nullish(),completion_tokens:Z().nullish(),total_tokens:Z().nullish(),prompt_tokens_details:C({cached_tokens:Z().nullish()}).nullish(),completion_tokens_details:C({reasoning_tokens:Z().nullish(),accepted_prediction_tokens:Z().nullish(),rejected_prediction_tokens:Z().nullish()}).nullish()}).nullish()}))),d6=en(()=>Ie(Qe([C({id:w().nullish(),created:Z().nullish(),model:w().nullish(),choices:ge(C({delta:C({role:He(["assistant"]).nullish(),content:w().nullish(),tool_calls:ge(C({index:Z(),id:w().nullish(),type:Q("function").nullish(),function:C({name:w().nullish(),arguments:w().nullish()})})).nullish(),annotations:ge(C({type:Q("url_citation"),start_index:Z(),end_index:Z(),url:w(),title:w()})).nullish()}).nullish(),logprobs:C({content:ge(C({token:w(),logprob:Z(),top_logprobs:ge(C({token:w(),logprob:Z()}))})).nullish()}).nullish(),finish_reason:w().nullish(),index:Z()})),usage:C({prompt_tokens:Z().nullish(),completion_tokens:Z().nullish(),total_tokens:Z().nullish(),prompt_tokens_details:C({cached_tokens:Z().nullish()}).nullish(),completion_tokens_details:C({reasoning_tokens:Z().nullish(),accepted_prediction_tokens:Z().nullish(),rejected_prediction_tokens:Z().nullish()}).nullish()}).nullish()}),Cm]))),f6=en(()=>Ie(C({logitBias:Vt(TO(),Z()).optional(),logprobs:Qe([it(),Z()]).optional(),parallelToolCalls:it().optional(),user:w().optional(),reasoningEffort:He(["none","minimal","low","medium","high"]).optional(),maxCompletionTokens:Z().optional(),store:it().optional(),metadata:Vt(w().max(64),w().max(512)).optional(),prediction:Vt(w(),fr()).optional(),structuredOutputs:it().optional(),serviceTier:He(["auto","flex","priority","default"]).optional(),strictJsonSchema:it().optional(),textVerbosity:He(["low","medium","high"]).optional(),promptCacheKey:w().optional(),promptCacheRetention:He(["in_memory","24h"]).optional(),safetyIdentifier:w().optional()})));function p6({tools:e,toolChoice:t,structuredOutputs:r,strictJsonSchema:a}){e=e?.length?e:void 0;const s=[];if(e==null)return{tools:void 0,toolChoice:void 0,toolWarnings:s};const l=[];for(const d of e)switch(d.type){case"function":l.push({type:"function",function:{name:d.name,description:d.description,parameters:d.inputSchema,strict:r?a:void 0}});break;default:s.push({type:"unsupported-tool",tool:d});break}if(t==null)return{tools:l,toolChoice:void 0,toolWarnings:s};const c=t.type;switch(c){case"auto":case"none":case"required":return{tools:l,toolChoice:c,toolWarnings:s};case"tool":return{tools:l,toolChoice:{type:"function",function:{name:t.toolName}},toolWarnings:s};default:{const d=c;throw new Ft({functionality:`tool choice type: ${d}`})}}}var h6=class{constructor(e,t){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/]},this.modelId=e,this.config=t}get provider(){return this.config.provider}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:a,topK:s,frequencyPenalty:l,presencePenalty:c,stopSequences:d,responseFormat:f,seed:p,tools:y,toolChoice:v,providerOptions:x}){var b,_,S,k;const j=[],R=(b=await fn({provider:"openai",providerOptions:x,schema:f6}))!=null?b:{},E=(_=R.structuredOutputs)!=null?_:!0;s!=null&&j.push({type:"unsupported-setting",setting:"topK"}),f?.type==="json"&&f.schema!=null&&!E&&j.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const{messages:q,warnings:P}=u6({prompt:e,systemMessageMode:y6(this.modelId)});j.push(...P);const H=(S=R.strictJsonSchema)!=null?S:!1,I={model:this.modelId,logit_bias:R.logitBias,logprobs:R.logprobs===!0||typeof R.logprobs=="number"?!0:void 0,top_logprobs:typeof R.logprobs=="number"?R.logprobs:typeof R.logprobs=="boolean"&&R.logprobs?0:void 0,user:R.user,parallel_tool_calls:R.parallelToolCalls,max_tokens:t,temperature:r,top_p:a,frequency_penalty:l,presence_penalty:c,response_format:f?.type==="json"?E&&f.schema!=null?{type:"json_schema",json_schema:{schema:f.schema,strict:H,name:(k=f.name)!=null?k:"response",description:f.description}}:{type:"json_object"}:void 0,stop:d,seed:p,verbosity:R.textVerbosity,max_completion_tokens:R.maxCompletionTokens,store:R.store,metadata:R.metadata,prediction:R.prediction,reasoning_effort:R.reasoningEffort,service_tier:R.serviceTier,prompt_cache_key:R.promptCacheKey,prompt_cache_retention:R.promptCacheRetention,safety_identifier:R.safetyIdentifier,messages:q};$S(this.modelId)?(I.temperature!=null&&(I.temperature=void 0,j.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),I.top_p!=null&&(I.top_p=void 0,j.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),I.frequency_penalty!=null&&(I.frequency_penalty=void 0,j.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),I.presence_penalty!=null&&(I.presence_penalty=void 0,j.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),I.logit_bias!=null&&(I.logit_bias=void 0,j.push({type:"other",message:"logitBias is not supported for reasoning models"})),I.logprobs!=null&&(I.logprobs=void 0,j.push({type:"other",message:"logprobs is not supported for reasoning models"})),I.top_logprobs!=null&&(I.top_logprobs=void 0,j.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),I.max_tokens!=null&&(I.max_completion_tokens==null&&(I.max_completion_tokens=I.max_tokens),I.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&I.temperature!=null&&(I.temperature=void 0,j.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),R.serviceTier==="flex"&&!m6(this.modelId)&&(j.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),I.service_tier=void 0),R.serviceTier==="priority"&&!g6(this.modelId)&&(j.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),I.service_tier=void 0);const{tools:A,toolChoice:O,toolWarnings:M}=p6({tools:y,toolChoice:v,structuredOutputs:E,strictJsonSchema:H});return{args:{...I,tools:A,tool_choice:O},warnings:[...j,...M]}}async doGenerate(e){var t,r,a,s,l,c,d,f,p,y,v,x,b,_;const{args:S,warnings:k}=await this.getArgs(e),{responseHeaders:j,value:R,rawValue:E}=await zt({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Pt(this.config.headers(),e.headers),body:S,failedResponseHandler:ta,successfulResponseHandler:pn(c6),abortSignal:e.abortSignal,fetch:this.config.fetch}),q=R.choices[0],P=[],H=q.message.content;H!=null&&H.length>0&&P.push({type:"text",text:H});for(const M of(t=q.message.tool_calls)!=null?t:[])P.push({type:"tool-call",toolCallId:(r=M.id)!=null?r:gn(),toolName:M.function.name,input:M.function.arguments});for(const M of(a=q.message.annotations)!=null?a:[])P.push({type:"source",sourceType:"url",id:gn(),url:M.url,title:M.title});const I=(s=R.usage)==null?void 0:s.completion_tokens_details,A=(l=R.usage)==null?void 0:l.prompt_tokens_details,O={openai:{}};return I?.accepted_prediction_tokens!=null&&(O.openai.acceptedPredictionTokens=I?.accepted_prediction_tokens),I?.rejected_prediction_tokens!=null&&(O.openai.rejectedPredictionTokens=I?.rejected_prediction_tokens),((c=q.logprobs)==null?void 0:c.content)!=null&&(O.openai.logprobs=q.logprobs.content),{content:P,finishReason:f_(q.finish_reason),usage:{inputTokens:(f=(d=R.usage)==null?void 0:d.prompt_tokens)!=null?f:void 0,outputTokens:(y=(p=R.usage)==null?void 0:p.completion_tokens)!=null?y:void 0,totalTokens:(x=(v=R.usage)==null?void 0:v.total_tokens)!=null?x:void 0,reasoningTokens:(b=I?.reasoning_tokens)!=null?b:void 0,cachedInputTokens:(_=A?.cached_tokens)!=null?_:void 0},request:{body:S},response:{...yh(R),headers:j,body:E},warnings:k,providerMetadata:O}}async doStream(e){const{args:t,warnings:r}=await this.getArgs(e),a={...t,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:s,value:l}=await zt({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Pt(this.config.headers(),e.headers),body:a,failedResponseHandler:ta,successfulResponseHandler:ci(d6),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=[];let d="unknown";const f={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};let p=!1,y=!1;const v={openai:{}};return{stream:l.pipeThrough(new TransformStream({start(x){x.enqueue({type:"stream-start",warnings:r})},transform(x,b){var _,S,k,j,R,E,q,P,H,I,A,O,M,F,Y,ae,ee,de,J,te,he,ve,se,N;if(e.includeRawChunks&&b.enqueue({type:"raw",rawValue:x.rawValue}),!x.success){d="error",b.enqueue({type:"error",error:x.error});return}const L=x.value;if("error"in L){d="error",b.enqueue({type:"error",error:L.error});return}if(!p){const X=yh(L);Object.values(X).some(Boolean)&&(p=!0,b.enqueue({type:"response-metadata",...yh(L)}))}L.usage!=null&&(f.inputTokens=(_=L.usage.prompt_tokens)!=null?_:void 0,f.outputTokens=(S=L.usage.completion_tokens)!=null?S:void 0,f.totalTokens=(k=L.usage.total_tokens)!=null?k:void 0,f.reasoningTokens=(R=(j=L.usage.completion_tokens_details)==null?void 0:j.reasoning_tokens)!=null?R:void 0,f.cachedInputTokens=(q=(E=L.usage.prompt_tokens_details)==null?void 0:E.cached_tokens)!=null?q:void 0,((P=L.usage.completion_tokens_details)==null?void 0:P.accepted_prediction_tokens)!=null&&(v.openai.acceptedPredictionTokens=(H=L.usage.completion_tokens_details)==null?void 0:H.accepted_prediction_tokens),((I=L.usage.completion_tokens_details)==null?void 0:I.rejected_prediction_tokens)!=null&&(v.openai.rejectedPredictionTokens=(A=L.usage.completion_tokens_details)==null?void 0:A.rejected_prediction_tokens));const V=L.choices[0];if(V?.finish_reason!=null&&(d=f_(V.finish_reason)),((O=V?.logprobs)==null?void 0:O.content)!=null&&(v.openai.logprobs=V.logprobs.content),V?.delta==null)return;const G=V.delta;if(G.content!=null&&(y||(b.enqueue({type:"text-start",id:"0"}),y=!0),b.enqueue({type:"text-delta",id:"0",delta:G.content})),G.tool_calls!=null)for(const X of G.tool_calls){const D=X.index;if(c[D]==null){if(X.type!=="function")throw new Ul({data:X,message:"Expected 'function' type."});if(X.id==null)throw new Ul({data:X,message:"Expected 'id' to be a string."});if(((M=X.function)==null?void 0:M.name)==null)throw new Ul({data:X,message:"Expected 'function.name' to be a string."});b.enqueue({type:"tool-input-start",id:X.id,toolName:X.function.name}),c[D]={id:X.id,type:"function",function:{name:X.function.name,arguments:(F=X.function.arguments)!=null?F:""},hasFinished:!1};const le=c[D];((Y=le.function)==null?void 0:Y.name)!=null&&((ae=le.function)==null?void 0:ae.arguments)!=null&&(le.function.arguments.length>0&&b.enqueue({type:"tool-input-delta",id:le.id,delta:le.function.arguments}),Wc(le.function.arguments)&&(b.enqueue({type:"tool-input-end",id:le.id}),b.enqueue({type:"tool-call",toolCallId:(ee=le.id)!=null?ee:gn(),toolName:le.function.name,input:le.function.arguments}),le.hasFinished=!0));continue}const ne=c[D];ne.hasFinished||(((de=X.function)==null?void 0:de.arguments)!=null&&(ne.function.arguments+=(te=(J=X.function)==null?void 0:J.arguments)!=null?te:""),b.enqueue({type:"tool-input-delta",id:ne.id,delta:(he=X.function.arguments)!=null?he:""}),((ve=ne.function)==null?void 0:ve.name)!=null&&((se=ne.function)==null?void 0:se.arguments)!=null&&Wc(ne.function.arguments)&&(b.enqueue({type:"tool-input-end",id:ne.id}),b.enqueue({type:"tool-call",toolCallId:(N=ne.id)!=null?N:gn(),toolName:ne.function.name,input:ne.function.arguments}),ne.hasFinished=!0))}if(G.annotations!=null)for(const X of G.annotations)b.enqueue({type:"source",sourceType:"url",id:gn(),url:X.url,title:X.title})},flush(x){y&&x.enqueue({type:"text-end",id:"0"}),x.enqueue({type:"finish",finishReason:d,usage:f,...v!=null?{providerMetadata:v}:{}})}})),request:{body:a},response:{headers:s}}}};function $S(e){return(e.startsWith("o")||e.startsWith("gpt-5"))&&!e.startsWith("gpt-5-chat")}function m6(e){return e.startsWith("o3")||e.startsWith("o4-mini")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-chat")}function g6(e){return e.startsWith("gpt-4")||e.startsWith("gpt-5-mini")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-nano")&&!e.startsWith("gpt-5-chat")||e.startsWith("o3")||e.startsWith("o4-mini")}function y6(e){var t,r;return $S(e)?(r=(t=v6[e])==null?void 0:t.systemMessageMode)!=null?r:"developer":"system"}var v6={o3:{systemMessageMode:"developer"},"o3-2025-04-16":{systemMessageMode:"developer"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"},"o4-mini":{systemMessageMode:"developer"},"o4-mini-2025-04-16":{systemMessageMode:"developer"}};function b6({prompt:e,user:t="user",assistant:r="assistant"}){let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:s,content:l}of e)switch(s){case"system":throw new ni({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const c=l.map(d=>{switch(d.type){case"text":return d.text}}).filter(Boolean).join("");a+=`${t}:
${c}

`;break}case"assistant":{const c=l.map(d=>{switch(d.type){case"text":return d.text;case"tool-call":throw new Ft({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${c}

`;break}case"tool":throw new Ft({functionality:"tool messages"});default:{const c=s;throw new Error(`Unsupported role: ${c}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${t}:`]}}function p_({id:e,model:t,created:r}){return{id:e??void 0,modelId:t??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function h_(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var x6=en(()=>Ie(C({id:w().nullish(),created:Z().nullish(),model:w().nullish(),choices:ge(C({text:w(),finish_reason:w(),logprobs:C({tokens:ge(w()),token_logprobs:ge(Z()),top_logprobs:ge(Vt(w(),Z())).nullish()}).nullish()})),usage:C({prompt_tokens:Z(),completion_tokens:Z(),total_tokens:Z()}).nullish()}))),_6=en(()=>Ie(Qe([C({id:w().nullish(),created:Z().nullish(),model:w().nullish(),choices:ge(C({text:w(),finish_reason:w().nullish(),index:Z(),logprobs:C({tokens:ge(w()),token_logprobs:ge(Z()),top_logprobs:ge(Vt(w(),Z())).nullish()}).nullish()})),usage:C({prompt_tokens:Z(),completion_tokens:Z(),total_tokens:Z()}).nullish()}),Cm]))),m_=en(()=>Ie(C({echo:it().optional(),logitBias:Vt(w(),Z()).optional(),suffix:w().optional(),user:w().optional(),logprobs:Qe([it(),Z()]).optional()}))),w6=class{constructor(e,t){this.specificationVersion="v2",this.supportedUrls={},this.modelId=e,this.config=t}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get provider(){return this.config.provider}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:a,topK:s,frequencyPenalty:l,presencePenalty:c,stopSequences:d,responseFormat:f,tools:p,toolChoice:y,seed:v,providerOptions:x}){const b=[],_={...await fn({provider:"openai",providerOptions:x,schema:m_}),...await fn({provider:this.providerOptionsName,providerOptions:x,schema:m_})};s!=null&&b.push({type:"unsupported-setting",setting:"topK"}),p?.length&&b.push({type:"unsupported-setting",setting:"tools"}),y!=null&&b.push({type:"unsupported-setting",setting:"toolChoice"}),f!=null&&f.type!=="text"&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:S,stopSequences:k}=b6({prompt:e}),j=[...k??[],...d??[]];return{args:{model:this.modelId,echo:_.echo,logit_bias:_.logitBias,logprobs:_?.logprobs===!0?0:_?.logprobs===!1?void 0:_?.logprobs,suffix:_.suffix,user:_.user,max_tokens:t,temperature:r,top_p:a,frequency_penalty:l,presence_penalty:c,seed:v,prompt:S,stop:j.length>0?j:void 0},warnings:b}}async doGenerate(e){var t,r,a;const{args:s,warnings:l}=await this.getArgs(e),{responseHeaders:c,value:d,rawValue:f}=await zt({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Pt(this.config.headers(),e.headers),body:s,failedResponseHandler:ta,successfulResponseHandler:pn(x6),abortSignal:e.abortSignal,fetch:this.config.fetch}),p=d.choices[0],y={openai:{}};return p.logprobs!=null&&(y.openai.logprobs=p.logprobs),{content:[{type:"text",text:p.text}],usage:{inputTokens:(t=d.usage)==null?void 0:t.prompt_tokens,outputTokens:(r=d.usage)==null?void 0:r.completion_tokens,totalTokens:(a=d.usage)==null?void 0:a.total_tokens},finishReason:h_(p.finish_reason),request:{body:s},response:{...p_(d),headers:c,body:f},providerMetadata:y,warnings:l}}async doStream(e){const{args:t,warnings:r}=await this.getArgs(e),a={...t,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:s,value:l}=await zt({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Pt(this.config.headers(),e.headers),body:a,failedResponseHandler:ta,successfulResponseHandler:ci(_6),abortSignal:e.abortSignal,fetch:this.config.fetch});let c="unknown";const d={openai:{}},f={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};let p=!0;return{stream:l.pipeThrough(new TransformStream({start(y){y.enqueue({type:"stream-start",warnings:r})},transform(y,v){if(e.includeRawChunks&&v.enqueue({type:"raw",rawValue:y.rawValue}),!y.success){c="error",v.enqueue({type:"error",error:y.error});return}const x=y.value;if("error"in x){c="error",v.enqueue({type:"error",error:x.error});return}p&&(p=!1,v.enqueue({type:"response-metadata",...p_(x)}),v.enqueue({type:"text-start",id:"0"})),x.usage!=null&&(f.inputTokens=x.usage.prompt_tokens,f.outputTokens=x.usage.completion_tokens,f.totalTokens=x.usage.total_tokens);const b=x.choices[0];b?.finish_reason!=null&&(c=h_(b.finish_reason)),b?.logprobs!=null&&(d.openai.logprobs=b.logprobs),b?.text!=null&&b.text.length>0&&v.enqueue({type:"text-delta",id:"0",delta:b.text})},flush(y){p||y.enqueue({type:"text-end",id:"0"}),y.enqueue({type:"finish",finishReason:c,providerMetadata:d,usage:f})}})),request:{body:a},response:{headers:s}}}},S6=en(()=>Ie(C({dimensions:Z().optional(),user:w().optional()}))),k6=en(()=>Ie(C({data:ge(C({embedding:ge(Z())})),usage:C({prompt_tokens:Z()}).nullish()}))),T6=class{constructor(e,t){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:r,providerOptions:a}){var s;if(e.length>this.maxEmbeddingsPerCall)throw new cm({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const l=(s=await fn({provider:"openai",providerOptions:a,schema:S6}))!=null?s:{},{responseHeaders:c,value:d,rawValue:f}=await zt({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Pt(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:l.dimensions,user:l.user},failedResponseHandler:ta,successfulResponseHandler:pn(k6),abortSignal:r,fetch:this.config.fetch});return{embeddings:d.data.map(p=>p.embedding),usage:d.usage?{tokens:d.usage.prompt_tokens}:void 0,response:{headers:c,body:f}}}},E6=en(()=>Ie(C({created:Z().nullish(),data:ge(C({b64_json:w(),revised_prompt:w().nullish()})),background:w().nullish(),output_format:w().nullish(),size:w().nullish(),quality:w().nullish(),usage:C({input_tokens:Z().nullish(),output_tokens:Z().nullish(),total_tokens:Z().nullish(),input_tokens_details:C({image_tokens:Z().nullish(),text_tokens:Z().nullish()}).nullish()}).nullish()}))),N6={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10,"gpt-image-1-mini":10},A6=new Set(["gpt-image-1","gpt-image-1-mini"]),C6=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2"}get maxImagesPerCall(){var e;return(e=N6[this.modelId])!=null?e:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:r,aspectRatio:a,seed:s,providerOptions:l,headers:c,abortSignal:d}){var f,p,y,v;const x=[];a!=null&&x.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),s!=null&&x.push({type:"unsupported-setting",setting:"seed"});const b=(y=(p=(f=this.config._internal)==null?void 0:f.currentDate)==null?void 0:p.call(f))!=null?y:new Date,{value:_,responseHeaders:S}=await zt({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Pt(this.config.headers(),c),body:{model:this.modelId,prompt:e,n:t,size:r,...(v=l.openai)!=null?v:{},...A6.has(this.modelId)?{}:{response_format:"b64_json"}},failedResponseHandler:ta,successfulResponseHandler:pn(E6),abortSignal:d,fetch:this.config.fetch});return{images:_.data.map(k=>k.b64_json),warnings:x,response:{timestamp:b,modelId:this.modelId,headers:S},providerMetadata:{openai:{images:_.data.map(k=>({...k.revised_prompt?{revisedPrompt:k.revised_prompt}:{},..._.created!=null?{created:_.created}:{},..._.size!=null?{size:_.size}:{},..._.quality!=null?{quality:_.quality}:{},..._.background!=null?{background:_.background}:{},..._.output_format!=null?{outputFormat:_.output_format}:{}}))}}}}},R6=Ge(()=>Ie(C({code:w().nullish(),containerId:w()}))),j6=Ge(()=>Ie(C({outputs:ge(yt("type",[C({type:Q("logs"),logs:w()}),C({type:Q("image"),url:w()})])).nullish()}))),O6=Ge(()=>Ie(C({container:Qe([w(),C({fileIds:ge(w()).optional()})]).optional()}))),M6=Fr({id:"openai.code_interpreter",name:"code_interpreter",inputSchema:R6,outputSchema:j6}),I6=(e={})=>M6(e),DS=C({key:w(),type:He(["eq","ne","gt","gte","lt","lte"]),value:Qe([w(),Z(),it()])}),zS=C({type:He(["and","or"]),filters:ge(Qe([DS,vm(()=>zS)]))}),$6=Ge(()=>Ie(C({vectorStoreIds:ge(w()),maxNumResults:Z().optional(),ranking:C({ranker:w().optional(),scoreThreshold:Z().optional()}).optional(),filters:Qe([DS,zS]).optional()}))),D6=Ge(()=>Ie(C({queries:ge(w()),results:ge(C({attributes:Vt(w(),Fn()),fileId:w(),filename:w(),score:Z(),text:w()})).nullable()}))),z6=Fr({id:"openai.file_search",name:"file_search",inputSchema:C({}),outputSchema:D6}),L6=Ge(()=>Ie(C({background:He(["auto","opaque","transparent"]).optional(),inputFidelity:He(["low","high"]).optional(),inputImageMask:C({fileId:w().optional(),imageUrl:w().optional()}).optional(),model:w().optional(),moderation:He(["auto"]).optional(),outputCompression:Z().int().min(0).max(100).optional(),outputFormat:He(["png","jpeg","webp"]).optional(),partialImages:Z().int().min(0).max(3).optional(),quality:He(["auto","low","medium","high"]).optional(),size:He(["1024x1024","1024x1536","1536x1024","auto"]).optional()}).strict())),U6=Ge(()=>Ie(C({}))),q6=Ge(()=>Ie(C({result:w()}))),P6=Fr({id:"openai.image_generation",name:"image_generation",inputSchema:U6,outputSchema:q6}),B6=(e={})=>P6(e),LS=Ge(()=>Ie(C({action:C({type:Q("exec"),command:ge(w()),timeoutMs:Z().optional(),user:w().optional(),workingDirectory:w().optional(),env:Vt(w(),w()).optional()})}))),US=Ge(()=>Ie(C({output:w()}))),F6=Fr({id:"openai.local_shell",name:"local_shell",inputSchema:LS,outputSchema:US}),V6=Ge(()=>Ie(C({externalWebAccess:it().optional(),filters:C({allowedDomains:ge(w()).optional()}).optional(),searchContextSize:He(["low","medium","high"]).optional(),userLocation:C({type:Q("approximate"),country:w().optional(),city:w().optional(),region:w().optional(),timezone:w().optional()}).optional()}))),H6=Ge(()=>Ie(C({}))),G6=Ge(()=>Ie(C({action:yt("type",[C({type:Q("search"),query:w().optional()}),C({type:Q("openPage"),url:w()}),C({type:Q("find"),url:w(),pattern:w()})]),sources:ge(yt("type",[C({type:Q("url"),url:w()}),C({type:Q("api"),name:w()})])).optional()}))),Z6=Fr({id:"openai.web_search",name:"web_search",inputSchema:H6,outputSchema:G6}),Y6=(e={})=>Z6(e),J6=Ge(()=>Ie(C({searchContextSize:He(["low","medium","high"]).optional(),userLocation:C({type:Q("approximate"),country:w().optional(),city:w().optional(),region:w().optional(),timezone:w().optional()}).optional()}))),X6=Ge(()=>Ie(C({}))),K6=Ge(()=>Ie(C({action:yt("type",[C({type:Q("search"),query:w().optional()}),C({type:Q("openPage"),url:w()}),C({type:Q("find"),url:w(),pattern:w()})])}))),Q6=Fr({id:"openai.web_search_preview",name:"web_search_preview",inputSchema:X6,outputSchema:K6}),W6={codeInterpreter:I6,fileSearch:z6,imageGeneration:B6,localShell:F6,webSearchPreview:Q6,webSearch:Y6};function g_(e,t){return t?t.some(r=>e.startsWith(r)):!1}async function e$({prompt:e,systemMessageMode:t,fileIdPrefixes:r,store:a,hasLocalShellTool:s=!1}){var l,c,d,f;const p=[],y=[];for(const{role:v,content:x}of e)switch(v){case"system":{switch(t){case"system":{p.push({role:"system",content:x});break}case"developer":{p.push({role:"developer",content:x});break}case"remove":{y.push({type:"other",message:"system messages are removed for this model"});break}default:{const b=t;throw new Error(`Unsupported system message mode: ${b}`)}}break}case"user":{p.push({role:"user",content:x.map((b,_)=>{var S,k,j;switch(b.type){case"text":return{type:"input_text",text:b.text};case"file":if(b.mediaType.startsWith("image/")){const R=b.mediaType==="image/*"?"image/jpeg":b.mediaType;return{type:"input_image",...b.data instanceof URL?{image_url:b.data.toString()}:typeof b.data=="string"&&g_(b.data,r)?{file_id:b.data}:{image_url:`data:${R};base64,${qr(b.data)}`},detail:(k=(S=b.providerOptions)==null?void 0:S.openai)==null?void 0:k.imageDetail}}else{if(b.mediaType==="application/pdf")return b.data instanceof URL?{type:"input_file",file_url:b.data.toString()}:{type:"input_file",...typeof b.data=="string"&&g_(b.data,r)?{file_id:b.data}:{filename:(j=b.filename)!=null?j:`part-${_}.pdf`,file_data:`data:application/pdf;base64,${qr(b.data)}`}};throw new Ft({functionality:`file part media type ${b.mediaType}`})}}})});break}case"assistant":{const b={},_={};for(const S of x)switch(S.type){case"text":{const k=(c=(l=S.providerOptions)==null?void 0:l.openai)==null?void 0:c.itemId;if(a&&k!=null){p.push({type:"item_reference",id:k});break}p.push({role:"assistant",content:[{type:"output_text",text:S.text}],id:k});break}case"tool-call":{if(_[S.toolCallId]=S,S.providerExecuted)break;const k=(f=(d=S.providerOptions)==null?void 0:d.openai)==null?void 0:f.itemId;if(a&&k!=null){p.push({type:"item_reference",id:k});break}if(s&&S.toolName==="local_shell"){const j=await Pn({value:S.input,schema:LS});p.push({type:"local_shell_call",call_id:S.toolCallId,id:k,action:{type:"exec",command:j.action.command,timeout_ms:j.action.timeoutMs,user:j.action.user,working_directory:j.action.workingDirectory,env:j.action.env}});break}p.push({type:"function_call",call_id:S.toolCallId,name:S.toolName,arguments:JSON.stringify(S.input),id:k});break}case"tool-result":{a?p.push({type:"item_reference",id:S.toolCallId}):y.push({type:"other",message:`Results for OpenAI tool ${S.toolName} are not sent to the API when store is false`});break}case"reasoning":{const k=await fn({provider:"openai",providerOptions:S.providerOptions,schema:t$}),j=k?.itemId;if(j!=null){const R=b[j];if(a)R===void 0&&(p.push({type:"item_reference",id:j}),b[j]={type:"reasoning",id:j,summary:[]});else{const E=[];S.text.length>0?E.push({type:"summary_text",text:S.text}):R!==void 0&&y.push({type:"other",message:`Cannot append empty reasoning part to existing reasoning sequence. Skipping reasoning part: ${JSON.stringify(S)}.`}),R===void 0?(b[j]={type:"reasoning",id:j,encrypted_content:k?.reasoningEncryptedContent,summary:E},p.push(b[j])):(R.summary.push(...E),k?.reasoningEncryptedContent!=null&&(R.encrypted_content=k.reasoningEncryptedContent))}}else y.push({type:"other",message:`Non-OpenAI reasoning parts are not supported. Skipping reasoning part: ${JSON.stringify(S)}.`});break}}break}case"tool":{for(const b of x){const _=b.output;if(s&&b.toolName==="local_shell"&&_.type==="json"){const k=await Pn({value:_.value,schema:US});p.push({type:"local_shell_call_output",call_id:b.toolCallId,output:k.output});break}let S;switch(_.type){case"text":case"error-text":S=_.value;break;case"json":case"error-json":S=JSON.stringify(_.value);break;case"content":S=_.value.map(k=>{switch(k.type){case"text":return{type:"input_text",text:k.text};case"media":return k.mediaType.startsWith("image/")?{type:"input_image",image_url:`data:${k.mediaType};base64,${k.data}`}:{type:"input_file",filename:"data",file_data:`data:${k.mediaType};base64,${k.data}`}}});break}p.push({type:"function_call_output",call_id:b.toolCallId,output:S})}break}default:{const b=v;throw new Error(`Unsupported role: ${b}`)}}return{input:p,warnings:y}}var t$=C({itemId:w().nullish(),reasoningEncryptedContent:w().nullish()});function y_({finishReason:e,hasFunctionCall:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}var n$=en(()=>Ie(Qe([C({type:Q("response.output_text.delta"),item_id:w(),delta:w(),logprobs:ge(C({token:w(),logprob:Z(),top_logprobs:ge(C({token:w(),logprob:Z()}))})).nullish()}),C({type:He(["response.completed","response.incomplete"]),response:C({incomplete_details:C({reason:w()}).nullish(),usage:C({input_tokens:Z(),input_tokens_details:C({cached_tokens:Z().nullish()}).nullish(),output_tokens:Z(),output_tokens_details:C({reasoning_tokens:Z().nullish()}).nullish()}),service_tier:w().nullish()})}),C({type:Q("response.created"),response:C({id:w(),created_at:Z(),model:w(),service_tier:w().nullish()})}),C({type:Q("response.output_item.added"),output_index:Z(),item:yt("type",[C({type:Q("message"),id:w()}),C({type:Q("reasoning"),id:w(),encrypted_content:w().nullish()}),C({type:Q("function_call"),id:w(),call_id:w(),name:w(),arguments:w()}),C({type:Q("web_search_call"),id:w(),status:w()}),C({type:Q("computer_call"),id:w(),status:w()}),C({type:Q("file_search_call"),id:w()}),C({type:Q("image_generation_call"),id:w()}),C({type:Q("code_interpreter_call"),id:w(),container_id:w(),code:w().nullable(),outputs:ge(yt("type",[C({type:Q("logs"),logs:w()}),C({type:Q("image"),url:w()})])).nullable(),status:w()})])}),C({type:Q("response.output_item.done"),output_index:Z(),item:yt("type",[C({type:Q("message"),id:w()}),C({type:Q("reasoning"),id:w(),encrypted_content:w().nullish()}),C({type:Q("function_call"),id:w(),call_id:w(),name:w(),arguments:w(),status:Q("completed")}),C({type:Q("code_interpreter_call"),id:w(),code:w().nullable(),container_id:w(),outputs:ge(yt("type",[C({type:Q("logs"),logs:w()}),C({type:Q("image"),url:w()})])).nullable()}),C({type:Q("image_generation_call"),id:w(),result:w()}),C({type:Q("web_search_call"),id:w(),status:w(),action:yt("type",[C({type:Q("search"),query:w().nullish(),sources:ge(yt("type",[C({type:Q("url"),url:w()}),C({type:Q("api"),name:w()})])).nullish()}),C({type:Q("open_page"),url:w()}),C({type:Q("find"),url:w(),pattern:w()})])}),C({type:Q("file_search_call"),id:w(),queries:ge(w()),results:ge(C({attributes:Vt(w(),Fn()),file_id:w(),filename:w(),score:Z(),text:w()})).nullish()}),C({type:Q("local_shell_call"),id:w(),call_id:w(),action:C({type:Q("exec"),command:ge(w()),timeout_ms:Z().optional(),user:w().optional(),working_directory:w().optional(),env:Vt(w(),w()).optional()})}),C({type:Q("computer_call"),id:w(),status:Q("completed")})])}),C({type:Q("response.function_call_arguments.delta"),item_id:w(),output_index:Z(),delta:w()}),C({type:Q("response.image_generation_call.partial_image"),item_id:w(),output_index:Z(),partial_image_b64:w()}),C({type:Q("response.code_interpreter_call_code.delta"),item_id:w(),output_index:Z(),delta:w()}),C({type:Q("response.code_interpreter_call_code.done"),item_id:w(),output_index:Z(),code:w()}),C({type:Q("response.output_text.annotation.added"),annotation:yt("type",[C({type:Q("url_citation"),start_index:Z(),end_index:Z(),url:w(),title:w()}),C({type:Q("file_citation"),file_id:w(),filename:w().nullish(),index:Z().nullish(),start_index:Z().nullish(),end_index:Z().nullish(),quote:w().nullish()})])}),C({type:Q("response.reasoning_summary_part.added"),item_id:w(),summary_index:Z()}),C({type:Q("response.reasoning_summary_text.delta"),item_id:w(),summary_index:Z(),delta:w()}),C({type:Q("response.reasoning_summary_part.done"),item_id:w(),summary_index:Z()}),C({type:Q("error"),sequence_number:Z(),error:C({type:w(),code:w(),message:w(),param:w().nullish()})}),C({type:w()}).loose().transform(e=>({type:"unknown_chunk",message:e.type}))]))),r$=en(()=>Ie(C({id:w().optional(),created_at:Z().optional(),error:C({message:w(),type:w(),param:w().nullish(),code:w()}).nullish(),model:w().optional(),output:ge(yt("type",[C({type:Q("message"),role:Q("assistant"),id:w(),content:ge(C({type:Q("output_text"),text:w(),logprobs:ge(C({token:w(),logprob:Z(),top_logprobs:ge(C({token:w(),logprob:Z()}))})).nullish(),annotations:ge(yt("type",[C({type:Q("url_citation"),start_index:Z(),end_index:Z(),url:w(),title:w()}),C({type:Q("file_citation"),file_id:w(),filename:w().nullish(),index:Z().nullish(),start_index:Z().nullish(),end_index:Z().nullish(),quote:w().nullish()}),C({type:Q("container_file_citation"),container_id:w(),file_id:w(),filename:w().nullish(),start_index:Z().nullish(),end_index:Z().nullish(),index:Z().nullish()}),C({type:Q("file_path"),file_id:w(),index:Z().nullish()})]))}))}),C({type:Q("web_search_call"),id:w(),status:w(),action:yt("type",[C({type:Q("search"),query:w().nullish(),sources:ge(yt("type",[C({type:Q("url"),url:w()}),C({type:Q("api"),name:w()})])).nullish()}),C({type:Q("open_page"),url:w()}),C({type:Q("find"),url:w(),pattern:w()})])}),C({type:Q("file_search_call"),id:w(),queries:ge(w()),results:ge(C({attributes:Vt(w(),Qe([w(),Z(),it()])),file_id:w(),filename:w(),score:Z(),text:w()})).nullish()}),C({type:Q("code_interpreter_call"),id:w(),code:w().nullable(),container_id:w(),outputs:ge(yt("type",[C({type:Q("logs"),logs:w()}),C({type:Q("image"),url:w()})])).nullable()}),C({type:Q("image_generation_call"),id:w(),result:w()}),C({type:Q("local_shell_call"),id:w(),call_id:w(),action:C({type:Q("exec"),command:ge(w()),timeout_ms:Z().optional(),user:w().optional(),working_directory:w().optional(),env:Vt(w(),w()).optional()})}),C({type:Q("function_call"),call_id:w(),name:w(),arguments:w(),id:w()}),C({type:Q("computer_call"),id:w(),status:w().optional()}),C({type:Q("reasoning"),id:w(),encrypted_content:w().nullish(),summary:ge(C({type:Q("summary_text"),text:w()}))})])).optional(),service_tier:w().nullish(),incomplete_details:C({reason:w()}).nullish(),usage:C({input_tokens:Z(),input_tokens_details:C({cached_tokens:Z().nullish()}).nullish(),output_tokens:Z(),output_tokens_details:C({reasoning_tokens:Z().nullish()}).nullish()}).optional()}))),qS=20,a$=en(()=>Ie(C({conversation:w().nullish(),include:ge(He(["reasoning.encrypted_content","file_search_call.results","message.output_text.logprobs"])).nullish(),instructions:w().nullish(),logprobs:Qe([it(),Z().min(1).max(qS)]).optional(),maxToolCalls:Z().nullish(),metadata:fr().nullish(),parallelToolCalls:it().nullish(),previousResponseId:w().nullish(),promptCacheKey:w().nullish(),promptCacheRetention:He(["in_memory","24h"]).nullish(),reasoningEffort:w().nullish(),reasoningSummary:w().nullish(),safetyIdentifier:w().nullish(),serviceTier:He(["auto","flex","priority","default"]).nullish(),store:it().nullish(),strictJsonSchema:it().nullish(),textVerbosity:He(["low","medium","high"]).nullish(),truncation:He(["auto","disabled"]).nullish(),user:w().nullish()})));async function i$({tools:e,toolChoice:t,strictJsonSchema:r}){e=e?.length?e:void 0;const a=[];if(e==null)return{tools:void 0,toolChoice:void 0,toolWarnings:a};const s=[];for(const c of e)switch(c.type){case"function":s.push({type:"function",name:c.name,description:c.description,parameters:c.inputSchema,strict:r});break;case"provider-defined":{switch(c.id){case"openai.file_search":{const d=await Pn({value:c.args,schema:$6});s.push({type:"file_search",vector_store_ids:d.vectorStoreIds,max_num_results:d.maxNumResults,ranking_options:d.ranking?{ranker:d.ranking.ranker,score_threshold:d.ranking.scoreThreshold}:void 0,filters:d.filters});break}case"openai.local_shell":{s.push({type:"local_shell"});break}case"openai.web_search_preview":{const d=await Pn({value:c.args,schema:J6});s.push({type:"web_search_preview",search_context_size:d.searchContextSize,user_location:d.userLocation});break}case"openai.web_search":{const d=await Pn({value:c.args,schema:V6});s.push({type:"web_search",filters:d.filters!=null?{allowed_domains:d.filters.allowedDomains}:void 0,external_web_access:d.externalWebAccess,search_context_size:d.searchContextSize,user_location:d.userLocation});break}case"openai.code_interpreter":{const d=await Pn({value:c.args,schema:O6});s.push({type:"code_interpreter",container:d.container==null?{type:"auto",file_ids:void 0}:typeof d.container=="string"?d.container:{type:"auto",file_ids:d.container.fileIds}});break}case"openai.image_generation":{const d=await Pn({value:c.args,schema:L6});s.push({type:"image_generation",background:d.background,input_fidelity:d.inputFidelity,input_image_mask:d.inputImageMask?{file_id:d.inputImageMask.fileId,image_url:d.inputImageMask.imageUrl}:void 0,model:d.model,size:d.size,quality:d.quality,moderation:d.moderation,output_format:d.outputFormat,output_compression:d.outputCompression});break}}break}default:a.push({type:"unsupported-tool",tool:c});break}if(t==null)return{tools:s,toolChoice:void 0,toolWarnings:a};const l=t.type;switch(l){case"auto":case"none":case"required":return{tools:s,toolChoice:l,toolWarnings:a};case"tool":return{tools:s,toolChoice:t.toolName==="code_interpreter"||t.toolName==="file_search"||t.toolName==="image_generation"||t.toolName==="web_search_preview"||t.toolName==="web_search"?{type:t.toolName}:{type:"function",name:t.toolName},toolWarnings:a};default:{const c=l;throw new Ft({functionality:`tool choice type: ${c}`})}}}var s$=class{constructor(e,t){this.specificationVersion="v2",this.supportedUrls={"image/*":[/^https?:\/\/.*$/],"application/pdf":[/^https?:\/\/.*$/]},this.modelId=e,this.config=t}get provider(){return this.config.provider}async getArgs({maxOutputTokens:e,temperature:t,stopSequences:r,topP:a,topK:s,presencePenalty:l,frequencyPenalty:c,seed:d,prompt:f,providerOptions:p,tools:y,toolChoice:v,responseFormat:x}){var b,_,S,k;const j=[],R=g$(this.modelId);s!=null&&j.push({type:"unsupported-setting",setting:"topK"}),d!=null&&j.push({type:"unsupported-setting",setting:"seed"}),l!=null&&j.push({type:"unsupported-setting",setting:"presencePenalty"}),c!=null&&j.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&j.push({type:"unsupported-setting",setting:"stopSequences"});const E=await fn({provider:"openai",providerOptions:p,schema:a$});E?.conversation&&E?.previousResponseId&&j.push({type:"unsupported-setting",setting:"conversation",details:"conversation and previousResponseId cannot be used together"});const{input:q,warnings:P}=await e$({prompt:f,systemMessageMode:R.systemMessageMode,fileIdPrefixes:this.config.fileIdPrefixes,store:(b=E?.store)!=null?b:!0,hasLocalShellTool:O("openai.local_shell")});j.push(...P);const H=(_=E?.strictJsonSchema)!=null?_:!1;let I=E?.include;function A(te){I==null?I=[te]:I.includes(te)||(I=[...I,te])}function O(te){return y?.find(he=>he.type==="provider-defined"&&he.id===te)!=null}const M=typeof E?.logprobs=="number"?E?.logprobs:E?.logprobs===!0?qS:void 0;M&&A("message.output_text.logprobs");const F=(S=y?.find(te=>te.type==="provider-defined"&&(te.id==="openai.web_search"||te.id==="openai.web_search_preview")))==null?void 0:S.name;F&&A("web_search_call.action.sources"),O("openai.code_interpreter")&&A("code_interpreter_call.outputs");const Y=E?.store;Y===!1&&R.isReasoningModel&&A("reasoning.encrypted_content");const ae={model:this.modelId,input:q,temperature:t,top_p:a,max_output_tokens:e,...(x?.type==="json"||E?.textVerbosity)&&{text:{...x?.type==="json"&&{format:x.schema!=null?{type:"json_schema",strict:H,name:(k=x.name)!=null?k:"response",description:x.description,schema:x.schema}:{type:"json_object"}},...E?.textVerbosity&&{verbosity:E.textVerbosity}}},conversation:E?.conversation,max_tool_calls:E?.maxToolCalls,metadata:E?.metadata,parallel_tool_calls:E?.parallelToolCalls,previous_response_id:E?.previousResponseId,store:Y,user:E?.user,instructions:E?.instructions,service_tier:E?.serviceTier,include:I,prompt_cache_key:E?.promptCacheKey,prompt_cache_retention:E?.promptCacheRetention,safety_identifier:E?.safetyIdentifier,top_logprobs:M,truncation:E?.truncation,...R.isReasoningModel&&(E?.reasoningEffort!=null||E?.reasoningSummary!=null)&&{reasoning:{...E?.reasoningEffort!=null&&{effort:E.reasoningEffort},...E?.reasoningSummary!=null&&{summary:E.reasoningSummary}}}};R.isReasoningModel?(ae.temperature!=null&&(ae.temperature=void 0,j.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),ae.top_p!=null&&(ae.top_p=void 0,j.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))):(E?.reasoningEffort!=null&&j.push({type:"unsupported-setting",setting:"reasoningEffort",details:"reasoningEffort is not supported for non-reasoning models"}),E?.reasoningSummary!=null&&j.push({type:"unsupported-setting",setting:"reasoningSummary",details:"reasoningSummary is not supported for non-reasoning models"})),E?.serviceTier==="flex"&&!R.supportsFlexProcessing&&(j.push({type:"unsupported-setting",setting:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),delete ae.service_tier),E?.serviceTier==="priority"&&!R.supportsPriorityProcessing&&(j.push({type:"unsupported-setting",setting:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),delete ae.service_tier);const{tools:ee,toolChoice:de,toolWarnings:J}=await i$({tools:y,toolChoice:v,strictJsonSchema:H});return{webSearchToolName:F,args:{...ae,tools:ee,tool_choice:de},warnings:[...j,...J],store:Y}}async doGenerate(e){var t,r,a,s,l,c,d,f,p,y,v,x,b,_,S,k,j,R,E,q,P,H,I,A,O,M,F,Y;const{args:ae,warnings:ee,webSearchToolName:de}=await this.getArgs(e),J=this.config.url({path:"/responses",modelId:this.modelId}),te=this.config.provider.replace(".responses",""),{responseHeaders:he,value:ve,rawValue:se}=await zt({url:J,headers:Pt(this.config.headers(),e.headers),body:ae,failedResponseHandler:ta,successfulResponseHandler:pn(r$),abortSignal:e.abortSignal,fetch:this.config.fetch});if(ve.error)throw new vn({message:ve.error.message,url:J,requestBodyValues:ae,statusCode:400,responseHeaders:he,responseBody:se,isRetryable:!1});const N=[],L=[];let V=!1;for(const D of ve.output)switch(D.type){case"reasoning":{D.summary.length===0&&D.summary.push({type:"summary_text",text:""});for(const ne of D.summary)N.push({type:"reasoning",text:ne.text,providerMetadata:{[te]:{itemId:D.id,reasoningEncryptedContent:(t=D.encrypted_content)!=null?t:null}}});break}case"image_generation_call":{N.push({type:"tool-call",toolCallId:D.id,toolName:"image_generation",input:"{}",providerExecuted:!0}),N.push({type:"tool-result",toolCallId:D.id,toolName:"image_generation",result:{result:D.result},providerExecuted:!0});break}case"local_shell_call":{N.push({type:"tool-call",toolCallId:D.call_id,toolName:"local_shell",input:JSON.stringify({action:D.action}),providerMetadata:{[te]:{itemId:D.id}}});break}case"message":{for(const ne of D.content){(a=(r=e.providerOptions)==null?void 0:r.openai)!=null&&a.logprobs&&ne.logprobs&&L.push(ne.logprobs),N.push({type:"text",text:ne.text,providerMetadata:{[te]:{itemId:D.id}}});for(const le of ne.annotations)le.type==="url_citation"?N.push({type:"source",sourceType:"url",id:(c=(l=(s=this.config).generateId)==null?void 0:l.call(s))!=null?c:gn(),url:le.url,title:le.title}):le.type==="file_citation"?N.push({type:"source",sourceType:"document",id:(p=(f=(d=this.config).generateId)==null?void 0:f.call(d))!=null?p:gn(),mediaType:"text/plain",title:(v=(y=le.quote)!=null?y:le.filename)!=null?v:"Document",filename:(x=le.filename)!=null?x:le.file_id,...le.file_id?{providerMetadata:{[te]:{fileId:le.file_id}}}:{}}):le.type==="container_file_citation"?N.push({type:"source",sourceType:"document",id:(S=(_=(b=this.config).generateId)==null?void 0:_.call(b))!=null?S:gn(),mediaType:"text/plain",title:(j=(k=le.filename)!=null?k:le.file_id)!=null?j:"Document",filename:(R=le.filename)!=null?R:le.file_id,providerMetadata:{[te]:{fileId:le.file_id,containerId:le.container_id,...le.index!=null?{index:le.index}:{}}}}):le.type==="file_path"&&N.push({type:"source",sourceType:"document",id:(P=(q=(E=this.config).generateId)==null?void 0:q.call(E))!=null?P:gn(),mediaType:"application/octet-stream",title:le.file_id,filename:le.file_id,providerMetadata:{[te]:{fileId:le.file_id,...le.index!=null?{index:le.index}:{}}}})}break}case"function_call":{V=!0,N.push({type:"tool-call",toolCallId:D.call_id,toolName:D.name,input:D.arguments,providerMetadata:{[te]:{itemId:D.id}}});break}case"web_search_call":{N.push({type:"tool-call",toolCallId:D.id,toolName:de??"web_search",input:JSON.stringify({}),providerExecuted:!0}),N.push({type:"tool-result",toolCallId:D.id,toolName:de??"web_search",result:b_(D.action),providerExecuted:!0});break}case"computer_call":{N.push({type:"tool-call",toolCallId:D.id,toolName:"computer_use",input:"",providerExecuted:!0}),N.push({type:"tool-result",toolCallId:D.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:D.status||"completed"},providerExecuted:!0});break}case"file_search_call":{N.push({type:"tool-call",toolCallId:D.id,toolName:"file_search",input:"{}",providerExecuted:!0}),N.push({type:"tool-result",toolCallId:D.id,toolName:"file_search",result:{queries:D.queries,results:(I=(H=D.results)==null?void 0:H.map(ne=>({attributes:ne.attributes,fileId:ne.file_id,filename:ne.filename,score:ne.score,text:ne.text})))!=null?I:null},providerExecuted:!0});break}case"code_interpreter_call":{N.push({type:"tool-call",toolCallId:D.id,toolName:"code_interpreter",input:JSON.stringify({code:D.code,containerId:D.container_id}),providerExecuted:!0}),N.push({type:"tool-result",toolCallId:D.id,toolName:"code_interpreter",result:{outputs:D.outputs},providerExecuted:!0});break}}const G={[te]:{...ve.id!=null?{responseId:ve.id}:{}}};L.length>0&&(G[te].logprobs=L),typeof ve.service_tier=="string"&&(G[te].serviceTier=ve.service_tier);const X=ve.usage;return{content:N,finishReason:y_({finishReason:(A=ve.incomplete_details)==null?void 0:A.reason,hasFunctionCall:V}),usage:{inputTokens:X.input_tokens,outputTokens:X.output_tokens,totalTokens:X.input_tokens+X.output_tokens,reasoningTokens:(M=(O=X.output_tokens_details)==null?void 0:O.reasoning_tokens)!=null?M:void 0,cachedInputTokens:(Y=(F=X.input_tokens_details)==null?void 0:F.cached_tokens)!=null?Y:void 0},request:{body:ae},response:{id:ve.id,timestamp:new Date(ve.created_at*1e3),modelId:ve.model,headers:he,body:se},providerMetadata:G,warnings:ee}}async doStream(e){const{args:t,warnings:r,webSearchToolName:a,store:s}=await this.getArgs(e),{responseHeaders:l,value:c}=await zt({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Pt(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:ta,successfulResponseHandler:ci(n$),abortSignal:e.abortSignal,fetch:this.config.fetch}),d=this,f=this.config.provider.replace(".responses","");let p="unknown";const y={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},v=[];let x=null;const b={},_=[];let S=!1;const k={};let j;return{stream:c.pipeThrough(new TransformStream({start(R){R.enqueue({type:"stream-start",warnings:r})},transform(R,E){var q,P,H,I,A,O,M,F,Y,ae,ee,de,J,te,he,ve,se,N,L,V,G,X;if(e.includeRawChunks&&E.enqueue({type:"raw",rawValue:R.rawValue}),!R.success){p="error",E.enqueue({type:"error",error:R.error});return}const D=R.value;if(v_(D))D.item.type==="function_call"?(b[D.output_index]={toolName:D.item.name,toolCallId:D.item.call_id},E.enqueue({type:"tool-input-start",id:D.item.call_id,toolName:D.item.name})):D.item.type==="web_search_call"?(b[D.output_index]={toolName:a??"web_search",toolCallId:D.item.id},E.enqueue({type:"tool-input-start",id:D.item.id,toolName:a??"web_search",providerExecuted:!0}),E.enqueue({type:"tool-input-end",id:D.item.id}),E.enqueue({type:"tool-call",toolCallId:D.item.id,toolName:a??"web_search",input:JSON.stringify({}),providerExecuted:!0})):D.item.type==="computer_call"?(b[D.output_index]={toolName:"computer_use",toolCallId:D.item.id},E.enqueue({type:"tool-input-start",id:D.item.id,toolName:"computer_use",providerExecuted:!0})):D.item.type==="code_interpreter_call"?(b[D.output_index]={toolName:"code_interpreter",toolCallId:D.item.id,codeInterpreter:{containerId:D.item.container_id}},E.enqueue({type:"tool-input-start",id:D.item.id,toolName:"code_interpreter",providerExecuted:!0}),E.enqueue({type:"tool-input-delta",id:D.item.id,delta:`{"containerId":"${D.item.container_id}","code":"`})):D.item.type==="file_search_call"?E.enqueue({type:"tool-call",toolCallId:D.item.id,toolName:"file_search",input:"{}",providerExecuted:!0}):D.item.type==="image_generation_call"?E.enqueue({type:"tool-call",toolCallId:D.item.id,toolName:"image_generation",input:"{}",providerExecuted:!0}):D.item.type==="message"?(_.splice(0,_.length),E.enqueue({type:"text-start",id:D.item.id,providerMetadata:{[f]:{itemId:D.item.id}}})):v_(D)&&D.item.type==="reasoning"&&(k[D.item.id]={encryptedContent:D.item.encrypted_content,summaryParts:{0:"active"}},E.enqueue({type:"reasoning-start",id:`${D.item.id}:0`,providerMetadata:{[f]:{itemId:D.item.id,reasoningEncryptedContent:(q=D.item.encrypted_content)!=null?q:null}}}));else if(l$(D)){if(D.item.type==="message")E.enqueue({type:"text-end",id:D.item.id,providerMetadata:{[f]:{itemId:D.item.id,..._.length>0&&{annotations:_}}}});else if(D.item.type==="function_call")b[D.output_index]=void 0,S=!0,E.enqueue({type:"tool-input-end",id:D.item.call_id}),E.enqueue({type:"tool-call",toolCallId:D.item.call_id,toolName:D.item.name,input:D.item.arguments,providerMetadata:{[f]:{itemId:D.item.id}}});else if(D.item.type==="web_search_call")b[D.output_index]=void 0,E.enqueue({type:"tool-result",toolCallId:D.item.id,toolName:a??"web_search",result:b_(D.item.action),providerExecuted:!0});else if(D.item.type==="computer_call")b[D.output_index]=void 0,E.enqueue({type:"tool-input-end",id:D.item.id}),E.enqueue({type:"tool-call",toolCallId:D.item.id,toolName:"computer_use",input:"",providerExecuted:!0}),E.enqueue({type:"tool-result",toolCallId:D.item.id,toolName:"computer_use",result:{type:"computer_use_tool_result",status:D.item.status||"completed"},providerExecuted:!0});else if(D.item.type==="file_search_call")b[D.output_index]=void 0,E.enqueue({type:"tool-result",toolCallId:D.item.id,toolName:"file_search",result:{queries:D.item.queries,results:(H=(P=D.item.results)==null?void 0:P.map(ne=>({attributes:ne.attributes,fileId:ne.file_id,filename:ne.filename,score:ne.score,text:ne.text})))!=null?H:null},providerExecuted:!0});else if(D.item.type==="code_interpreter_call")b[D.output_index]=void 0,E.enqueue({type:"tool-result",toolCallId:D.item.id,toolName:"code_interpreter",result:{outputs:D.item.outputs},providerExecuted:!0});else if(D.item.type==="image_generation_call")E.enqueue({type:"tool-result",toolCallId:D.item.id,toolName:"image_generation",result:{result:D.item.result},providerExecuted:!0});else if(D.item.type==="local_shell_call")b[D.output_index]=void 0,E.enqueue({type:"tool-call",toolCallId:D.item.call_id,toolName:"local_shell",input:JSON.stringify({action:{type:"exec",command:D.item.action.command,timeoutMs:D.item.action.timeout_ms,user:D.item.action.user,workingDirectory:D.item.action.working_directory,env:D.item.action.env}}),providerMetadata:{[f]:{itemId:D.item.id}}});else if(D.item.type==="reasoning"){const ne=k[D.item.id],le=Object.entries(ne.summaryParts).filter(([Se,Ae])=>Ae==="active"||Ae==="can-conclude").map(([Se])=>Se);for(const Se of le)E.enqueue({type:"reasoning-end",id:`${D.item.id}:${Se}`,providerMetadata:{[f]:{itemId:D.item.id,reasoningEncryptedContent:(I=D.item.encrypted_content)!=null?I:null}}});delete k[D.item.id]}}else if(d$(D)){const ne=b[D.output_index];ne!=null&&E.enqueue({type:"tool-input-delta",id:ne.toolCallId,delta:D.delta})}else if(f$(D)){const ne=b[D.output_index];ne!=null&&E.enqueue({type:"tool-input-delta",id:ne.toolCallId,delta:JSON.stringify(D.delta).slice(1,-1)})}else if(p$(D)){const ne=b[D.output_index];ne!=null&&(E.enqueue({type:"tool-input-delta",id:ne.toolCallId,delta:'"}'}),E.enqueue({type:"tool-input-end",id:ne.toolCallId}),E.enqueue({type:"tool-call",toolCallId:ne.toolCallId,toolName:"code_interpreter",input:JSON.stringify({code:D.code,containerId:ne.codeInterpreter.containerId}),providerExecuted:!0}))}else if(c$(D))x=D.response.id,E.enqueue({type:"response-metadata",id:D.response.id,timestamp:new Date(D.response.created_at*1e3),modelId:D.response.model});else if(o$(D))E.enqueue({type:"text-delta",id:D.item_id,delta:D.delta}),(O=(A=e.providerOptions)==null?void 0:A.openai)!=null&&O.logprobs&&D.logprobs&&v.push(D.logprobs);else if(D.type==="response.reasoning_summary_part.added"){if(D.summary_index>0){const ne=k[D.item_id];ne.summaryParts[D.summary_index]="active";for(const le of Object.keys(ne.summaryParts))ne.summaryParts[le]==="can-conclude"&&(E.enqueue({type:"reasoning-end",id:`${D.item_id}:${le}`,providerMetadata:{[f]:{itemId:D.item_id}}}),ne.summaryParts[le]="concluded");E.enqueue({type:"reasoning-start",id:`${D.item_id}:${D.summary_index}`,providerMetadata:{[f]:{itemId:D.item_id,reasoningEncryptedContent:(F=(M=k[D.item_id])==null?void 0:M.encryptedContent)!=null?F:null}}})}}else D.type==="response.reasoning_summary_text.delta"?E.enqueue({type:"reasoning-delta",id:`${D.item_id}:${D.summary_index}`,delta:D.delta,providerMetadata:{[f]:{itemId:D.item_id}}}):D.type==="response.reasoning_summary_part.done"?s?(E.enqueue({type:"reasoning-end",id:`${D.item_id}:${D.summary_index}`,providerMetadata:{[f]:{itemId:D.item_id}}}),k[D.item_id].summaryParts[D.summary_index]="concluded"):k[D.item_id].summaryParts[D.summary_index]="can-conclude":u$(D)?(p=y_({finishReason:(Y=D.response.incomplete_details)==null?void 0:Y.reason,hasFunctionCall:S}),y.inputTokens=D.response.usage.input_tokens,y.outputTokens=D.response.usage.output_tokens,y.totalTokens=D.response.usage.input_tokens+D.response.usage.output_tokens,y.reasoningTokens=(ee=(ae=D.response.usage.output_tokens_details)==null?void 0:ae.reasoning_tokens)!=null?ee:void 0,y.cachedInputTokens=(J=(de=D.response.usage.input_tokens_details)==null?void 0:de.cached_tokens)!=null?J:void 0,typeof D.response.service_tier=="string"&&(j=D.response.service_tier)):h$(D)?(_.push(D.annotation),D.annotation.type==="url_citation"?E.enqueue({type:"source",sourceType:"url",id:(ve=(he=(te=d.config).generateId)==null?void 0:he.call(te))!=null?ve:gn(),url:D.annotation.url,title:D.annotation.title}):D.annotation.type==="file_citation"&&E.enqueue({type:"source",sourceType:"document",id:(L=(N=(se=d.config).generateId)==null?void 0:N.call(se))!=null?L:gn(),mediaType:"text/plain",title:(G=(V=D.annotation.quote)!=null?V:D.annotation.filename)!=null?G:"Document",filename:(X=D.annotation.filename)!=null?X:D.annotation.file_id,...D.annotation.file_id?{providerMetadata:{[f]:{fileId:D.annotation.file_id}}}:{}})):m$(D)&&E.enqueue({type:"error",error:D})},flush(R){const E={[f]:{responseId:x}};v.length>0&&(E[f].logprobs=v),j!==void 0&&(E[f].serviceTier=j),R.enqueue({type:"finish",finishReason:p,usage:y,providerMetadata:E})}})),request:{body:t},response:{headers:l}}}};function o$(e){return e.type==="response.output_text.delta"}function l$(e){return e.type==="response.output_item.done"}function u$(e){return e.type==="response.completed"||e.type==="response.incomplete"}function c$(e){return e.type==="response.created"}function d$(e){return e.type==="response.function_call_arguments.delta"}function f$(e){return e.type==="response.code_interpreter_call_code.delta"}function p$(e){return e.type==="response.code_interpreter_call_code.done"}function v_(e){return e.type==="response.output_item.added"}function h$(e){return e.type==="response.output_text.annotation.added"}function m$(e){return e.type==="error"}function g$(e){const t=e.startsWith("o3")||e.startsWith("o4-mini")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-chat"),r=e.startsWith("gpt-4")||e.startsWith("gpt-5-mini")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-nano")&&!e.startsWith("gpt-5-chat")||e.startsWith("o3")||e.startsWith("o4-mini"),a={systemMessageMode:"system",supportsFlexProcessing:t,supportsPriorityProcessing:r};return e.startsWith("gpt-5-chat")?{...a,isReasoningModel:!1}:e.startsWith("o")||e.startsWith("gpt-5")||e.startsWith("codex-")||e.startsWith("computer-use")?{...a,isReasoningModel:!0,systemMessageMode:"developer"}:{...a,isReasoningModel:!1}}function b_(e){var t;switch(e.type){case"search":return{action:{type:"search",query:(t=e.query)!=null?t:void 0},...e.sources!=null&&{sources:e.sources}};case"open_page":return{action:{type:"openPage",url:e.url}};case"find":return{action:{type:"find",url:e.url,pattern:e.pattern}}}}var y$=en(()=>Ie(C({instructions:w().nullish(),speed:Z().min(.25).max(4).default(1).nullish()}))),v$=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({text:e,voice:t="alloy",outputFormat:r="mp3",speed:a,instructions:s,language:l,providerOptions:c}){const d=[],f=await fn({provider:"openai",providerOptions:c,schema:y$}),p={model:this.modelId,input:e,voice:t,response_format:"mp3",speed:a,instructions:s};if(r&&(["mp3","opus","aac","flac","wav","pcm"].includes(r)?p.response_format=r:d.push({type:"unsupported-setting",setting:"outputFormat",details:`Unsupported output format: ${r}. Using mp3 instead.`})),f){const y={};for(const v in y){const x=y[v];x!==void 0&&(p[v]=x)}}return l&&d.push({type:"unsupported-setting",setting:"language",details:`OpenAI speech models do not support language selection. Language parameter "${l}" was ignored.`}),{requestBody:p,warnings:d}}async doGenerate(e){var t,r,a;const s=(a=(r=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:r.call(t))!=null?a:new Date,{requestBody:l,warnings:c}=await this.getArgs(e),{value:d,responseHeaders:f,rawValue:p}=await zt({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:Pt(this.config.headers(),e.headers),body:l,failedResponseHandler:ta,successfulResponseHandler:FO(),abortSignal:e.abortSignal,fetch:this.config.fetch});return{audio:d,warnings:c,request:{body:JSON.stringify(l)},response:{timestamp:s,modelId:this.modelId,headers:f,body:p}}}},b$=en(()=>Ie(C({text:w(),language:w().nullish(),duration:Z().nullish(),words:ge(C({word:w(),start:Z(),end:Z()})).nullish(),segments:ge(C({id:Z(),seek:Z(),start:Z(),end:Z(),text:w(),tokens:ge(Z()),temperature:Z(),avg_logprob:Z(),compression_ratio:Z(),no_speech_prob:Z()})).nullish()}))),x$=en(()=>Ie(C({include:ge(w()).optional(),language:w().optional(),prompt:w().optional(),temperature:Z().min(0).max(1).default(0).optional(),timestampGranularities:ge(He(["word","segment"])).default(["segment"]).optional()}))),x_={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},_$=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2"}get provider(){return this.config.provider}async getArgs({audio:e,mediaType:t,providerOptions:r}){const a=[],s=await fn({provider:"openai",providerOptions:r,schema:x$}),l=new FormData,c=e instanceof Uint8Array?new Blob([e]):new Blob([gd(e)]);l.append("model",this.modelId);const d=jO(t);if(l.append("file",new File([c],"audio",{type:t}),`audio.${d}`),s){const f={include:s.include,language:s.language,prompt:s.prompt,response_format:["gpt-4o-transcribe","gpt-4o-mini-transcribe"].includes(this.modelId)?"json":"verbose_json",temperature:s.temperature,timestamp_granularities:s.timestampGranularities};for(const[p,y]of Object.entries(f))if(y!=null)if(Array.isArray(y))for(const v of y)l.append(`${p}[]`,String(v));else l.append(p,String(y))}return{formData:l,warnings:a}}async doGenerate(e){var t,r,a,s,l,c,d,f;const p=(a=(r=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:r.call(t))!=null?a:new Date,{formData:y,warnings:v}=await this.getArgs(e),{value:x,responseHeaders:b,rawValue:_}=await BO({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:Pt(this.config.headers(),e.headers),formData:y,failedResponseHandler:ta,successfulResponseHandler:pn(b$),abortSignal:e.abortSignal,fetch:this.config.fetch}),S=x.language!=null&&x.language in x_?x_[x.language]:void 0;return{text:x.text,segments:(d=(c=(s=x.segments)==null?void 0:s.map(k=>({text:k.text,startSecond:k.start,endSecond:k.end})))!=null?c:(l=x.words)==null?void 0:l.map(k=>({text:k.word,startSecond:k.start,endSecond:k.end})))!=null?d:[],language:S,durationInSeconds:(f=x.duration)!=null?f:void 0,warnings:v,response:{timestamp:p,modelId:this.modelId,headers:b,body:_}}}},w$="2.0.76";function PS(e={}){var t,r;const a=(t=tu(Gs({settingValue:e.baseURL,environmentVariableName:"OPENAI_BASE_URL"})))!=null?t:"https://api.openai.com/v1",s=(r=e.name)!=null?r:"openai",l=()=>Na({Authorization:`Bearer ${_m({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers},`ai-sdk/openai/${w$}`),c=S=>new h6(S,{provider:`${s}.chat`,url:({path:k})=>`${a}${k}`,headers:l,fetch:e.fetch}),d=S=>new w6(S,{provider:`${s}.completion`,url:({path:k})=>`${a}${k}`,headers:l,fetch:e.fetch}),f=S=>new T6(S,{provider:`${s}.embedding`,url:({path:k})=>`${a}${k}`,headers:l,fetch:e.fetch}),p=S=>new C6(S,{provider:`${s}.image`,url:({path:k})=>`${a}${k}`,headers:l,fetch:e.fetch}),y=S=>new _$(S,{provider:`${s}.transcription`,url:({path:k})=>`${a}${k}`,headers:l,fetch:e.fetch}),v=S=>new v$(S,{provider:`${s}.speech`,url:({path:k})=>`${a}${k}`,headers:l,fetch:e.fetch}),x=S=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return b(S)},b=S=>new s$(S,{provider:`${s}.responses`,url:({path:k})=>`${a}${k}`,headers:l,fetch:e.fetch,fileIdPrefixes:["file-"]}),_=function(S){return x(S)};return _.languageModel=x,_.chat=c,_.completion=d,_.responses=b,_.embedding=f,_.textEmbedding=f,_.textEmbeddingModel=f,_.image=p,_.imageModel=p,_.transcription=y,_.transcriptionModel=y,_.speech=v,_.speechModel=v,_.tools=W6,_}PS();var S$="2.0.53",k$=Ge(()=>Ie(C({type:Q("error"),error:C({type:w(),message:w()})}))),__=pr({errorSchema:k$,errorToMessage:e=>e.error.message}),T$=Ge(()=>Ie(C({type:Q("message"),id:w().nullish(),model:w().nullish(),content:ge(yt("type",[C({type:Q("text"),text:w(),citations:ge(yt("type",[C({type:Q("web_search_result_location"),cited_text:w(),url:w(),title:w(),encrypted_index:w()}),C({type:Q("page_location"),cited_text:w(),document_index:Z(),document_title:w().nullable(),start_page_number:Z(),end_page_number:Z()}),C({type:Q("char_location"),cited_text:w(),document_index:Z(),document_title:w().nullable(),start_char_index:Z(),end_char_index:Z()})])).optional()}),C({type:Q("thinking"),thinking:w(),signature:w()}),C({type:Q("redacted_thinking"),data:w()}),C({type:Q("tool_use"),id:w(),name:w(),input:Fn()}),C({type:Q("server_tool_use"),id:w(),name:w(),input:Vt(w(),Fn()).nullish()}),C({type:Q("web_fetch_tool_result"),tool_use_id:w(),content:Qe([C({type:Q("web_fetch_result"),url:w(),retrieved_at:w(),content:C({type:Q("document"),title:w().nullable(),citations:C({enabled:it()}).optional(),source:C({type:Q("text"),media_type:w(),data:w()})})}),C({type:Q("web_fetch_tool_result_error"),error_code:w()})])}),C({type:Q("web_search_tool_result"),tool_use_id:w(),content:Qe([ge(C({type:Q("web_search_result"),url:w(),title:w(),encrypted_content:w(),page_age:w().nullish()})),C({type:Q("web_search_tool_result_error"),error_code:w()})])}),C({type:Q("code_execution_tool_result"),tool_use_id:w(),content:Qe([C({type:Q("code_execution_result"),stdout:w(),stderr:w(),return_code:Z()}),C({type:Q("code_execution_tool_result_error"),error_code:w()})])}),C({type:Q("bash_code_execution_tool_result"),tool_use_id:w(),content:yt("type",[C({type:Q("bash_code_execution_result"),content:ge(C({type:Q("bash_code_execution_output"),file_id:w()})),stdout:w(),stderr:w(),return_code:Z()}),C({type:Q("bash_code_execution_tool_result_error"),error_code:w()})])}),C({type:Q("text_editor_code_execution_tool_result"),tool_use_id:w(),content:yt("type",[C({type:Q("text_editor_code_execution_tool_result_error"),error_code:w()}),C({type:Q("text_editor_code_execution_view_result"),content:w(),file_type:w(),num_lines:Z().nullable(),start_line:Z().nullable(),total_lines:Z().nullable()}),C({type:Q("text_editor_code_execution_create_result"),is_file_update:it()}),C({type:Q("text_editor_code_execution_str_replace_result"),lines:ge(w()).nullable(),new_lines:Z().nullable(),new_start:Z().nullable(),old_lines:Z().nullable(),old_start:Z().nullable()})])})])),stop_reason:w().nullish(),stop_sequence:w().nullish(),usage:zh({input_tokens:Z(),output_tokens:Z(),cache_creation_input_tokens:Z().nullish(),cache_read_input_tokens:Z().nullish()}),container:C({expires_at:w(),id:w(),skills:ge(C({type:Qe([Q("anthropic"),Q("custom")]),skill_id:w(),version:w()})).nullish()}).nullish()}))),E$=Ge(()=>Ie(yt("type",[C({type:Q("message_start"),message:C({id:w().nullish(),model:w().nullish(),usage:zh({input_tokens:Z(),cache_creation_input_tokens:Z().nullish(),cache_read_input_tokens:Z().nullish()})})}),C({type:Q("content_block_start"),index:Z(),content_block:yt("type",[C({type:Q("text"),text:w()}),C({type:Q("thinking"),thinking:w()}),C({type:Q("tool_use"),id:w(),name:w()}),C({type:Q("redacted_thinking"),data:w()}),C({type:Q("server_tool_use"),id:w(),name:w(),input:Vt(w(),Fn()).nullish()}),C({type:Q("web_fetch_tool_result"),tool_use_id:w(),content:Qe([C({type:Q("web_fetch_result"),url:w(),retrieved_at:w(),content:C({type:Q("document"),title:w().nullable(),citations:C({enabled:it()}).optional(),source:C({type:Q("text"),media_type:w(),data:w()})})}),C({type:Q("web_fetch_tool_result_error"),error_code:w()})])}),C({type:Q("web_search_tool_result"),tool_use_id:w(),content:Qe([ge(C({type:Q("web_search_result"),url:w(),title:w(),encrypted_content:w(),page_age:w().nullish()})),C({type:Q("web_search_tool_result_error"),error_code:w()})])}),C({type:Q("code_execution_tool_result"),tool_use_id:w(),content:Qe([C({type:Q("code_execution_result"),stdout:w(),stderr:w(),return_code:Z()}),C({type:Q("code_execution_tool_result_error"),error_code:w()})])}),C({type:Q("bash_code_execution_tool_result"),tool_use_id:w(),content:yt("type",[C({type:Q("bash_code_execution_result"),content:ge(C({type:Q("bash_code_execution_output"),file_id:w()})),stdout:w(),stderr:w(),return_code:Z()}),C({type:Q("bash_code_execution_tool_result_error"),error_code:w()})])}),C({type:Q("text_editor_code_execution_tool_result"),tool_use_id:w(),content:yt("type",[C({type:Q("text_editor_code_execution_tool_result_error"),error_code:w()}),C({type:Q("text_editor_code_execution_view_result"),content:w(),file_type:w(),num_lines:Z().nullable(),start_line:Z().nullable(),total_lines:Z().nullable()}),C({type:Q("text_editor_code_execution_create_result"),is_file_update:it()}),C({type:Q("text_editor_code_execution_str_replace_result"),lines:ge(w()).nullable(),new_lines:Z().nullable(),new_start:Z().nullable(),old_lines:Z().nullable(),old_start:Z().nullable()})])})])}),C({type:Q("content_block_delta"),index:Z(),delta:yt("type",[C({type:Q("input_json_delta"),partial_json:w()}),C({type:Q("text_delta"),text:w()}),C({type:Q("thinking_delta"),thinking:w()}),C({type:Q("signature_delta"),signature:w()}),C({type:Q("citations_delta"),citation:yt("type",[C({type:Q("web_search_result_location"),cited_text:w(),url:w(),title:w(),encrypted_index:w()}),C({type:Q("page_location"),cited_text:w(),document_index:Z(),document_title:w().nullable(),start_page_number:Z(),end_page_number:Z()}),C({type:Q("char_location"),cited_text:w(),document_index:Z(),document_title:w().nullable(),start_char_index:Z(),end_char_index:Z()})])})])}),C({type:Q("content_block_stop"),index:Z()}),C({type:Q("error"),error:C({type:w(),message:w()})}),C({type:Q("message_delta"),delta:C({stop_reason:w().nullish(),stop_sequence:w().nullish(),container:C({expires_at:w(),id:w(),skills:ge(C({type:Qe([Q("anthropic"),Q("custom")]),skill_id:w(),version:w()})).nullish()}).nullish()}),usage:zh({output_tokens:Z(),cache_creation_input_tokens:Z().nullish()})}),C({type:Q("message_stop")}),C({type:Q("ping")})]))),N$=Ge(()=>Ie(C({signature:w().optional(),redactedData:w().optional()}))),w_=C({citations:C({enabled:it()}).optional(),title:w().optional(),context:w().optional()}),A$=C({sendReasoning:it().optional(),structuredOutputMode:He(["outputFormat","jsonTool","auto"]).optional(),thinking:C({type:Qe([Q("enabled"),Q("disabled")]),budgetTokens:Z().optional()}).optional(),disableParallelToolUse:it().optional(),cacheControl:C({type:Q("ephemeral"),ttl:Qe([Q("5m"),Q("1h")]).optional()}).optional(),container:C({id:w().optional(),skills:ge(C({type:Qe([Q("anthropic"),Q("custom")]),skillId:w(),version:w().optional()})).optional()}).optional(),effort:He(["low","medium","high"]).optional()}),S_=4;function C$(e){var t;const r=e?.anthropic;return(t=r?.cacheControl)!=null?t:r?.cache_control}var Rm=class{constructor(){this.breakpointCount=0,this.warnings=[]}getCacheControl(e,t){const r=C$(e);if(r){if(!t.canCache){this.warnings.push({type:"unsupported-setting",setting:"cacheControl",details:`cache_control cannot be set on ${t.type}. It will be ignored.`});return}if(this.breakpointCount++,this.breakpointCount>S_){this.warnings.push({type:"unsupported-setting",setting:"cacheControl",details:`Maximum ${S_} cache breakpoints exceeded (found ${this.breakpointCount}). This breakpoint will be ignored.`});return}return r}}getWarnings(){return this.warnings}},R$=Ge(()=>Ie(C({maxCharacters:Z().optional()}))),j$=Ge(()=>Ie(C({command:He(["view","create","str_replace","insert"]),path:w(),file_text:w().optional(),insert_line:Z().int().optional(),new_str:w().optional(),old_str:w().optional(),view_range:ge(Z().int()).optional()}))),O$=gr({id:"anthropic.text_editor_20250728",name:"str_replace_based_edit_tool",inputSchema:j$}),M$=(e={})=>O$(e),I$=Ge(()=>Ie(C({maxUses:Z().optional(),allowedDomains:ge(w()).optional(),blockedDomains:ge(w()).optional(),userLocation:C({type:Q("approximate"),city:w().optional(),region:w().optional(),country:w().optional(),timezone:w().optional()}).optional()}))),BS=Ge(()=>Ie(ge(C({url:w(),title:w(),pageAge:w().nullable(),encryptedContent:w(),type:Q("web_search_result")})))),$$=Ge(()=>Ie(C({query:w()}))),D$=Fr({id:"anthropic.web_search_20250305",name:"web_search",inputSchema:$$,outputSchema:BS}),z$=(e={})=>D$(e),L$=Ge(()=>Ie(C({maxUses:Z().optional(),allowedDomains:ge(w()).optional(),blockedDomains:ge(w()).optional(),citations:C({enabled:it()}).optional(),maxContentTokens:Z().optional()}))),FS=Ge(()=>Ie(C({type:Q("web_fetch_result"),url:w(),content:C({type:Q("document"),title:w(),citations:C({enabled:it()}).optional(),source:Qe([C({type:Q("base64"),mediaType:Q("application/pdf"),data:w()}),C({type:Q("text"),mediaType:Q("text/plain"),data:w()})])}),retrievedAt:w().nullable()}))),U$=Ge(()=>Ie(C({url:w()}))),q$=Fr({id:"anthropic.web_fetch_20250910",name:"web_fetch",inputSchema:U$,outputSchema:FS}),P$=(e={})=>q$(e);async function B$({tools:e,toolChoice:t,disableParallelToolUse:r,cacheControlValidator:a}){e=e?.length?e:void 0;const s=[],l=new Set,c=a||new Rm;if(e==null)return{tools:void 0,toolChoice:void 0,toolWarnings:s,betas:l};const d=[];for(const p of e)switch(p.type){case"function":{const y=c.getCacheControl(p.providerOptions,{type:"tool definition",canCache:!0});d.push({name:p.name,description:p.description,input_schema:p.inputSchema,cache_control:y});break}case"provider-defined":{switch(p.id){case"anthropic.code_execution_20250522":{l.add("code-execution-2025-05-22"),d.push({type:"code_execution_20250522",name:"code_execution",cache_control:void 0});break}case"anthropic.code_execution_20250825":{l.add("code-execution-2025-08-25"),d.push({type:"code_execution_20250825",name:"code_execution"});break}case"anthropic.computer_20250124":{l.add("computer-use-2025-01-24"),d.push({name:"computer",type:"computer_20250124",display_width_px:p.args.displayWidthPx,display_height_px:p.args.displayHeightPx,display_number:p.args.displayNumber,cache_control:void 0});break}case"anthropic.computer_20241022":{l.add("computer-use-2024-10-22"),d.push({name:"computer",type:"computer_20241022",display_width_px:p.args.displayWidthPx,display_height_px:p.args.displayHeightPx,display_number:p.args.displayNumber,cache_control:void 0});break}case"anthropic.text_editor_20250124":{l.add("computer-use-2025-01-24"),d.push({name:"str_replace_editor",type:"text_editor_20250124",cache_control:void 0});break}case"anthropic.text_editor_20241022":{l.add("computer-use-2024-10-22"),d.push({name:"str_replace_editor",type:"text_editor_20241022",cache_control:void 0});break}case"anthropic.text_editor_20250429":{l.add("computer-use-2025-01-24"),d.push({name:"str_replace_based_edit_tool",type:"text_editor_20250429",cache_control:void 0});break}case"anthropic.text_editor_20250728":{const y=await Pn({value:p.args,schema:R$});d.push({name:"str_replace_based_edit_tool",type:"text_editor_20250728",max_characters:y.maxCharacters,cache_control:void 0});break}case"anthropic.bash_20250124":{l.add("computer-use-2025-01-24"),d.push({name:"bash",type:"bash_20250124",cache_control:void 0});break}case"anthropic.bash_20241022":{l.add("computer-use-2024-10-22"),d.push({name:"bash",type:"bash_20241022",cache_control:void 0});break}case"anthropic.memory_20250818":{l.add("context-management-2025-06-27"),d.push({name:"memory",type:"memory_20250818"});break}case"anthropic.web_fetch_20250910":{l.add("web-fetch-2025-09-10");const y=await Pn({value:p.args,schema:L$});d.push({type:"web_fetch_20250910",name:"web_fetch",max_uses:y.maxUses,allowed_domains:y.allowedDomains,blocked_domains:y.blockedDomains,citations:y.citations,max_content_tokens:y.maxContentTokens,cache_control:void 0});break}case"anthropic.web_search_20250305":{const y=await Pn({value:p.args,schema:I$});d.push({type:"web_search_20250305",name:"web_search",max_uses:y.maxUses,allowed_domains:y.allowedDomains,blocked_domains:y.blockedDomains,user_location:y.userLocation,cache_control:void 0});break}default:{s.push({type:"unsupported-tool",tool:p});break}}break}default:{s.push({type:"unsupported-tool",tool:p});break}}if(t==null)return{tools:d,toolChoice:r?{type:"auto",disable_parallel_tool_use:r}:void 0,toolWarnings:s,betas:l};const f=t.type;switch(f){case"auto":return{tools:d,toolChoice:{type:"auto",disable_parallel_tool_use:r},toolWarnings:s,betas:l};case"required":return{tools:d,toolChoice:{type:"any",disable_parallel_tool_use:r},toolWarnings:s,betas:l};case"none":return{tools:void 0,toolChoice:void 0,toolWarnings:s,betas:l};case"tool":return{tools:d,toolChoice:{type:"tool",name:t.toolName,disable_parallel_tool_use:r},toolWarnings:s,betas:l};default:{const p=f;throw new Ft({functionality:`tool choice type: ${p}`})}}}var VS=Ge(()=>Ie(C({type:Q("code_execution_result"),stdout:w(),stderr:w(),return_code:Z()}))),F$=Ge(()=>Ie(C({code:w()}))),V$=Fr({id:"anthropic.code_execution_20250522",name:"code_execution",inputSchema:F$,outputSchema:VS}),H$=(e={})=>V$(e),HS=Ge(()=>Ie(yt("type",[C({type:Q("bash_code_execution_result"),content:ge(C({type:Q("bash_code_execution_output"),file_id:w()})),stdout:w(),stderr:w(),return_code:Z()}),C({type:Q("bash_code_execution_tool_result_error"),error_code:w()}),C({type:Q("text_editor_code_execution_tool_result_error"),error_code:w()}),C({type:Q("text_editor_code_execution_view_result"),content:w(),file_type:w(),num_lines:Z().nullable(),start_line:Z().nullable(),total_lines:Z().nullable()}),C({type:Q("text_editor_code_execution_create_result"),is_file_update:it()}),C({type:Q("text_editor_code_execution_str_replace_result"),lines:ge(w()).nullable(),new_lines:Z().nullable(),new_start:Z().nullable(),old_lines:Z().nullable(),old_start:Z().nullable()})]))),G$=Ge(()=>Ie(yt("type",[C({type:Q("bash_code_execution"),command:w()}),yt("command",[C({type:Q("text_editor_code_execution"),command:Q("view"),path:w()}),C({type:Q("text_editor_code_execution"),command:Q("create"),path:w(),file_text:w().nullish()}),C({type:Q("text_editor_code_execution"),command:Q("str_replace"),path:w(),old_str:w(),new_str:w()})])]))),Z$=Fr({id:"anthropic.code_execution_20250825",name:"code_execution",inputSchema:G$,outputSchema:HS}),Y$=(e={})=>Z$(e);function J$(e){if(typeof e=="string")return Buffer.from(e,"base64").toString("utf-8");if(e instanceof Uint8Array)return new TextDecoder().decode(e);throw e instanceof URL?new Ft({functionality:"URL-based text documents are not supported for citations"}):new Ft({functionality:`unsupported data type for text documents: ${typeof e}`})}async function X$({prompt:e,sendReasoning:t,warnings:r,cacheControlValidator:a}){var s,l,c,d,f;const p=new Set,y=K$(e),v=a||new Rm;let x;const b=[];async function _(k){var j,R;const E=await fn({provider:"anthropic",providerOptions:k,schema:w_});return(R=(j=E?.citations)==null?void 0:j.enabled)!=null?R:!1}async function S(k){const j=await fn({provider:"anthropic",providerOptions:k,schema:w_});return{title:j?.title,context:j?.context}}for(let k=0;k<y.length;k++){const j=y[k],R=k===y.length-1,E=j.type;switch(E){case"system":{if(x!=null)throw new Ft({functionality:"Multiple system messages that are separated by user/assistant messages"});x=j.messages.map(({content:q,providerOptions:P})=>({type:"text",text:q,cache_control:v.getCacheControl(P,{type:"system message",canCache:!0})}));break}case"user":{const q=[];for(const P of j.messages){const{role:H,content:I}=P;switch(H){case"user":{for(let A=0;A<I.length;A++){const O=I[A],M=A===I.length-1,F=(s=v.getCacheControl(O.providerOptions,{type:"user message part",canCache:!0}))!=null?s:M?v.getCacheControl(P.providerOptions,{type:"user message",canCache:!0}):void 0;switch(O.type){case"text":{q.push({type:"text",text:O.text,cache_control:F});break}case"file":{if(O.mediaType.startsWith("image/"))q.push({type:"image",source:O.data instanceof URL?{type:"url",url:O.data.toString()}:{type:"base64",media_type:O.mediaType==="image/*"?"image/jpeg":O.mediaType,data:qr(O.data)},cache_control:F});else if(O.mediaType==="application/pdf"){p.add("pdfs-2024-09-25");const Y=await _(O.providerOptions),ae=await S(O.providerOptions);q.push({type:"document",source:O.data instanceof URL?{type:"url",url:O.data.toString()}:{type:"base64",media_type:"application/pdf",data:qr(O.data)},title:(l=ae.title)!=null?l:O.filename,...ae.context&&{context:ae.context},...Y&&{citations:{enabled:!0}},cache_control:F})}else if(O.mediaType==="text/plain"){const Y=await _(O.providerOptions),ae=await S(O.providerOptions);q.push({type:"document",source:O.data instanceof URL?{type:"url",url:O.data.toString()}:{type:"text",media_type:"text/plain",data:J$(O.data)},title:(c=ae.title)!=null?c:O.filename,...ae.context&&{context:ae.context},...Y&&{citations:{enabled:!0}},cache_control:F})}else throw new Ft({functionality:`media type: ${O.mediaType}`});break}}}break}case"tool":{for(let A=0;A<I.length;A++){const O=I[A],M=A===I.length-1,F=(d=v.getCacheControl(O.providerOptions,{type:"tool result part",canCache:!0}))!=null?d:M?v.getCacheControl(P.providerOptions,{type:"tool result message",canCache:!0}):void 0,Y=O.output;let ae;switch(Y.type){case"content":ae=Y.value.map(ee=>{switch(ee.type){case"text":return{type:"text",text:ee.text};case"media":{if(ee.mediaType.startsWith("image/"))return{type:"image",source:{type:"base64",media_type:ee.mediaType,data:ee.data}};if(ee.mediaType==="application/pdf")return p.add("pdfs-2024-09-25"),{type:"document",source:{type:"base64",media_type:ee.mediaType,data:ee.data}};throw new Ft({functionality:`media type: ${ee.mediaType}`})}}});break;case"text":case"error-text":ae=Y.value;break;case"json":case"error-json":default:ae=JSON.stringify(Y.value);break}q.push({type:"tool_result",tool_use_id:O.toolCallId,content:ae,is_error:Y.type==="error-text"||Y.type==="error-json"?!0:void 0,cache_control:F})}break}default:{const A=H;throw new Error(`Unsupported role: ${A}`)}}}b.push({role:"user",content:q});break}case"assistant":{const q=[];for(let P=0;P<j.messages.length;P++){const H=j.messages[P],I=P===j.messages.length-1,{content:A}=H;for(let O=0;O<A.length;O++){const M=A[O],F=O===A.length-1,Y=(f=v.getCacheControl(M.providerOptions,{type:"assistant message part",canCache:!0}))!=null?f:F?v.getCacheControl(H.providerOptions,{type:"assistant message",canCache:!0}):void 0;switch(M.type){case"text":{q.push({type:"text",text:R&&I&&F?M.text.trim():M.text,cache_control:Y});break}case"reasoning":{if(t){const ae=await fn({provider:"anthropic",providerOptions:M.providerOptions,schema:N$});ae!=null?ae.signature!=null?(v.getCacheControl(M.providerOptions,{type:"thinking block",canCache:!1}),q.push({type:"thinking",thinking:M.text,signature:ae.signature})):ae.redactedData!=null?(v.getCacheControl(M.providerOptions,{type:"redacted thinking block",canCache:!1}),q.push({type:"redacted_thinking",data:ae.redactedData})):r.push({type:"other",message:"unsupported reasoning metadata"}):r.push({type:"other",message:"unsupported reasoning metadata"})}else r.push({type:"other",message:"sending reasoning content is disabled for this model"});break}case"tool-call":{if(M.providerExecuted){M.toolName==="code_execution"&&M.input!=null&&typeof M.input=="object"&&"type"in M.input&&typeof M.input.type=="string"&&(M.input.type==="bash_code_execution"||M.input.type==="text_editor_code_execution")?q.push({type:"server_tool_use",id:M.toolCallId,name:M.input.type,input:M.input,cache_control:Y}):M.toolName==="code_execution"||M.toolName==="web_fetch"||M.toolName==="web_search"?q.push({type:"server_tool_use",id:M.toolCallId,name:M.toolName,input:M.input,cache_control:Y}):r.push({type:"other",message:`provider executed tool call for tool ${M.toolName} is not supported`});break}q.push({type:"tool_use",id:M.toolCallId,name:M.toolName,input:M.input,cache_control:Y});break}case"tool-result":{if(M.toolName==="code_execution"){const ae=M.output;if(ae.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${ae.type} for tool ${M.toolName} is not supported`});break}if(ae.value==null||typeof ae.value!="object"||!("type"in ae.value)||typeof ae.value.type!="string"){r.push({type:"other",message:`provider executed tool result output value is not a valid code execution result for tool ${M.toolName}`});break}if(ae.value.type==="code_execution_result"){const ee=await Pn({value:ae.value,schema:VS});q.push({type:"code_execution_tool_result",tool_use_id:M.toolCallId,content:{type:ee.type,stdout:ee.stdout,stderr:ee.stderr,return_code:ee.return_code},cache_control:Y})}else{const ee=await Pn({value:ae.value,schema:HS});q.push(ee.type==="bash_code_execution_result"||ee.type==="bash_code_execution_tool_result_error"?{type:"bash_code_execution_tool_result",tool_use_id:M.toolCallId,cache_control:Y,content:ee}:{type:"text_editor_code_execution_tool_result",tool_use_id:M.toolCallId,cache_control:Y,content:ee})}break}if(M.toolName==="web_fetch"){const ae=M.output;if(ae.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${ae.type} for tool ${M.toolName} is not supported`});break}const ee=await Pn({value:ae.value,schema:FS});q.push({type:"web_fetch_tool_result",tool_use_id:M.toolCallId,content:{type:"web_fetch_result",url:ee.url,retrieved_at:ee.retrievedAt,content:{type:"document",title:ee.content.title,citations:ee.content.citations,source:{type:ee.content.source.type,media_type:ee.content.source.mediaType,data:ee.content.source.data}}},cache_control:Y});break}if(M.toolName==="web_search"){const ae=M.output;if(ae.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${ae.type} for tool ${M.toolName} is not supported`});break}const ee=await Pn({value:ae.value,schema:BS});q.push({type:"web_search_tool_result",tool_use_id:M.toolCallId,content:ee.map(de=>({url:de.url,title:de.title,page_age:de.pageAge,encrypted_content:de.encryptedContent,type:de.type})),cache_control:Y});break}r.push({type:"other",message:`provider executed tool result for tool ${M.toolName} is not supported`});break}}}}b.push({role:"assistant",content:q});break}default:{const q=E;throw new Error(`content type: ${q}`)}}}return{prompt:{system:x,messages:b},betas:p}}function K$(e){const t=[];let r;for(const a of e){const{role:s}=a;switch(s){case"system":{r?.type!=="system"&&(r={type:"system",messages:[]},t.push(r)),r.messages.push(a);break}case"assistant":{r?.type!=="assistant"&&(r={type:"assistant",messages:[]},t.push(r)),r.messages.push(a);break}case"user":{r?.type!=="user"&&(r={type:"user",messages:[]},t.push(r)),r.messages.push(a);break}case"tool":{r?.type!=="user"&&(r={type:"user",messages:[]},t.push(r)),r.messages.push(a);break}default:{const l=s;throw new Error(`Unsupported role: ${l}`)}}}return t}function k_({finishReason:e,isJsonResponseFromTool:t}){switch(e){case"pause_turn":case"end_turn":case"stop_sequence":return"stop";case"refusal":return"content-filter";case"tool_use":return t?"stop":"tool-calls";case"max_tokens":return"length";default:return"unknown"}}function T_(e,t,r){var a;if(e.type!=="page_location"&&e.type!=="char_location")return;const s=t[e.document_index];if(s)return{type:"source",sourceType:"document",id:r(),mediaType:s.mediaType,title:(a=e.document_title)!=null?a:s.title,filename:s.filename,providerMetadata:{anthropic:e.type==="page_location"?{citedText:e.cited_text,startPageNumber:e.start_page_number,endPageNumber:e.end_page_number}:{citedText:e.cited_text,startCharIndex:e.start_char_index,endCharIndex:e.end_char_index}}}}var Q$=class{constructor(e,t){this.specificationVersion="v2";var r;this.modelId=e,this.config=t,this.generateId=(r=t.generateId)!=null?r:gn}supportsUrl(e){return e.protocol==="https:"}get provider(){return this.config.provider}get supportedUrls(){var e,t,r;return(r=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?r:{}}async getArgs({userSuppliedBetas:e,prompt:t,maxOutputTokens:r,temperature:a,topP:s,topK:l,frequencyPenalty:c,presencePenalty:d,stopSequences:f,responseFormat:p,seed:y,tools:v,toolChoice:x,providerOptions:b}){var _,S,k,j,R;const E=[];c!=null&&E.push({type:"unsupported-setting",setting:"frequencyPenalty"}),d!=null&&E.push({type:"unsupported-setting",setting:"presencePenalty"}),y!=null&&E.push({type:"unsupported-setting",setting:"seed"}),a!=null&&a>1?(E.push({type:"unsupported-setting",setting:"temperature",details:`${a} exceeds anthropic maximum of 1.0. clamped to 1.0`}),a=1):a!=null&&a<0&&(E.push({type:"unsupported-setting",setting:"temperature",details:`${a} is below anthropic minimum of 0. clamped to 0`}),a=0),p?.type==="json"&&(p.schema==null?E.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format requires a schema. The response format is ignored."}):v!=null&&E.push({type:"unsupported-setting",setting:"tools",details:"JSON response format does not support tools. The provided tools are ignored."}));const q=await fn({provider:"anthropic",providerOptions:b,schema:A$}),{maxOutputTokens:P,supportsStructuredOutput:H,isKnownModel:I}=W$(this.modelId),A=(_=q?.structuredOutputMode)!=null?_:"jsonTool",O=A==="outputFormat"||A==="auto"&&H,M=p?.type==="json"&&p.schema!=null&&!O?{type:"function",name:"json",description:"Respond with a JSON object.",inputSchema:p.schema}:void 0,F=new Rm,{prompt:Y,betas:ae}=await X$({prompt:t,sendReasoning:(S=q?.sendReasoning)!=null?S:!0,warnings:E,cacheControlValidator:F}),ee=((k=q?.thinking)==null?void 0:k.type)==="enabled",de=(j=q?.thinking)==null?void 0:j.budgetTokens,J=r??P,te={model:this.modelId,max_tokens:J,temperature:a,top_k:l,top_p:s,stop_sequences:f,...ee&&{thinking:{type:"enabled",budget_tokens:de}},...q?.effort&&{output_config:{effort:q.effort}},...O&&p?.type==="json"&&p.schema!=null&&{output_format:{type:"json_schema",schema:p.schema}},...q?.container&&{container:{id:q.container.id,skills:(R=q.container.skills)==null?void 0:R.map(V=>({type:V.type,skill_id:V.skillId,version:V.version}))}},system:Y.system,messages:Y.messages};if(ee){if(de==null)throw new Ft({functionality:"thinking requires a budget"});te.temperature!=null&&(te.temperature=void 0,E.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported when thinking is enabled"})),l!=null&&(te.top_k=void 0,E.push({type:"unsupported-setting",setting:"topK",details:"topK is not supported when thinking is enabled"})),s!=null&&(te.top_p=void 0,E.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported when thinking is enabled"})),te.max_tokens=J+de}I&&te.max_tokens>P&&(r!=null&&E.push({type:"unsupported-setting",setting:"maxOutputTokens",details:`${te.max_tokens} (maxOutputTokens + thinkingBudget) is greater than ${this.modelId} ${P} max output tokens. The max output tokens have been limited to ${P}.`}),te.max_tokens=P),q?.container&&q.container.skills&&q.container.skills.length>0&&(ae.add("code-execution-2025-08-25"),ae.add("skills-2025-10-02"),ae.add("files-api-2025-04-14"),v?.some(V=>V.type==="provider-defined"&&V.id==="anthropic.code_execution_20250825")||E.push({type:"other",message:"code execution tool is required when using skills"})),q?.effort&&ae.add("effort-2025-11-24"),O&&ae.add("structured-outputs-2025-11-13");const{tools:he,toolChoice:ve,toolWarnings:se,betas:N}=await B$(M!=null?{tools:[M],toolChoice:{type:"tool",toolName:M.name},disableParallelToolUse:!0,cacheControlValidator:F}:{tools:v??[],toolChoice:x,disableParallelToolUse:q?.disableParallelToolUse,cacheControlValidator:F}),L=F.getWarnings();return{args:{...te,tools:he,tool_choice:ve},warnings:[...E,...se,...L],betas:new Set([...ae,...N,...e]),usesJsonResponseTool:M!=null}}async getHeaders({betas:e,headers:t}){return Pt(await Mn(this.config.headers),t,e.size>0?{"anthropic-beta":Array.from(e).join(",")}:{})}async getBetasFromHeaders(e){var t,r;const s=(t=(await Mn(this.config.headers))["anthropic-beta"])!=null?t:"",l=(r=e?.["anthropic-beta"])!=null?r:"";return new Set([...s.toLowerCase().split(","),...l.toLowerCase().split(",")].map(c=>c.trim()).filter(c=>c!==""))}buildRequestUrl(e){var t,r,a;return(a=(r=(t=this.config).buildRequestUrl)==null?void 0:r.call(t,this.config.baseURL,e))!=null?a:`${this.config.baseURL}/messages`}transformRequestBody(e){var t,r,a;return(a=(r=(t=this.config).transformRequestBody)==null?void 0:r.call(t,e))!=null?a:e}extractCitationDocuments(e){const t=r=>{var a,s;if(r.type!=="file"||r.mediaType!=="application/pdf"&&r.mediaType!=="text/plain")return!1;const l=(a=r.providerOptions)==null?void 0:a.anthropic,c=l?.citations;return(s=c?.enabled)!=null?s:!1};return e.filter(r=>r.role==="user").flatMap(r=>r.content).filter(t).map(r=>{var a;const s=r;return{title:(a=s.filename)!=null?a:"Untitled Document",filename:s.filename,mediaType:s.mediaType}})}async doGenerate(e){var t,r,a,s,l,c,d,f;const{args:p,warnings:y,betas:v,usesJsonResponseTool:x}=await this.getArgs({...e,userSuppliedBetas:await this.getBetasFromHeaders(e.headers)}),b=this.extractCitationDocuments(e.prompt),{responseHeaders:_,value:S,rawValue:k}=await zt({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:v,headers:e.headers}),body:this.transformRequestBody(p),failedResponseHandler:__,successfulResponseHandler:pn(T$),abortSignal:e.abortSignal,fetch:this.config.fetch}),j=[];for(const R of S.content)switch(R.type){case"text":{if(!x&&(j.push({type:"text",text:R.text}),R.citations))for(const E of R.citations){const q=T_(E,b,this.generateId);q&&j.push(q)}break}case"thinking":{j.push({type:"reasoning",text:R.thinking,providerMetadata:{anthropic:{signature:R.signature}}});break}case"redacted_thinking":{j.push({type:"reasoning",text:"",providerMetadata:{anthropic:{redactedData:R.data}}});break}case"tool_use":{j.push(x?{type:"text",text:JSON.stringify(R.input)}:{type:"tool-call",toolCallId:R.id,toolName:R.name,input:JSON.stringify(R.input)});break}case"server_tool_use":{R.name==="text_editor_code_execution"||R.name==="bash_code_execution"?j.push({type:"tool-call",toolCallId:R.id,toolName:"code_execution",input:JSON.stringify({type:R.name,...R.input}),providerExecuted:!0}):(R.name==="web_search"||R.name==="code_execution"||R.name==="web_fetch")&&j.push({type:"tool-call",toolCallId:R.id,toolName:R.name,input:JSON.stringify(R.input),providerExecuted:!0});break}case"web_fetch_tool_result":{R.content.type==="web_fetch_result"?j.push({type:"tool-result",toolCallId:R.tool_use_id,toolName:"web_fetch",result:{type:"web_fetch_result",url:R.content.url,retrievedAt:R.content.retrieved_at,content:{type:R.content.content.type,title:R.content.content.title,citations:R.content.content.citations,source:{type:R.content.content.source.type,mediaType:R.content.content.source.media_type,data:R.content.content.source.data}}},providerExecuted:!0}):R.content.type==="web_fetch_tool_result_error"&&j.push({type:"tool-result",toolCallId:R.tool_use_id,toolName:"web_fetch",isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:R.content.error_code},providerExecuted:!0});break}case"web_search_tool_result":{if(Array.isArray(R.content)){j.push({type:"tool-result",toolCallId:R.tool_use_id,toolName:"web_search",result:R.content.map(E=>{var q;return{url:E.url,title:E.title,pageAge:(q=E.page_age)!=null?q:null,encryptedContent:E.encrypted_content,type:E.type}}),providerExecuted:!0});for(const E of R.content)j.push({type:"source",sourceType:"url",id:this.generateId(),url:E.url,title:E.title,providerMetadata:{anthropic:{pageAge:(t=E.page_age)!=null?t:null}}})}else j.push({type:"tool-result",toolCallId:R.tool_use_id,toolName:"web_search",isError:!0,result:{type:"web_search_tool_result_error",errorCode:R.content.error_code},providerExecuted:!0});break}case"code_execution_tool_result":{R.content.type==="code_execution_result"?j.push({type:"tool-result",toolCallId:R.tool_use_id,toolName:"code_execution",result:{type:R.content.type,stdout:R.content.stdout,stderr:R.content.stderr,return_code:R.content.return_code},providerExecuted:!0}):R.content.type==="code_execution_tool_result_error"&&j.push({type:"tool-result",toolCallId:R.tool_use_id,toolName:"code_execution",isError:!0,result:{type:"code_execution_tool_result_error",errorCode:R.content.error_code},providerExecuted:!0});break}case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":{j.push({type:"tool-result",toolCallId:R.tool_use_id,toolName:"code_execution",result:R.content,providerExecuted:!0});break}}return{content:j,finishReason:k_({finishReason:S.stop_reason,isJsonResponseFromTool:x}),usage:{inputTokens:S.usage.input_tokens,outputTokens:S.usage.output_tokens,totalTokens:S.usage.input_tokens+S.usage.output_tokens,cachedInputTokens:(r=S.usage.cache_read_input_tokens)!=null?r:void 0},request:{body:p},response:{id:(a=S.id)!=null?a:void 0,modelId:(s=S.model)!=null?s:void 0,headers:_,body:k},warnings:y,providerMetadata:{anthropic:{usage:S.usage,cacheCreationInputTokens:(l=S.usage.cache_creation_input_tokens)!=null?l:null,stopSequence:(c=S.stop_sequence)!=null?c:null,container:S.container?{expiresAt:S.container.expires_at,id:S.container.id,skills:(f=(d=S.container.skills)==null?void 0:d.map(R=>({type:R.type,skillId:R.skill_id,version:R.version})))!=null?f:null}:null}}}}async doStream(e){var t,r;const{args:a,warnings:s,betas:l,usesJsonResponseTool:c}=await this.getArgs({...e,userSuppliedBetas:await this.getBetasFromHeaders(e.headers)}),d=this.extractCitationDocuments(e.prompt),f={...a,stream:!0},p=this.buildRequestUrl(!0),{responseHeaders:y,value:v}=await zt({url:p,headers:await this.getHeaders({betas:l,headers:e.headers}),body:this.transformRequestBody(f),failedResponseHandler:__,successfulResponseHandler:ci(E$),abortSignal:e.abortSignal,fetch:this.config.fetch});let x="unknown";const b={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},_={};let S,k=null,j=null,R=null,E;const q=this.generateId,P=v.pipeThrough(new TransformStream({start(O){O.enqueue({type:"stream-start",warnings:s})},transform(O,M){var F,Y,ae,ee,de,J,te,he,ve,se;if(e.includeRawChunks&&M.enqueue({type:"raw",rawValue:O.rawValue}),!O.success){M.enqueue({type:"error",error:O.error});return}const N=O.value;switch(N.type){case"ping":return;case"content_block_start":{const L=N.content_block.type;switch(E=L,L){case"text":{_[N.index]={type:"text"},M.enqueue({type:"text-start",id:String(N.index)});return}case"thinking":{_[N.index]={type:"reasoning"},M.enqueue({type:"reasoning-start",id:String(N.index)});return}case"redacted_thinking":{_[N.index]={type:"reasoning"},M.enqueue({type:"reasoning-start",id:String(N.index),providerMetadata:{anthropic:{redactedData:N.content_block.data}}});return}case"tool_use":{_[N.index]=c?{type:"text"}:{type:"tool-call",toolCallId:N.content_block.id,toolName:N.content_block.name,input:"",firstDelta:!0},M.enqueue(c?{type:"text-start",id:String(N.index)}:{type:"tool-input-start",id:N.content_block.id,toolName:N.content_block.name});return}case"server_tool_use":{if(["web_fetch","web_search","code_execution","text_editor_code_execution","bash_code_execution"].includes(N.content_block.name)){_[N.index]={type:"tool-call",toolCallId:N.content_block.id,toolName:N.content_block.name,input:"",providerExecuted:!0,firstDelta:!0};const V=N.content_block.name==="text_editor_code_execution"||N.content_block.name==="bash_code_execution"?"code_execution":N.content_block.name;M.enqueue({type:"tool-input-start",id:N.content_block.id,toolName:V,providerExecuted:!0})}return}case"web_fetch_tool_result":{const V=N.content_block;V.content.type==="web_fetch_result"?M.enqueue({type:"tool-result",toolCallId:V.tool_use_id,toolName:"web_fetch",result:{type:"web_fetch_result",url:V.content.url,retrievedAt:V.content.retrieved_at,content:{type:V.content.content.type,title:V.content.content.title,citations:V.content.content.citations,source:{type:V.content.content.source.type,mediaType:V.content.content.source.media_type,data:V.content.content.source.data}}},providerExecuted:!0}):V.content.type==="web_fetch_tool_result_error"&&M.enqueue({type:"tool-result",toolCallId:V.tool_use_id,toolName:"web_fetch",isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:V.content.error_code},providerExecuted:!0});return}case"web_search_tool_result":{const V=N.content_block;if(Array.isArray(V.content)){M.enqueue({type:"tool-result",toolCallId:V.tool_use_id,toolName:"web_search",result:V.content.map(G=>{var X;return{url:G.url,title:G.title,pageAge:(X=G.page_age)!=null?X:null,encryptedContent:G.encrypted_content,type:G.type}}),providerExecuted:!0});for(const G of V.content)M.enqueue({type:"source",sourceType:"url",id:q(),url:G.url,title:G.title,providerMetadata:{anthropic:{pageAge:(F=G.page_age)!=null?F:null}}})}else M.enqueue({type:"tool-result",toolCallId:V.tool_use_id,toolName:"web_search",isError:!0,result:{type:"web_search_tool_result_error",errorCode:V.content.error_code},providerExecuted:!0});return}case"code_execution_tool_result":{const V=N.content_block;V.content.type==="code_execution_result"?M.enqueue({type:"tool-result",toolCallId:V.tool_use_id,toolName:"code_execution",result:{type:V.content.type,stdout:V.content.stdout,stderr:V.content.stderr,return_code:V.content.return_code},providerExecuted:!0}):V.content.type==="code_execution_tool_result_error"&&M.enqueue({type:"tool-result",toolCallId:V.tool_use_id,toolName:"code_execution",isError:!0,result:{type:"code_execution_tool_result_error",errorCode:V.content.error_code},providerExecuted:!0});return}case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":{const V=N.content_block;M.enqueue({type:"tool-result",toolCallId:V.tool_use_id,toolName:"code_execution",result:V.content,providerExecuted:!0});return}default:{const V=L;throw new Error(`Unsupported content block type: ${V}`)}}}case"content_block_stop":{if(_[N.index]!=null){const L=_[N.index];switch(L.type){case"text":{M.enqueue({type:"text-end",id:String(N.index)});break}case"reasoning":{M.enqueue({type:"reasoning-end",id:String(N.index)});break}case"tool-call":if(!c){M.enqueue({type:"tool-input-end",id:L.toolCallId});const V=L.toolName==="text_editor_code_execution"||L.toolName==="bash_code_execution"?"code_execution":L.toolName;M.enqueue({type:"tool-call",toolCallId:L.toolCallId,toolName:V,input:L.input===""?"{}":L.input,providerExecuted:L.providerExecuted})}break}delete _[N.index]}E=void 0;return}case"content_block_delta":{const L=N.delta.type;switch(L){case"text_delta":{if(c)return;M.enqueue({type:"text-delta",id:String(N.index),delta:N.delta.text});return}case"thinking_delta":{M.enqueue({type:"reasoning-delta",id:String(N.index),delta:N.delta.thinking});return}case"signature_delta":{E==="thinking"&&M.enqueue({type:"reasoning-delta",id:String(N.index),delta:"",providerMetadata:{anthropic:{signature:N.delta.signature}}});return}case"input_json_delta":{const V=_[N.index];let G=N.delta.partial_json;if(G.length===0)return;if(c){if(V?.type!=="text")return;M.enqueue({type:"text-delta",id:String(N.index),delta:G})}else{if(V?.type!=="tool-call")return;V.firstDelta&&(V.toolName==="bash_code_execution"||V.toolName==="text_editor_code_execution")&&(G=`{"type": "${V.toolName}",${G.substring(1)}`),M.enqueue({type:"tool-input-delta",id:V.toolCallId,delta:G}),V.input+=G,V.firstDelta=!1}return}case"citations_delta":{const V=N.delta.citation,G=T_(V,d,q);G&&M.enqueue(G);return}default:{const V=L;throw new Error(`Unsupported delta type: ${V}`)}}}case"message_start":{b.inputTokens=N.message.usage.input_tokens,b.cachedInputTokens=(Y=N.message.usage.cache_read_input_tokens)!=null?Y:void 0,S={...N.message.usage},k=(ae=N.message.usage.cache_creation_input_tokens)!=null?ae:null,M.enqueue({type:"response-metadata",id:(ee=N.message.id)!=null?ee:void 0,modelId:(de=N.message.model)!=null?de:void 0});return}case"message_delta":{b.outputTokens=N.usage.output_tokens,b.totalTokens=((J=b.inputTokens)!=null?J:0)+((te=N.usage.output_tokens)!=null?te:0),x=k_({finishReason:N.delta.stop_reason,isJsonResponseFromTool:c}),j=(he=N.delta.stop_sequence)!=null?he:null,R=N.delta.container!=null?{expiresAt:N.delta.container.expires_at,id:N.delta.container.id,skills:(se=(ve=N.delta.container.skills)==null?void 0:ve.map(L=>({type:L.type,skillId:L.skill_id,version:L.version})))!=null?se:null}:null,S={...S,...N.usage};return}case"message_stop":{M.enqueue({type:"finish",finishReason:x,usage:b,providerMetadata:{anthropic:{usage:S??null,cacheCreationInputTokens:k,stopSequence:j,container:R}}});return}case"error":{M.enqueue({type:"error",error:N.error});return}default:{const L=N;throw new Error(`Unsupported chunk type: ${L}`)}}}})),[H,I]=P.tee(),A=H.getReader();try{await A.read();let O=await A.read();if(((t=O.value)==null?void 0:t.type)==="raw"&&(O=await A.read()),((r=O.value)==null?void 0:r.type)==="error"){const M=O.value.error;throw new vn({message:M.message,url:p,requestBodyValues:f,statusCode:M.type==="overloaded_error"?529:500,responseHeaders:y,responseBody:JSON.stringify(M),isRetryable:M.type==="overloaded_error"})}}finally{A.cancel().catch(()=>{}),A.releaseLock()}return{stream:I,request:{body:f},response:{headers:y}}}};function W$(e){return e.includes("claude-sonnet-4-5")||e.includes("claude-opus-4-5")?{maxOutputTokens:64e3,supportsStructuredOutput:!0,isKnownModel:!0}:e.includes("claude-opus-4-1")?{maxOutputTokens:32e3,supportsStructuredOutput:!0,isKnownModel:!0}:e.includes("claude-sonnet-4-")||e.includes("claude-3-7-sonnet")||e.includes("claude-haiku-4-5")?{maxOutputTokens:64e3,supportsStructuredOutput:!1,isKnownModel:!0}:e.includes("claude-opus-4-")?{maxOutputTokens:32e3,supportsStructuredOutput:!1,isKnownModel:!0}:e.includes("claude-3-5-haiku")?{maxOutputTokens:8192,supportsStructuredOutput:!1,isKnownModel:!0}:e.includes("claude-3-haiku")?{maxOutputTokens:4096,supportsStructuredOutput:!1,isKnownModel:!0}:{maxOutputTokens:4096,supportsStructuredOutput:!1,isKnownModel:!1}}var eD=Ge(()=>Ie(C({command:w(),restart:it().optional()}))),tD=gr({id:"anthropic.bash_20241022",name:"bash",inputSchema:eD}),nD=Ge(()=>Ie(C({command:w(),restart:it().optional()}))),rD=gr({id:"anthropic.bash_20250124",name:"bash",inputSchema:nD}),aD=Ge(()=>Ie(C({action:He(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:ge(Z().int()).optional(),text:w().optional()}))),iD=gr({id:"anthropic.computer_20241022",name:"computer",inputSchema:aD}),sD=Ge(()=>Ie(C({action:He(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:Lh([Z().int(),Z().int()]).optional(),duration:Z().optional(),scroll_amount:Z().optional(),scroll_direction:He(["up","down","left","right"]).optional(),start_coordinate:Lh([Z().int(),Z().int()]).optional(),text:w().optional()}))),oD=gr({id:"anthropic.computer_20250124",name:"computer",inputSchema:sD}),lD=Ge(()=>Ie(yt("command",[C({command:Q("view"),path:w(),view_range:Lh([Z(),Z()]).optional()}),C({command:Q("create"),path:w(),file_text:w()}),C({command:Q("str_replace"),path:w(),old_str:w(),new_str:w()}),C({command:Q("insert"),path:w(),insert_line:Z(),insert_text:w()}),C({command:Q("delete"),path:w()}),C({command:Q("rename"),old_path:w(),new_path:w()})]))),uD=gr({id:"anthropic.memory_20250818",name:"memory",inputSchema:lD}),cD=Ge(()=>Ie(C({command:He(["view","create","str_replace","insert","undo_edit"]),path:w(),file_text:w().optional(),insert_line:Z().int().optional(),new_str:w().optional(),old_str:w().optional(),view_range:ge(Z().int()).optional()}))),dD=gr({id:"anthropic.text_editor_20241022",name:"str_replace_editor",inputSchema:cD}),fD=Ge(()=>Ie(C({command:He(["view","create","str_replace","insert","undo_edit"]),path:w(),file_text:w().optional(),insert_line:Z().int().optional(),new_str:w().optional(),old_str:w().optional(),view_range:ge(Z().int()).optional()}))),pD=gr({id:"anthropic.text_editor_20250124",name:"str_replace_editor",inputSchema:fD}),hD=Ge(()=>Ie(C({command:He(["view","create","str_replace","insert"]),path:w(),file_text:w().optional(),insert_line:Z().int().optional(),new_str:w().optional(),old_str:w().optional(),view_range:ge(Z().int()).optional()}))),mD=gr({id:"anthropic.text_editor_20250429",name:"str_replace_based_edit_tool",inputSchema:hD}),gD={bash_20241022:tD,bash_20250124:rD,codeExecution_20250522:H$,codeExecution_20250825:Y$,computer_20241022:iD,computer_20250124:oD,memory_20250818:uD,textEditor_20241022:dD,textEditor_20250124:pD,textEditor_20250429:mD,textEditor_20250728:M$,webFetch_20250910:P$,webSearch_20250305:z$};function GS(e={}){var t,r;const a=(t=tu(Gs({settingValue:e.baseURL,environmentVariableName:"ANTHROPIC_BASE_URL"})))!=null?t:"https://api.anthropic.com/v1",s=(r=e.name)!=null?r:"anthropic.messages",l=()=>Na({"anthropic-version":"2023-06-01","x-api-key":_m({apiKey:e.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...e.headers},`ai-sdk/anthropic/${S$}`),c=f=>{var p;return new Q$(f,{provider:s,baseURL:a,headers:l,fetch:e.fetch,generateId:(p=e.generateId)!=null?p:gn,supportedUrls:()=>({"image/*":[/^https?:\/\/.*$/]})})},d=function(f){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return c(f)};return d.languageModel=c,d.chat=c,d.messages=c,d.textEmbeddingModel=f=>{throw new ib({modelId:f,modelType:"textEmbeddingModel"})},d.imageModel=f=>{throw new ib({modelId:f,modelType:"imageModel"})},d.tools=gD,d}GS();var yD="2.0.44",vD=Ge(()=>Ie(C({error:C({code:Z().nullable(),message:w(),status:w()})}))),Kl=pr({errorSchema:vD,errorToMessage:e=>e.error.message}),bD=Ge(()=>Ie(C({outputDimensionality:Z().optional(),taskType:He(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),xD=class{constructor(e,t){this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:r,providerOptions:a}){const s=await fn({provider:"google",providerOptions:a,schema:bD});if(e.length>this.maxEmbeddingsPerCall)throw new cm({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const l=Pt(await Mn(this.config.headers),t);if(e.length===1){const{responseHeaders:p,value:y,rawValue:v}=await zt({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:l,body:{model:`models/${this.modelId}`,content:{parts:[{text:e[0]}]},outputDimensionality:s?.outputDimensionality,taskType:s?.taskType},failedResponseHandler:Kl,successfulResponseHandler:pn(wD),abortSignal:r,fetch:this.config.fetch});return{embeddings:[y.embedding.values],usage:void 0,response:{headers:p,body:v}}}const{responseHeaders:c,value:d,rawValue:f}=await zt({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:l,body:{requests:e.map(p=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:p}]},outputDimensionality:s?.outputDimensionality,taskType:s?.taskType}))},failedResponseHandler:Kl,successfulResponseHandler:pn(_D),abortSignal:r,fetch:this.config.fetch});return{embeddings:d.embeddings.map(p=>p.values),usage:void 0,response:{headers:c,body:f}}}},_D=Ge(()=>Ie(C({embeddings:ge(C({values:ge(Z())}))}))),wD=Ge(()=>Ie(C({embedding:C({values:ge(Z())})})));function Qr(e){if(e==null||SD(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:r,required:a,properties:s,items:l,allOf:c,anyOf:d,oneOf:f,format:p,const:y,minLength:v,enum:x}=e,b={};if(r&&(b.description=r),a&&(b.required=a),p&&(b.format=p),y!==void 0&&(b.enum=[y]),t)if(Array.isArray(t)){const _=t.includes("null"),S=t.filter(k=>k!=="null");S.length===0?b.type="null":(b.anyOf=S.map(k=>({type:k})),_&&(b.nullable=!0))}else b.type=t;if(x!==void 0&&(b.enum=x),s!=null&&(b.properties=Object.entries(s).reduce((_,[S,k])=>(_[S]=Qr(k),_),{})),l&&(b.items=Array.isArray(l)?l.map(Qr):Qr(l)),c&&(b.allOf=c.map(Qr)),d)if(d.some(_=>typeof _=="object"&&_?.type==="null")){const _=d.filter(S=>!(typeof S=="object"&&S?.type==="null"));if(_.length===1){const S=Qr(_[0]);typeof S=="object"&&(b.nullable=!0,Object.assign(b,S))}else b.anyOf=_.map(Qr),b.nullable=!0}else b.anyOf=d.map(Qr);return f&&(b.oneOf=f.map(Qr)),v!==void 0&&(b.minLength=v),b}function SD(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)&&!e.additionalProperties}function kD(e,t){var r;const a=[],s=[];let l=!0;const c=(r=t?.isGemmaModel)!=null?r:!1;for(const{role:d,content:f}of e)switch(d){case"system":{if(!l)throw new Ft({functionality:"system messages are only supported at the beginning of the conversation"});a.push({text:f});break}case"user":{l=!1;const p=[];for(const y of f)switch(y.type){case"text":{p.push({text:y.text});break}case"file":{const v=y.mediaType==="image/*"?"image/jpeg":y.mediaType;p.push(y.data instanceof URL?{fileData:{mimeType:v,fileUri:y.data.toString()}}:{inlineData:{mimeType:v,data:qr(y.data)}});break}}s.push({role:"user",parts:p});break}case"assistant":{l=!1,s.push({role:"model",parts:f.map(p=>{var y,v,x;const b=((v=(y=p.providerOptions)==null?void 0:y.google)==null?void 0:v.thoughtSignature)!=null?String((x=p.providerOptions.google)==null?void 0:x.thoughtSignature):void 0;switch(p.type){case"text":return p.text.length===0?void 0:{text:p.text,thoughtSignature:b};case"reasoning":return p.text.length===0?void 0:{text:p.text,thought:!0,thoughtSignature:b};case"file":{if(p.mediaType!=="image/png")throw new Ft({functionality:"Only PNG images are supported in assistant messages"});if(p.data instanceof URL)throw new Ft({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:p.mediaType,data:qr(p.data)}}}case"tool-call":return{functionCall:{name:p.toolName,args:p.input},thoughtSignature:b}}}).filter(p=>p!==void 0)});break}case"tool":{l=!1;const p=[];for(const y of f){const v=y.output;if(v.type==="content")for(const x of v.value)switch(x.type){case"text":p.push({functionResponse:{name:y.toolName,response:{name:y.toolName,content:x.text}}});break;case"media":p.push({inlineData:{mimeType:x.mediaType,data:x.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:p.push({text:JSON.stringify(x)});break}else p.push({functionResponse:{name:y.toolName,response:{name:y.toolName,content:v.value}}})}s.push({role:"user",parts:p});break}}if(c&&a.length>0&&s.length>0&&s[0].role==="user"){const d=a.map(f=>f.text).join(`

`);s[0].parts.unshift({text:d+`

`})}return{systemInstruction:a.length>0&&!c?{parts:a}:void 0,contents:s}}function E_(e){return e.includes("/")?e:`models/${e}`}var TD=Ge(()=>Ie(C({responseModalities:ge(He(["TEXT","IMAGE"])).optional(),thinkingConfig:C({thinkingBudget:Z().optional(),includeThoughts:it().optional(),thinkingLevel:He(["low","medium","high"]).optional()}).optional(),cachedContent:w().optional(),structuredOutputs:it().optional(),safetySettings:ge(C({category:He(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:He(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:He(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:it().optional(),labels:Vt(w(),w()).optional(),mediaResolution:He(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional(),imageConfig:C({aspectRatio:He(["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"]).optional(),imageSize:He(["1K","2K","4K"]).optional()}).optional()})));function ED({tools:e,toolChoice:t,modelId:r}){var a;e=e?.length?e:void 0;const s=[],l=["gemini-flash-latest","gemini-flash-lite-latest","gemini-pro-latest"].some(b=>b===r),c=r.includes("gemini-2")||r.includes("gemini-3")||l,d=r.includes("gemini-1.5-flash")&&!r.includes("-8b"),f=r.includes("gemini-2.5");if(e==null)return{tools:void 0,toolConfig:void 0,toolWarnings:s};const p=e.some(b=>b.type==="function"),y=e.some(b=>b.type==="provider-defined");if(p&&y){const b=e.filter(_=>_.type==="function");s.push({type:"unsupported-tool",tool:e.find(_=>_.type==="function"),details:`Cannot mix function tools with provider-defined tools in the same request. Falling back to provider-defined tools only. The following function tools will be ignored: ${b.map(_=>_.name).join(", ")}. Please use either function tools or provider-defined tools, but not both.`})}if(y){const b=[];return e.filter(S=>S.type==="provider-defined").forEach(S=>{switch(S.id){case"google.google_search":c?b.push({googleSearch:{}}):d?b.push({googleSearchRetrieval:{dynamicRetrievalConfig:{mode:S.args.mode,dynamicThreshold:S.args.dynamicThreshold}}}):b.push({googleSearchRetrieval:{}});break;case"google.url_context":c?b.push({urlContext:{}}):s.push({type:"unsupported-tool",tool:S,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":c?b.push({codeExecution:{}}):s.push({type:"unsupported-tool",tool:S,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;case"google.file_search":f?b.push({fileSearch:{...S.args}}):s.push({type:"unsupported-tool",tool:S,details:"The file search tool is only supported with Gemini 2.5 models."});break;case"google.vertex_rag_store":c?b.push({retrieval:{vertex_rag_store:{rag_resources:{rag_corpus:S.args.ragCorpus},similarity_top_k:S.args.topK}}}):s.push({type:"unsupported-tool",tool:S,details:"The RAG store tool is not supported with other Gemini models than Gemini 2."});break;default:s.push({type:"unsupported-tool",tool:S});break}}),{tools:b.length>0?b:void 0,toolConfig:void 0,toolWarnings:s}}const v=[];for(const b of e)switch(b.type){case"function":v.push({name:b.name,description:(a=b.description)!=null?a:"",parameters:Qr(b.inputSchema)});break;default:s.push({type:"unsupported-tool",tool:b});break}if(t==null)return{tools:[{functionDeclarations:v}],toolConfig:void 0,toolWarnings:s};const x=t.type;switch(x){case"auto":return{tools:[{functionDeclarations:v}],toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:s};case"none":return{tools:[{functionDeclarations:v}],toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:s};case"required":return{tools:[{functionDeclarations:v}],toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:s};case"tool":return{tools:[{functionDeclarations:v}],toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[t.toolName]}},toolWarnings:s};default:{const b=x;throw new Ft({functionality:`tool choice type: ${b}`})}}}function N_({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var ND=class{constructor(e,t){this.specificationVersion="v2";var r;this.modelId=e,this.config=t,this.generateId=(r=t.generateId)!=null?r:gn}get provider(){return this.config.provider}get supportedUrls(){var e,t,r;return(r=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?r:{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:a,topK:s,frequencyPenalty:l,presencePenalty:c,stopSequences:d,responseFormat:f,seed:p,tools:y,toolChoice:v,providerOptions:x}){var b;const _=[],S=await fn({provider:"google",providerOptions:x,schema:TD});y?.some(H=>H.type==="provider-defined"&&H.id==="google.vertex_rag_store")&&!this.config.provider.startsWith("google.vertex.")&&_.push({type:"other",message:`The 'vertex_rag_store' tool is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});const k=this.modelId.toLowerCase().startsWith("gemma-"),{contents:j,systemInstruction:R}=kD(e,{isGemmaModel:k}),{tools:E,toolConfig:q,toolWarnings:P}=ED({tools:y,toolChoice:v,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:t,temperature:r,topK:s,topP:a,frequencyPenalty:l,presencePenalty:c,stopSequences:d,seed:p,responseMimeType:f?.type==="json"?"application/json":void 0,responseSchema:f?.type==="json"&&f.schema!=null&&((b=S?.structuredOutputs)==null||b)?Qr(f.schema):void 0,...S?.audioTimestamp&&{audioTimestamp:S.audioTimestamp},responseModalities:S?.responseModalities,thinkingConfig:S?.thinkingConfig,...S?.imageConfig&&{imageConfig:S.imageConfig},...S?.mediaResolution&&{mediaResolution:S.mediaResolution}},contents:j,systemInstruction:k?void 0:R,safetySettings:S?.safetySettings,tools:E,toolConfig:q,cachedContent:S?.cachedContent,labels:S?.labels},warnings:[..._,...P]}}async doGenerate(e){var t,r,a,s,l,c,d,f,p,y,v,x,b;const{args:_,warnings:S}=await this.getArgs(e),k=JSON.stringify(_),j=Pt(await Mn(this.config.headers),e.headers),{responseHeaders:R,value:E,rawValue:q}=await zt({url:`${this.config.baseURL}/${E_(this.modelId)}:generateContent`,headers:j,body:_,failedResponseHandler:Kl,successfulResponseHandler:pn(CD),abortSignal:e.abortSignal,fetch:this.config.fetch}),P=E.candidates[0],H=[],I=(r=(t=P.content)==null?void 0:t.parts)!=null?r:[],A=E.usageMetadata;let O;for(const F of I)if("executableCode"in F&&((a=F.executableCode)!=null&&a.code)){const Y=this.config.generateId();O=Y,H.push({type:"tool-call",toolCallId:Y,toolName:"code_execution",input:JSON.stringify(F.executableCode),providerExecuted:!0})}else"codeExecutionResult"in F&&F.codeExecutionResult?(H.push({type:"tool-result",toolCallId:O,toolName:"code_execution",result:{outcome:F.codeExecutionResult.outcome,output:F.codeExecutionResult.output},providerExecuted:!0}),O=void 0):"text"in F&&F.text!=null&&F.text.length>0?H.push({type:F.thought===!0?"reasoning":"text",text:F.text,providerMetadata:F.thoughtSignature?{google:{thoughtSignature:F.thoughtSignature}}:void 0}):"functionCall"in F?H.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:F.functionCall.name,input:JSON.stringify(F.functionCall.args),providerMetadata:F.thoughtSignature?{google:{thoughtSignature:F.thoughtSignature}}:void 0}):"inlineData"in F&&H.push({type:"file",data:F.inlineData.data,mediaType:F.inlineData.mimeType});const M=(s=A_({groundingMetadata:P.groundingMetadata,generateId:this.config.generateId}))!=null?s:[];for(const F of M)H.push(F);return{content:H,finishReason:N_({finishReason:P.finishReason,hasToolCalls:H.some(F=>F.type==="tool-call")}),usage:{inputTokens:(l=A?.promptTokenCount)!=null?l:void 0,outputTokens:(c=A?.candidatesTokenCount)!=null?c:void 0,totalTokens:(d=A?.totalTokenCount)!=null?d:void 0,reasoningTokens:(f=A?.thoughtsTokenCount)!=null?f:void 0,cachedInputTokens:(p=A?.cachedContentTokenCount)!=null?p:void 0},warnings:S,providerMetadata:{google:{promptFeedback:(y=E.promptFeedback)!=null?y:null,groundingMetadata:(v=P.groundingMetadata)!=null?v:null,urlContextMetadata:(x=P.urlContextMetadata)!=null?x:null,safetyRatings:(b=P.safetyRatings)!=null?b:null,usageMetadata:A??null}},request:{body:k},response:{headers:R,body:q}}}async doStream(e){const{args:t,warnings:r}=await this.getArgs(e),a=JSON.stringify(t),s=Pt(await Mn(this.config.headers),e.headers),{responseHeaders:l,value:c}=await zt({url:`${this.config.baseURL}/${E_(this.modelId)}:streamGenerateContent?alt=sse`,headers:s,body:t,failedResponseHandler:Kl,successfulResponseHandler:ci(RD),abortSignal:e.abortSignal,fetch:this.config.fetch});let d="unknown";const f={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};let p;const y=this.config.generateId;let v=!1,x=null,b=null,_=0;const S=new Set;let k;return{stream:c.pipeThrough(new TransformStream({start(j){j.enqueue({type:"stream-start",warnings:r})},transform(j,R){var E,q,P,H,I,A,O,M,F,Y,ae,ee;if(e.includeRawChunks&&R.enqueue({type:"raw",rawValue:j.rawValue}),!j.success){R.enqueue({type:"error",error:j.error});return}const de=j.value,J=de.usageMetadata;J!=null&&(f.inputTokens=(E=J.promptTokenCount)!=null?E:void 0,f.outputTokens=(q=J.candidatesTokenCount)!=null?q:void 0,f.totalTokens=(P=J.totalTokenCount)!=null?P:void 0,f.reasoningTokens=(H=J.thoughtsTokenCount)!=null?H:void 0,f.cachedInputTokens=(I=J.cachedContentTokenCount)!=null?I:void 0);const te=(A=de.candidates)==null?void 0:A[0];if(te==null)return;const he=te.content,ve=A_({groundingMetadata:te.groundingMetadata,generateId:y});if(ve!=null)for(const se of ve)se.sourceType==="url"&&!S.has(se.url)&&(S.add(se.url),R.enqueue(se));if(he!=null){const se=(O=he.parts)!=null?O:[];for(const L of se)if("executableCode"in L&&((M=L.executableCode)!=null&&M.code)){const V=y();k=V,R.enqueue({type:"tool-call",toolCallId:V,toolName:"code_execution",input:JSON.stringify(L.executableCode),providerExecuted:!0}),v=!0}else if("codeExecutionResult"in L&&L.codeExecutionResult){const V=k;V&&(R.enqueue({type:"tool-result",toolCallId:V,toolName:"code_execution",result:{outcome:L.codeExecutionResult.outcome,output:L.codeExecutionResult.output},providerExecuted:!0}),k=void 0)}else"text"in L&&L.text!=null&&L.text.length>0?L.thought===!0?(x!==null&&(R.enqueue({type:"text-end",id:x}),x=null),b===null&&(b=String(_++),R.enqueue({type:"reasoning-start",id:b,providerMetadata:L.thoughtSignature?{google:{thoughtSignature:L.thoughtSignature}}:void 0})),R.enqueue({type:"reasoning-delta",id:b,delta:L.text,providerMetadata:L.thoughtSignature?{google:{thoughtSignature:L.thoughtSignature}}:void 0})):(b!==null&&(R.enqueue({type:"reasoning-end",id:b}),b=null),x===null&&(x=String(_++),R.enqueue({type:"text-start",id:x,providerMetadata:L.thoughtSignature?{google:{thoughtSignature:L.thoughtSignature}}:void 0})),R.enqueue({type:"text-delta",id:x,delta:L.text,providerMetadata:L.thoughtSignature?{google:{thoughtSignature:L.thoughtSignature}}:void 0})):"inlineData"in L&&R.enqueue({type:"file",mediaType:L.inlineData.mimeType,data:L.inlineData.data});const N=AD({parts:he.parts,generateId:y});if(N!=null)for(const L of N)R.enqueue({type:"tool-input-start",id:L.toolCallId,toolName:L.toolName,providerMetadata:L.providerMetadata}),R.enqueue({type:"tool-input-delta",id:L.toolCallId,delta:L.args,providerMetadata:L.providerMetadata}),R.enqueue({type:"tool-input-end",id:L.toolCallId,providerMetadata:L.providerMetadata}),R.enqueue({type:"tool-call",toolCallId:L.toolCallId,toolName:L.toolName,input:L.args,providerMetadata:L.providerMetadata}),v=!0}te.finishReason!=null&&(d=N_({finishReason:te.finishReason,hasToolCalls:v}),p={google:{promptFeedback:(F=de.promptFeedback)!=null?F:null,groundingMetadata:(Y=te.groundingMetadata)!=null?Y:null,urlContextMetadata:(ae=te.urlContextMetadata)!=null?ae:null,safetyRatings:(ee=te.safetyRatings)!=null?ee:null}},J!=null&&(p.google.usageMetadata=J))},flush(j){x!==null&&j.enqueue({type:"text-end",id:x}),b!==null&&j.enqueue({type:"reasoning-end",id:b}),j.enqueue({type:"finish",finishReason:d,usage:f,providerMetadata:p})}})),response:{headers:l},request:{body:a}}}};function AD({parts:e,generateId:t}){const r=e?.filter(a=>"functionCall"in a);return r==null||r.length===0?void 0:r.map(a=>({type:"tool-call",toolCallId:t(),toolName:a.functionCall.name,args:JSON.stringify(a.functionCall.args),providerMetadata:a.thoughtSignature?{google:{thoughtSignature:a.thoughtSignature}}:void 0}))}function A_({groundingMetadata:e,generateId:t}){var r,a,s,l;if(!e?.groundingChunks)return;const c=[];for(const d of e.groundingChunks)if(d.web!=null)c.push({type:"source",sourceType:"url",id:t(),url:d.web.uri,title:(r=d.web.title)!=null?r:void 0});else if(d.retrievedContext!=null){const f=d.retrievedContext.uri,p=d.retrievedContext.fileSearchStore;if(f&&(f.startsWith("http://")||f.startsWith("https://")))c.push({type:"source",sourceType:"url",id:t(),url:f,title:(a=d.retrievedContext.title)!=null?a:void 0});else if(f){const y=(s=d.retrievedContext.title)!=null?s:"Unknown Document";let v="application/octet-stream",x;f.endsWith(".pdf")?(v="application/pdf",x=f.split("/").pop()):f.endsWith(".txt")?(v="text/plain",x=f.split("/").pop()):f.endsWith(".docx")?(v="application/vnd.openxmlformats-officedocument.wordprocessingml.document",x=f.split("/").pop()):f.endsWith(".doc")?(v="application/msword",x=f.split("/").pop()):(f.match(/\.(md|markdown)$/)&&(v="text/markdown"),x=f.split("/").pop()),c.push({type:"source",sourceType:"document",id:t(),mediaType:v,title:y,filename:x})}else if(p){const y=(l=d.retrievedContext.title)!=null?l:"Unknown Document";c.push({type:"source",sourceType:"document",id:t(),mediaType:"application/octet-stream",title:y,filename:p.split("/").pop()})}}return c.length>0?c:void 0}var ZS=()=>C({webSearchQueries:ge(w()).nullish(),retrievalQueries:ge(w()).nullish(),searchEntryPoint:C({renderedContent:w()}).nullish(),groundingChunks:ge(C({web:C({uri:w(),title:w().nullish()}).nullish(),retrievedContext:C({uri:w().nullish(),title:w().nullish(),text:w().nullish(),fileSearchStore:w().nullish()}).nullish()})).nullish(),groundingSupports:ge(C({segment:C({startIndex:Z().nullish(),endIndex:Z().nullish(),text:w().nullish()}),segment_text:w().nullish(),groundingChunkIndices:ge(Z()).nullish(),supportChunkIndices:ge(Z()).nullish(),confidenceScores:ge(Z()).nullish(),confidenceScore:ge(Z()).nullish()})).nullish(),retrievalMetadata:Qe([C({webDynamicRetrievalScore:Z()}),C({})]).nullish()}),YS=()=>C({parts:ge(Qe([C({functionCall:C({name:w(),args:Fn()}),thoughtSignature:w().nullish()}),C({inlineData:C({mimeType:w(),data:w()})}),C({executableCode:C({language:w(),code:w()}).nullish(),codeExecutionResult:C({outcome:w(),output:w()}).nullish(),text:w().nullish(),thought:it().nullish(),thoughtSignature:w().nullish()})])).nullish()}),td=()=>C({category:w().nullish(),probability:w().nullish(),probabilityScore:Z().nullish(),severity:w().nullish(),severityScore:Z().nullish(),blocked:it().nullish()}),JS=C({cachedContentTokenCount:Z().nullish(),thoughtsTokenCount:Z().nullish(),promptTokenCount:Z().nullish(),candidatesTokenCount:Z().nullish(),totalTokenCount:Z().nullish(),trafficType:w().nullish()}),XS=()=>C({urlMetadata:ge(C({retrievedUrl:w(),urlRetrievalStatus:w()}))}),CD=Ge(()=>Ie(C({candidates:ge(C({content:YS().nullish().or(C({}).strict()),finishReason:w().nullish(),safetyRatings:ge(td()).nullish(),groundingMetadata:ZS().nullish(),urlContextMetadata:XS().nullish()})),usageMetadata:JS.nullish(),promptFeedback:C({blockReason:w().nullish(),safetyRatings:ge(td()).nullish()}).nullish()}))),RD=Ge(()=>Ie(C({candidates:ge(C({content:YS().nullish(),finishReason:w().nullish(),safetyRatings:ge(td()).nullish(),groundingMetadata:ZS().nullish(),urlContextMetadata:XS().nullish()})).nullish(),usageMetadata:JS.nullish(),promptFeedback:C({blockReason:w().nullish(),safetyRatings:ge(td()).nullish()}).nullish()}))),jD=Fr({id:"google.code_execution",name:"code_execution",inputSchema:C({language:w().describe("The programming language of the code."),code:w().describe("The code to be executed.")}),outputSchema:C({outcome:w().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:w().describe("The output from the code execution.")})}),OD=C({fileSearchStoreNames:ge(w()).describe("The names of the file_search_stores to retrieve from. Example: `fileSearchStores/my-file-search-store-123`"),topK:Z().int().positive().describe("The number of file search retrieval chunks to retrieve.").optional(),metadataFilter:w().describe("Metadata filter to apply to the file search retrieval documents. See https://google.aip.dev/160 for the syntax of the filter expression.").optional()}).passthrough(),MD=Ge(()=>Ie(OD)),ID=gr({id:"google.file_search",name:"file_search",inputSchema:MD}),$D=gr({id:"google.google_search",name:"google_search",inputSchema:Ge(()=>Ie(C({mode:He(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:Z().default(1)})))}),DD=gr({id:"google.url_context",name:"url_context",inputSchema:Ge(()=>Ie(C({})))}),zD=gr({id:"google.vertex_rag_store",name:"vertex_rag_store",inputSchema:C({ragCorpus:w(),topK:Z().optional()})}),LD={googleSearch:$D,urlContext:DD,fileSearch:ID,codeExecution:jD,vertexRagStore:zD},UD=class{constructor(e,t,r){this.modelId=e,this.settings=t,this.config=r,this.specificationVersion="v2"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:4}get provider(){return this.config.provider}async doGenerate(e){var t,r,a;const{prompt:s,n:l=1,size:c="1024x1024",aspectRatio:d="1:1",seed:f,providerOptions:p,headers:y,abortSignal:v}=e,x=[];c!=null&&x.push({type:"unsupported-setting",setting:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),f!=null&&x.push({type:"unsupported-setting",setting:"seed",details:"This model does not support the `seed` option through this provider."});const b=await fn({provider:"google",providerOptions:p,schema:PD}),_=(a=(r=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:r.call(t))!=null?a:new Date,S={sampleCount:l};d!=null&&(S.aspectRatio=d),b&&Object.assign(S,b);const k={instances:[{prompt:s}],parameters:S},{responseHeaders:j,value:R}=await zt({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:Pt(await Mn(this.config.headers),y),body:k,failedResponseHandler:Kl,successfulResponseHandler:pn(qD),abortSignal:v,fetch:this.config.fetch});return{images:R.predictions.map(E=>E.bytesBase64Encoded),warnings:x??[],providerMetadata:{google:{images:R.predictions.map(E=>({}))}},response:{timestamp:_,modelId:this.modelId,headers:j}}}},qD=Ge(()=>Ie(C({predictions:ge(C({bytesBase64Encoded:w()})).default([])}))),PD=Ge(()=>Ie(C({personGeneration:He(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:He(["1:1","3:4","4:3","9:16","16:9"]).nullish()})));function KS(e={}){var t,r;const a=(t=tu(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",s=(r=e.name)!=null?r:"google.generative-ai",l=()=>Na({"x-goog-api-key":_m({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers},`ai-sdk/google/${yD}`),c=y=>{var v;return new ND(y,{provider:s,baseURL:a,headers:l,generateId:(v=e.generateId)!=null?v:gn,supportedUrls:()=>({"*":[new RegExp(`^${a}/files/.*$`),new RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),new RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),fetch:e.fetch})},d=y=>new xD(y,{provider:s,baseURL:a,headers:l,fetch:e.fetch}),f=(y,v={})=>new UD(y,v,{provider:s,baseURL:a,headers:l,fetch:e.fetch}),p=function(y){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return c(y)};return p.languageModel=c,p.chat=c,p.generativeAI=c,p.embedding=d,p.textEmbedding=d,p.textEmbeddingModel=d,p.image=f,p.imageModel=f,p.tools=LD,p}KS();function jl(e){var t,r;return(r=(t=e?.providerOptions)==null?void 0:t.openaiCompatible)!=null?r:{}}function BD(e){const t=[];for(const{role:r,content:a,...s}of e){const l=jl({...s});switch(r){case"system":{t.push({role:"system",content:a,...l});break}case"user":{if(a.length===1&&a[0].type==="text"){t.push({role:"user",content:a[0].text,...jl(a[0])});break}t.push({role:"user",content:a.map(c=>{const d=jl(c);switch(c.type){case"text":return{type:"text",text:c.text,...d};case"file":if(c.mediaType.startsWith("image/")){const f=c.mediaType==="image/*"?"image/jpeg":c.mediaType;return{type:"image_url",image_url:{url:c.data instanceof URL?c.data.toString():`data:${f};base64,${qr(c.data)}`},...d}}else throw new Ft({functionality:`file part media type ${c.mediaType}`})}}),...l});break}case"assistant":{let c="";const d=[];for(const f of a){const p=jl(f);switch(f.type){case"text":{c+=f.text;break}case"tool-call":{d.push({id:f.toolCallId,type:"function",function:{name:f.toolName,arguments:JSON.stringify(f.input)},...p});break}}}t.push({role:"assistant",content:c,tool_calls:d.length>0?d:void 0,...l});break}case"tool":{for(const c of a){const d=c.output;let f;switch(d.type){case"text":case"error-text":f=d.value;break;case"content":case"json":case"error-json":f=JSON.stringify(d.value);break}const p=jl(c);t.push({role:"tool",tool_call_id:c.toolCallId,content:f,...p})}break}default:{const c=r;throw new Error(`Unsupported role: ${c}`)}}}return t}function C_({id:e,model:t,created:r}){return{id:e??void 0,modelId:t??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function R_(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var vh=C({user:w().optional(),reasoningEffort:w().optional(),textVerbosity:w().optional()}),FD=C({error:C({message:w(),type:w().nullish(),param:fr().nullish(),code:Qe([w(),Z()]).nullish()})}),bd={errorSchema:FD,errorToMessage:e=>e.error.message};function VD({tools:e,toolChoice:t}){e=e?.length?e:void 0;const r=[];if(e==null)return{tools:void 0,toolChoice:void 0,toolWarnings:r};const a=[];for(const l of e)l.type==="provider-defined"?r.push({type:"unsupported-tool",tool:l}):a.push({type:"function",function:{name:l.name,description:l.description,parameters:l.inputSchema}});if(t==null)return{tools:a,toolChoice:void 0,toolWarnings:r};const s=t.type;switch(s){case"auto":case"none":case"required":return{tools:a,toolChoice:s,toolWarnings:r};case"tool":return{tools:a,toolChoice:{type:"function",function:{name:t.toolName}},toolWarnings:r};default:{const l=s;throw new Ft({functionality:`tool choice type: ${l}`})}}}var HD=class{constructor(e,t){this.specificationVersion="v2";var r,a;this.modelId=e,this.config=t;const s=(r=t.errorStructure)!=null?r:bd;this.chunkSchema=ZD(s.errorSchema),this.failedResponseHandler=pr(s),this.supportsStructuredOutputs=(a=t.supportsStructuredOutputs)!=null?a:!1}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get supportedUrls(){var e,t,r;return(r=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?r:{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:a,topK:s,frequencyPenalty:l,presencePenalty:c,providerOptions:d,stopSequences:f,responseFormat:p,seed:y,toolChoice:v,tools:x}){var b,_,S,k;const j=[],R=Object.assign((b=await fn({provider:"openai-compatible",providerOptions:d,schema:vh}))!=null?b:{},(_=await fn({provider:this.providerOptionsName,providerOptions:d,schema:vh}))!=null?_:{});s!=null&&j.push({type:"unsupported-setting",setting:"topK"}),p?.type==="json"&&p.schema!=null&&!this.supportsStructuredOutputs&&j.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const{tools:E,toolChoice:q,toolWarnings:P}=VD({tools:x,toolChoice:v});return{args:{model:this.modelId,user:R.user,max_tokens:t,temperature:r,top_p:a,frequency_penalty:l,presence_penalty:c,response_format:p?.type==="json"?this.supportsStructuredOutputs===!0&&p.schema!=null?{type:"json_schema",json_schema:{schema:p.schema,name:(S=p.name)!=null?S:"response",description:p.description}}:{type:"json_object"}:void 0,stop:f,seed:y,...Object.fromEntries(Object.entries((k=d?.[this.providerOptionsName])!=null?k:{}).filter(([H])=>!Object.keys(vh.shape).includes(H))),reasoning_effort:R.reasoningEffort,verbosity:R.textVerbosity,messages:BD(e),tools:E,tool_choice:q},warnings:[...j,...P]}}async doGenerate(e){var t,r,a,s,l,c,d,f,p,y,v,x,b,_,S,k,j;const{args:R,warnings:E}=await this.getArgs({...e}),q=JSON.stringify(R),{responseHeaders:P,value:H,rawValue:I}=await zt({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Pt(this.config.headers(),e.headers),body:R,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:pn(GD),abortSignal:e.abortSignal,fetch:this.config.fetch}),A=H.choices[0],O=[],M=A.message.content;M!=null&&M.length>0&&O.push({type:"text",text:M});const F=(t=A.message.reasoning_content)!=null?t:A.message.reasoning;if(F!=null&&F.length>0&&O.push({type:"reasoning",text:F}),A.message.tool_calls!=null)for(const ee of A.message.tool_calls)O.push({type:"tool-call",toolCallId:(r=ee.id)!=null?r:gn(),toolName:ee.function.name,input:ee.function.arguments});const Y={[this.providerOptionsName]:{},...await((s=(a=this.config.metadataExtractor)==null?void 0:a.extractMetadata)==null?void 0:s.call(a,{parsedBody:I}))},ae=(l=H.usage)==null?void 0:l.completion_tokens_details;return ae?.accepted_prediction_tokens!=null&&(Y[this.providerOptionsName].acceptedPredictionTokens=ae?.accepted_prediction_tokens),ae?.rejected_prediction_tokens!=null&&(Y[this.providerOptionsName].rejectedPredictionTokens=ae?.rejected_prediction_tokens),{content:O,finishReason:R_(A.finish_reason),usage:{inputTokens:(d=(c=H.usage)==null?void 0:c.prompt_tokens)!=null?d:void 0,outputTokens:(p=(f=H.usage)==null?void 0:f.completion_tokens)!=null?p:void 0,totalTokens:(v=(y=H.usage)==null?void 0:y.total_tokens)!=null?v:void 0,reasoningTokens:(_=(b=(x=H.usage)==null?void 0:x.completion_tokens_details)==null?void 0:b.reasoning_tokens)!=null?_:void 0,cachedInputTokens:(j=(k=(S=H.usage)==null?void 0:S.prompt_tokens_details)==null?void 0:k.cached_tokens)!=null?j:void 0},providerMetadata:Y,request:{body:q},response:{...C_(H),headers:P,body:I},warnings:E}}async doStream(e){var t;const{args:r,warnings:a}=await this.getArgs({...e}),s={...r,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},l=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:c,value:d}=await zt({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Pt(this.config.headers(),e.headers),body:s,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:ci(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),f=[];let p="unknown";const y={completionTokens:void 0,completionTokensDetails:{reasoningTokens:void 0,acceptedPredictionTokens:void 0,rejectedPredictionTokens:void 0},promptTokens:void 0,promptTokensDetails:{cachedTokens:void 0},totalTokens:void 0};let v=!0;const x=this.providerOptionsName;let b=!1,_=!1;return{stream:d.pipeThrough(new TransformStream({start(S){S.enqueue({type:"stream-start",warnings:a})},transform(S,k){var j,R,E,q,P,H,I,A,O,M,F,Y,ae;if(e.includeRawChunks&&k.enqueue({type:"raw",rawValue:S.rawValue}),!S.success){p="error",k.enqueue({type:"error",error:S.error});return}const ee=S.value;if(l?.processChunk(S.rawValue),"error"in ee){p="error",k.enqueue({type:"error",error:ee.error.message});return}if(v&&(v=!1,k.enqueue({type:"response-metadata",...C_(ee)})),ee.usage!=null){const{prompt_tokens:he,completion_tokens:ve,total_tokens:se,prompt_tokens_details:N,completion_tokens_details:L}=ee.usage;y.promptTokens=he??void 0,y.completionTokens=ve??void 0,y.totalTokens=se??void 0,L?.reasoning_tokens!=null&&(y.completionTokensDetails.reasoningTokens=L?.reasoning_tokens),L?.accepted_prediction_tokens!=null&&(y.completionTokensDetails.acceptedPredictionTokens=L?.accepted_prediction_tokens),L?.rejected_prediction_tokens!=null&&(y.completionTokensDetails.rejectedPredictionTokens=L?.rejected_prediction_tokens),N?.cached_tokens!=null&&(y.promptTokensDetails.cachedTokens=N?.cached_tokens)}const de=ee.choices[0];if(de?.finish_reason!=null&&(p=R_(de.finish_reason)),de?.delta==null)return;const J=de.delta,te=(j=J.reasoning_content)!=null?j:J.reasoning;if(te&&(b||(k.enqueue({type:"reasoning-start",id:"reasoning-0"}),b=!0),k.enqueue({type:"reasoning-delta",id:"reasoning-0",delta:te})),J.content&&(_||(k.enqueue({type:"text-start",id:"txt-0"}),_=!0),k.enqueue({type:"text-delta",id:"txt-0",delta:J.content})),J.tool_calls!=null)for(const he of J.tool_calls){const ve=he.index;if(f[ve]==null){if(he.id==null)throw new Ul({data:he,message:"Expected 'id' to be a string."});if(((R=he.function)==null?void 0:R.name)==null)throw new Ul({data:he,message:"Expected 'function.name' to be a string."});k.enqueue({type:"tool-input-start",id:he.id,toolName:he.function.name}),f[ve]={id:he.id,type:"function",function:{name:he.function.name,arguments:(E=he.function.arguments)!=null?E:""},hasFinished:!1};const N=f[ve];((q=N.function)==null?void 0:q.name)!=null&&((P=N.function)==null?void 0:P.arguments)!=null&&(N.function.arguments.length>0&&k.enqueue({type:"tool-input-delta",id:N.id,delta:N.function.arguments}),Wc(N.function.arguments)&&(k.enqueue({type:"tool-input-end",id:N.id}),k.enqueue({type:"tool-call",toolCallId:(H=N.id)!=null?H:gn(),toolName:N.function.name,input:N.function.arguments}),N.hasFinished=!0));continue}const se=f[ve];se.hasFinished||(((I=he.function)==null?void 0:I.arguments)!=null&&(se.function.arguments+=(O=(A=he.function)==null?void 0:A.arguments)!=null?O:""),k.enqueue({type:"tool-input-delta",id:se.id,delta:(M=he.function.arguments)!=null?M:""}),((F=se.function)==null?void 0:F.name)!=null&&((Y=se.function)==null?void 0:Y.arguments)!=null&&Wc(se.function.arguments)&&(k.enqueue({type:"tool-input-end",id:se.id}),k.enqueue({type:"tool-call",toolCallId:(ae=se.id)!=null?ae:gn(),toolName:se.function.name,input:se.function.arguments}),se.hasFinished=!0))}},flush(S){var k,j,R,E,q,P;b&&S.enqueue({type:"reasoning-end",id:"reasoning-0"}),_&&S.enqueue({type:"text-end",id:"txt-0"});for(const I of f.filter(A=>!A.hasFinished))S.enqueue({type:"tool-input-end",id:I.id}),S.enqueue({type:"tool-call",toolCallId:(k=I.id)!=null?k:gn(),toolName:I.function.name,input:I.function.arguments});const H={[x]:{},...l?.buildMetadata()};y.completionTokensDetails.acceptedPredictionTokens!=null&&(H[x].acceptedPredictionTokens=y.completionTokensDetails.acceptedPredictionTokens),y.completionTokensDetails.rejectedPredictionTokens!=null&&(H[x].rejectedPredictionTokens=y.completionTokensDetails.rejectedPredictionTokens),S.enqueue({type:"finish",finishReason:p,usage:{inputTokens:(j=y.promptTokens)!=null?j:void 0,outputTokens:(R=y.completionTokens)!=null?R:void 0,totalTokens:(E=y.totalTokens)!=null?E:void 0,reasoningTokens:(q=y.completionTokensDetails.reasoningTokens)!=null?q:void 0,cachedInputTokens:(P=y.promptTokensDetails.cachedTokens)!=null?P:void 0},providerMetadata:H})}})),request:{body:s},response:{headers:c}}}},QS=C({prompt_tokens:Z().nullish(),completion_tokens:Z().nullish(),total_tokens:Z().nullish(),prompt_tokens_details:C({cached_tokens:Z().nullish()}).nullish(),completion_tokens_details:C({reasoning_tokens:Z().nullish(),accepted_prediction_tokens:Z().nullish(),rejected_prediction_tokens:Z().nullish()}).nullish()}).nullish(),GD=C({id:w().nullish(),created:Z().nullish(),model:w().nullish(),choices:ge(C({message:C({role:Q("assistant").nullish(),content:w().nullish(),reasoning_content:w().nullish(),reasoning:w().nullish(),tool_calls:ge(C({id:w().nullish(),function:C({name:w(),arguments:w()})})).nullish()}),finish_reason:w().nullish()})),usage:QS}),ZD=e=>Qe([C({id:w().nullish(),created:Z().nullish(),model:w().nullish(),choices:ge(C({delta:C({role:He(["assistant"]).nullish(),content:w().nullish(),reasoning_content:w().nullish(),reasoning:w().nullish(),tool_calls:ge(C({index:Z(),id:w().nullish(),function:C({name:w().nullish(),arguments:w().nullish()})})).nullish()}).nullish(),finish_reason:w().nullish()})),usage:QS}),e]);function YD({prompt:e,user:t="user",assistant:r="assistant"}){let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:s,content:l}of e)switch(s){case"system":throw new ni({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const c=l.map(d=>{switch(d.type){case"text":return d.text}}).filter(Boolean).join("");a+=`${t}:
${c}

`;break}case"assistant":{const c=l.map(d=>{switch(d.type){case"text":return d.text;case"tool-call":throw new Ft({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${c}

`;break}case"tool":throw new Ft({functionality:"tool messages"});default:{const c=s;throw new Error(`Unsupported role: ${c}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${t}:`]}}function j_({id:e,model:t,created:r}){return{id:e??void 0,modelId:t??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function O_(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var JD=C({echo:it().optional(),logitBias:Vt(w(),Z()).optional(),suffix:w().optional(),user:w().optional()}),XD=class{constructor(e,t){this.specificationVersion="v2";var r;this.modelId=e,this.config=t;const a=(r=t.errorStructure)!=null?r:bd;this.chunkSchema=QD(a.errorSchema),this.failedResponseHandler=pr(a)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get supportedUrls(){var e,t,r;return(r=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?r:{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:a,topK:s,frequencyPenalty:l,presencePenalty:c,stopSequences:d,responseFormat:f,seed:p,providerOptions:y,tools:v,toolChoice:x}){var b;const _=[],S=(b=await fn({provider:this.providerOptionsName,providerOptions:y,schema:JD}))!=null?b:{};s!=null&&_.push({type:"unsupported-setting",setting:"topK"}),v?.length&&_.push({type:"unsupported-setting",setting:"tools"}),x!=null&&_.push({type:"unsupported-setting",setting:"toolChoice"}),f!=null&&f.type!=="text"&&_.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:k,stopSequences:j}=YD({prompt:e}),R=[...j??[],...d??[]];return{args:{model:this.modelId,echo:S.echo,logit_bias:S.logitBias,suffix:S.suffix,user:S.user,max_tokens:t,temperature:r,top_p:a,frequency_penalty:l,presence_penalty:c,seed:p,...y?.[this.providerOptionsName],prompt:k,stop:R.length>0?R:void 0},warnings:_}}async doGenerate(e){var t,r,a,s,l,c;const{args:d,warnings:f}=await this.getArgs(e),{responseHeaders:p,value:y,rawValue:v}=await zt({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Pt(this.config.headers(),e.headers),body:d,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:pn(KD),abortSignal:e.abortSignal,fetch:this.config.fetch}),x=y.choices[0],b=[];return x.text!=null&&x.text.length>0&&b.push({type:"text",text:x.text}),{content:b,usage:{inputTokens:(r=(t=y.usage)==null?void 0:t.prompt_tokens)!=null?r:void 0,outputTokens:(s=(a=y.usage)==null?void 0:a.completion_tokens)!=null?s:void 0,totalTokens:(c=(l=y.usage)==null?void 0:l.total_tokens)!=null?c:void 0},finishReason:O_(x.finish_reason),request:{body:d},response:{...j_(y),headers:p,body:v},warnings:f}}async doStream(e){const{args:t,warnings:r}=await this.getArgs(e),a={...t,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},{responseHeaders:s,value:l}=await zt({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Pt(this.config.headers(),e.headers),body:a,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:ci(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch});let c="unknown";const d={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};let f=!0;return{stream:l.pipeThrough(new TransformStream({start(p){p.enqueue({type:"stream-start",warnings:r})},transform(p,y){var v,x,b;if(e.includeRawChunks&&y.enqueue({type:"raw",rawValue:p.rawValue}),!p.success){c="error",y.enqueue({type:"error",error:p.error});return}const _=p.value;if("error"in _){c="error",y.enqueue({type:"error",error:_.error});return}f&&(f=!1,y.enqueue({type:"response-metadata",...j_(_)}),y.enqueue({type:"text-start",id:"0"})),_.usage!=null&&(d.inputTokens=(v=_.usage.prompt_tokens)!=null?v:void 0,d.outputTokens=(x=_.usage.completion_tokens)!=null?x:void 0,d.totalTokens=(b=_.usage.total_tokens)!=null?b:void 0);const S=_.choices[0];S?.finish_reason!=null&&(c=O_(S.finish_reason)),S?.text!=null&&y.enqueue({type:"text-delta",id:"0",delta:S.text})},flush(p){f||p.enqueue({type:"text-end",id:"0"}),p.enqueue({type:"finish",finishReason:c,usage:d})}})),request:{body:a},response:{headers:s}}}},WS=C({prompt_tokens:Z(),completion_tokens:Z(),total_tokens:Z()}),KD=C({id:w().nullish(),created:Z().nullish(),model:w().nullish(),choices:ge(C({text:w(),finish_reason:w()})),usage:WS.nullish()}),QD=e=>Qe([C({id:w().nullish(),created:Z().nullish(),model:w().nullish(),choices:ge(C({text:w(),finish_reason:w().nullish(),index:Z()})),usage:WS.nullish()}),e]),M_=C({dimensions:Z().optional(),user:w().optional()}),WD=class{constructor(e,t){this.specificationVersion="v2",this.modelId=e,this.config=t}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}async doEmbed({values:e,headers:t,abortSignal:r,providerOptions:a}){var s,l,c;const d=Object.assign((s=await fn({provider:"openai-compatible",providerOptions:a,schema:M_}))!=null?s:{},(l=await fn({provider:this.providerOptionsName,providerOptions:a,schema:M_}))!=null?l:{});if(e.length>this.maxEmbeddingsPerCall)throw new cm({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:f,value:p,rawValue:y}=await zt({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Pt(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:d.dimensions,user:d.user},failedResponseHandler:pr((c=this.config.errorStructure)!=null?c:bd),successfulResponseHandler:pn(ez),abortSignal:r,fetch:this.config.fetch});return{embeddings:p.data.map(v=>v.embedding),usage:p.usage?{tokens:p.usage.prompt_tokens}:void 0,providerMetadata:p.providerMetadata,response:{headers:f,body:y}}}},ez=C({data:ge(C({embedding:ge(Z())})),usage:C({prompt_tokens:Z()}).nullish(),providerMetadata:Vt(w(),Vt(w(),fr())).optional()}),tz=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.maxImagesPerCall=10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:r,aspectRatio:a,seed:s,providerOptions:l,headers:c,abortSignal:d}){var f,p,y,v,x;const b=[];a!=null&&b.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),s!=null&&b.push({type:"unsupported-setting",setting:"seed"});const _=(y=(p=(f=this.config._internal)==null?void 0:f.currentDate)==null?void 0:p.call(f))!=null?y:new Date,{value:S,responseHeaders:k}=await zt({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Pt(this.config.headers(),c),body:{model:this.modelId,prompt:e,n:t,size:r,...(v=l.openai)!=null?v:{},response_format:"b64_json"},failedResponseHandler:pr((x=this.config.errorStructure)!=null?x:bd),successfulResponseHandler:pn(nz),abortSignal:d,fetch:this.config.fetch});return{images:S.data.map(j=>j.b64_json),warnings:b,response:{timestamp:_,modelId:this.modelId,headers:k}}}},nz=C({data:ge(C({b64_json:w()}))}),rz="1.0.28";function az(e){const t=tu(e.baseURL),r=e.name,a={...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers},s=()=>Na(a,`ai-sdk/openai-compatible/${rz}`),l=x=>({provider:`${r}.${x}`,url:({path:b})=>{const _=new URL(`${t}${b}`);return e.queryParams&&(_.search=new URLSearchParams(e.queryParams).toString()),_.toString()},headers:s,fetch:e.fetch}),c=x=>d(x),d=x=>new HD(x,{...l("chat"),includeUsage:e.includeUsage,supportsStructuredOutputs:e.supportsStructuredOutputs}),f=x=>new XD(x,{...l("completion"),includeUsage:e.includeUsage}),p=x=>new WD(x,{...l("embedding")}),y=x=>new tz(x,l("image")),v=x=>c(x);return v.languageModel=c,v.chatModel=d,v.completionModel=f,v.textEmbeddingModel=p,v.imageModel=y,v}const nu={openai:{models:"https://api.openai.com/v1/models"},anthropic:{models:"https://api.anthropic.com/v1/models"},google:{models:"https://generativelanguage.googleapis.com/v1/models"},ollama:{models:"/api/tags",version:"/api/version"}};function iz(e,t,r,a){switch(e){case"openai":return PS({apiKey:t})(r);case"anthropic":return GS({apiKey:t})(r);case"google":return KS({apiKey:t})(r);case"ollama":return az({name:"ollama",baseURL:a||"http://localhost:11434/v1"}).chatModel(r);default:{const s=e;throw new Error(`Unknown provider: ${String(s)}`)}}}async function sz(e="http://localhost:11434"){try{return(await fetch(`${e}${nu.ollama.version}`,{method:"GET",signal:AbortSignal.timeout(3e3)})).ok}catch{return!1}}async function oz(e,t,r){switch(e){case"openai":return lz(t);case"anthropic":return uz(t);case"google":return cz(t);case"ollama":return dz(r||"http://localhost:11434");default:{const a=e;throw new Error(`Unknown provider: ${String(a)}`)}}}async function lz(e){const t=await fetch(nu.openai.models,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error(`OpenAI API error: ${t.status}`);return(await t.json()).data.filter(s=>s.id.includes("gpt")||s.id.includes("o1")||s.id.includes("o3")).sort((s,l)=>s.id.localeCompare(l.id)).map(s=>({id:s.id,name:s.id,description:s.owned_by,provider:"openai"}))}async function uz(e){try{const t=await fetch(nu.anthropic.models,{headers:{"x-api-key":e,"anthropic-version":"2023-06-01"}});if(!t.ok)throw new Error(`Anthropic API error: ${t.status}`);return(await t.json()).data.map(a=>({id:a.id,name:a.display_name||a.id,description:a.type,provider:"anthropic"}))}catch{return[{id:"claude-sonnet-4-20250514",name:"Claude Sonnet 4",provider:"anthropic"},{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",provider:"anthropic"},{id:"claude-3-5-haiku-20241022",name:"Claude 3.5 Haiku",provider:"anthropic"},{id:"claude-3-opus-20240229",name:"Claude 3 Opus",provider:"anthropic"}]}}async function cz(e){const t=`${nu.google.models}?key=${e}`,r=await fetch(t);if(!r.ok)throw new Error(`Google API error: ${r.status}`);return(await r.json()).models.filter(l=>l.supportedGenerationMethods?.includes("generateContent")).map(l=>({id:l.name.replace("models/",""),name:l.displayName,description:l.description,provider:"google"}))}async function dz(e){const t=await fetch(`${e}${nu.ollama.models}`);if(!t.ok)throw new Error(`Ollama API error: ${t.status}`);return(await t.json()).models.map(a=>({id:a.name,name:a.name,description:`${(a.size/1e9).toFixed(1)}GB`,provider:"ollama"}))}function fz(e){const t={};for(const r of e)t[r.name]={description:r.description,inputSchema:r.inputSchema};return t}function pz(e){const t=[];for(const r of e)if(r.role==="system")t.push({role:"system",content:r.content});else if(r.role==="user")t.push({role:"user",content:r.content});else if(r.role==="assistant")if(r.toolCalls&&r.toolCalls.length>0){const a=[];r.content&&a.push({type:"text",text:r.content});for(const s of r.toolCalls)a.push({type:"tool-call",toolCallId:s.id,toolName:s.name,input:s.arguments});if(a.length>0&&t.push({role:"assistant",content:a}),r.toolResults&&r.toolResults.length>0){const s=[];for(const l of r.toolResults){const c=r.toolCalls.find(f=>f.id===l.toolCallId);let d;try{d={type:"json",value:JSON.parse(l.result)}}catch{d={type:"text",value:l.result}}s.push({type:"tool-result",toolCallId:l.toolCallId,toolName:c?.name||"unknown",output:d})}t.push({role:"tool",content:s})}}else t.push({role:"assistant",content:r.content});return Be.debug(`[AI Chat] Converted ${e.length} messages to ${t.length} AI SDK messages`,t.map(r=>{const a=r;return{role:a.role,contentType:Array.isArray(a.content)?"array":typeof a.content,contentLength:Array.isArray(a.content)?a.content.length:String(a.content).length}})),t}async function ek(e,t,r,a,s,l){Be.debug(`[AI Chat] Sending message to ${e}/${r}`,{messageCount:a.length,hasTools:!!l?.tools,toolCount:l?.tools?.length??0});const c=iz(e,t,r,s),d=pz(a),f=l?.tools?fz(l.tools):void 0,p=await e6({model:c,messages:d,maxOutputTokens:4096,tools:f}),y=p.toolCalls?.map(_=>({id:_.toolCallId,name:_.toolName,arguments:_.input??{}}))||[];let v="end_turn";p.finishReason==="tool-calls"?v="tool_use":p.finishReason==="length"?v="max_tokens":p.finishReason==="stop"&&(v="stop");const x=p.usage?{promptTokens:p.usage.inputTokens??0,completionTokens:p.usage.outputTokens??0,totalTokens:(p.usage.inputTokens??0)+(p.usage.outputTokens??0)}:void 0,b={content:p.text,model:r,usage:x,toolCalls:y.length>0?y:void 0,stopReason:v};return Be.debug("[AI Chat] Response received",{contentLength:p.text.length,toolCallCount:y.length,stopReason:v,usage:x}),y.length>0&&Be.info("[AI Chat] Tool calls requested:",y.map(_=>_.name)),b}const tk=`## Speech-Friendly Responses
Your responses will be read aloud by text-to-speech. Write naturally for spoken delivery:
- Use conversational language that flows well when spoken
- Avoid excessive punctuation, special characters, or symbols that sound awkward
- Spell out abbreviations (say "for example" not "e.g.")
- Use natural contractions (I'll, you're, that's)
- Keep sentences moderate length - not too long or complex
- Avoid markdown formatting in conversational parts
- Lists are fine but keep items brief and speakable`,hz=`## Field Ranges
Fields have range specifications that define valid values:
- "string" - any text
- "boolean" - true/false
- "integer" - whole numbers
- "integer(1..100)" - numbers in a range
- "opt1||opt2||opt3" - specific options only
- "string[]" - array of strings`,mz=`You are Guido, a helpful AI assistant for configuring application settings. You help users configure their software using a template-based system.

## Your Capabilities
You can read and modify configuration fields, create rules for conditional configuration, help users understand their options, provide documentation about Guido, and search/load templates from registries.

## Guidelines
1. **When users ask about Guido features or how to use it**: Use the help tool first to get accurate documentation
2. **When users ask to find/search templates**: Use the registry search tool to find available templates
3. **When users want to load a template**: First search registries to find it, then load from registry
4. Always search/list fields before trying to modify them to get exact names
5. Explain what you're doing and why
6. Validate values match the field's range specification
7. When creating rules, explain the conditional logic clearly
8. Be concise but helpful

${tk}

${hz}

You are friendly, knowledgeable, and focused on helping users configure their settings correctly.`,gz=`You are Guido, a friendly AI helper for configuring settings. You make configuration easy for beginners!

## What You Can Do
- Help users find and change settings
- Search for and load configuration templates
- Explain settings in simple terms
- Answer questions about how to use Guido

## Guidelines
1. Use simple, non-technical language
2. Explain what each setting does before changing it
3. Always confirm what the user wants before making changes
4. If unsure, use the help tool to get beginner-friendly documentation
5. Avoid mentioning rules, rulesets, or advanced features unless asked
6. Be encouraging and supportive

${tk}

You are Guido - friendly, helpful, and here to make configuration easy!`;function yz(e){return`## Available Tools
${e.map(r=>`- **${r.name}**: ${r.description}`).join(`
`)}`}function nk(e,t,r){let s=e?mz:gz;if(r&&r.length>0&&(s+=`

`+yz(r)),t){const l=`

## Current Template Context
- **Name**: ${t.name||"Untitled"}
- **File**: ${t.fileName||"Not saved"}
${t.version?`- **Version**: ${t.version}`:""}
${t.description?`- **Description**: ${t.description}`:""}
${t.owner?`- **Owner**: ${t.owner}`:""}
${t.application?`- **Application**: ${t.application}`:""}
- **Fields**: ${t.fieldCount} configuration fields
- **Rules**: ${t.ruleCount} conditional rules
`;s+=l}return s}const vz=He(Ye),jm=Qe([w(),Z(),it(),ge(w()),ge(Z())]),Qs=C({name:w(),state:vz,value:w().optional(),not:it().optional()}),rk=C({conditions:ge(Qs).optional(),targets:ge(Qs),description:w().optional()}),bz=C({conditions:ge(Qs).optional(),targets:ge(Qs).optional(),description:w().optional()}),xz=C({name:w(),description:w(),tags:ge(w()),rules:ge(rk),extends:w().optional()}),Om=C({name:w(),value:jm,info:w(),example:w(),range:w(),link:w().optional(),checked:it().optional()}),I_=C({name:w(),value:jm.optional(),checked:it().optional()});C({name:w(),fileName:w(),version:w(),description:w(),owner:w(),application:w().optional(),docs:w().optional(),command:w().optional(),fields:ge(Om),ruleSets:ge(xz)});const _z=He(["string","boolean","integer","url"]);He(["scalar","array","enum","enum-array","pattern"]);const wz=C({rangeType:Q("scalar"),dataType:_z,min:Z().optional(),max:Z().optional()}),Sz=C({rangeType:Q("array"),itemType:He(["string","integer"]),minSize:Z().optional(),maxSize:Z().optional()}),kz=C({rangeType:Q("enum"),options:ge(w())}),Tz=C({rangeType:Q("enum-array"),options:ge(w()),minSize:Z().optional(),maxSize:Z().optional()}),Ez=C({rangeType:Q("pattern"),regex:w()});yt("rangeType",[wz,Sz,kz,Tz,Ez]);const Nz=Om.extend({fields:vm(()=>ge(Nz)).optional(),type:w().optional(),options:ge(w()).optional()}),Az=[{name:"get_template_info",title:"Get Template Info",description:"Get metadata about the guido template (name, version, description, etc.)",category:"template",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"}}},{name:"create_template",title:"Create Template",description:"Create a new guido template file. Use this to start a fresh template when no template exists.",category:"template",inputs:{filePath:{type:"string",required:!0,description:"Path where the new template file will be created"},name:{type:"string",required:!0,description:'Template name (e.g., "My App Settings")'},version:{type:"string",required:!1,description:'Template version (default: "1.0.0")'},description:{type:"string",required:!1,description:"Template description"},owner:{type:"string",required:!1,description:"Template owner/author"},application:{type:"string",required:!1,description:"Target application name"}},mutates:!0},{name:"set_template",title:"Set Active Template",description:"Set the active template file for subsequent operations. Use this to switch between templates or when starting without a --template argument.",category:"template",inputs:{filePath:{type:"string",required:!0,description:"Path to an existing guido.json template file"}},mutates:!1},{name:"merge_templates",title:"Merge Templates",description:"Merge another template into the current template. Fields from the source template override existing fields with the same name. Rules are combined, avoiding duplicates by description. Metadata from source takes priority if it exists.",category:"template",inputs:{filePath:{type:"string",required:!1,description:"Path to the target guido.json template file (current active template if not provided)"},sourceTemplatePath:{type:"string",required:!0,description:"Path to the source template to merge from"}},mutates:!0},{name:"fetch_template_docs",title:"Fetch Template Docs",description:"Fetch the documentation for the current template from its configured docs URL. Returns the documentation content as text. Only works if the template has a docs URL configured.",category:"template",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"}}},{name:"fetch_field_docs",title:"Fetch Field Docs",description:"Fetch the documentation for a specific field from its configured link URL. Returns the documentation content as text. Only works if the field has a link configured.",category:"field",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},name:{type:"string",required:!0,description:"The field name to fetch documentation for"}}},{name:"list_fields",title:"List Fields",description:"List all fields in the template with optional filtering",category:"field",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},filter:{type:"string",required:!1,description:"Filter fields by name (substring match)"},onlyChecked:{type:"boolean",required:!1,description:"Only return checked fields"},limit:{type:"number",required:!1,description:"Maximum number of fields to return"}}},{name:"get_field",title:"Get Field",description:"Get detailed information about a specific field by name",category:"field",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},name:{type:"string",required:!0,description:"The field name to retrieve"}}},{name:"set_field",title:"Set Field",description:"Update a field value, checked status, and/or metadata (example, info, range, link). Rules are automatically applied.",category:"field",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},name:{type:"string",required:!0,description:"The field name to update"},value:{type:"FieldValue",required:!1,description:"New value for the field"},checked:{type:"boolean",required:!1,description:"Whether the field is checked/enabled"},example:{type:"string",required:!1,description:"Example value for the field"},info:{type:"string",required:!1,description:"Description/help text for the field"},range:{type:"string",required:!1,description:'Validation range (e.g., "string", "boolean", "1..100")'},link:{type:"string",required:!1,description:"Documentation link for the field"}},mutates:!0},{name:"set_fields",title:"Set Multiple Fields",description:"Update multiple fields at once. Rules are applied after all changes.",category:"field",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},updates:{type:"FieldUpdate[]",required:!0,description:"Array of field updates"}},mutates:!0},{name:"add_field",title:"Add Field",description:"Add a new field to the template",category:"field",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},field:{type:"Field",required:!0,description:"The field to add"},insertAfter:{type:"string",required:!1,description:"Insert after this field name"}},mutates:!0},{name:"delete_field",title:"Delete Field",description:"Delete a field from the template",category:"field",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},name:{type:"string",required:!0,description:"The field name to delete"},deleteRelatedRules:{type:"boolean",required:!1,description:"Also delete rules referencing this field"}},mutates:!0},{name:"list_rules",title:"List Rules",description:"List all rules in a ruleset with optional filtering. Use includeInherited to see rules from parent rulesets.",category:"rule",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},ruleSetIndex:{type:"number",required:!1,description:"Index of ruleset (default: 0)"},filter:{type:"string",required:!1,description:"Filter by field name in conditions/targets"},includeInherited:{type:"boolean",required:!1,description:"Include rules inherited from parent rulesets via extends (default: false)"}}},{name:"get_rule",title:"Get Rule",description:"Get detailed information about a specific rule by its 1-based rule number",category:"rule",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},ruleSetIndex:{type:"number",required:!1,description:"Index of ruleset (default: 0)"},ruleNumber:{type:"number",required:!0,description:"The rule number (1-based, as shown in validation messages and list_rules)"}}},{name:"add_rule",title:"Add Rule",description:"Add a new rule to a ruleset",category:"rule",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},ruleSetIndex:{type:"number",required:!1,description:"Index of ruleset (default: 0)"},conditions:{type:"RuleDomain[]",required:!1,description:"Rule conditions"},targets:{type:"RuleDomain[]",required:!0,description:"Rule targets"},description:{type:"string",required:!1,description:"Human-readable description"},validate:{type:"boolean",required:!1,description:"Validate rules after adding (default: true)"}},mutates:!0},{name:"update_rule",title:"Update Rule",description:"Update an existing rule by its 1-based rule number",category:"rule",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},ruleSetIndex:{type:"number",required:!1,description:"Index of ruleset (default: 0)"},ruleNumber:{type:"number",required:!0,description:"The rule number to update (1-based, as shown in validation messages and list_rules)"},conditions:{type:"RuleDomain[]",required:!1,description:"New conditions (replaces existing)"},targets:{type:"RuleDomain[]",required:!1,description:"New targets (replaces existing)"},description:{type:"string",required:!1,description:"New description"},validate:{type:"boolean",required:!1,description:"Validate rules after updating (default: true)"}},mutates:!0},{name:"delete_rule",title:"Delete Rule",description:"Delete a rule from a ruleset by its 1-based rule number",category:"rule",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},ruleSetIndex:{type:"number",required:!1,description:"Index of ruleset (default: 0)"},ruleNumber:{type:"number",required:!0,description:"The rule number to delete (1-based, as shown in validation messages and list_rules)"}},mutates:!0},{name:"merge_rules",title:"Merge Rules",description:"Safely merge rules that have identical conditions into a single rule. Only merges rules flagged as mergeable by validate_rules. The merged rule combines all targets from the source rules.",category:"rule",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},ruleSetIndex:{type:"number",required:!1,description:"Index of ruleset (default: 0)"},ruleNumbers:{type:"number[]",required:!0,description:"Array of rule numbers (1-based) to merge. Must be at least 2 rules with identical conditions."},newDescription:{type:"string",required:!1,description:"Optional description for the merged rule. If not provided, combines descriptions from source rules."}},mutates:!0},{name:"list_rulesets",title:"List RuleSets",description:"List all rulesets in the template with their metadata",category:"rule",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"}}},{name:"add_ruleset",title:"Add RuleSet",description:"Add a new ruleset to the template",category:"rule",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},name:{type:"string",required:!0,description:"RuleSet name"},description:{type:"string",required:!1,description:"RuleSet description"},tags:{type:"string[]",required:!1,description:"Tags for categorizing the ruleset"},extends:{type:"string",required:!1,description:"Name of another ruleset to inherit rules from"}},mutates:!0},{name:"update_ruleset",title:"Update RuleSet",description:"Update a ruleset's metadata (name, description, tags, extends)",category:"rule",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},index:{type:"number",required:!0,description:"Index of the ruleset to update"},name:{type:"string",required:!1,description:"New name for the ruleset"},description:{type:"string",required:!1,description:"New description"},tags:{type:"string[]",required:!1,description:"New tags (replaces existing)"},extends:{type:"string",required:!1,description:"Name of another ruleset to inherit rules from (set to empty string to remove)"}},mutates:!0},{name:"delete_ruleset",title:"Delete RuleSet",description:"Delete an entire ruleset and all its rules",category:"rule",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},index:{type:"number",required:!0,description:"Index of the ruleset to delete"}},mutates:!0},{name:"validate_rules",title:"Validate Rules",description:"Check all rules for contradictions, cycles, and invalid references",category:"validation",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},ruleSetIndex:{type:"number",required:!1,description:"Index of ruleset to validate (default: all)"}}},{name:"validate_fields",title:"Validate Fields",description:"Validate all field values against their range specifications",category:"validation",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},onlyChecked:{type:"boolean",required:!1,description:"Only validate checked fields"}}},{name:"validate_field",title:"Validate Single Field",description:"Validate a single field value against its range specification",category:"validation",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},name:{type:"string",required:!0,description:"The field name to validate"},value:{type:"FieldValue",required:!1,description:"Value to validate (uses current value if not provided)"}}},{name:"validate_template",title:"Validate Template",description:"Comprehensive template validation: structure, metadata, fields, and rules",category:"validation",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"}}},{name:"validate_settings",title:"Validate Settings",description:"Validate a settings file against the template - checks required fields and value constraints",category:"validation",inputs:{filePath:{type:"string",required:!1,description:"Path to the guido.json template file"},settingsPath:{type:"string",required:!0,description:"Path to settings file (.json, .yaml, .properties, .env)"},rulesetName:{type:"string",required:!1,description:"Use a specific ruleset by name"},rulesetTag:{type:"string",required:!1,description:"Use rulesets with a specific tag"},strict:{type:"boolean",required:!1,description:"Fail on warnings (extra fields not in template)"}}}];function Cz(e,t){let r;switch(e){case"string":r=w();break;case"number":r=Z();break;case"boolean":r=it();break;case"string[]":r=ge(w());break;case"number[]":r=ge(Z());break;case"FieldValue":r=jm;break;case"RuleDomain":r=Qs;break;case"RuleDomain[]":r=ge(Qs);break;case"Field":r=Om;break;case"FieldUpdate":r=I_;break;case"FieldUpdate[]":r=ge(I_);break;case"Rule":r=rk;break;case"RuleUpdate":r=bz;break;default:r=Fn()}return t?r:r.optional()}function Rz(e){const t={};for(const[r,a]of Object.entries(e))t[r]=Cz(a.type,a.required??!1).describe(a.description);return t}const jz=new Set(["get_fields","list_fields","get_rules","list_rules","add_rule","delete_rule","update_rule","translate_rule","translate_all_rules","parse_natural_rule","get_rulesets","list_rulesets","add_ruleset","update_ruleset","delete_ruleset","validate_rules","merge_rules"]),Oz={get_template_info:"get_template_info",list_fields:"get_fields",get_field:"get_field",set_field:"set_field",list_rules:"get_rules",add_rule:"add_rule",delete_rule:"delete_rule",list_rulesets:"get_rulesets",fetch_template_docs:"fetch_template_docs",fetch_field_docs:"fetch_field_docs"},Mz=new Set(["create_template","set_template","merge_templates","set_fields","add_field","delete_field","update_rule","add_ruleset","update_ruleset","delete_ruleset","merge_rules","validate_rules","validate_fields","validate_field","validate_template","validate_settings"]);function Iz(e,t){const r={...e.inputs};delete r.filePath;const a=C(Rz(r));return{name:t,description:e.description,expertOnly:jz.has(t),inputSchema:a}}const $z=[{name:"search_fields",description:"Search for fields by name, description, or example values. Use this to find relevant fields before modifying them.",inputSchema:C({query:w().describe("Search query to find in field names, descriptions, or examples")})},{name:"toggle_field",description:"Toggle a field's checked/enabled state. Checked fields are included in the output configuration.",inputSchema:C({name:w().describe("The exact name of the field to toggle"),checked:it().describe("The new checked state (true = enabled, false = disabled)")})},{name:"translate_rule",description:"Convert a rule (by index) to a human-readable description. Useful for understanding what a rule does.",expertOnly:!0,inputSchema:C({ruleIndex:Z().describe("The 0-based index of the rule to translate"),ruleSetIndex:Z().optional().describe("Index of the ruleset (default: current selected ruleset)")})},{name:"translate_all_rules",description:"Get human-readable descriptions for all rules in the template. Useful for understanding the full rule set.",expertOnly:!0,inputSchema:C({ruleSetIndex:Z().optional().describe("Index of the ruleset (default: current selected ruleset)")})},{name:"parse_natural_rule",description:'Parse a natural language description into a Guido rule. Example: "If Database.Type is SQLite, then Database.ConnectionString is required"',expertOnly:!0,inputSchema:C({text:w().describe("Natural language rule description to parse"),addToRuleSet:it().optional().describe("If true, add the parsed rule to the current ruleset (default: false, just returns the parsed rule)")})},{name:"get_help",description:"Fetch help documentation for Guido. Use this when users ask about how to use Guido, what features are available, or need guidance on configuration concepts. Returns markdown-formatted help content.",inputSchema:C({mode:He(["expert","simple"]).optional().describe('Which help mode to fetch. Use "expert" for comprehensive documentation with technical details, or "simple" for a quick-start guide. Default is "expert".')})},{name:"search_registries",description:"Search all enabled registries (GitHub, NPM, Simplifier, Built-in) for templates. Returns a list of available packages/templates that can be loaded.",inputSchema:C({query:w().describe("Search query to find templates/packages in the registries")})},{name:"load_template_from_registry",description:"Load a template from the registry search results. Use search_registries first to find available templates, then use this tool with the exact package name and source.",inputSchema:C({packageName:w().describe("The exact name of the package/template to load (from search_registries results)"),source:He(["github","npm","simplifier","builtIn","custom"]).describe("The registry source where the template was found"),version:w().optional().describe("Optional: specific version to load (defaults to latest)")})}];function Dz(){const e=[];for(const t of Az){const r=Oz[t.name];r&&!Mz.has(t.name)&&e.push(Iz(t,r))}return e.push(...$z),e}const Gh=Dz();function ak(e){return e?Gh:Gh.filter(t=>!t.expertOnly)}function zz(e){return typeof e=="object"&&e!==null&&"_asyncFetch"in e&&e._asyncFetch===!0}function Lz(e){return typeof e=="object"&&e!==null&&"_asyncRegistrySearch"in e&&e._asyncRegistrySearch===!0}function Uz(e){return typeof e=="object"&&e!==null&&"_asyncTemplateLoad"in e&&e._asyncTemplateLoad===!0}async function qz(e,t){const{name:r,arguments:a,id:s}=e;Be.debug(`[AI Tool] Executing tool: ${r}`,{toolCallId:s,args:a});try{const l=Pz(r,a,t);if(zz(l)){Be.debug(`[AI Tool] Fetching from URL: ${l.url}`);try{const d=await fetch(l.url);if(!d.ok)throw new Error(`Failed to fetch help: ${d.status} ${d.statusText}`);const f=await d.text();return Be.info(`[AI Tool] Tool ${r} fetched successfully`,{toolCallId:s,url:l.url,contentLength:f.length}),{toolCallId:s,result:JSON.stringify({mode:l.mode,content:f,source:l.url},null,2),isError:!1}}catch(d){const f=d instanceof Error?d.message:String(d);return Be.error(`[AI Tool] Tool ${r} fetch failed`,{toolCallId:s,url:l.url,error:f}),{toolCallId:s,result:`Error fetching help documentation: ${f}`,isError:!0}}}if(Lz(l)){Be.debug(`[AI Tool] Searching registries for: ${l.query}`);try{if(!t.searchRegistries)throw new Error("Registry search function not provided");const d=await t.searchRegistries(l.query);return Be.info("[AI Tool] Registry search completed",{toolCallId:s,query:l.query,resultCount:d.length}),{toolCallId:s,result:JSON.stringify({message:`Found ${d.length} result(s) for "${l.query}"`,results:d.map(f=>({name:f.name,description:f.description,source:f.source,registryName:f.registryName}))},null,2),isError:!1}}catch(d){const f=d instanceof Error?d.message:String(d);return Be.error("[AI Tool] Registry search failed",{toolCallId:s,query:l.query,error:f}),{toolCallId:s,result:`Error searching registries: ${f}`,isError:!0}}}if(Uz(l)){Be.debug(`[AI Tool] Loading template: ${l.packageName} from ${l.source}`);try{if(!t.loadTemplateFromRegistry)throw new Error("Template loading function not provided");const d=await t.loadTemplateFromRegistry(l.packageName,l.source,l.version);return Be.info("[AI Tool] Template load completed",{toolCallId:s,packageName:l.packageName,source:l.source,success:d.success}),{toolCallId:s,result:JSON.stringify(d,null,2),isError:!d.success}}catch(d){const f=d instanceof Error?d.message:String(d);return Be.error("[AI Tool] Template load failed",{toolCallId:s,packageName:l.packageName,source:l.source,error:f}),{toolCallId:s,result:`Error loading template: ${f}`,isError:!0}}}const c={toolCallId:s,result:typeof l=="string"?l:JSON.stringify(l,null,2),isError:!1};return Be.info(`[AI Tool] Tool ${r} completed successfully`,{toolCallId:s,resultLength:c.result.length}),c}catch(l){const c=l instanceof Error?l.message:String(l);return Be.error(`[AI Tool] Tool ${r} failed`,{toolCallId:s,error:c}),{toolCallId:s,result:`Error: ${c}`,isError:!0}}}async function ik(e,t){return Promise.all(e.map(r=>qz(r,t)))}function Pz(e,t,r){switch(e){case"get_fields":{let a=r.fields;if(t.filter&&typeof t.filter=="string"){const s=t.filter.toLowerCase();a=a.filter(l=>l.name.toLowerCase().includes(s))}return t.checkedOnly===!0&&(a=a.filter(s=>s.checked===!0)),a.map(s=>({name:s.name,value:s.value,info:s.info,checked:s.checked??!1,range:s.range}))}case"get_field":{const a=t.name,s=r.fields.find(l=>l.name===a);if(!s)throw new Error(`Field not found: "${a}". Use get_fields or search_fields to find valid field names.`);return{name:s.name,value:s.value,info:s.info,example:s.example,range:s.range,link:s.link,checked:s.checked??!1}}case"set_field":{const a=t.name,s=t.value,l=r.fields.findIndex(f=>f.name===a);if(l===-1)throw new Error(`Field not found: "${a}". Use get_fields or search_fields to find valid field names.`);const c=r.fields[l];let d;try{const f=JSON.parse(s);Array.isArray(f)||typeof f=="boolean"||typeof f=="number"?d=f:d=s}catch{d=s}return r.handleFieldChange?r.handleFieldChange(a,d,c.checked??!0,"set_field"):r.setFields(f=>f.map((p,y)=>y===l?{...p,value:d}:p)),{success:!0,message:`Set "${a}" to: ${JSON.stringify(d)}`,previousValue:c.value,newValue:d}}case"toggle_field":{const a=t.name,s=t.checked,l=r.fields.findIndex(d=>d.name===a);if(l===-1)throw new Error(`Field not found: "${a}"`);const c=r.fields[l];return r.handleFieldChange?r.handleFieldChange(a,c.value,s,"toggle_field"):r.setFields(d=>d.map((f,p)=>p===l?{...f,checked:s}:f)),{success:!0,message:`${s?"Enabled":"Disabled"} field "${a}"`}}case"search_fields":{const a=t.query.toLowerCase(),s=r.fields.filter(l=>l.name.toLowerCase().includes(a)||l.info.toLowerCase().includes(a)||l.example.toLowerCase().includes(a));return s.length===0?{message:`No fields found matching "${a}"`,results:[]}:{message:`Found ${s.length} field(s) matching "${a}"`,results:s.map(l=>({name:l.name,info:l.info,value:l.value,checked:l.checked??!1}))}}case"get_rules":{const a=t.ruleSetIndex??r.selectedRuleSetIndex,s=r.ruleSets[a];if(!s)throw new Error(`RuleSet at index ${a} not found. Use get_rulesets to see available rulesets.`);return{ruleSetName:s.name,ruleSetDescription:s.description,rules:s.rules.map((l,c)=>({index:c,description:l.description,conditions:l.conditions,targets:l.targets}))}}case"add_rule":{const a=t.ruleSetIndex??r.selectedRuleSetIndex,s=t.description,l=t.conditions,c=t.targets;if(!r.ruleSets[a])throw new Error(`RuleSet at index ${a} not found.`);const d=l?.map(y=>({name:y.name,state:y.state,value:y.value,not:y.not})),f=c.map(y=>({name:y.name,state:y.state,value:y.value})),p={description:s,conditions:d,targets:f};return r.setRuleSets(y=>y.map((v,x)=>x===a?{...v,rules:[...v.rules,p]}:v)),{success:!0,message:`Added rule: "${s}"`,ruleIndex:r.ruleSets[a].rules.length}}case"delete_rule":{const a=t.ruleSetIndex??r.selectedRuleSetIndex,s=t.ruleIndex,l=r.ruleSets[a];if(!l)throw new Error(`RuleSet at index ${a} not found.`);if(s<0||s>=l.rules.length)throw new Error(`Rule index ${s} is out of bounds. RuleSet has ${l.rules.length} rules.`);const c=l.rules[s];return r.setRuleSets(d=>d.map((f,p)=>p===a?{...f,rules:f.rules.filter((y,v)=>v!==s)}:f)),{success:!0,message:`Deleted rule at index ${s}: "${c.description||"No description"}"`}}case"translate_rule":{const a=t.ruleSetIndex??r.selectedRuleSetIndex,s=t.ruleIndex,l=r.ruleSets[a];if(!l)throw new Error(`RuleSet at index ${a} not found.`);if(s<0||s>=l.rules.length)throw new Error(`Rule index ${s} is out of bounds. RuleSet has ${l.rules.length} rules.`);const c=l.rules[s],d=Sa(c);return{index:s,humanReadable:d,description:c.description,rule:c}}case"translate_all_rules":{const a=t.ruleSetIndex??r.selectedRuleSetIndex,s=r.ruleSets[a];if(!s)throw new Error(`RuleSet at index ${a} not found.`);return{ruleSetName:s.name,ruleCount:s.rules.length,translations:s.rules.map((l,c)=>({index:c,description:l.description,humanReadable:Sa(l)}))}}case"parse_natural_rule":{const a=t.text,s=t.addToRuleSet??!1,l=r.fields.map(f=>f.name),c=jA(a,l);if(!c)return{success:!1,error:`Could not parse the natural language rule. Try formats like:
- "If FieldA is set, then FieldB is required"
- "When Database.Type is SQLite, Database.ConnectionString must be set"
- "If Logging.Enabled, then Logging.Level is required to be set to Debug"`};const d=Sa(c);if(s){const f=r.selectedRuleSetIndex;return r.setRuleSets(p=>p.map((y,v)=>v===f?{...y,rules:[...y.rules,c]}:y)),{success:!0,message:"Parsed and added rule to ruleset",parsedRule:c,humanReadable:d,addedToRuleSet:!0,ruleSetIndex:f}}return{success:!0,parsedRule:c,humanReadable:d,addedToRuleSet:!1}}case"get_template_info":return{name:r.template.name,fileName:r.template.fileName,version:r.template.version,description:r.template.description,owner:r.template.owner,application:r.template.application,docs:r.template.docs,fieldCount:r.fields.length,ruleSetCount:r.ruleSets.length,checkedFieldCount:r.fields.filter(a=>a.checked).length};case"get_rulesets":return r.ruleSets.map((a,s)=>({index:s,name:a.name,description:a.description,tags:a.tags,ruleCount:a.rules.length,isSelected:s===r.selectedRuleSetIndex}));case"get_help":{const a=t.mode==="simple"?"simple":"expert",s=a==="simple"?"HELP.simple.md":"HELP.md";return{_asyncFetch:!0,url:`${window.location.origin}/Guido${s}`,mode:a}}case"fetch_template_docs":{const a=r.template.docs;return a?{_asyncFetch:!0,url:a,mode:"template_docs"}:{success:!1,error:'This template does not have a documentation URL configured. The "docs" field is not set in the template metadata.'}}case"fetch_field_docs":{const a=t.fieldName,s=r.fields.find(l=>l.name===a);return s?s.link?{_asyncFetch:!0,url:s.link,mode:"field_docs",fieldName:a}:{success:!1,error:`Field "${a}" does not have a documentation link configured.`,field:{name:s.name,info:s.info,example:s.example}}:{success:!1,error:`Field "${a}" not found in the template.`}}case"search_registries":{const a=t.query;if(!r.searchRegistries)throw new Error("Registry search is not available. The registry hook was not provided to the tool context.");return{_asyncRegistrySearch:!0,query:a}}case"load_template_from_registry":{const a=t.packageName,s=t.source,l=t.version;if(!r.loadTemplateFromRegistry)throw new Error("Template loading is not available. The registry hook was not provided to the tool context.");return{_asyncTemplateLoad:!0,packageName:a,source:s,version:l}}default:throw new Error(`Unknown tool: "${e}". Available tools: ${Gh.map(a=>a.name).join(", ")}`)}}function Bz(){const{config:e,chatPhase:t,setChatPhase:r,setCurrentToolName:a,setChatResponse:s,addChatHistoryItem:l,sessionMessages:c,setSessionMessages:d,speakResponse:f,cancelSpeech:p,speechEnabled:y,setSpeechEnabled:v,isSpeaking:x,speechRate:b,setSpeechRate:_,speechVolume:S,setSpeechVolume:k}=Fi(),[j,R]=U.useState(""),[E,q]=U.useState(!1),[P,H]=U.useState(!1),I=U.useRef(null),A=U.useRef(null),O=U.useRef(null),{handleFieldChange:M}=Ws(),{template:F,fields:Y,setFields:ae,ruleSets:ee,setRuleSets:de,selectedRuleSetIndex:J,updateTemplate:te}=er(),{searchAllRegistries:he,fetchPackageTemplates:ve,searchResults:se}=eo(),{isExpertMode:N}=Pr();U.useEffect(()=>{const ne=window.SpeechRecognition||window.webkitSpeechRecognition;return ne&&(A.current=new ne,A.current.continuous=!1,A.current.interimResults=!0,A.current.lang="en-US",A.current.onresult=le=>{const Se=Array.from({length:le.results.length},(Ae,Te)=>le.results[Te]).map(Ae=>Ae[0].transcript).join("");R(Se)},A.current.onend=()=>{q(!1)},A.current.onerror=()=>{q(!1)}),()=>{A.current&&A.current.abort()}},[]);const L=U.useCallback(()=>{A.current&&(E?(A.current.stop(),q(!1)):(A.current.start(),q(!0)))},[E]),V=U.useCallback(async()=>{if(!j.trim()||t!=="idle"&&t!=="done"||!e)return;const ne=j.trim();R(""),I.current&&(I.current.style.height="auto"),r("thinking"),s("");const le={name:F.name,fileName:F.fileName,version:F.version,description:F.description,owner:F.owner,application:F.application,fieldCount:Y.length,ruleCount:ee.reduce((Oe,Me)=>Oe+Me.rules.length,0)},Se=ak(N),Ae=[{role:"system",content:nk(N,le,Se)},...c,{role:"user",content:ne}],Te={template:{name:F.name,fileName:F.fileName||"",version:F.version,description:F.description,owner:F.owner,application:F.application,docs:F.docs},fields:Y,setFields:ae,handleFieldChange:M,ruleSets:ee,setRuleSets:de,selectedRuleSetIndex:J,searchRegistries:async Oe=>(await he(Oe),new Promise(Me=>{setTimeout(()=>{Me(se.map(Re=>({name:Re.name,description:Re.description||"",source:Re.source,registryName:Re.registryName,downloadUrl:Re.downloadUrl})))},500)})),loadTemplateFromRegistry:async(Oe,Me,Re)=>{try{const Ue=se.find(nt=>nt.name===Oe&&nt.source===Me);if(!Ue)return{success:!1,message:`Template "${Oe}" not found. Please search for it first using search_registries.`};const wt=await ve(Ue,Re);if(wt.length===0)return{success:!1,message:"No templates found in the package."};const Pe=wt[0];return te(Pe),{success:!0,message:`Successfully loaded template: ${Pe.name}`,templateName:Pe.name}}catch(Ue){return{success:!1,message:`Failed to load template: ${Ue instanceof Error?Ue.message:String(Ue)}`}}}},$e=[];try{let Oe=!0;const Me=[...Ae];for(;Oe;){const Re=await ek(e.provider,e.apiKey,e.model,Me,e.baseUrl,{tools:Se});if(Re.toolCalls&&Re.toolCalls.length>0){Me.push({role:"assistant",content:Re.content,toolCalls:Re.toolCalls});const Ue=[];for(const Pe of Re.toolCalls){r("tool-calling"),a(Pe.name),$e.push(Pe.name),await new Promise(tn=>setTimeout(tn,100));const[nt]=await ik([Pe],Te);Ue.push(nt)}const wt=Me[Me.length-1];wt.role==="assistant"&&(wt.toolResults=Ue)}else{Oe=!1,a(null),s(Re.content),r("done"),f(Re.content),Me.push({role:"assistant",content:Re.content});const Ue=Me.slice(1);d(Ue),l({userMessage:ne,assistantResponse:Re.content,toolsUsed:$e.length>0?[...new Set($e)]:void 0})}}}catch(Oe){console.error("Chat error:",Oe);const Me="Sorry, something went wrong. Please try again.";s(Me),r("done"),l({userMessage:ne,assistantResponse:Me,toolsUsed:$e.length>0?[...new Set($e)]:void 0})}},[j,t,e,F,Y,ae,M,ee,de,J,r,a,s,l,c,d,he,se,ve,te,N,f]),G=U.useCallback(ne=>{ne.key==="Enter"&&!ne.shiftKey&&(ne.preventDefault(),V())},[V]),X=t==="thinking"||t==="tool-calling",D=j.trim()&&!X;return h.jsx("div",{className:"space-y-2",children:h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx("div",{className:"flex-1 relative",children:h.jsx("textarea",{ref:I,value:j,onChange:ne=>{R(ne.target.value),ne.target.style.height="auto";const le=Math.min(ne.target.scrollHeight,150);ne.target.style.height=`${le}px`,ne.target.style.overflowY=ne.target.scrollHeight>150?"auto":"hidden"},onKeyDown:G,placeholder:X?"Thinking...":"Ask Guido anything...",disabled:X,rows:1,className:"w-full bg-surface-1 border border-strong rounded-lg px-3 py-2 text-sm text-text-primary placeholder:text-text-tertiary outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-500/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed resize-none overflow-hidden",style:{maxHeight:"150px"}})}),h.jsx("button",{onClick:L,disabled:X,className:`w-9 h-9 rounded-lg flex items-center justify-center transition-all text-sm
            ${E?"bg-danger-100 dark:bg-danger-900/30 border border-danger-500 text-danger-500 animate-pulse":"bg-surface-1 border border-strong text-text-secondary hover:border-primary-500 hover:text-primary-500"} disabled:opacity-50 disabled:cursor-not-allowed`,title:E?"Stop listening":"Start voice input",children:""}),h.jsxs("div",{className:"relative",onMouseEnter:()=>{O.current&&clearTimeout(O.current),O.current=setTimeout(()=>{H(!0)},600)},onMouseLeave:()=>{O.current&&(clearTimeout(O.current),O.current=null),O.current=setTimeout(()=>{H(!1)},300)},children:[h.jsx("button",{onClick:()=>{x?p():v(!y)},className:`w-9 h-9 rounded-lg flex items-center justify-center transition-all text-sm
              ${x?"bg-primary-500 text-white animate-pulse":y?"bg-primary-100 dark:bg-primary-900/30 border border-primary-500 text-primary-500":"bg-surface-1 border border-strong text-text-tertiary hover:border-primary-500 hover:text-primary-500"}`,title:x?"Stop speaking":y?"Disable voice output":"Enable voice output",children:x||y?"":""}),P&&h.jsxs("div",{className:"absolute bottom-full right-0 mb-2 p-3 bg-surface-1 border border-strong rounded-lg shadow-lg min-w-[200px] z-50",children:[h.jsx("div",{className:"text-xs font-medium text-text-secondary mb-3",children:"Voice Settings"}),x&&h.jsx("div",{className:"text-xs text-text-tertiary mb-3 italic",children:"Changes apply to next response"}),h.jsxs("div",{className:"mb-3",children:[h.jsxs("div",{className:"flex justify-between text-xs text-text-tertiary mb-1",children:[h.jsx("span",{children:"Speed"}),h.jsxs("span",{children:[b.toFixed(1),"x"]})]}),h.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:b,onChange:ne=>_(parseFloat(ne.target.value)),className:"w-full h-2 bg-surface-2 rounded-lg appearance-none cursor-pointer accent-primary-500"})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between text-xs text-text-tertiary mb-1",children:[h.jsx("span",{children:"Volume"}),h.jsxs("span",{children:[Math.round(S*100),"%"]})]}),h.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:S,onChange:ne=>k(parseFloat(ne.target.value)),className:"w-full h-2 bg-surface-2 rounded-lg appearance-none cursor-pointer accent-primary-500"})]})]})]}),h.jsx("button",{onClick:()=>void V(),disabled:!D,className:"w-9 h-9 rounded-lg flex items-center justify-center transition-all text-sm bg-primary-500 hover:bg-primary-600 text-white shadow-sm hover:shadow-md disabled:opacity-30 disabled:shadow-none disabled:cursor-not-allowed",title:"Send",children:h.jsx("svg",{className:"w-4 h-4 rotate-90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})}const $_=e=>{switch(e){case"github":return"GitHub";case"npm":return"NPM";case"simplifier":return"Simplifier";case"local":return" Local";case"custom":return"Custom";default:return e}},D_=e=>{switch(e){case"github":return"bg-surface-5 text-text-primary";case"npm":return"bg-red-600 text-white";case"simplifier":return"bg-blue-600 text-white";case"local":return"bg-green-600 text-white";case"custom":return"bg-purple-600 text-white";default:return"bg-surface-4 text-text-primary"}},Fz=({selectedPackage:e,packageVersions:t,packages:r,onSelectPackage:a,onSelectVersion:s})=>h.jsx("ul",{className:"max-h-64 overflow-y-auto border rounded shadow-md bg-surface-0 ",children:e?h.jsxs(h.Fragment,{children:[h.jsxs("li",{className:"border-b  p-2 font-bold text-text-primary flex justify-between items-center",children:[h.jsx("span",{children:e.name}),h.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${D_(e.source)}`,children:$_(e.source)})]}),t.length>0?t.sort((l,c)=>c.localeCompare(l,void 0,{numeric:!0,sensitivity:"base"})).map(l=>h.jsx("li",{className:"border-b  p-2 hover:bg-surface-hover cursor-pointer text-text-primary",onClick:()=>void s(l),children:l},`${e.name}-${l}`)):h.jsx("li",{className:"p-2 text-center text-text-disabled",children:"No versions available"})]}):r.length>0?h.jsx(h.Fragment,{children:r.map((l,c)=>h.jsxs("li",{className:"border-b  p-2 hover:bg-surface-hover cursor-pointer flex justify-between items-center",onClick:()=>void a(l),children:[h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("h3",{className:"font-bold text-text-primary truncate",children:[l.name,l.version&&` (${l.version})`]}),l.description&&h.jsx("p",{className:"text-gray-700  text-sm truncate",children:l.description})]}),h.jsx("span",{className:`text-xs px-2 py-0.5 rounded ml-2 flex-shrink-0 ${D_(l.source)}`,children:$_(l.source)})]},`${l.name}-${l.source}-${c}`))}):h.jsx("li",{className:"p-2 text-center text-text-disabled",children:"No results found"})}),Vz=({showAIChat:e=!0})=>{const[t,r]=U.useState(""),[a,s]=U.useState(!1),[l,c]=U.useState(void 0),[d,f]=U.useState([]),[p,y]=U.useState([]),[v,x]=U.useState(null),{isLoading:b,searchResults:_,searchAllRegistries:S,getPackageVersions:k,fetchPackageTemplates:j,extractFileFromTarball:R}=eo(),{alert:E,choice:q}=Ea(),{updateTemplate:P,template:H,isEmpty:I}=er(),{isConfigured:A}=Fi(),{secretSpaceMode:O}=Br(),M=U.useRef(null),F=U.useRef(null),Y=se=>{c(void 0),f([]),s(!1);const N=se.target.value;r(N)},ae=se=>{if(se.key==="Enter"){if(!t||t.length<1){s(!1);return}c(void 0),f([]),y([]),x(null),s(!0),S(t)}},ee=async se=>{if(se.source==="builtIn"){try{const L=await j(se);L.length===1?te(L[0]):L.length>1?(y(L),s(!0)):E("No template found")}catch(L){E("Failed to load built-in template: "+String(L))}return}c(se);const N=await k(se);f(N)},de=async se=>{if(l)try{s(!1),x(null);const N=await j(l,se);N.length>0?(s(!0),c(void 0),f([]),y(N)):E("No templates found for the selected version.")}catch(N){N instanceof Lc&&N.alternatives.length>0?(x({files:N.alternatives,tarball:N.tarballData,isRawContent:N.isRawContent}),s(!0),c(void 0),f([])):(E(`Failed to load templates. 
`+String(N)),c(void 0),f([]))}},J=async se=>{if(v)try{let N=null;if(se.downloadUrl){const V=await fetch(se.downloadUrl);V.ok&&(N=await V.text())}else N=await R(v.tarball,se.path,v.isRawContent);if(!N){E("Failed to extract file content");return}const L=KA(N,se.name);L?(P(L),E(`Imported settings from ${se.name}`),r(""),y([]),x(null),s(!1)):E("Failed to parse settings from the file")}catch(N){E("Failed to import file: "+String(N))}},te=se=>{if(I())P(se),r(""),y([]),s(!1);else{const N=H.name||"current template",L=se.name||"imported template";q(`Do you want to replace "${N}" with "${L}" or merge them?`,[{label:`Replace with "${L}"`,value:"replace",type:"primary"},{label:`Merge "${L}" into "${N}"`,value:"merge",type:"secondary"}],V=>{if(V==="replace")P(se);else if(V==="merge"){const G=e2(H,se);P(G)}r(""),y([]),s(!1)})}},he=()=>{t&&t.length>0&&s(!0)},ve=()=>{r(""),c(void 0),f([]),y([]),x(null)};return U.useEffect(()=>{const se=N=>{M.current&&!M.current.contains(N.target)&&F.current&&!F.current.contains(N.target)&&(s(!1),c(void 0),f([]))};return document.addEventListener("mousedown",se),()=>{document.removeEventListener("mousedown",se)}},[]),h.jsxs("div",{className:"relative rounded-default border p-4 bg-surface-0 space-y-4 mb-4",children:[A&&O&&e&&h.jsxs(h.Fragment,{children:[h.jsx(Bz,{}),h.jsx("div",{className:"border-t border-border"})]}),h.jsx(zC,{searchTerm:t,onSearchChange:Y,onClearSearch:ve,inputRef:M,onFocus:he,onKeyDown:ae}),b?h.jsx("div",{className:"loader",children:"Loading..."}):a&&h.jsx("ul",{ref:F,className:"absolute left-0 right-0 mt-2 bg-surface-0 border rounded shadow-lg z-10 max-h-80 overflow-y-auto",children:v&&v.files.length>0?h.jsxs(h.Fragment,{children:[h.jsxs("li",{className:"p-3 bg-surface-1 border-b text-text-secondary text-sm",children:[h.jsx("div",{className:"font-medium text-text-primary mb-1",children:"No Guido templates found"}),h.jsx("div",{children:"The following config files can be imported as settings:"})]}),v.files.map((se,N)=>h.jsxs("li",{className:"border-b p-2 hover:bg-surface-hover cursor-pointer text-text-primary flex items-center justify-between group",children:[h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:"font-medium truncate",children:se.name}),h.jsx("div",{className:"text-xs text-text-tertiary truncate",children:se.path})]}),h.jsx("button",{type:"button",onClick:()=>void J(se),className:"ml-2 p-1.5 hover:bg-primary-default hover:text-white rounded transition-colors",title:"Import as settings",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})})]},N))]}):p.length>0?p.map((se,N)=>h.jsx("li",{className:"border-b  p-2 hover:bg-surface-hover cursor-pointer text-text-primary",onClick:()=>te(se),children:se.name},N)):h.jsx(Fz,{selectedPackage:l,packageVersions:d,packages:_,onSelectPackage:ee,onSelectVersion:de})})]})};var Hz=a1();const io=({children:e})=>Hz.createPortal(e,document.body),sk=({edit:e,newField:t,setNewField:r,handleClose:a})=>{const{handleAddField:s,handleUpdateField:l}=Ws(),c=()=>{if(e){l(t),a();return}else s(t,()=>{a(),r({name:"",value:"",info:"",example:"",range:"",checked:!1})})};return h.jsx(io,{children:h.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",children:h.jsxs("div",{className:"bg-surface-0 p-8 rounded-default shadow-lg w-full max-w-xl max-h-[85vh] overflow-y-auto mx-4 border border-border",children:[h.jsxs("h2",{className:"text-xl font-bold mb-4 text-text-primary",children:[e?"Edit":"Add"," Field"]}),h.jsxs("label",{className:"block mb-2 text-text-primary",htmlFor:"field-name",children:["Name:",e?h.jsx("span",{className:"mt-1 block w-full px-3 py-2 border border-field-border bg-surface-2 rounded-default shadow-sm text-text-disabled",children:t.name}):h.jsxs(h.Fragment,{children:[h.jsx("input",{id:"field-name",name:"field-name",type:"text",value:t.name,onChange:d=>r({...t,name:d.target.value}),placeholder:"e.g., DatabaseType or Server.Port",className:"mt-1 block w-full px-3 py-2 border border-field-border rounded-default shadow-sm bg-surface-1 text-text-primary focus:outline-none focus:ring-1 focus:ring-primary-default focus:border-primary-default"}),h.jsxs("span",{className:"text-xs text-text-secondary mt-1 block",children:["Field identifier. Use dots for nested properties (e.g., ",h.jsx("code",{className:"bg-surface-2 px-1 rounded",children:"Logging.Level"}),")"]})]})]}),h.jsxs("label",{className:"block mb-2 text-text-primary",htmlFor:"field-value",children:["Value:",h.jsx("input",{id:"field-value",name:"field-value",type:"text",value:jh(t.value),onChange:d=>r({...t,value:d.target.value}),placeholder:"e.g., SQL or 8080",className:"mt-1 block w-full px-3 py-2 border border-field-border rounded-default shadow-sm bg-surface-1 text-text-primary focus:outline-none focus:ring-1 focus:ring-primary-default focus:border-primary-default"}),h.jsx("span",{className:"text-xs text-text-secondary mt-1 block",children:"Default or current value for this field"})]}),h.jsxs("label",{className:"block mb-2 text-text-primary",htmlFor:"field-info",children:["Info:",h.jsx("input",{id:"field-info",name:"field-info",type:"text",value:t.info,onChange:d=>r({...t,info:d.target.value}),placeholder:"Description of what this field does",className:"mt-1 block w-full px-3 py-2 border border-field-border rounded-default shadow-sm bg-surface-1 text-text-primary focus:outline-none focus:ring-1 focus:ring-primary-default focus:border-primary-default"}),h.jsx("span",{className:"text-xs text-text-secondary mt-1 block",children:"Description shown in tooltip ( icon)"})]}),h.jsxs("label",{className:"block mb-2 text-text-primary",htmlFor:"field-example",children:["Example:",h.jsx("input",{id:"field-example",name:"field-example",type:"text",value:t.example,onChange:d=>r({...t,example:d.target.value}),placeholder:"e.g., Server=localhost;Database=mydb;",className:"mt-1 block w-full px-3 py-2 border border-field-border rounded-default shadow-sm bg-surface-1 text-text-primary focus:outline-none focus:ring-1 focus:ring-primary-default focus:border-primary-default"}),h.jsx("span",{className:"text-xs text-text-secondary mt-1 block",children:"Example value shown in tooltip ( icon)"})]}),h.jsxs("label",{className:"block mb-2 text-text-primary",htmlFor:"field-range",children:["Range:",h.jsx("input",{id:"field-range",name:"field-range",type:"text",value:t.range,onChange:d=>r({...t,range:d.target.value}),placeholder:"string, boolean, integer, string[], opt1||opt2, or regex",className:"mt-1 block w-full px-3 py-2 border border-field-border rounded-default shadow-sm bg-surface-1 text-text-primary focus:outline-none focus:ring-1 focus:ring-primary-default focus:border-primary-default"}),h.jsxs("span",{className:"text-xs text-text-secondary mt-1 block",children:["Valid formats: ",h.jsx("code",{className:"bg-surface-2 px-1 rounded",children:"string"}),", ",h.jsx("code",{className:"bg-surface-2 px-1 rounded",children:"boolean"}),", ",h.jsx("code",{className:"bg-surface-2 px-1 rounded",children:"integer"}),", ",h.jsx("code",{className:"bg-surface-2 px-1 rounded",children:"integer(1..65535)"}),", ",h.jsx("code",{className:"bg-surface-2 px-1 rounded",children:"url"}),", ",h.jsx("code",{className:"bg-surface-2 px-1 rounded",children:"string[]"}),", ",h.jsx("code",{className:"bg-surface-2 px-1 rounded",children:"opt1||opt2||opt3"}),", or a regex pattern"]})]}),h.jsxs("label",{className:"block mb-2 text-text-primary",htmlFor:"field-link",children:["Link:",h.jsx("input",{id:"field-link",name:"field-link",type:"text",value:t.link,onChange:d=>r({...t,link:d.target.value}),placeholder:"https://docs.example.com/config",className:"mt-1 block w-full px-3 py-2 border border-field-border rounded-default shadow-sm bg-surface-1 text-text-primary focus:outline-none focus:ring-1 focus:ring-primary-default focus:border-primary-default"}),h.jsx("span",{className:"text-xs text-text-secondary mt-1 block",children:"URL to documentation. Clicking the  icon opens this link"})]}),h.jsxs("div",{className:"flex justify-end mt-4 gap-4",children:[h.jsx(Xe,{onClick:a,type:"primary-text",children:"Cancel"}),h.jsxs(Xe,{onClick:c,children:[e?"Update":"Add"," Field"]})]})]})})})},Dl=({field:e,onChange:t,onDelete:r,onAddArrayEntry:a,disabledReason:s,isExpertMode:l,isArrayField:c,rulesAffectingField:d,nestingLevel:f=0})=>{const[p,y]=U.useState(!1),[v,x]=U.useState(e),[b,_]=U.useState(!1),S=U.useRef(null),{confirm:k}=Ea(),j=Ch(e.value,e.range),R=e.checked&&ZA(e.value)&&j,E=U.useCallback(()=>{!j&&e.checked&&(S.current=setTimeout(()=>{_(!0)},800))},[j,e.checked]),q=U.useCallback(()=>{S.current&&(clearTimeout(S.current),S.current=null),_(!1)},[]),P=J=>{t(e.name,e.value,J.target.checked)},H=J=>{t(e.name,J.target.value,e.checked)},I=()=>{l?r(e.name):k("Are you sure you want to delete this field?",()=>r(e.name))},A=()=>{x(e),y(!0)},O=()=>{a(e)},M=jh(e.value),F=U.useMemo(()=>j||!e.checked?"":`Invalid value: "${jh(e.value)}"
Expected: ${Vp(e.range)}`,[j,e.checked,e.value,e.range]),Y=U.useMemo(()=>{const J=e.name.split("."),te=[];for(let he=1;he<J.length;he++)te.push(J.slice(0,he).join("."));return te},[e.name]),ae=U.useMemo(()=>d.map(J=>{if(!J.conditions||J.conditions.length===0){const te=J.targets.find(he=>he.name===e.name||Y.includes(he.name));if(te)return Sa({...J,conditions:[]},te.name)}else return J.targets.some(te=>te.name===e.name)?Sa(J,e.name):Sa(J)}).join(`
`),[d,e.name,Y]),ee=U.useMemo(()=>{const J=e.name.split(".");return J[J.length-1]},[e.name]),de=U.useMemo(()=>{if(f===0)return 0;const J=.75,te=Math.max(0,f-1)*.5;return J+te},[f]);return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"sm:hidden mb-3 p-3 rounded-lg bg-surface-2/50 border border-border relative",style:{marginLeft:`-${de}rem`,width:`calc(100% + ${de}rem)`},children:[h.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[h.jsx("input",{type:"checkbox",checked:e.checked??!1,onChange:P,className:"mt-1 min-w-4 h-4 w-4 shrink-0",disabled:!!s,"aria-label":`Enable ${e.name}`}),h.jsx(Mh,{text:s??"",children:h.jsx("span",{className:"text-sm font-medium break-all flex-1",title:e.name,children:ee})}),h.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[h.jsx("a",{href:e.link||void 0,target:"_blank",rel:"noopener noreferrer",className:e.link?"cursor-pointer":"",children:h.jsx(Qn,{text:`Info: ${e.info||"No info given"}`,icon:h.jsx("span",{className:"text-sm",children:""})})}),e.range&&h.jsx(Qn,{text:`Accepted values: ${Vp(e.range)}`,icon:h.jsx("span",{className:`text-sm ${j?"":"bg-red-500 rounded px-0.5"}`,children:""})}),h.jsx(Qn,{text:"Delete",icon:h.jsx("button",{type:"button",className:"text-sm",onClick:I,children:""})}),l&&h.jsx(Qn,{text:"Edit",icon:h.jsx("button",{type:"button",className:"text-sm",onClick:A,children:""})})]})]}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",value:M,onChange:H,onMouseEnter:E,onMouseLeave:q,disabled:!e.checked,placeholder:e.example||"Enter value...","aria-label":`Value for ${e.name}`,className:`w-full text-sm py-1.5 px-2 rounded ${e.checked?"text-text-primary bg-surface-0":"text-text-disabled bg-surface-1"} ${!j&&e.checked?"border-2 border-field-error":R?"border-2 border-field-warning":"border border-field-border"}`}),b&&F&&h.jsx(Oh,{text:F})]}),e.name!==ee&&h.jsx("div",{className:"mt-1 text-[10px] text-text-tertiary truncate",title:e.name,children:e.name})]}),h.jsxs("div",{className:"hidden sm:flex flex-row items-center mb-2.5",children:[h.jsxs("label",{className:"flex items-center mr-2.5",children:[h.jsx("input",{type:"checkbox",checked:e.checked??!1,onChange:P,className:"mr-2 min-w-4 h-4 w-4",disabled:!!s}),h.jsx(Mh,{text:s??"",children:h.jsx("span",{className:"whitespace-nowrap",children:e.name})})]}),h.jsxs("div",{className:"flex flex-row w-full",children:[h.jsxs("div",{className:"relative flex-grow ml-2",children:[h.jsx("input",{type:"text",value:M,onChange:H,onMouseEnter:E,onMouseLeave:q,disabled:!e.checked,"aria-label":`Value for ${e.name}`,className:`w-full rounded-default ${e.checked?"text-text-primary bg-surface-0":"text-text-disabled bg-surface-1"} ${!j&&e.checked?"border-2 border-field-error":R?"border-2 border-field-warning":"border border-field-border"}`}),b&&F&&h.jsx(Oh,{text:F})]}),h.jsxs("div",{className:"flex ml-2 flex-nowrap",children:[h.jsx("a",{href:e.link||void 0,target:"_blank",rel:"noopener noreferrer",className:e.link?"cursor-pointer":"",children:h.jsx(Qn,{text:`Info: ${e.info||"No info given"}`,icon:h.jsx("span",{className:"info-icon ml-2",children:""})})}),e.example&&h.jsx(Qn,{text:`Example: ${e.example||"No example given"}`,icon:h.jsx("span",{className:"example-icon ml-2",children:""})}),e.range&&h.jsx(Qn,{text:`Accepted values: ${Vp(e.range)}`,icon:h.jsx("span",{className:"range-icon ml-2",children:""}),className:j?"":"bg-red-500 rounded"}),ae&&h.jsx(Qn,{text:`Rules affecting this field: ${ae?`
`+ae:"None"}`,icon:h.jsx("span",{className:"rules-icon ml-2",children:""})}),h.jsx(Qn,{text:"Click to delete this field",icon:h.jsx("button",{type:"button",className:"ml-2",children:""}),onClick:I}),l&&h.jsx(Qn,{text:"Click to edit this field",icon:h.jsx("button",{type:"button",className:"ml-2",children:""}),onClick:A}),c&&h.jsx(Qn,{text:`Click to add another entry to ${e.name.split(".").slice(0,-1).join(".")}`,icon:h.jsx("button",{type:"button",className:"ml-2",children:""}),onClick:O})]})]})]}),p&&h.jsx(sk,{edit:!0,newField:v,setNewField:x,handleClose:()=>y(!1)})]})};Dl.displayName="SettingsField";const z_=({onChange:e,text:t,checked:r,isLoading:a})=>h.jsxs("label",{className:"relative inline-flex flex-col items-center sm:flex-row sm:space-x-3",children:[h.jsx("input",{type:"checkbox",onChange:e,checked:r,className:"sr-only peer",disabled:a}),h.jsx("div",{className:"relative w-[40px] h-[24px] bg-surface-0 border border-strong rounded-default peer peer-checked:bg-primary-default peer-checked:after:translate-x-full peer-checked:after:bg-white peer-checked:border-primary-default after:content-[''] after:absolute after:top-[2px] after:left-[4px] after:bg-surface-4 after:rounded-default after:h-[16px] after:w-[16px] after:transition-all",children:a&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx("div",{className:"w-[14px] h-[14px] border-2 border-primary-default border-t-transparent rounded-full animate-spin",style:{marginLeft:r?"20px":"4px"}})})}),h.jsx("span",{className:"mt-2 text-sm font-medium text-text-primary sm:mt-0 whitespace-nowrap",children:t})]}),Uc=(e,t=[],r,a)=>OA(e,t,{logger:Be,trigger:r,originalFields:a}),Oc=e=>Object.keys(e).length===0,L_="expanded-sections",Gz=({fields:e})=>{const{isExpertMode:t}=Pr(),[r,a]=U.useState({}),[s,l]=U.useState(new Set);U.useEffect(()=>{ft.getItem(L_).then(se=>{se&&(a(se),l(new Set(Object.keys(se).filter(N=>se[N]))))})},[]),U.useEffect(()=>{ft.setItem(L_,r)},[r]);const[c,d]=U.useState(""),[f,p]=U.useState(!1),{handleFieldChange:y,setDisabledReasons:v,handleDeleteField:x,disabledReasons:b,handleUpdateFields:_,handleAddField:S}=Ws(),{template:k,ruleSets:j,selectedRuleSetIndex:R,fields:E}=er(),q=U.useMemo(()=>{try{const se={...k,ruleSets:j};return sm(se,R)}catch(se){return console.warn("Failed to resolve ruleset inheritance:",se),j[R]?.rules??[]}},[k,j,R]),P=e.length>0&&e.every(se=>se.checked||b[se.name]),H=U.useMemo(()=>{const se=new Map;(q||[]).forEach(L=>{L.targets.forEach(V=>{se.has(V.name)||se.set(V.name,new Set),se.get(V.name).add(L)}),L.conditions?.forEach(V=>{se.has(V.name)||se.set(V.name,new Set),se.get(V.name).add(L)})});const N=new Map;return e.forEach(L=>{const V=new Set,G=se.get(L.name);G&&G.forEach(D=>V.add(D));const X=L.name.split(".");for(let D=1;D<X.length;D++){const ne=X.slice(0,D).join("."),le=se.get(ne);le&&le.forEach(Se=>V.add(Se))}N.set(L.name,Array.from(V))}),N},[e,q]),I=U.useCallback(se=>{const N=se.name.split(".").slice(0,-1).join("."),V=E.filter(D=>D.name.startsWith(N+".")).length+1,G=`${N}.${V}`,X={...se,name:G,value:"",checked:!1,info:""};S(X)},[E,S]),A=U.useCallback(se=>{a(N=>{const L=!N[se];return L&&l(V=>{if(V.has(se))return V;const G=new Set(V);return G.add(se),G}),{...N,[se]:L}})},[]),O=U.useCallback(se=>{const N={};return se.forEach(L=>{const V=L.name.split(".");let G=N;V.forEach((X,D)=>{G[X]||(G[X]={children:{},fields:[]}),D===V.length-1?G[X].fields.push(L):G=G[X].children})}),N},[]),M=(se,N="",L=!1,V=0)=>Object.keys(se).sort((X,D)=>{const ne=/^\d+$/.test(X),le=/^\d+$/.test(D);return ne&&le?parseInt(X,10)-parseInt(D,10):ne?-1:le?1:X.localeCompare(D)}).map((X,D)=>{const ne=se[X],le=N?`${N}.${X}`:X,Se=r[le],Ae=s.has(le),Te=!Oc(ne.children);if(L){const Oe=["#194960","#226280","#3AB0DB","#194960","#226280","#3AB0DB"],Me=Oe[D%Oe.length];return Te?h.jsxs("div",{className:"mb-2 border-l-4 pl-3 py-0.5 bg-surface-1/30 rounded-r-lg cursor-pointer hover:bg-surface-2/50 transition-colors",style:{borderLeftColor:Me},onClick:()=>A(le),children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("span",{className:"mr-2 text-sm",children:Se?"":""}),h.jsx("h3",{className:"text-xl font-bold",children:X})]}),Ae&&h.jsxs("div",{className:"ml-2 mt-1",style:{display:Se?"block":"none"},onClick:Re=>Re.stopPropagation(),children:[ne.fields.map(Re=>h.jsx(Dl,{field:Re,onChange:y,onDelete:x,onAddArrayEntry:I,disabledReason:b[Re.name],isExpertMode:t,isArrayField:/.*\.\d+$/.test(Re.name),rules:q||[],rulesAffectingField:H.get(Re.name)||[],nestingLevel:V+1},Re.name)),M(ne.children,le,!1,V+1)]})]},le):h.jsx("div",{className:"mb-2 border-l-4 pl-3 py-0.5 bg-surface-1/30 rounded-r-lg",style:{borderLeftColor:Me},children:ne.fields.map(Re=>h.jsx(Dl,{field:Re,onChange:y,onDelete:x,onAddArrayEntry:I,disabledReason:b[Re.name],isExpertMode:t,isArrayField:/.*\.\d+$/.test(Re.name),rules:q||[],rulesAffectingField:H.get(Re.name)||[],nestingLevel:V+1},Re.name))},le)}if(Oc(ne.children))return ne.fields.map(Oe=>h.jsx(Dl,{field:Oe,onChange:y,onDelete:x,onAddArrayEntry:I,disabledReason:b[Oe.name],isExpertMode:t,isArrayField:/.*\.\d+$/.test(Oe.name),rules:q||[],rulesAffectingField:H.get(Oe.name)||[],nestingLevel:V},Oe.name));const $e=!Oc(ne.children);return h.jsxs("div",{className:"mb-4",children:[h.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>A(le),children:[h.jsx("span",{className:"mr-2",children:$e&&(Se?"":"")}),h.jsx("h3",{className:"text-xl font-bold",children:X})]}),Ae&&h.jsxs("div",{className:"ml-4",style:{display:Se?"block":"none"},children:[ne.fields.map(Oe=>h.jsx(Dl,{field:Oe,onChange:y,onDelete:x,onAddArrayEntry:I,disabledReason:b[Oe.name],isExpertMode:t,isArrayField:/.*\.\d+$/.test(Oe.name),rules:q||[],rulesAffectingField:H.get(Oe.name)||[],nestingLevel:V+1},Oe.name)),M(ne.children,le,!1,V+1)]})]},le)}),F=U.useMemo(()=>e.filter(se=>{const N=se.name.toLowerCase().includes(c.toLowerCase())||se.value&&se.value.toString().toLowerCase().includes(c.toLowerCase()),L=b[se.name],V=L&&L.includes("not set");return N&&(!f||!V)}),[e,c,f,b]),Y=U.useMemo(()=>O(F),[O,F]),ae=U.useMemo(()=>Object.values(Y).some(se=>!Oc(se.children)),[Y]),ee=U.useMemo(()=>e.some(se=>{const N=b[se.name];return N&&N.includes("not set")}),[e,b]),de=U.useMemo(()=>e.length===0?!1:Object.keys(Y).every(se=>r[se]),[e.length,Y,r]),[J,te]=U.useTransition(),he=U.useCallback(()=>{const se=(G,X="")=>{const D=[];return Object.keys(G).forEach(ne=>{const le=X?`${X}.${ne}`:ne;D.push(le),D.push(...se(G[ne].children,le))}),D},N=se(Y),L=!de,V={};N.forEach(G=>{V[G]=L}),a(V),L&&te(()=>{l(new Set(N))})},[de,Y]),ve=U.useCallback(se=>{const N=se.target.checked,L=e.map(ne=>({...ne})),V=e.map(ne=>({...ne,checked:b[ne.name]?ne.checked:N})),G={type:N?"check_all":"uncheck_all"},{updatedFields:X,disabledReasons:D}=Uc(V,q||[],G,L);_(X),v(D)},[e,b,q,_,v]);return h.jsxs("div",{className:"mt-8",children:[e.length>0&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center my-4 gap-4",children:[h.jsx("div",{className:"shrink-0",children:h.jsxs("h4",{children:["Total fields: ",h.jsx("strong",{children:F.length}),f&&e.length!==F.length&&h.jsxs("span",{className:"text-gray-500",children:[" / ",e.length]})]})}),h.jsx("div",{className:"flex-1",children:h.jsx("input",{id:"fields-search",name:"fields-search",type:"text",placeholder:"Search fields...","aria-label":"Search fields",value:c,onChange:se=>d(se.target.value),className:"w-full p-2 border rounded-default bg-surface-0 text-text-primary"})})]}),h.jsxs("div",{className:"flex items-center justify-between gap-6 mb-4",children:[e.length>1?h.jsxs("label",{htmlFor:"toggle-all-fields",className:"flex items-center cursor-pointer text-sm",title:P?"Uncheck means to remove the check mark from fields as controlled by rules":"Check means to set the check mark on fields according to rules",children:[h.jsx("input",{id:"toggle-all-fields",name:"toggle-all-fields",type:"checkbox",checked:P,onChange:ve,className:"mr-2"}),h.jsx("span",{children:P?"Uncheck all uncheckable fields":"Check all checkable fields"})]}):h.jsx("div",{}),h.jsxs("div",{className:"flex items-center gap-6",children:[ee&&h.jsx(z_,{onChange:()=>p(!f),text:f?"Show illegal":"Hide illegal",checked:f}),ae&&h.jsx(z_,{onChange:he,text:(de?"Collapse":"Expand")+" all sections",checked:de,isLoading:J})]})]})]}),M(Y,"",!0)]})},Zz=()=>{const{handleDeleteFields:e}=Ws(),{fields:t}=er(),{isExpertMode:r}=Pr(),[a,s]=U.useState(!1),[l,c]=U.useState({name:"",value:"",info:"",example:"",range:""});return h.jsxs(h.Fragment,{children:["      ",a&&h.jsx(sk,{newField:l,setNewField:c,handleClose:()=>s(!1)}),r&&h.jsxs("div",{className:"flex justify-between items-center gap-4 my-4",children:[h.jsx("div",{className:"flex-1 flex justify-end",children:h.jsx(Xe,{onClick:()=>s(!0),type:"secondary",size:"small",children:"Add Field"})}),h.jsx("div",{className:"flex-1 flex justify-start",children:t&&t.length>0&&h.jsx(Xe,{onClick:e,type:"error-text",size:"small",children:"Delete All Fields"})})]}),h.jsx(Gz,{fields:t||[]})]})},U_=({item:e,index:t,onChange:r,onRemove:a})=>{const s=(f,p)=>{const y={...e,[f]:p};r(t,y)},{fields:l}=er(),c=l.map(f=>f.name),d=HA(c);return h.jsxs("div",{className:"mb-4 p-4 bg-surface-0 rounded-default shadow-md",children:[h.jsxs("label",{className:"block mb-3",htmlFor:`rule-domain-name-${t}`,children:[h.jsx("span",{className:"text-text-secondary",children:"Name:"}),h.jsxs("select",{id:`rule-domain-name-${t}`,name:`rule-domain-name-${t}`,value:e.name,onChange:f=>s("name",f.target.value),className:"block w-full border rounded-default shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 bg-surface-0 text-text-primary",children:[h.jsx("option",{value:"",children:"Select a field"}),d.map(f=>h.jsx("option",{value:f,children:f},f))]})]}),h.jsxs("div",{className:"flex items-center mb-2",children:[h.jsx("label",{htmlFor:`rule-domain-not-${t}`,className:"text-text-secondary",children:"Not:"}),h.jsx("input",{id:`rule-domain-not-${t}`,name:`rule-domain-not-${t}`,type:"checkbox",checked:e.not||!1,onChange:f=>s("not",f.target.checked),className:"ml-2 rounded border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"}),h.jsx("label",{htmlFor:`rule-domain-state-${t}`,className:"text-text-secondary mr-2 ml-2",children:"State:"}),h.jsxs("select",{id:`rule-domain-state-${t}`,name:`rule-domain-state-${t}`,value:e.state,onChange:f=>s("state",f.target.value),className:"block border rounded-default shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 bg-surface-0 text-text-primary",children:[h.jsx("option",{value:Ye.Set,children:"Set"}),h.jsx("option",{value:Ye.SetToValue,children:"Set to Value"}),h.jsx("option",{value:Ye.Contains,children:"Contains"})]})]}),(e.state===Ye.SetToValue||e.state===Ye.Contains)&&h.jsxs("label",{className:"flex mb-2",htmlFor:`rule-domain-value-${t}`,children:[h.jsx("span",{className:"text-text-secondary mr-2",children:"Value:"}),h.jsx("input",{id:`rule-domain-value-${t}`,name:`rule-domain-value-${t}`,type:"text",value:e.value||"",onChange:f=>s("value",f.target.value),className:"block w-full border rounded-default shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 bg-surface-0 text-text-primary"})]}),h.jsx("div",{className:"flex justify-end mt-4",children:h.jsx(Xe,{onClick:()=>a(t),size:"small",type:"error-text",children:"Remove"})})]})},ok=U.createContext(void 0),xd=()=>{const e=U.useContext(ok);if(!e)throw new Error("useRuleContext must be used within a RuleProvider");return e},Yz=({handleClose:e,fieldNames:t})=>{const{handleAddOrEditRule:r}=xd(),{ruleSets:a,selectedRuleSetIndex:s}=er(),l=bn.useMemo(()=>a[s]?.rules??[],[a,s]),[c,d]=U.useState({}),f=bn.useMemo(()=>{const b=l.filter(S=>!S.conditions||S.conditions.length===0),_={};return t.forEach(S=>{const k=b.flatMap(j=>j.targets).find(j=>j.name===S);k?_[S]={state:k.state,not:k.not??!1,value:k.value}:_[S]={state:"None",not:!1}}),_},[l,t]);bn.useEffect(()=>{d(f)},[f]);const p=b=>{d(_=>({..._,[b]:{..._[b],not:!_[b].not}}))},y=(b,_)=>{d(S=>({...S,[b]:{...S[b],state:_}}))},v=(b,_)=>{d(S=>({...S,[b]:{...S[b],value:_}}))},x=()=>{const b=Object.entries(c).filter(([,{state:k}])=>k!=="None").map(([k,{state:j,not:R,value:E}])=>({name:k,state:j,not:R,value:j===Ye.SetToValue||j===Ye.Contains?E:void 0})),_=l.findIndex(k=>!k.conditions||k.conditions.length===0);r({conditions:[],targets:b},_),e()};return h.jsx(io,{children:h.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",children:h.jsxs("div",{className:"bg-surface-0 p-6 rounded-lg shadow-lg w-full max-w-3xl h-3/4 flex flex-col mx-4",children:[h.jsx("h2",{className:"text-xl font-bold mb-4 text-text-primary",children:"Required Fields"}),h.jsx("p",{className:"mb-4 text-gray-700 ",children:' Set state other than "None" to make a field required'}),h.jsx("div",{className:"flex-grow overflow-y-auto mb-4",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"text-text-primary",children:[h.jsx("th",{className:"text-left",children:"Field Name"}),h.jsx("th",{className:"text-left pr-4",children:"Not"}),h.jsx("th",{className:"text-left",children:"State"}),h.jsx("th",{className:"text-left",children:"Value"})]})}),h.jsx("tbody",{children:t.map((b,_)=>h.jsxs("tr",{className:"text-text-primary",children:[h.jsx("td",{children:h.jsx("label",{htmlFor:`required-not-${_}`,children:b})}),h.jsx("td",{children:h.jsx("input",{id:`required-not-${_}`,name:`required-not-${_}`,type:"checkbox",checked:c[b]?.not||!1,onChange:()=>p(b)})}),h.jsx("td",{children:h.jsxs("select",{id:`required-state-${_}`,name:`required-state-${_}`,"aria-label":`State for ${b}`,value:c[b]?.state||"None",onChange:S=>y(b,S.target.value),className:"bg-surface-0 border  rounded text-text-primary",children:[h.jsx("option",{value:"None",children:"None"}),h.jsx("option",{value:Ye.Set,children:"Set"}),h.jsx("option",{value:Ye.SetToValue,children:"Set to Value"}),h.jsx("option",{value:Ye.Contains,children:"Contains"})]})}),h.jsx("td",{children:(c[b]?.state===Ye.SetToValue||c[b]?.state===Ye.Contains)&&h.jsx("input",{id:`required-value-${_}`,name:`required-value-${_}`,"aria-label":`Value for ${b}`,type:"text",value:c[b]?.value||"",onChange:S=>v(b,S.target.value),className:"border rounded p-1 bg-surface-0  text-text-primary"})})]},_))})]})}),h.jsxs("div",{className:"flex gap-4 justify-end mt-4",children:[h.jsx(Xe,{onClick:e,type:"primary-text",children:"Cancel"}),h.jsx(Xe,{onClick:x,type:"primary",children:"Save Rule"})]})]})})})},lk=({edit:e,newRule:t,setNewRule:r,handleClose:a,index:s})=>{const{handleAddOrEditRule:l}=xd(),{fields:c}=er(),[d,f]=U.useState(!1),p=()=>{r({...t,targets:[{name:"",state:Ye.Set,not:!1},...t.targets]})},y=R=>{const E=t.targets.filter((q,P)=>P!==R);r({...t,targets:E})},v=(R,E)=>{const q=[...t.targets];q[R]=E,r({...t,targets:q})},x=()=>{r({...t,conditions:[{name:"",state:Ye.Set,not:!1},...t.conditions||[]]})},b=R=>{const E=(t.conditions||[]).filter((q,P)=>P!==R);r({...t,conditions:E})},_=(R,E)=>{const q=[...t.conditions||[]];q[R]=E,r({...t,conditions:q})},S=()=>{l(t,e?s:void 0,()=>{a(),e||r({targets:[{name:"",state:Ye.Set,not:!1}]})})},k=()=>{a(),r({targets:[{name:"",state:Ye.Set,not:!1}]})},j=()=>{const R={...t,conditions:(t.conditions??[]).map(E=>({...E,not:!E.not})),targets:t.targets.map(E=>({...E,not:!E.not}))||[]};e?l(R,void 0,()=>{a()}):l(R,void 0,()=>{l(t,void 0,()=>{a(),r({targets:[{name:"",state:Ye.Set,not:!1}]})})})};return h.jsx(io,{children:h.jsxs("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",children:[h.jsxs("div",{className:"bg-surface-0 p-6 rounded-default shadow-lg w-full max-w-xl max-h-[85vh] overflow-y-auto flex flex-col mx-4",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsxs("h2",{className:"text-xl font-bold text-text-primary",children:[e?"Edit":"Add"," Rule"]}),h.jsx(Xe,{onClick:()=>f(!0),type:"secondary-text",size:"small",children:"Edit Required Fields"})]}),h.jsxs("div",{className:"flex justify-between items-center my-4",children:[h.jsx("h3",{className:"text-lg font-semibold mb-2 text-text-primary",children:"Conditions (IF)"}),h.jsx(Xe,{onClick:x,type:"secondary-text",size:"small",children:"+"})]}),h.jsxs("div",{className:"flex-grow overflow-y-auto",children:[(t.conditions||[]).map((R,E)=>h.jsx(U_,{item:R,index:E,onChange:_,onRemove:b},E)),t.conditions?.length===0&&h.jsx("p",{className:"text-sm text-text-disabled",children:"No conditions."}),h.jsxs("div",{className:"flex justify-between items-center mt-4",children:[h.jsx("h3",{className:"text-lg font-semibold mb-2 text-text-primary",children:"Targets (THEN)"}),h.jsx(Xe,{onClick:p,type:"secondary-text",size:"small",children:"+"})]}),t.targets.length===0&&h.jsx("p",{className:"text-sm text-text-disabled",children:"No targets. Add at least one target"}),t.targets.map((R,E)=>h.jsx(U_,{item:R,index:E,onChange:v,onRemove:y},E))]}),h.jsxs("div",{className:"flex justify-end mt-8 gap-4",children:[h.jsx(Xe,{onClick:e?a:k,type:"primary-text",children:"Cancel"}),t.targets.length>0&&(t.conditions?.length??0)>0&&h.jsx(Xe,{onClick:j,type:"secondary-text",children:"Add Contrapositive"}),h.jsx(Xe,{onClick:S,children:"Save"})]})]}),d&&h.jsx(Yz,{handleClose:a,fieldNames:c.map(R=>R.name)})]})})},Jz=({rule:e,index:t,onDeleteRule:r})=>{const[a,s]=bn.useState(!1),[l,c]=bn.useState(e),{isExpertMode:d}=Pr(),f=()=>{s(!0)};return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"p-4 bg-surface-2 rounded-default shadow-md mb-4",children:h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4",children:[h.jsxs("h3",{className:"text-lg font-semibold mb-2 sm:mb-0 text-text-primary",children:["Rule ",t+1]}),h.jsx("div",{className:"bg-surface-3 p-4 rounded-default shadow-inner w-full sm:max-w-3xl mb-2 sm:mb-0",children:h.jsx("p",{className:"text-l text-text-secondary",children:Sa(e)})}),d&&h.jsxs("div",{className:"flex items-center",children:[h.jsx(Qn,{text:"Click to edit this rule",icon:"",onClick:()=>f(),className:"ml-2 cursor-pointer"}),h.jsx(Qn,{text:"Click to delete this rule",icon:"",onClick:()=>r(t),className:"ml-2 cursor-pointer"})]})]})}),a&&h.jsx(lk,{newRule:l,edit:!0,handleClose:()=>s(!1),setNewRule:c,index:t})]})},Xz=({onDeleteRule:e})=>{const[t,r]=U.useState(null),{mergeRules:a,currentRules:s}=xd(),{isExpertMode:l}=Pr(),c=f=>{const p=s??[],y=f.map(v=>p[v-1]).filter(v=>v!==void 0);a(y)};U.useEffect(()=>{const f=AA(s??[]);if(r(f),f.isValid&&(!f.warnings||f.warnings.length===0)){const p=setTimeout(()=>{r(null)},3e3);return()=>clearTimeout(p)}},[s]);const d=s??[];return h.jsx("div",{className:"mt-4",children:h.jsxs("div",{className:"space-y-4",children:[d.length>0&&t&&t.errors.length>0&&h.jsxs("div",{className:"p-4 rounded-default shadow-md mb-4 bg-validation-error-bg",children:[h.jsx("p",{className:"text-validation-error-text font-medium",children:"Validation errors:"}),h.jsx("ul",{className:"list-disc ml-4 text-validation-error-text",children:t.errors.map((f,p)=>h.jsx("li",{children:f},p))})]}),l&&d.length>0&&t&&t.warnings&&t.warnings.length>0&&h.jsxs("div",{className:"p-4 rounded-default shadow-md mb-4 bg-validation-warning-bg",children:[h.jsx("p",{className:"text-validation-warning-text font-medium",children:"Suggestions:"}),h.jsx("ul",{className:"list-disc ml-4 text-validation-warning-text",children:t.warnings.map((f,p)=>h.jsxs("li",{className:"flex items-center gap-2 flex-wrap",children:[h.jsx("span",{children:f}),f.includes("can be merged")&&h.jsx(Xe,{onClick:()=>{const y=f.match(/\d+/g)?.map(Number)||[];c(y)},type:"secondary",size:"small",children:"Merge"})]},p))})]}),l&&d.length>0&&t&&t.isValid&&(!t.warnings||t.warnings.length===0)&&h.jsx("div",{className:"p-4 rounded-default shadow-md mb-4 bg-validation-success-bg",children:h.jsx("p",{className:"text-validation-success-text",children:"All rules are valid!"})}),d.length===0&&h.jsx("p",{className:"text-text-secondary",children:"No rules defined."}),d.map((f,p)=>h.jsx(Jz,{rule:f,index:p,onDeleteRule:e},p))]})})},Kz=()=>{const{handleDeleteRule:e,handleDeleteRules:t,currentRules:r,handleUpdateRuleSet:a,handleAddRuleSet:s,handleDeleteRuleSet:l}=xd(),{template:c,ruleSets:d,selectedRuleSetIndex:f,setSelectedRuleSetIndex:p}=er(),{isExpertMode:y}=Pr(),[v,x]=U.useState({targets:[{name:"",state:Ye.Set}],conditions:[]}),[b,_]=U.useState(!1),[S,k]=U.useState(!1),[j,R]=U.useState({}),E=d[f],q=U.useMemo(()=>{const A={...c,ruleSets:d};return d.map((O,M)=>{const F=O.rules.length;let Y=F;try{Y=sm(A,M).length}catch{}const ae=Y-F;return{ownRules:F,inheritedRules:ae,totalRules:Y}})},[c,d]),P=()=>{E&&(R({name:E.name,description:E.description,tags:[...E.tags||[]],extends:E.extends}),k(!0))},H=()=>{a(f,j),k(!1)},I=()=>{const A={name:`RuleSet ${d.length+1}`,description:"",tags:[],rules:[]};s(A),p(d.length)};return h.jsxs(h.Fragment,{children:[b&&h.jsx(lk,{newRule:v,setNewRule:x,handleClose:()=>_(!1)}),h.jsx("div",{className:"my-4 p-3 bg-surface-2 rounded-lg border",children:h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[h.jsx("label",{className:"text-sm font-medium text-text-secondary shrink-0",children:"RuleSet:"}),h.jsx("select",{value:f,onChange:A=>p(Number(A.target.value)),className:"flex-1 px-3 py-1.5 bg-surface-1 border rounded text-sm text-text-primary",children:d.map((A,O)=>{const M=q[O],F=M?.inheritedRules>0?` (+${M.inheritedRules} inherited)`:"";return h.jsxs("option",{value:O,children:[A.name," ",O===0?"(Default)":"","  ",A.rules.length," rules",F]},O)})}),y&&h.jsxs("div",{className:"flex gap-2 shrink-0",children:[h.jsx(Xe,{onClick:P,type:"secondary",size:"small",title:"Edit RuleSet",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),h.jsx(Xe,{onClick:I,type:"secondary",size:"small",title:"New RuleSet",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),f>0&&h.jsx(Xe,{onClick:()=>l(f),type:"error-text",size:"small",title:"Delete RuleSet",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})}),!S&&E&&(E.description||E.extends||E.tags&&E.tags.length>0)&&h.jsxs("div",{className:"text-xs text-text-tertiary mb-2 px-1 flex flex-wrap gap-x-3 gap-y-1",children:[E.description&&h.jsx("span",{children:E.description}),E.extends&&h.jsxs("span",{className:"text-vibrant-blue",children:[" extends: ",E.extends]}),E.tags&&E.tags.length>0&&h.jsxs("span",{children:["Tags: ",E.tags.join(", ")]})]}),S&&h.jsxs("div",{className:"my-4 p-3 sm:p-4 bg-surface-2 rounded-lg border space-y-3",children:[h.jsx("h3",{className:"font-medium text-text-primary",children:"Edit RuleSet"}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"ruleset-name",className:"block text-sm text-text-secondary mb-1",children:"Name"}),h.jsx("input",{id:"ruleset-name",name:"ruleset-name",type:"text",value:j.name||"",onChange:A=>R({...j,name:A.target.value}),className:"w-full px-3 py-1.5 bg-surface-1 border rounded text-sm",disabled:f===0})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"ruleset-tags",className:"block text-sm text-text-secondary mb-1",children:"Tags (comma-separated)"}),h.jsx("input",{id:"ruleset-tags",name:"ruleset-tags",type:"text",value:j.tags?.join(", ")||"",onChange:A=>R({...j,tags:A.target.value.split(",").map(O=>O.trim()).filter(Boolean)}),className:"w-full px-3 py-1.5 bg-surface-1 border rounded text-sm"})]})]}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:h.jsxs("div",{children:[h.jsx("label",{htmlFor:"ruleset-extends",className:"block text-sm text-text-secondary mb-1",children:"Extends (inherit from)"}),h.jsxs("select",{id:"ruleset-extends",name:"ruleset-extends",value:j.extends||"",onChange:A=>R({...j,extends:A.target.value||void 0}),className:"w-full px-3 py-1.5 bg-surface-1 border rounded text-sm text-text-primary",children:[h.jsx("option",{value:"",children:"None"}),d.filter((A,O)=>O!==f).map((A,O)=>h.jsx("option",{value:A.name,children:A.name},O))]}),h.jsx("p",{className:"text-xs text-text-tertiary mt-1",children:"Inherit rules from another ruleset"})]})}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm text-text-secondary mb-1",children:"Description"}),h.jsx("textarea",{value:j.description||"",onChange:A=>R({...j,description:A.target.value}),className:"w-full px-3 py-1.5 bg-surface-1 border rounded text-sm",rows:2})]}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsx(Xe,{onClick:H,type:"primary",size:"small",children:"Save"}),h.jsx(Xe,{onClick:()=>k(!1),type:"secondary",size:"small",children:"Cancel"})]})]}),y&&h.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-stretch sm:items-center gap-2 sm:gap-4 my-4",children:[h.jsx(Xe,{onClick:()=>_(!0),type:"secondary",size:"small",children:"Add Rule"}),r&&r.length>0&&h.jsx(Xe,{onClick:t,type:"error-text",size:"small",children:"Delete All Rules"})]}),h.jsx(Xz,{onDeleteRule:e})]})},Qz=()=>{const e=["fieldsTab","rulesTab"],[t,r]=bn.useState(e[0]),a=e.indexOf(t),s=l=>l.replace("Tab","").replace(/^\w/,c=>c.toUpperCase());return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"relative flex border-b border-strong",children:[e.map(l=>h.jsx("button",{type:"button",className:`flex-1 text-center py-3 px-4 transition-colors duration-200 ${t===l?"text-secondary-default font-medium":"text-text-secondary hover:text-secondary-default"}`,onClick:()=>r(l),children:s(l)},l)),h.jsx("div",{className:"absolute bottom-0 h-0.5 bg-secondary-default transition-all duration-300 ease-in-out",style:{width:`${100/e.length}%`,left:`${a*100/e.length}%`}})]}),t==="fieldsTab"&&h.jsx(Zz,{}),t==="rulesTab"&&h.jsx(Kz,{})]})},uk=U.createContext(void 0);function Wz(){const e=U.useContext(uk);if(!e)throw new Error("useHistory must be used within a HistoryProvider");return e}const q_=e=>e.changes.some(t=>t.reason!=="User action"&&t.reason!=="Checked all fields"&&t.reason!=="Unchecked all fields"),eL=({onUndo:e})=>{const{history:t,clearHistory:r,undoEntry:a}=Wz(),[s,l]=U.useState(!1),[c,d]=U.useState(!1),f=U.useMemo(()=>c?t:t.filter(q_),[t,c]),p=U.useMemo(()=>t.filter(q_).length,[t]);if(t.length===0)return null;const y=S=>S.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),v=S=>S==null?"null":typeof S=="boolean"?S?"":"":typeof S=="string"?S.length>30?`"${S.slice(0,30)}..."`:`"${S}"`:typeof S=="number"?String(S):Array.isArray(S)||typeof S=="object"&&S!==null?JSON.stringify(S):typeof S=="symbol"?S.toString():String(S),x=S=>{switch(S.type){case"field_check":return`Checked "${S.fieldName}"`;case"field_uncheck":return`Unchecked "${S.fieldName}"`;case"field_value_change":return`Changed "${S.fieldName}"`;case"check_all":return"Checked all fields";case"uncheck_all":return"Unchecked all fields";case"import":return"Imported settings";case"template_load":return"Loaded template";case"rules_changed":return"Rules changed";case"ai_change":return S.aiTool?` AI: ${S.aiTool}`:` AI changed "${S.fieldName}"`;default:return"Rules applied"}},b=(S,k)=>{S.stopPropagation();const j=a(k);e&&j.reverse().forEach(R=>e(R))},_=S=>c?S.changes:S.changes.filter(k=>k.reason!=="User action"&&k.reason!=="Checked all fields"&&k.reason!=="Unchecked all fields");return h.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-md",children:h.jsxs("div",{className:"bg-surface-0 border rounded-lg shadow-lg overflow-hidden",children:[h.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-surface-1 cursor-pointer",onClick:()=>l(!s),children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:""}),h.jsx("span",{className:"font-medium text-text-primary",children:c?"Change History":"Rules Applied"}),h.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-0.5 rounded-full",children:c?t.length:p})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[s&&h.jsx("button",{onClick:S=>{S.stopPropagation(),r()},className:"text-xs text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 px-2",children:"Clear"}),h.jsx("span",{className:"text-text-disabled",children:s?"":""})]})]}),s&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex justify-center py-3 bg-surface-1 border-b border",children:h.jsx("img",{src:"/Guido/guido_icon.png",alt:"Guido",className:"h-12"})}),h.jsx("div",{className:"px-4 py-2 bg-surface-2 border-b border",children:h.jsxs("label",{className:"flex items-center gap-2 text-xs text-text-secondary",children:[h.jsx("input",{type:"checkbox",checked:c,onChange:S=>d(S.target.checked),className:"rounded",onClick:S=>S.stopPropagation()}),"Show user actions"]})}),h.jsx("div",{className:"max-h-80 overflow-y-auto",children:f.length===0?h.jsx("div",{className:"px-4 py-4 text-center text-sm text-text-disabled",children:"No rules have been applied yet"}):f.map(S=>{const k=_(S);return k.length===0?null:h.jsxs("div",{className:"border-b border last:border-b-0",children:[h.jsxs("div",{className:"px-4 py-2 bg-surface-2 text-xs text-text-disabled",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"font-medium text-gray-700 ",children:x(S.trigger)}),e&&S.canUndo&&h.jsx("button",{onClick:j=>b(j,S.id),className:"text-xs text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:" Undo"})]}),h.jsxs("span",{children:[y(S.timestamp),"  ",k.length," change",k.length!==1?"s":""]})]}),h.jsx("div",{className:"px-4 py-2 space-y-1",children:k.map((j,R)=>h.jsxs("div",{className:"text-sm",children:[h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("span",{className:"text-xs",children:j.property==="checked"?"":""}),h.jsx("code",{className:"text-blue-600 dark:text-blue-400 font-mono text-xs",children:j.fieldName})]}),h.jsxs("div",{className:"ml-5 text-xs text-text-secondary",children:[h.jsx("span",{className:"text-red-500 dark:text-red-400",children:v(j.oldValue)}),h.jsx("span",{className:"mx-1",children:""}),h.jsx("span",{className:"text-success-700",children:v(j.newValue)})]}),h.jsx("div",{className:"ml-5 text-xs text-text-disabled italic",children:j.reason})]},R))})]},S.id)})})]})]})})},ck="/Guido/assets/guido-BPkfIVdj.png",dk=({onClose:e})=>{const{config:t,setConfig:r,speechRate:a,setSpeechRate:s,speechVolume:l,setSpeechVolume:c,speechEnabled:d,setSpeechEnabled:f}=Fi(),[p,y]=U.useState(t?.provider||"ollama"),[v,x]=U.useState(t?.apiKey||""),[b,_]=U.useState(t?.baseUrl||"http://localhost:11434"),[S,k]=U.useState(t?.model||""),[j,R]=U.useState([]),[E,q]=U.useState(!1),[P,H]=U.useState(null),[I,A]=U.useState(null),O=U.useCallback(async()=>{if(p!=="ollama"&&!v){R([]);return}q(!0),H(null);try{const ee=await oz(p,v,b);if(R(ee),ee.length>0){const de=ee.some(J=>J.id===S);(!S||!de)&&k(ee[0].id)}}catch(ee){H(ee instanceof Error?ee.message:"Failed to fetch models"),R([])}finally{q(!1)}},[p,v,b,S]);U.useEffect(()=>{p==="ollama"&&(async()=>{const de=await sz(b);A(de),de&&O()})()},[p,b,O]);const M=()=>{if(!S){H("Please select a model");return}r({provider:p,apiKey:v,model:S,baseUrl:p==="ollama"?b:void 0}),e()},F=()=>{r(null),e()},Y=p!=="ollama",ae=p==="ollama"?I:v.length>0;return h.jsx(io,{children:h.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",children:h.jsxs("div",{className:"bg-surface-0 p-8 rounded-default shadow-lg w-full max-w-xl max-h-[85vh] overflow-y-auto mx-4 border border-border",children:[h.jsxs("h2",{className:"text-xl font-bold mb-2 text-text-primary flex items-center gap-2",children:[h.jsx("span",{className:"text-2xl",children:""})," AI Assistant Setup"]}),h.jsx("p",{className:"text-sm text-text-secondary mb-6",children:"Configure an LLM to chat with Guido and edit your configuration using natural language."}),h.jsxs("label",{className:"block mb-4 text-text-primary",children:["Provider:",h.jsx("select",{value:p,onChange:ee=>{y(ee.target.value),R([]),k(""),H(null)},className:"mt-1 block w-full px-3 py-2 border border-field-border rounded-default shadow-sm bg-surface-1 text-text-primary focus:outline-none focus:ring-1 focus:ring-primary-default focus:border-primary-default",children:Object.keys(rb).map(ee=>h.jsx("option",{value:ee,children:rb[ee]},ee))})]}),p==="ollama"&&h.jsxs("label",{className:"block mb-4 text-text-primary",children:["Ollama URL:",h.jsx("input",{type:"text",value:b,onChange:ee=>_(ee.target.value),placeholder:"http://localhost:11434",className:"mt-1 block w-full px-3 py-2 border border-field-border rounded-default shadow-sm bg-surface-1 text-text-primary focus:outline-none focus:ring-1 focus:ring-primary-default focus:border-primary-default"}),h.jsxs("span",{className:"text-xs text-text-secondary mt-1 block",children:[I===null&&"Checking Ollama availability...",I===!0&&h.jsx("span",{className:"text-success-600",children:" Ollama is running"}),I===!1&&h.jsxs("span",{className:"text-error-600",children:[" Ollama not found. Make sure it's running at ",b]})]})]}),Y&&h.jsxs("label",{className:"block mb-4 text-text-primary",children:["API Key:",h.jsx("input",{type:"password",value:v,onChange:ee=>x(ee.target.value),placeholder:oC[p],className:"mt-1 block w-full px-3 py-2 border border-field-border rounded-default shadow-sm bg-surface-1 text-text-primary focus:outline-none focus:ring-1 focus:ring-primary-default focus:border-primary-default font-mono"}),h.jsx("span",{className:"text-xs text-text-secondary mt-1 block",children:" Your API key is stored locally in your browser and never sent to our servers."})]}),ae&&j.length===0&&!E&&h.jsx(Xe,{onClick:()=>void O(),type:"secondary",className:"mb-4 w-full",children:p==="ollama"?"Load Local Models":"Validate Key & Load Models"}),E&&h.jsxs("div",{className:"flex items-center gap-2 text-text-secondary mb-4",children:[h.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-primary-default border-t-transparent rounded-full"}),"Fetching models..."]}),P&&h.jsx("div",{className:"text-error-600 text-sm mb-4 p-2 bg-error-50 rounded-default border border-error-200",children:P}),j.length>0&&h.jsxs("label",{className:"block mb-4 text-text-primary",children:["Model:",h.jsxs("select",{value:S,onChange:ee=>k(ee.target.value),className:"mt-1 block w-full px-3 py-2 border border-field-border rounded-default shadow-sm bg-surface-1 text-text-primary focus:outline-none focus:ring-1 focus:ring-primary-default focus:border-primary-default",children:[h.jsx("option",{value:"",children:"Select a model..."}),j.map(ee=>h.jsxs("option",{value:ee.id,children:[ee.name," ",ee.description&&`(${ee.description})`]},ee.id))]})]}),h.jsxs("div",{className:"mt-6 pt-6 border-t border-border",children:[h.jsxs("h3",{className:"text-lg font-semibold mb-4 text-text-primary flex items-center gap-2",children:[h.jsx("span",{children:""})," Speech Settings"]}),h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("span",{className:"text-text-primary",children:"Enable Speech"}),h.jsx("button",{type:"button",onClick:()=>f(!d),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d?"bg-primary-default":"bg-surface-3"}`,children:h.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d?"translate-x-6":"translate-x-1"}`})})]}),h.jsxs("label",{className:"block mb-4 text-text-primary",children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsx("span",{children:"Volume"}),h.jsxs("span",{className:"text-sm text-text-secondary",children:[Math.round(l*100),"%"]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:""}),h.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:l,onChange:ee=>c(parseFloat(ee.target.value)),className:"flex-1 h-2 bg-surface-4 rounded-lg appearance-none cursor-pointer accent-primary-default"}),h.jsx("span",{className:"text-lg",children:""})]})]}),h.jsxs("label",{className:"block mb-4 text-text-primary",children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsx("span",{children:"Speed"}),h.jsxs("span",{className:"text-sm text-text-secondary",children:[a.toFixed(1),"x"]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:""}),h.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:a,onChange:ee=>s(parseFloat(ee.target.value)),className:"flex-1 h-2 bg-surface-4 rounded-lg appearance-none cursor-pointer accent-primary-default"}),h.jsx("span",{className:"text-lg",children:""})]})]})]}),h.jsxs("div",{className:"flex justify-between mt-6",children:[h.jsx("div",{children:t&&h.jsx(Xe,{onClick:F,type:"error-text",children:"Clear Config"})}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx(Xe,{onClick:e,type:"primary-text",children:"Cancel"}),h.jsx("button",{onClick:M,disabled:!S,className:`px-6 py-3 rounded-default font-medium transition-opacity duration-200 ${S?"bg-primary-default text-white hover:opacity-70":"bg-surface-2 text-text-disabled cursor-not-allowed"}`,children:"Save"})]})]})]})})})},P_=[{name:"wave",animation:"animate-wave"},{name:"bounce",animation:"animate-bounce"},{name:"wiggle",animation:"animate-wiggle"},{name:"spin",animation:"animate-spin-slow"},{name:"pulse",animation:"animate-pulse"}],tL=({onToggleChat:e})=>{const[t,r]=U.useState(null),[a,s]=U.useState(!1),[l,c]=U.useState(!1),{isConfigured:d,chatPhase:f,currentToolName:p,chatResponse:y,setShowFullResponse:v,setChatPhase:x,setChatResponse:b,speakResponse:_,isSpeaking:S,speechEnabled:k}=Fi();U.useEffect(()=>{const de=()=>{const he=P_[Math.floor(Math.random()*P_.length)];r(he.animation),setTimeout(()=>{r(null)},1e3)},J=setTimeout(de,2e3),te=setInterval(de,3e4);return()=>{clearTimeout(J),clearInterval(te)}},[]);const j=()=>{s(!0),t||(r("animate-wiggle"),setTimeout(()=>{a||r(null)},500))},R=()=>{s(!1)},E=()=>{d?e&&e():c(!0)},q=!d||!!e,P=f==="thinking",I=P||f==="tool-calling",A=f==="done"&&y,O=80,M=y&&y.length>O?y.substring(0,O)+"...":y,F=y&&y.length>O,Y=de=>{de.stopPropagation(),v(!0)},ae=de=>{de.stopPropagation(),v(!0),k&&y&&!S&&_(y)},ee=de=>{de.stopPropagation(),x("idle"),b("")};return h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsxs("div",{className:`relative transition-transform duration-300 ${a&&!A?"scale-105":""} ${q?"cursor-pointer":"cursor-default"}`,onMouseEnter:j,onMouseLeave:R,onClick:E,children:[h.jsx("img",{src:ck,alt:"Guido",className:`w-24 h-24 sm:w-32 sm:h-32 object-contain drop-shadow-lg ${t||""}`}),I&&h.jsxs("div",{className:"absolute -top-2 left-full ml-2 sm:-top-4 sm:left-auto sm:-right-32 animate-fade-in z-50",children:[h.jsx("div",{className:"relative bg-surface-1 border-2 border-primary-400 rounded-full px-4 py-2 sm:px-5 sm:py-2.5 shadow-xl shadow-primary-500/30",children:h.jsx("div",{className:"flex items-center gap-2",children:P?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"relative w-4 h-4",children:h.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-primary-300 border-t-primary-500 animate-spin"})}),h.jsx("span",{className:"text-xs sm:text-sm font-medium text-primary-600 dark:text-primary-400 whitespace-nowrap",children:"Thinking..."})]}):h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"text-sm sm:text-base",children:""}),h.jsx("span",{className:"text-xs sm:text-sm font-medium text-amber-600 dark:text-amber-400 whitespace-nowrap max-w-[100px] sm:max-w-none truncate",children:p?.replace(/_/g," ")||"Working..."})]})})}),h.jsx("div",{className:"hidden sm:block absolute -bottom-2 -left-2",children:h.jsx("div",{className:"w-4 h-4 rounded-full bg-surface-1 border-2 border-primary-400 shadow-md"})}),h.jsx("div",{className:"hidden sm:block absolute -bottom-4 -left-5",children:h.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-surface-1 border-2 border-primary-400 shadow-sm animate-pulse"})}),h.jsx("div",{className:"hidden sm:block absolute -bottom-5 -left-7",children:h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-surface-1 border border-primary-400 animate-pulse",style:{animationDelay:"150ms"}})})]}),A&&h.jsxs("div",{className:"absolute -top-2 left-full ml-2 sm:-top-4 sm:left-auto sm:-right-44 animate-fade-in z-50 w-36 sm:w-48",children:[h.jsxs("div",{className:`relative bg-surface-1 border-2 rounded-2xl px-3 py-2 shadow-xl cursor-pointer transition-colors ${S?"border-primary-500 shadow-primary-500/30 animate-pulse":"border-success-400 shadow-success-500/20 hover:border-success-500"}`,onClick:ae,title:S?"Click to stop speaking":k?"Click to hear response":"Click to see full response",children:[h.jsx("button",{onClick:ee,className:"absolute -top-2 -right-2 w-5 h-5 bg-surface-1 border border-strong rounded-full flex items-center justify-center text-xs text-text-secondary hover:text-text-primary hover:bg-surface-2 transition-colors shadow-md z-10",children:""}),S&&h.jsx("div",{className:"absolute -top-2 -left-2 w-5 h-5 bg-primary-500 rounded-full flex items-center justify-center text-white text-xs shadow-md z-10 animate-pulse",children:""}),h.jsx("p",{className:"text-xs text-text-primary leading-relaxed",children:M}),F&&h.jsx("button",{onClick:Y,className:"mt-1.5 text-xs font-medium text-primary-500 hover:text-primary-600 dark:text-primary-400 dark:hover:text-primary-300 transition-colors",children:"See more..."})]}),h.jsx("div",{className:"hidden sm:block absolute bottom-2 -left-2",children:h.jsx("div",{className:`w-3 h-3 bg-surface-1 border-l-2 border-b-2 rotate-45 ${S?"border-primary-500":"border-success-400"}`})})]}),a&&!d&&!I&&!A&&h.jsxs("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-surface-1 border border-strong rounded-lg px-3 py-1 text-sm text-text-primary whitespace-nowrap shadow-lg animate-fade-in",children:["Click to set up AI! ",h.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-full w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-surface-1"})]})]}),!d&&h.jsx("p",{className:"text-base sm:text-lg text-text-secondary mt-2 text-center",children:"Click me to set up AI!"}),l&&h.jsx(dk,{onClose:()=>c(!1)})]})},nL=()=>{const{isEmpty:e,fields:t}=er(),{handleUpdateFields:r,setDisabledReasons:a}=Ws(),{isExpertMode:s}=Pr(),{secretSpaceMode:l}=Br(),{setIsActive:c}=om(),[d,f]=U.useState(0),[p,y]=U.useState(!0),v=()=>{const b=d+1;f(b),b>=5&&(c(!0),f(0)),setTimeout(()=>{f(_=>_===b?0:_)},2e3)},x=b=>{const _=t.map(S=>{const k=b.changes.find(j=>j.fieldName===S.name);return k?{...S,[k.property]:k.oldValue}:S});r(_),a(S=>{const k={...S};return b.changes.forEach(j=>{j.reason!=="User action"&&j.reason!=="Checked all fields"&&j.reason!=="Unchecked all fields"&&delete k[j.fieldName]}),k})};return h.jsxs("div",{className:"container mx-auto px-2 sm:px-6 lg:px-8 max-w-full sm:max-w-[95%] md:max-w-[90%] lg:max-w-6xl",children:[l?h.jsxs("div",{className:"flex flex-col items-center my-4 sm:my-6",children:[h.jsx(tL,{onToggleChat:()=>y(b=>!b)}),h.jsx("p",{className:"text-base sm:text-lg text-text-secondary mb-6 sm:mb-8 text-center",children:"Configuration Template Manager"})]}):h.jsxs("div",{className:"flex flex-col items-center my-4 sm:my-6",children:[h.jsx("img",{onClick:v,src:ck,alt:"Guido",className:"w-24 h-24 sm:w-32 sm:h-32 object-contain drop-shadow-lg cursor-pointer"}),h.jsx("p",{className:"text-base sm:text-lg text-text-secondary mb-6 sm:mb-8 text-center",children:"Configuration Template Manager"})]}),h.jsx(Vz,{showAIChat:p}),h.jsxs("div",{className:"rounded-default border border-strong shadow-lg p-3 sm:p-6 md:p-8 lg:p-12 w-full bg-surface-1/85 backdrop-blur-sm transition-all duration-300 blend-glass",children:[h.jsx(iC,{}),(!e()||s)&&h.jsx(sC,{}),h.jsx(Qz,{})]}),h.jsx(eL,{onUndo:x})]})};function Mm(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Gi=Mm();function fk(e){Gi=e}var ql={exec:()=>null};function bt(e,t=""){let r=typeof e=="string"?e:e.source,a={replace:(s,l)=>{let c=typeof l=="string"?l:l.source;return c=c.replace(Bn.caret,"$1"),r=r.replace(s,c),a},getRegex:()=>new RegExp(r,t)};return a}var rL=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Bn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},aL=/^(?:[ \t]*(?:\n|$))+/,iL=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,sL=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ru=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,oL=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Im=/(?:[*+-]|\d{1,9}[.)])/,pk=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,hk=bt(pk).replace(/bull/g,Im).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),lL=bt(pk).replace(/bull/g,Im).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),$m=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,uL=/^[^\n]+/,Dm=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,cL=bt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Dm).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),dL=bt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Im).getRegex(),_d="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",zm=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,fL=bt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",zm).replace("tag",_d).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),mk=bt($m).replace("hr",ru).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_d).getRegex(),pL=bt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",mk).getRegex(),Lm={blockquote:pL,code:iL,def:cL,fences:sL,heading:oL,hr:ru,html:fL,lheading:hk,list:dL,newline:aL,paragraph:mk,table:ql,text:uL},B_=bt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ru).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_d).getRegex(),hL={...Lm,lheading:lL,table:B_,paragraph:bt($m).replace("hr",ru).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",B_).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_d).getRegex()},mL={...Lm,html:bt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",zm).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ql,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:bt($m).replace("hr",ru).replace("heading",` *#{1,6} *[^
]`).replace("lheading",hk).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},gL=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,yL=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,gk=/^( {2,}|\\)\n(?!\s*$)/,vL=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,wd=/[\p{P}\p{S}]/u,Um=/[\s\p{P}\p{S}]/u,yk=/[^\s\p{P}\p{S}]/u,bL=bt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Um).getRegex(),vk=/(?!~)[\p{P}\p{S}]/u,xL=/(?!~)[\s\p{P}\p{S}]/u,_L=/(?:[^\s\p{P}\p{S}]|~)/u,wL=bt(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",rL?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),bk=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,SL=bt(bk,"u").replace(/punct/g,wd).getRegex(),kL=bt(bk,"u").replace(/punct/g,vk).getRegex(),xk="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",TL=bt(xk,"gu").replace(/notPunctSpace/g,yk).replace(/punctSpace/g,Um).replace(/punct/g,wd).getRegex(),EL=bt(xk,"gu").replace(/notPunctSpace/g,_L).replace(/punctSpace/g,xL).replace(/punct/g,vk).getRegex(),NL=bt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,yk).replace(/punctSpace/g,Um).replace(/punct/g,wd).getRegex(),AL=bt(/\\(punct)/,"gu").replace(/punct/g,wd).getRegex(),CL=bt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),RL=bt(zm).replace("(?:-->|$)","-->").getRegex(),jL=bt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",RL).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),nd=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,OL=bt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",nd).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),_k=bt(/^!?\[(label)\]\[(ref)\]/).replace("label",nd).replace("ref",Dm).getRegex(),wk=bt(/^!?\[(ref)\](?:\[\])?/).replace("ref",Dm).getRegex(),ML=bt("reflink|nolink(?!\\()","g").replace("reflink",_k).replace("nolink",wk).getRegex(),F_=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,qm={_backpedal:ql,anyPunctuation:AL,autolink:CL,blockSkip:wL,br:gk,code:yL,del:ql,emStrongLDelim:SL,emStrongRDelimAst:TL,emStrongRDelimUnd:NL,escape:gL,link:OL,nolink:wk,punctuation:bL,reflink:_k,reflinkSearch:ML,tag:jL,text:vL,url:ql},IL={...qm,link:bt(/^!?\[(label)\]\((.*?)\)/).replace("label",nd).getRegex(),reflink:bt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",nd).getRegex()},Zh={...qm,emStrongRDelimAst:EL,emStrongLDelim:kL,url:bt(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",F_).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:bt(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",F_).getRegex()},$L={...Zh,br:bt(gk).replace("{2,}","*").getRegex(),text:bt(Zh.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Mc={normal:Lm,gfm:hL,pedantic:mL},Ol={normal:qm,gfm:Zh,breaks:$L,pedantic:IL},DL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},V_=e=>DL[e];function wa(e,t){if(t){if(Bn.escapeTest.test(e))return e.replace(Bn.escapeReplace,V_)}else if(Bn.escapeTestNoEncode.test(e))return e.replace(Bn.escapeReplaceNoEncode,V_);return e}function H_(e){try{e=encodeURI(e).replace(Bn.percentDecode,"%")}catch{return null}return e}function G_(e,t){let r=e.replace(Bn.findPipe,(l,c,d)=>{let f=!1,p=c;for(;--p>=0&&d[p]==="\\";)f=!f;return f?"|":" |"}),a=r.split(Bn.splitPipe),s=0;if(a[0].trim()||a.shift(),a.length>0&&!a.at(-1)?.trim()&&a.pop(),t)if(a.length>t)a.splice(t);else for(;a.length<t;)a.push("");for(;s<a.length;s++)a[s]=a[s].trim().replace(Bn.slashPipe,"|");return a}function Ml(e,t,r){let a=e.length;if(a===0)return"";let s=0;for(;s<a&&e.charAt(a-s-1)===t;)s++;return e.slice(0,a-s)}function zL(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let a=0;a<e.length;a++)if(e[a]==="\\")a++;else if(e[a]===t[0])r++;else if(e[a]===t[1]&&(r--,r<0))return a;return r>0?-2:-1}function Z_(e,t,r,a,s){let l=t.href,c=t.title||null,d=e[1].replace(s.other.outputLinkReplace,"$1");a.state.inLink=!0;let f={type:e[0].charAt(0)==="!"?"image":"link",raw:r,href:l,title:c,text:d,tokens:a.inlineTokens(d)};return a.state.inLink=!1,f}function LL(e,t,r){let a=e.match(r.other.indentCodeCompensation);if(a===null)return t;let s=a[1];return t.split(`
`).map(l=>{let c=l.match(r.other.beginningSpace);if(c===null)return l;let[d]=c;return d.length>=s.length?l.slice(s.length):l}).join(`
`)}var rd=class{options;rules;lexer;constructor(e){this.options=e||Gi}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Ml(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],a=LL(r,t[3]||"",this.rules);return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:a}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(this.rules.other.endingHash.test(r)){let a=Ml(r,"#");(this.options.pedantic||!a||this.rules.other.endingSpaceChar.test(a))&&(r=a.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Ml(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=Ml(t[0],`
`).split(`
`),a="",s="",l=[];for(;r.length>0;){let c=!1,d=[],f;for(f=0;f<r.length;f++)if(this.rules.other.blockquoteStart.test(r[f]))d.push(r[f]),c=!0;else if(!c)d.push(r[f]);else break;r=r.slice(f);let p=d.join(`
`),y=p.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");a=a?`${a}
${p}`:p,s=s?`${s}
${y}`:y;let v=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(y,l,!0),this.lexer.state.top=v,r.length===0)break;let x=l.at(-1);if(x?.type==="code")break;if(x?.type==="blockquote"){let b=x,_=b.raw+`
`+r.join(`
`),S=this.blockquote(_);l[l.length-1]=S,a=a.substring(0,a.length-b.raw.length)+S.raw,s=s.substring(0,s.length-b.text.length)+S.text;break}else if(x?.type==="list"){let b=x,_=b.raw+`
`+r.join(`
`),S=this.list(_);l[l.length-1]=S,a=a.substring(0,a.length-x.raw.length)+S.raw,s=s.substring(0,s.length-b.raw.length)+S.raw,r=_.substring(l.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:a,tokens:l,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),a=r.length>1,s={type:"list",raw:"",ordered:a,start:a?+r.slice(0,-1):"",loose:!1,items:[]};r=a?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=a?r:"[*+-]");let l=this.rules.other.listItemRegex(r),c=!1;for(;e;){let f=!1,p="",y="";if(!(t=l.exec(e))||this.rules.block.hr.test(e))break;p=t[0],e=e.substring(p.length);let v=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,S=>" ".repeat(3*S.length)),x=e.split(`
`,1)[0],b=!v.trim(),_=0;if(this.options.pedantic?(_=2,y=v.trimStart()):b?_=t[1].length+1:(_=t[2].search(this.rules.other.nonSpaceChar),_=_>4?1:_,y=v.slice(_),_+=t[1].length),b&&this.rules.other.blankLine.test(x)&&(p+=x+`
`,e=e.substring(x.length+1),f=!0),!f){let S=this.rules.other.nextBulletRegex(_),k=this.rules.other.hrRegex(_),j=this.rules.other.fencesBeginRegex(_),R=this.rules.other.headingBeginRegex(_),E=this.rules.other.htmlBeginRegex(_);for(;e;){let q=e.split(`
`,1)[0],P;if(x=q,this.options.pedantic?(x=x.replace(this.rules.other.listReplaceNesting,"  "),P=x):P=x.replace(this.rules.other.tabCharGlobal,"    "),j.test(x)||R.test(x)||E.test(x)||S.test(x)||k.test(x))break;if(P.search(this.rules.other.nonSpaceChar)>=_||!x.trim())y+=`
`+P.slice(_);else{if(b||v.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||j.test(v)||R.test(v)||k.test(v))break;y+=`
`+x}!b&&!x.trim()&&(b=!0),p+=q+`
`,e=e.substring(q.length+1),v=P.slice(_)}}s.loose||(c?s.loose=!0:this.rules.other.doubleBlankLine.test(p)&&(c=!0)),s.items.push({type:"list_item",raw:p,task:!!this.options.gfm&&this.rules.other.listIsTask.test(y),loose:!1,text:y,tokens:[]}),s.raw+=p}let d=s.items.at(-1);if(d)d.raw=d.raw.trimEnd(),d.text=d.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let f of s.items){if(this.lexer.state.top=!1,f.tokens=this.lexer.blockTokens(f.text,[]),f.task){if(f.text=f.text.replace(this.rules.other.listReplaceTask,""),f.tokens[0]?.type==="text"||f.tokens[0]?.type==="paragraph"){f.tokens[0].raw=f.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),f.tokens[0].text=f.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let y=this.lexer.inlineQueue.length-1;y>=0;y--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[y].src)){this.lexer.inlineQueue[y].src=this.lexer.inlineQueue[y].src.replace(this.rules.other.listReplaceTask,"");break}}let p=this.rules.other.listTaskCheckbox.exec(f.raw);if(p){let y={type:"checkbox",raw:p[0]+" ",checked:p[0]!=="[ ]"};f.checked=y.checked,s.loose?f.tokens[0]&&["paragraph","text"].includes(f.tokens[0].type)&&"tokens"in f.tokens[0]&&f.tokens[0].tokens?(f.tokens[0].raw=y.raw+f.tokens[0].raw,f.tokens[0].text=y.raw+f.tokens[0].text,f.tokens[0].tokens.unshift(y)):f.tokens.unshift({type:"paragraph",raw:y.raw,text:y.raw,tokens:[y]}):f.tokens.unshift(y)}}if(!s.loose){let p=f.tokens.filter(v=>v.type==="space"),y=p.length>0&&p.some(v=>this.rules.other.anyLine.test(v.raw));s.loose=y}}if(s.loose)for(let f of s.items){f.loose=!0;for(let p of f.tokens)p.type==="text"&&(p.type="paragraph")}return s}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let r=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),a=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:a,title:s}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let r=G_(t[1]),a=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],l={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===a.length){for(let c of a)this.rules.other.tableAlignRight.test(c)?l.align.push("right"):this.rules.other.tableAlignCenter.test(c)?l.align.push("center"):this.rules.other.tableAlignLeft.test(c)?l.align.push("left"):l.align.push(null);for(let c=0;c<r.length;c++)l.header.push({text:r[c],tokens:this.lexer.inline(r[c]),header:!0,align:l.align[c]});for(let c of s)l.rows.push(G_(c,l.header.length).map((d,f)=>({text:d,tokens:this.lexer.inline(d),header:!1,align:l.align[f]})));return l}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let l=Ml(r.slice(0,-1),"\\");if((r.length-l.length)%2===0)return}else{let l=zL(t[2],"()");if(l===-2)return;if(l>-1){let c=(t[0].indexOf("!")===0?5:4)+t[1].length+l;t[2]=t[2].substring(0,l),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let a=t[2],s="";if(this.options.pedantic){let l=this.rules.other.pedanticHrefTitle.exec(a);l&&(a=l[1],s=l[3])}else s=t[3]?t[3].slice(1,-1):"";return a=a.trim(),this.rules.other.startAngleBracket.test(a)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?a=a.slice(1):a=a.slice(1,-1)),Z_(t,{href:a&&a.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let a=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=t[a.toLowerCase()];if(!s){let l=r[0].charAt(0);return{type:"text",raw:l,text:l}}return Z_(r,s,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let a=this.rules.inline.emStrongLDelim.exec(e);if(!(!a||a[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(a[1]||a[2])||!r||this.rules.inline.punctuation.exec(r))){let s=[...a[0]].length-1,l,c,d=s,f=0,p=a[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,t=t.slice(-1*e.length+s);(a=p.exec(t))!=null;){if(l=a[1]||a[2]||a[3]||a[4]||a[5]||a[6],!l)continue;if(c=[...l].length,a[3]||a[4]){d+=c;continue}else if((a[5]||a[6])&&s%3&&!((s+c)%3)){f+=c;continue}if(d-=c,d>0)continue;c=Math.min(c,c+d+f);let y=[...a[0]][0].length,v=e.slice(0,s+a.index+y+c);if(Math.min(s,c)%2){let b=v.slice(1,-1);return{type:"em",raw:v,text:b,tokens:this.lexer.inlineTokens(b)}}let x=v.slice(2,-2);return{type:"strong",raw:v,text:x,tokens:this.lexer.inlineTokens(x)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(this.rules.other.newLineCharGlobal," "),a=this.rules.other.nonSpaceChar.test(r),s=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return a&&s&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let r,a;return t[2]==="@"?(r=t[1],a="mailto:"+r):(r=t[1],a=r),{type:"link",raw:t[0],text:r,href:a,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,a;if(t[2]==="@")r=t[0],a="mailto:"+r;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);r=t[0],t[1]==="www."?a="http://"+t[0]:a=t[0]}return{type:"link",raw:t[0],text:r,href:a,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let r=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:r}}}},Lr=class Yh{tokens;options;state;inlineQueue;tokenizer;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Gi,this.options.tokenizer=this.options.tokenizer||new rd,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:Bn,block:Mc.normal,inline:Ol.normal};this.options.pedantic?(r.block=Mc.pedantic,r.inline=Ol.pedantic):this.options.gfm&&(r.block=Mc.gfm,this.options.breaks?r.inline=Ol.breaks:r.inline=Ol.gfm),this.tokenizer.rules=r}static get rules(){return{block:Mc,inline:Ol}}static lex(t,r){return new Yh(r).lex(t)}static lexInline(t,r){return new Yh(r).inlineTokens(t)}lex(t){t=t.replace(Bn.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let a=this.inlineQueue[r];this.inlineTokens(a.src,a.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],a=!1){for(this.options.pedantic&&(t=t.replace(Bn.tabCharGlobal,"    ").replace(Bn.spaceLine,""));t;){let s;if(this.options.extensions?.block?.some(c=>(s=c.call({lexer:this},t,r))?(t=t.substring(s.raw.length),r.push(s),!0):!1))continue;if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length);let c=r.at(-1);s.raw.length===1&&c!==void 0?c.raw+=`
`:r.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length);let c=r.at(-1);c?.type==="paragraph"||c?.type==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+s.raw,c.text+=`
`+s.text,this.inlineQueue.at(-1).src=c.text):r.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length);let c=r.at(-1);c?.type==="paragraph"||c?.type==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+s.raw,c.text+=`
`+s.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title},r.push(s));continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),r.push(s);continue}let l=t;if(this.options.extensions?.startBlock){let c=1/0,d=t.slice(1),f;this.options.extensions.startBlock.forEach(p=>{f=p.call({lexer:this},d),typeof f=="number"&&f>=0&&(c=Math.min(c,f))}),c<1/0&&c>=0&&(l=t.substring(0,c+1))}if(this.state.top&&(s=this.tokenizer.paragraph(l))){let c=r.at(-1);a&&c?.type==="paragraph"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+s.raw,c.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):r.push(s),a=l.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length);let c=r.at(-1);c?.type==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+s.raw,c.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):r.push(s);continue}if(t){let c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){let a=t,s=null;if(this.tokens.links){let f=Object.keys(this.tokens.links);if(f.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)f.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(a))!=null;)a=a.slice(0,s.index)+"++"+a.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let l;for(;(s=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)l=s[2]?s[2].length:0,a=a.slice(0,s.index+l)+"["+"a".repeat(s[0].length-l-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);a=this.options.hooks?.emStrongMask?.call({lexer:this},a)??a;let c=!1,d="";for(;t;){c||(d=""),c=!1;let f;if(this.options.extensions?.inline?.some(y=>(f=y.call({lexer:this},t,r))?(t=t.substring(f.raw.length),r.push(f),!0):!1))continue;if(f=this.tokenizer.escape(t)){t=t.substring(f.raw.length),r.push(f);continue}if(f=this.tokenizer.tag(t)){t=t.substring(f.raw.length),r.push(f);continue}if(f=this.tokenizer.link(t)){t=t.substring(f.raw.length),r.push(f);continue}if(f=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(f.raw.length);let y=r.at(-1);f.type==="text"&&y?.type==="text"?(y.raw+=f.raw,y.text+=f.text):r.push(f);continue}if(f=this.tokenizer.emStrong(t,a,d)){t=t.substring(f.raw.length),r.push(f);continue}if(f=this.tokenizer.codespan(t)){t=t.substring(f.raw.length),r.push(f);continue}if(f=this.tokenizer.br(t)){t=t.substring(f.raw.length),r.push(f);continue}if(f=this.tokenizer.del(t)){t=t.substring(f.raw.length),r.push(f);continue}if(f=this.tokenizer.autolink(t)){t=t.substring(f.raw.length),r.push(f);continue}if(!this.state.inLink&&(f=this.tokenizer.url(t))){t=t.substring(f.raw.length),r.push(f);continue}let p=t;if(this.options.extensions?.startInline){let y=1/0,v=t.slice(1),x;this.options.extensions.startInline.forEach(b=>{x=b.call({lexer:this},v),typeof x=="number"&&x>=0&&(y=Math.min(y,x))}),y<1/0&&y>=0&&(p=t.substring(0,y+1))}if(f=this.tokenizer.inlineText(p)){t=t.substring(f.raw.length),f.raw.slice(-1)!=="_"&&(d=f.raw.slice(-1)),c=!0;let y=r.at(-1);y?.type==="text"?(y.raw+=f.raw,y.text+=f.text):r.push(f);continue}if(t){let y="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(y);break}else throw new Error(y)}}return r}},ad=class{options;parser;constructor(e){this.options=e||Gi}space(e){return""}code({text:e,lang:t,escaped:r}){let a=(t||"").match(Bn.notSpaceStart)?.[0],s=e.replace(Bn.endingNewline,"")+`
`;return a?'<pre><code class="language-'+wa(a)+'">'+(r?s:wa(s,!0))+`</code></pre>
`:"<pre><code>"+(r?s:wa(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,r=e.start,a="";for(let c=0;c<e.items.length;c++){let d=e.items[c];a+=this.listitem(d)}let s=t?"ol":"ul",l=t&&r!==1?' start="'+r+'"':"";return"<"+s+l+`>
`+a+"</"+s+`>
`}listitem(e){return`<li>${this.parser.parse(e.tokens)}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let s=0;s<e.header.length;s++)r+=this.tablecell(e.header[s]);t+=this.tablerow({text:r});let a="";for(let s=0;s<e.rows.length;s++){let l=e.rows[s];r="";for(let c=0;c<l.length;c++)r+=this.tablecell(l[c]);a+=this.tablerow({text:r})}return a&&(a=`<tbody>${a}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+a+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${wa(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){let a=this.parser.parseInline(r),s=H_(e);if(s===null)return a;e=s;let l='<a href="'+e+'"';return t&&(l+=' title="'+wa(t)+'"'),l+=">"+a+"</a>",l}image({href:e,title:t,text:r,tokens:a}){a&&(r=this.parser.parseInline(a,this.parser.textRenderer));let s=H_(e);if(s===null)return wa(r);e=s;let l=`<img src="${e}" alt="${r}"`;return t&&(l+=` title="${wa(t)}"`),l+=">",l}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:wa(e.text)}},Pm=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}checkbox({raw:e}){return e}},Ur=class Jh{options;renderer;textRenderer;constructor(t){this.options=t||Gi,this.options.renderer=this.options.renderer||new ad,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Pm}static parse(t,r){return new Jh(r).parse(t)}static parseInline(t,r){return new Jh(r).parseInline(t)}parse(t){let r="";for(let a=0;a<t.length;a++){let s=t[a];if(this.options.extensions?.renderers?.[s.type]){let c=s,d=this.options.extensions.renderers[c.type].call({parser:this},c);if(d!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(c.type)){r+=d||"";continue}}let l=s;switch(l.type){case"space":{r+=this.renderer.space(l);break}case"hr":{r+=this.renderer.hr(l);break}case"heading":{r+=this.renderer.heading(l);break}case"code":{r+=this.renderer.code(l);break}case"table":{r+=this.renderer.table(l);break}case"blockquote":{r+=this.renderer.blockquote(l);break}case"list":{r+=this.renderer.list(l);break}case"checkbox":{r+=this.renderer.checkbox(l);break}case"html":{r+=this.renderer.html(l);break}case"def":{r+=this.renderer.def(l);break}case"paragraph":{r+=this.renderer.paragraph(l);break}case"text":{r+=this.renderer.text(l);break}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(t,r=this.renderer){let a="";for(let s=0;s<t.length;s++){let l=t[s];if(this.options.extensions?.renderers?.[l.type]){let d=this.options.extensions.renderers[l.type].call({parser:this},l);if(d!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){a+=d||"";continue}}let c=l;switch(c.type){case"escape":{a+=r.text(c);break}case"html":{a+=r.html(c);break}case"link":{a+=r.link(c);break}case"image":{a+=r.image(c);break}case"checkbox":{a+=r.checkbox(c);break}case"strong":{a+=r.strong(c);break}case"em":{a+=r.em(c);break}case"codespan":{a+=r.codespan(c);break}case"br":{a+=r.br(c);break}case"del":{a+=r.del(c);break}case"text":{a+=r.text(c);break}default:{let d='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(d),"";throw new Error(d)}}}return a}},zl=class{options;block;constructor(e){this.options=e||Gi}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?Lr.lex:Lr.lexInline}provideParser(){return this.block?Ur.parse:Ur.parseInline}},UL=class{defaults=Mm();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Ur;Renderer=ad;TextRenderer=Pm;Lexer=Lr;Tokenizer=rd;Hooks=zl;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(let a of e)switch(r=r.concat(t.call(this,a)),a.type){case"table":{let s=a;for(let l of s.header)r=r.concat(this.walkTokens(l.tokens,t));for(let l of s.rows)for(let c of l)r=r.concat(this.walkTokens(c.tokens,t));break}case"list":{let s=a;r=r.concat(this.walkTokens(s.items,t));break}default:{let s=a;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(l=>{let c=s[l].flat(1/0);r=r.concat(this.walkTokens(c,t))}):s.tokens&&(r=r.concat(this.walkTokens(s.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let a={...r};if(a.async=this.defaults.async||a.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let l=t.renderers[s.name];l?t.renderers[s.name]=function(...c){let d=s.renderer.apply(this,c);return d===!1&&(d=l.apply(this,c)),d}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let l=t[s.level];l?l.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),a.extensions=t),r.renderer){let s=this.defaults.renderer||new ad(this.defaults);for(let l in r.renderer){if(!(l in s))throw new Error(`renderer '${l}' does not exist`);if(["options","parser"].includes(l))continue;let c=l,d=r.renderer[c],f=s[c];s[c]=(...p)=>{let y=d.apply(s,p);return y===!1&&(y=f.apply(s,p)),y||""}}a.renderer=s}if(r.tokenizer){let s=this.defaults.tokenizer||new rd(this.defaults);for(let l in r.tokenizer){if(!(l in s))throw new Error(`tokenizer '${l}' does not exist`);if(["options","rules","lexer"].includes(l))continue;let c=l,d=r.tokenizer[c],f=s[c];s[c]=(...p)=>{let y=d.apply(s,p);return y===!1&&(y=f.apply(s,p)),y}}a.tokenizer=s}if(r.hooks){let s=this.defaults.hooks||new zl;for(let l in r.hooks){if(!(l in s))throw new Error(`hook '${l}' does not exist`);if(["options","block"].includes(l))continue;let c=l,d=r.hooks[c],f=s[c];zl.passThroughHooks.has(l)?s[c]=p=>{if(this.defaults.async&&zl.passThroughHooksRespectAsync.has(l))return(async()=>{let v=await d.call(s,p);return f.call(s,v)})();let y=d.call(s,p);return f.call(s,y)}:s[c]=(...p)=>{if(this.defaults.async)return(async()=>{let v=await d.apply(s,p);return v===!1&&(v=await f.apply(s,p)),v})();let y=d.apply(s,p);return y===!1&&(y=f.apply(s,p)),y}}a.hooks=s}if(r.walkTokens){let s=this.defaults.walkTokens,l=r.walkTokens;a.walkTokens=function(c){let d=[];return d.push(l.call(this,c)),s&&(d=d.concat(s.call(this,c))),d}}this.defaults={...this.defaults,...a}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Lr.lex(e,t??this.defaults)}parser(e,t){return Ur.parse(e,t??this.defaults)}parseMarkdown(e){return(t,r)=>{let a={...r},s={...this.defaults,...a},l=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&a.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(s.hooks&&(s.hooks.options=s,s.hooks.block=e),s.async)return(async()=>{let c=s.hooks?await s.hooks.preprocess(t):t,d=await(s.hooks?await s.hooks.provideLexer():e?Lr.lex:Lr.lexInline)(c,s),f=s.hooks?await s.hooks.processAllTokens(d):d;s.walkTokens&&await Promise.all(this.walkTokens(f,s.walkTokens));let p=await(s.hooks?await s.hooks.provideParser():e?Ur.parse:Ur.parseInline)(f,s);return s.hooks?await s.hooks.postprocess(p):p})().catch(l);try{s.hooks&&(t=s.hooks.preprocess(t));let c=(s.hooks?s.hooks.provideLexer():e?Lr.lex:Lr.lexInline)(t,s);s.hooks&&(c=s.hooks.processAllTokens(c)),s.walkTokens&&this.walkTokens(c,s.walkTokens);let d=(s.hooks?s.hooks.provideParser():e?Ur.parse:Ur.parseInline)(c,s);return s.hooks&&(d=s.hooks.postprocess(d)),d}catch(c){return l(c)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let a="<p>An error occurred:</p><pre>"+wa(r.message+"",!0)+"</pre>";return t?Promise.resolve(a):a}if(t)return Promise.reject(r);throw r}}},Bi=new UL;function Et(e,t){return Bi.parse(e,t)}Et.options=Et.setOptions=function(e){return Bi.setOptions(e),Et.defaults=Bi.defaults,fk(Et.defaults),Et};Et.getDefaults=Mm;Et.defaults=Gi;Et.use=function(...e){return Bi.use(...e),Et.defaults=Bi.defaults,fk(Et.defaults),Et};Et.walkTokens=function(e,t){return Bi.walkTokens(e,t)};Et.parseInline=Bi.parseInline;Et.Parser=Ur;Et.parser=Ur.parse;Et.Renderer=ad;Et.TextRenderer=Pm;Et.Lexer=Lr;Et.lexer=Lr.lex;Et.Tokenizer=rd;Et.Hooks=zl;Et.parse=Et;Et.options;Et.setOptions;Et.use;Et.walkTokens;Et.parseInline;Ur.parse;Lr.lex;const qL="/Guido/assets/logo-CPLnsObN.png",PL="/Guido/assets/logo-CPLnsObN.png",BL="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='0%200%2030.998%2030.998'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3cg%3e%3cpath%20d='M18.73,16.686l-1.713-0.205c-0.176-0.654-0.433-1.271-0.763-1.844l1.063-1.354c0.164-0.209,0.145-0.531-0.043-0.718%20l-1.766-1.767c-0.187-0.187-0.509-0.206-0.717-0.044l-1.356,1.067c-0.571-0.33-1.188-0.587-1.841-0.761L11.39,9.345%20c-0.031-0.262-0.273-0.477-0.537-0.477H8.354c-0.264,0-0.506,0.215-0.537,0.477l-0.206,1.714%20c-0.653,0.174-1.271,0.432-1.842,0.762l-1.357-1.065c-0.207-0.163-0.53-0.145-0.716,0.042l-1.767,1.769%20c-0.187,0.187-0.206,0.509-0.043,0.717l1.065,1.354c-0.331,0.572-0.586,1.19-0.761,1.844l-1.713,0.205%20C0.215,16.718,0,16.959,0,17.225v2.498c0,0.265,0.215,0.506,0.477,0.536l1.714,0.207c0.175,0.651,0.431,1.269,0.761,1.841%20l-1.064,1.354c-0.163,0.21-0.144,0.532,0.043,0.719l1.765,1.767c0.186,0.188,0.509,0.207,0.716,0.045l1.357-1.068%20c0.571,0.33,1.189,0.588,1.842,0.762L7.817,27.6c0.031,0.262,0.273,0.477,0.537,0.477h2.499c0.264,0,0.506-0.215,0.537-0.477%20l0.206-1.715c0.653-0.174,1.271-0.432,1.843-0.762l1.356,1.064c0.208,0.162,0.53,0.145,0.716-0.041l1.767-1.77%20c0.187-0.188,0.207-0.51,0.043-0.717l-1.065-1.354c0.331-0.572,0.586-1.19,0.761-1.844l1.715-0.205%20c0.263-0.031,0.477-0.271,0.477-0.537v-2.498C19.209,16.957,18.994,16.718,18.73,16.686z%20M9.605,23.271%20c-2.651,0-4.801-2.148-4.801-4.801c0-2.652,2.15-4.802,4.801-4.802c2.652,0,4.801,2.149,4.801,4.802%20C14.407,21.123,12.257,23.271,9.605,23.271z'/%3e%3cpath%20d='M30.641,8.804L29.35,8.651c-0.132-0.492-0.324-0.959-0.574-1.39l0.803-1.02c0.123-0.155,0.107-0.399-0.033-0.54%20l-1.33-1.329c-0.14-0.142-0.383-0.156-0.54-0.033l-1.021,0.803c-0.43-0.249-0.896-0.441-1.385-0.571l-0.156-1.29%20c-0.022-0.198-0.205-0.359-0.402-0.359H22.83c-0.199,0-0.381,0.161-0.404,0.359l-0.154,1.29c-0.492,0.13-0.957,0.323-1.388,0.572%20l-1.021-0.802c-0.156-0.122-0.399-0.107-0.539,0.031l-1.331,1.332c-0.142,0.141-0.155,0.383-0.032,0.539l0.803,1.021%20c-0.25,0.43-0.441,0.896-0.574,1.388L16.9,8.806c-0.198,0.023-0.359,0.206-0.359,0.405v1.881c0,0.197,0.162,0.381,0.359,0.402%20l1.289,0.157c0.133,0.49,0.326,0.955,0.574,1.386l-0.803,1.02c-0.122,0.156-0.107,0.4,0.033,0.54l1.328,1.329%20c0.141,0.143,0.383,0.156,0.539,0.033l1.021-0.804c0.43,0.249,0.896,0.442,1.387,0.572l0.155,1.292%20c0.022,0.195,0.206,0.356,0.404,0.356h1.881c0.198,0,0.38-0.161,0.403-0.356l0.154-1.292c0.492-0.13,0.957-0.323,1.387-0.572%20l1.021,0.802c0.157,0.123,0.399,0.109,0.54-0.031l1.33-1.332c0.141-0.139,0.155-0.382,0.032-0.538l-0.802-1.021%20c0.25-0.429,0.44-0.895,0.572-1.386l1.291-0.154c0.198-0.025,0.359-0.205,0.359-0.405V9.21%20C30.999,9.009,30.837,8.829,30.641,8.804z%20M23.771,13.764c-1.998,0-3.615-1.618-3.615-3.614c0-1.997,1.619-3.614,3.615-3.614%20c1.994,0,3.613,1.617,3.613,3.614C27.384,12.145,25.766,13.764,23.771,13.764z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",FL=({onOpenRegistries:e,isExpertMode:t,onToggleExpertMode:r,onOpenAISetup:a,onOpenChatHistory:s})=>{const[l,c]=U.useState(!1),[d,f]=U.useState(!1),[p,y]=U.useState(!1),[v,x]=U.useState(!1),b=U.useRef(null),_=U.useRef(null),{themeBlend:S,setThemeBlend:k,marsBackground:j,setMarsBackground:R,secretSpaceMode:E,setSecretSpaceMode:q}=Br(),{alert:P,confirm:H}=Ea();U.useEffect(()=>{const F=Y=>{_.current&&!_.current.contains(Y.target)&&(c(!1),f(!1))};return document.addEventListener("mousedown",F),()=>document.removeEventListener("mousedown",F)},[]),U.useEffect(()=>()=>{b.current&&cancelAnimationFrame(b.current)},[]);const I=()=>{if(p){b.current&&(cancelAnimationFrame(b.current),b.current=null),y(!1);return}const Y=S<50?100:0;if(S===Y)return;y(!0);const ae=Date.now(),ee=8e3,de=S,J=()=>{const te=Date.now()-ae,he=Math.min(te/ee,1),ve=he<.5?2*he*he:1-Math.pow(-2*he+2,2)/2,se=de+(Y-de)*ve;k(Math.round(se)),he<1?b.current=requestAnimationFrame(J):(y(!1),b.current=null)};b.current=requestAnimationFrame(J)},A=F=>{b.current&&(cancelAnimationFrame(b.current),b.current=null,y(!1)),k(parseInt(F.target.value,10))},O=()=>{c(!1),f(!1),e()},M=()=>S<=25?"Light":S<=50?"Light+ ":S<=75?"Dark+ ":"Dark";return h.jsxs("div",{className:"relative",ref:_,children:[h.jsx("button",{type:"button",onClick:()=>{c(!l),l&&f(!1)},className:"w-6 h-6 flex items-center justify-center text-text-secondary hover:text-gray-900 dark:hover:text-white transition-colors","aria-label":"Settings",title:"Settings",children:h.jsx("img",{src:BL,alt:"Settings",className:"w-5 h-5 dark:invert"})}),l&&h.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-surface-0 rounded-lg shadow-lg border py-1 z-50",children:[h.jsxs("button",{type:"button",onClick:()=>{r()},className:"w-full px-4 py-2 text-left text-base text-text-secondary hover:bg-surface-hover flex items-center justify-between",children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{children:""}),h.jsx("span",{children:"Expert Mode"})]}),h.jsx("span",{className:`text-sm ${t?"text-success-700":"text-text-disabled"}`,children:t?" On":"Off"})]}),t&&h.jsxs("button",{type:"button",onClick:O,className:"w-full px-4 py-2 text-left text-base text-text-secondary hover:bg-surface-hover flex items-center gap-2",children:[h.jsx("span",{children:""}),h.jsx("span",{children:"Registries"})]}),E&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"my-1 border-t border-border"}),h.jsxs("button",{type:"button",onClick:()=>{c(!1),f(!1),a()},className:"w-full px-4 py-2 text-left text-base text-text-secondary hover:bg-surface-hover flex items-center gap-2",children:[h.jsx("span",{children:""}),h.jsx("span",{children:"AI Setup"})]})]}),h.jsxs("button",{type:"button",onClick:()=>{c(!1),f(!1),s()},className:"w-full px-4 py-2 text-left text-base text-text-secondary hover:bg-surface-hover flex items-center gap-2",children:[h.jsx("span",{children:""}),h.jsx("span",{children:"Chat History"})]}),h.jsx("div",{className:"my-1 border-t border-border"}),h.jsxs("button",{type:"button",onClick:()=>{v||H("Are you sure you want to clear all local data? This will remove your template, settings, AI configuration, and preferences. This cannot be undone.",()=>{x(!0),ft.clear().then(()=>{P("All local data has been cleared. Refreshing..."),setTimeout(()=>{window.location.reload()},500)}).catch(F=>{console.error("Failed to clear data:",F),P("Failed to clear data")}).finally(()=>{x(!1)})})},disabled:v,className:"w-full px-4 py-2 text-left text-base text-error-600 hover:bg-error-100 dark:hover:bg-error-800/20 flex items-center gap-2 disabled:opacity-50",children:[h.jsx("span",{children:""}),h.jsx("span",{children:v?"Clearing...":"Clear All Data"})]}),h.jsxs("div",{className:"relative",children:[h.jsxs("button",{type:"button",onClick:()=>f(!d),className:"w-full px-4 py-2 text-left text-base text-text-secondary hover:bg-surface-hover flex items-center justify-between",children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{children:""}),h.jsx("span",{children:"Theme"})]}),h.jsx("span",{className:"text-sm",children:d?"":""})]}),d&&h.jsxs("div",{className:"border-t border bg-surface-2 px-4 py-3",children:[h.jsxs("div",{className:"mb-3",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:"text-lg",children:""}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{type:"button",onClick:I,className:`w-6 h-6 flex items-center justify-center rounded-full transition-all ${p?"bg-vibrant-blue text-white":"bg-surface-3 text-text-secondary hover:bg-surface-4"}`,title:p?"Stop animation":S<50?"Play day  night":"Play night  day",children:p?"":""}),h.jsx("span",{className:"text-sm text-text-secondary font-medium",children:M()})]}),h.jsx("span",{className:"text-lg",children:""})]}),h.jsx("input",{id:"theme-blend",name:"theme-blend",type:"range",min:"0",max:"100",value:S,onChange:A,disabled:p,"aria-label":"Theme blend between light and dark",className:`w-full h-2 bg-surface-4 rounded-lg appearance-none cursor-pointer accent-vibrant-blue ${p?"opacity-50":""}`,style:{background:"linear-gradient(to right, #FFFFFF 0%, #E3F8FC 25%, #3AB0DB 50%, #194960 75%, #171F2B 100%)"}})]}),h.jsxs("div",{className:"mt-3 pt-3 border-t border-border space-y-2",children:[E&&h.jsxs("button",{type:"button",onClick:()=>{},className:"w-full flex items-center justify-between text-sm text-text-secondary hover:text-text-primary",children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{children:""}),h.jsx("span",{children:"Guido's Chill Spot"})]}),h.jsx("span",{className:"text-sm text-success-700",children:""})]}),h.jsxs("button",{type:"button",onClick:()=>{q(!1),R(!0)},className:"w-full flex items-center justify-between text-sm text-text-secondary hover:text-text-primary",children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{children:""}),h.jsx("span",{children:"Mars Plains"})]}),h.jsx("span",{className:`text-sm ${!E&&j?"text-success-700":"text-text-disabled"}`,children:!E&&j?"":""})]}),h.jsxs("button",{type:"button",onClick:()=>{q(!1),R(!1)},className:"w-full flex items-center justify-between text-sm text-text-secondary hover:text-text-primary",children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{children:""}),h.jsx("span",{children:"No Background"})]}),h.jsx("span",{className:`text-sm ${!E&&!j?"text-success-700":"text-text-disabled"}`,children:!E&&!j?"":""})]}),h.jsx("p",{className:"text-xs text-text-disabled pl-6",children:E?"You found Guido's secret spot! ":"Disable for better performance"})]})]})]})]})]})},zs=({status:e,name:t})=>{const r={loaded:"bg-validation-success-bg text-validation-success-text",loading:"bg-validation-warning-bg text-validation-warning-text",error:"bg-validation-error-bg text-validation-error-text",disabled:"bg-surface-3 text-text-disabled"},a={loaded:" Connected",loading:" Loading...",error:" Error",disabled:" Disabled"};return h.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${r[e]}`,title:t,children:a[e]})},VL=({onClose:e})=>{const{isGitHubEnabled:t,isNpmEnabled:r,isFhirEnabled:a,isBuiltInEnabled:s,customRegistryUrl:l,customRegistries:c,registryDefinitions:d,customRegistryDefinition:f,isLoadingDefinitions:p,setIsGitHubEnabled:y,setIsNpmEnabled:v,setIsFhirEnabled:x,setIsBuiltInEnabled:b,addCustomRegistry:_,removeCustomRegistry:S}=eo(),[k,j]=U.useState(""),[R,E]=U.useState(!1),[q,P]=U.useState(null),[H,I]=U.useState(cd().length),[A,O]=U.useState(!1),M=U.useRef(null);U.useEffect(()=>{s&&CC().then(de=>{I(de.length),O(!0)}).catch(()=>{I(0),O(!0)})},[s]);const F=(de,J)=>J?p?"loading":d.has(de)?"loaded":"error":"disabled",Y=()=>s?A?H>0?"loaded":"error":"loading":"disabled",ae=async()=>{if(k.trim()){E(!0),P(null);try{await _(k.trim()),j("")}catch(de){P(de instanceof Error?de.message:"Failed to add registry")}finally{E(!1)}}},ee=async de=>{const J=de.target.files?.[0];if(J){try{const te=await J.text(),he=JSON.parse(te);if(!he||typeof he!="object")throw new Error("Invalid registry definition: not an object");const ve=he;if(typeof ve.name!="string"||typeof ve.baseUrl!="string"||!ve.api)throw new Error("Invalid registry definition: missing required fields (name, baseUrl, api)");await _(ve.baseUrl,ve),P(null)}catch(te){P(te instanceof Error?te.message:"Failed to import registry file")}M.current?.reset()}};return h.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black/50",children:h.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:h.jsxs("div",{className:"bg-surface-0 p-6 rounded-lg shadow-xl w-full max-w-lg max-h-[80vh] flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6 flex-shrink-0",children:[h.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Registry Settings"}),h.jsx("span",{className:"text-sm text-text-disabled",children:p?"loading...":`${d.size} loaded`})]}),h.jsxs("div",{className:"overflow-y-auto flex-1",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-sm font-semibold text-text-secondary mb-3",children:"Built-in Registries"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("label",{htmlFor:"registry-github",className:"flex items-center justify-between p-2 rounded-default hover:bg-surface-hover",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("input",{id:"registry-github",name:"registry-github",type:"checkbox",checked:t,onChange:de=>y(de.target.checked),className:"rounded"}),h.jsx("span",{className:"text-text-primary",children:"GitHub"})]}),h.jsx(zs,{status:F("github",t),name:d.get("github")?.name})]}),h.jsxs("label",{htmlFor:"registry-npm",className:"flex items-center justify-between p-2 rounded-default hover:bg-surface-hover",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("input",{id:"registry-npm",name:"registry-npm",type:"checkbox",checked:r,onChange:de=>v(de.target.checked),className:"rounded"}),h.jsx("span",{className:"text-text-primary",children:"NPM"})]}),h.jsx(zs,{status:F("npm",r),name:d.get("npm")?.name})]}),h.jsxs("label",{htmlFor:"registry-simplifier",className:"flex items-center justify-between p-2 rounded-default hover:bg-surface-hover",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("input",{id:"registry-simplifier",name:"registry-simplifier",type:"checkbox",checked:a,onChange:de=>x(de.target.checked),className:"rounded"}),h.jsx("span",{className:"text-text-primary",children:"Simplifier"})]}),h.jsx(zs,{status:F("simplifier",a),name:d.get("simplifier")?.name})]}),h.jsxs("label",{className:"flex items-center justify-between p-2 rounded-default hover:bg-surface-hover",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("input",{type:"checkbox",checked:s,onChange:de=>b(de.target.checked),className:"rounded"}),h.jsxs("div",{children:[h.jsx("span",{className:"text-text-primary",children:"Built-in Templates"}),h.jsxs("span",{className:"text-xs text-text-disabled ml-2",children:["(",H," bundled)"]})]})]}),h.jsx(zs,{status:Y(),name:"Bundled templates"})]})]})]}),h.jsxs("div",{className:"mb-6 pt-4 border-t border-strong",children:[h.jsx("h3",{className:"text-sm font-semibold text-text-secondary mb-3",children:"Custom Registries"}),l&&!c?.length&&h.jsx("div",{className:"mb-3 p-3 bg-surface-2 rounded-default border border-strong",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-sm font-medium text-text-primary truncate",children:f?.name||"Custom Registry"}),h.jsx("p",{className:"text-xs text-text-disabled truncate",children:l})]}),h.jsx(zs,{status:f?"loaded":"error"})]})}),c?.map((de,J)=>h.jsx("div",{className:"mb-2 p-3 bg-surface-2 rounded-default border border-strong",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-sm font-medium text-text-primary truncate",children:de.definition?.name||"Custom Registry"}),h.jsx("p",{className:"text-xs text-text-disabled truncate",children:de.url})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(zs,{status:de.definition?"loaded":"error"}),h.jsx("button",{type:"button",onClick:()=>S(de.url),className:"text-error-600 hover:text-error-700 text-sm px-2",title:"Remove registry",children:""})]})]})},de.url||J)),h.jsxs("div",{className:"mt-4",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"text",value:k,onChange:de=>j(de.target.value),onKeyDown:de=>de.key==="Enter"&&void ae(),placeholder:"Enter registry URL",className:"flex-1 p-2 text-sm border border-strong rounded-default bg-surface-1 text-text-primary placeholder:text-text-disabled",disabled:R}),h.jsx("button",{onClick:()=>void ae(),disabled:R||!k.trim(),className:"px-4 py-2 text-sm bg-secondary-default text-white rounded-default hover:bg-secondary-dark disabled:opacity-50 disabled:cursor-not-allowed",children:R?"...":"Add"})]}),h.jsx("p",{className:"mt-1 text-xs text-text-disabled",children:"Auto-discovers via .well-known/guido.json"}),h.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-text-disabled",children:"or"}),h.jsx(sd,{ref:M,label:"Import Registry",onChange:de=>void ee(de),formats:".json"})]}),q&&h.jsx("p",{className:"mt-2 text-xs text-validation-error-text",children:q})]})]})]}),h.jsx("div",{className:"flex justify-end pt-4 border-t border-strong flex-shrink-0",children:h.jsx(Xe,{onClick:e,children:"Close"})})]})})})},Tt=1,Sk=2,kk=4,kn=8,Xh=16,Ic=32,Wr=64,Kh={a:{content:Tt|kn,self:!1,type:Tt|kn|Ic|Wr},address:{invalid:["h1","h2","h3","h4","h5","h6","address","article","aside","section","div","header","footer"],self:!1},audio:{children:["track","source"]},br:{type:Tt|kn,void:!0},body:{content:Tt|Sk|kk|kn|Xh|Ic|Wr},button:{content:kn,type:Tt|kn|Ic|Wr},caption:{content:Tt,parent:["table"]},col:{parent:["colgroup"],void:!0},colgroup:{children:["col"],parent:["table"]},details:{children:["summary"],type:Tt|Ic|Wr},dd:{content:Tt,parent:["dl"]},dl:{children:["dt","dd"],type:Tt},dt:{content:Tt,invalid:["footer","header"],parent:["dl"]},figcaption:{content:Tt,parent:["figure"]},footer:{invalid:["footer","header"]},header:{invalid:["footer","header"]},hr:{type:Tt,void:!0},img:{void:!0},li:{content:Tt,parent:["ul","ol","menu"]},main:{self:!1},ol:{children:["li"],type:Tt},picture:{children:["source","img"],type:Tt|kn|Xh},rb:{parent:["ruby","rtc"]},rp:{parent:["ruby","rtc"]},rt:{content:kn,parent:["ruby","rtc"]},rtc:{content:kn,parent:["ruby"]},ruby:{children:["rb","rp","rt","rtc"]},source:{parent:["audio","video","picture"],void:!0},summary:{content:kn,parent:["details"]},table:{children:["caption","colgroup","thead","tbody","tfoot","tr"],type:Tt},tbody:{parent:["table"],children:["tr"]},td:{content:Tt,parent:["tr"]},tfoot:{parent:["table"],children:["tr"]},th:{content:Tt,parent:["tr"]},thead:{parent:["table"],children:["tr"]},tr:{parent:["table","tbody","thead","tfoot"],children:["th","td"]},track:{parent:["audio","video"],void:!0},ul:{children:["li"],type:Tt},video:{children:["track","source"]},wbr:{type:Tt|kn,void:!0}};function Zi(e){return t=>{Kh[t]={...e,...Kh[t]}}}["address","main","div","figure","p","pre"].forEach(Zi({content:Tt,type:Tt|Wr}));["abbr","b","bdi","bdo","cite","code","data","dfn","em","i","kbd","mark","q","ruby","samp","strong","sub","sup","time","u","var"].forEach(Zi({content:kn,type:Tt|kn|Wr}));["p","pre"].forEach(Zi({content:kn,type:Tt|Wr}));["s","small","span","del","ins"].forEach(Zi({content:kn,type:Tt|kn}));["article","aside","footer","header","nav","section","blockquote"].forEach(Zi({content:Tt,type:Tt|Sk|Wr}));["h1","h2","h3","h4","h5","h6"].forEach(Zi({content:kn,type:Tt|kk|Wr}));["audio","canvas","iframe","img","video"].forEach(Zi({type:Tt|kn|Xh|Wr}));const Qh=Object.freeze(Kh),HL=["applet","base","body","command","embed","frame","frameset","head","html","link","meta","noscript","object","script","style","title"],GL=Object.keys(Qh).filter(e=>e!=="canvas"&&e!=="iframe"),Dt=1,ZL=2,Ll=3,Us=4,Tk=5,Y_=Object.freeze({alt:Dt,cite:Dt,class:Dt,colspan:Ll,controls:Us,datetime:Dt,default:Us,disabled:Us,dir:Dt,height:Dt,href:Dt,id:Dt,kind:Dt,label:Dt,lang:Dt,loading:Dt,loop:Us,media:Dt,muted:Us,poster:Dt,rel:Dt,role:Dt,rowspan:Ll,scope:Dt,sizes:Dt,span:Ll,start:Ll,style:Tk,src:Dt,srclang:Dt,srcset:Dt,tabindex:Dt,target:Dt,title:Dt,type:Dt,width:Dt}),YL=Object.freeze({class:"className",colspan:"colSpan",datetime:"dateTime",rowspan:"rowSpan",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex"});function id(){return id=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},id.apply(this,arguments)}function Ek({attributes:e={},className:t,children:r=null,selfClose:a=!1,tagName:s}){const l=s;return a?bn.createElement(l,id({className:t},e)):bn.createElement(l,id({className:t},e),r)}class JL{attribute(t,r){return r}node(t,r){return r}}var bh,J_;function XL(){if(J_)return bh;J_=1;var e=/["'&<>]/;bh=t;function t(r){var a=""+r,s=e.exec(a);if(!s)return a;var l,c="",d=0,f=0;for(d=s.index;d<a.length;d++){switch(a.charCodeAt(d)){case 34:l="&quot;";break;case 38:l="&amp;";break;case 39:l="&#39;";break;case 60:l="&lt;";break;case 62:l="&gt;";break;default:continue}f!==d&&(c+=a.substring(f,d)),f=d+1,c+=l}return f!==d?c+a.substring(f,d):c}return bh}var KL=XL();const QL=Ql(KL);function _a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const WL=/(url|image|image-set)\(/i;class e9 extends JL{attribute(t,r){return t==="style"&&Object.keys(r).forEach(a=>{String(r[a]).match(WL)&&delete r[a]}),r}}const X_=1,t9=3,n9=/^<(!doctype|(html|head|body)(\s|>))/i,r9=/^(aria-|data-|\w+:)/iu,a9=/{{{(\w+)\/?}}}/;function i9(){if(!(typeof window>"u"||typeof document>"u"))return document.implementation.createHTMLDocument("Interweave")}class Nk{constructor(t,r={},a=[],s=[]){var l;_a(this,"allowed",void 0),_a(this,"banned",void 0),_a(this,"blocked",void 0),_a(this,"container",void 0),_a(this,"content",[]),_a(this,"props",void 0),_a(this,"matchers",void 0),_a(this,"filters",void 0),_a(this,"keyIndex",void 0),this.props=r,this.matchers=a,this.filters=[...s,new e9],this.keyIndex=-1,this.container=this.createContainer(t||""),this.allowed=new Set((l=r.allowList)!==null&&l!==void 0?l:GL),this.banned=new Set(HL),this.blocked=new Set(r.blockList)}applyAttributeFilters(t,r){return this.filters.reduce((a,s)=>a!==null&&typeof s.attribute=="function"?s.attribute(t,a):a,r)}applyNodeFilters(t,r){return this.filters.reduce((a,s)=>a!==null&&typeof s.node=="function"?s.node(t,a):a,r)}applyMatchers(t,r){const a={},{props:s}=this;let l=t,c=0,d=null;return this.matchers.forEach(f=>{const p=f.asTag().toLowerCase(),y=this.getTagConfig(p);if(s[f.inverseName]||!this.isTagAllowed(p)||!this.canRenderChild(r,y))return;let v="";for(;l&&(d=f.match(l));){const{index:x,length:b,match:_,valid:S,void:k,...j}=d,R=f.propName+String(c);x>0&&(v+=l.slice(0,x)),S?(v+=k?`{{{${R}/}}}`:`{{{${R}}}}${_}{{{/${R}}}}`,this.keyIndex+=1,c+=1,a[R]={children:_,matcher:f,props:{...s,...j,key:this.keyIndex}}):v+=_,f.greedy?(l=v+l.slice(x+b),v=""):l=l.slice(x+(b||_.length))}f.greedy||(l=v+l)}),c===0?t:this.replaceTokens(l,a)}canRenderChild(t,r){return!t.tagName||!r.tagName||t.void?!1:t.children.length>0?t.children.includes(r.tagName):t.invalid.length>0&&t.invalid.includes(r.tagName)?!1:r.parent.length>0?r.parent.includes(t.tagName):!t.self&&t.tagName===r.tagName?!1:!!(t&&t.content&r.type)}convertLineBreaks(t){const{noHtml:r,disableLineBreaks:a}=this.props;if(r||a||t.match(/<((?:\/[ a-z]+)|(?:[ a-z]+\/))>/gi))return t;let s=t.replace(/\r\n/g,`
`);return s=s.replace(/\n{3,}/g,`


`),s=s.replace(/\n/g,"<br/>"),s}createContainer(t){var r;const s=(typeof global<"u"&&global.INTERWEAVE_SSR_POLYFILL||i9)();if(!s)return;const l=(r=this.props.containerTagName)!==null&&r!==void 0?r:"body",c=l==="body"||l==="fragment"?s.body:s.createElement(l);return t.match(n9)||(c.innerHTML=this.convertLineBreaks(this.props.escapeHtml?QL(t):t)),c}extractAttributes(t){const{allowAttributes:r}=this.props,a={};let s=0;return t.nodeType!==X_||!t.attributes||([...t.attributes].forEach(l=>{const{name:c,value:d}=l,f=c.toLowerCase(),p=Y_[f]||Y_[c];if(!this.isSafe(t)||!f.match(r9)&&(!r&&(!p||p===ZL)||f.startsWith("on")||d.replace(/(\s|\0|&#x0([9AD]);)/,"").match(/(javascript|vbscript|livescript|xss):/i)))return;let y=f==="style"?this.extractStyleAttribute(t):d;p===Us?y=!0:p===Ll?y=Number.parseFloat(String(y)):p!==Tk&&(y=String(y)),a[YL[f]||f]=this.applyAttributeFilters(f,y),s+=1}),s===0)?null:a}extractStyleAttribute(t){const r={};return Array.from(t.style).forEach(a=>{const s=t.style[a];(typeof s=="string"||typeof s=="number")&&(r[a.replace(/-([a-z])/g,(l,c)=>String(c).toUpperCase())]=s)}),r}getTagConfig(t){const r={children:[],content:0,invalid:[],parent:[],self:!0,tagName:"",type:0,void:!1};return Qh[t]?{...r,...Qh[t],tagName:t}:r}isSafe(t){if(typeof HTMLAnchorElement<"u"&&t instanceof HTMLAnchorElement){const r=t.getAttribute("href");if(r!=null&&r.startsWith("#"))return!0;const a=t.protocol.toLowerCase();return a===":"||a==="http:"||a==="https:"||a==="mailto:"||a==="tel:"}return!0}isTagAllowed(t){return this.banned.has(t)||this.blocked.has(t)?!1:this.props.allowElements||this.allowed.has(t)}parse(){return this.container?this.parseNode(this.container,this.getTagConfig(this.container.nodeName.toLowerCase())):[]}parseNode(t,r){const{noHtml:a,noHtmlExceptMatchers:s,allowElements:l,transform:c,transformOnlyAllowList:d}=this.props;let f=[],p="";return[...t.childNodes].forEach(y=>{if(y.nodeType===X_){const x=y.nodeName.toLowerCase(),b=this.getTagConfig(x);p&&(f.push(p),p="");const _=this.applyNodeFilters(x,y);if(!_)return;let S;if(c&&!(d&&!this.isTagAllowed(x))){this.keyIndex+=1;const k=this.keyIndex;S=this.parseNode(_,b);const j=c(_,S,b);if(j===null)return;if(typeof j<"u"){f.push(bn.cloneElement(j,{key:k}));return}this.keyIndex=k-1}if(this.banned.has(x))return;if(!(a||s&&x!=="br")&&this.isTagAllowed(x)&&(l||this.canRenderChild(r,b))){var v;this.keyIndex+=1;const k=this.extractAttributes(_),j={tagName:x};k&&(j.attributes=k),b.void&&(j.selfClose=b.void),f.push(bn.createElement(Ek,{...j,key:this.keyIndex},(v=S)!==null&&v!==void 0?v:this.parseNode(_,b)))}else f=[...f,...this.parseNode(_,b.tagName?b:r)]}else if(y.nodeType===t9){const x=a&&!s?y.textContent:this.applyMatchers(y.textContent||"",r);Array.isArray(x)?f=[...f,...x]:p+=x}}),p&&f.push(p),f}replaceTokens(t,r){if(!t.includes("{{{"))return t;const a=[];let s=t,l=null;for(;l=s.match(a9);){const[c,d]=l,f=l.index,p=c.includes("/");f>0&&(a.push(s.slice(0,f)),s=s.slice(f));const{children:y,matcher:v,props:x}=r[d];let b;if(p)b=c.length,a.push(v.createElement(y,x));else{const _=s.match(new RegExp(`{{{/${d}}}}`));b=_.index+_[0].length,a.push(v.createElement(this.replaceTokens(s.slice(c.length,_.index),r),x))}s=s.slice(b)}return s.length>0&&a.push(s),a.length===0?"":a.length===1&&typeof a[0]=="string"?a[0]:a}}function s9(e){var t;const{attributes:r,className:a,containerTagName:s,content:l,emptyContent:c,parsedContent:d,tagName:f,noWrap:p}=e,y=(t=s??f)!==null&&t!==void 0?t:"span",v=y==="fragment"?!0:p;let x;if(d)x=d;else{const b=new Nk(l??"",e).parse();b.length>0&&(x=b)}return x||(x=c),v?bn.createElement(bn.Fragment,null,x):bn.createElement(Ek,{attributes:r,className:a,tagName:y},x)}function Bm(e){const{attributes:t,className:r,content:a="",disableFilters:s=!1,disableMatchers:l=!1,emptyContent:c=null,filters:d=[],matchers:f=[],onAfterParse:p=null,onBeforeParse:y=null,tagName:v="span",noWrap:x=!1,...b}=e,_=l?[]:f,S=s?[]:d,k=y?[y]:[],j=p?[p]:[];_.forEach(P=>{P.onBeforeParse&&k.push(P.onBeforeParse.bind(P)),P.onAfterParse&&j.push(P.onAfterParse.bind(P))});const R=k.reduce((P,H)=>H(P,e),a??""),E=new Nk(R,b,_,S),q=j.reduce((P,H)=>H(P,e),E.parse());return bn.createElement(s9,{attributes:t,className:r,containerTagName:e.containerTagName,emptyContent:c,noWrap:x,parsedContent:q.length===0?void 0:q,tagName:v})}const o9=e=>{const t=new Date(e),r=new Date,a=t.toDateString()===r.toDateString(),s=new Date(r.getTime()-864e5).toDateString()===t.toDateString();return a?`Today at ${t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:s?`Yesterday at ${t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:t.toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},l9=({item:e})=>{const[t,r]=bn.useState(!1),a=e.assistantResponse.length>200;return h.jsxs("div",{className:"bg-surface-1 border border-border rounded-lg p-4 space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-xs text-text-tertiary",children:o9(e.timestamp)}),e.toolsUsed&&e.toolsUsed.length>0&&h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("span",{className:"text-xs text-text-tertiary",children:""}),h.jsxs("span",{className:"text-xs text-primary-500",children:[e.toolsUsed.length," tool",e.toolsUsed.length>1?"s":""]})]})]}),h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-lg flex-shrink-0",children:""}),h.jsx("p",{className:"text-sm text-text-primary",children:e.userMessage})]}),h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-lg flex-shrink-0",children:""}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:`markdown-content text-sm text-text-secondary ${!t&&a?"line-clamp-3":""}`,children:h.jsx(Bm,{content:e.assistantResponse})}),a&&h.jsx("button",{onClick:()=>r(!t),className:"mt-1 text-xs text-primary-500 hover:text-primary-600",children:t?"Show less":"Show more..."})]})]}),e.toolsUsed&&e.toolsUsed.length>0&&t&&h.jsx("div",{className:"flex flex-wrap gap-1 pt-2 border-t border-border",children:e.toolsUsed.map((s,l)=>h.jsx("span",{className:"text-xs px-2 py-0.5 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 rounded-full",children:s},l))})]})},u9=({onClose:e})=>{const{chatHistory:t,clearChatHistory:r}=Fi(),[a,s]=bn.useState(!1),l=()=>{r(),s(!1)};return h.jsx(io,{children:h.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",children:h.jsxs("div",{className:"bg-surface-0 p-6 rounded-default shadow-lg w-full max-w-2xl max-h-[85vh] overflow-hidden flex flex-col mx-4 border border-border",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h2",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[h.jsx("span",{className:"text-2xl",children:""})," Chat History"]}),h.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center text-text-secondary hover:text-text-primary hover:bg-surface-2 rounded-lg transition-colors",children:""})]}),h.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"Your recent conversations with Guido AI. History is stored locally in your browser."}),h.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 min-h-0",children:t.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-text-tertiary",children:[h.jsx("span",{className:"text-4xl mb-3",children:""}),h.jsx("p",{className:"text-center",children:"No chat history yet."}),h.jsx("p",{className:"text-sm text-center mt-1",children:"Start a conversation with Guido by clicking on the mascot!"})]}):t.map(c=>h.jsx(l9,{item:c},c.id))}),h.jsxs("div",{className:"flex justify-between mt-6 pt-4 border-t border-border",children:[h.jsxs("div",{children:[t.length>0&&!a&&h.jsx(Xe,{onClick:()=>s(!0),type:"error-text",children:"Clear History"}),a&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm text-error-600",children:"Are you sure?"}),h.jsx(Xe,{onClick:l,type:"error-text",children:"Yes, Clear"}),h.jsx(Xe,{onClick:()=>s(!1),type:"secondary-text",children:"Cancel"})]})]}),h.jsx(Xe,{onClick:e,type:"primary",children:"Close"})]})]})})})},c9="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20className='h-6%20w-6%20text-gray-500%20hover:text-gray-700'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke='currentColor'%20%3e%3cpath%20strokeLinecap='round'%20strokeLinejoin='round'%20strokeWidth='2'%20d='M5%2015l7-7%207%207'%20/%3e%3c/svg%3e",d9=({readmeContent:e})=>{const{alert:t}=Ea(),{isExpertMode:r,setIsExpertMode:a}=Pr(),{secretSpaceMode:s}=Br(),[l,c]=U.useState(!1),[d,f]=U.useState(!1),[p,y]=U.useState(!1),[v,x]=U.useState(!1),[b,_]=U.useState(!1),S=U.useRef(null),k=()=>{a(!r)},j=()=>{S.current=setTimeout(()=>{_(!0)},900)},R=()=>{S.current&&(clearTimeout(S.current),S.current=null),_(!1)};U.useEffect(()=>{const q=()=>{c(window.scrollY>100)};return window.addEventListener("scroll",q),()=>{window.removeEventListener("scroll",q)}},[]);const E=()=>{window.scrollTo({top:0,behavior:"smooth"})};return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"sticky top-0 z-50 mb-8 border-b border-gray-500 py-2 bg-surface-0/90 backdrop-blur-sm transition-all duration-300 blend-glass",children:h.jsxs("div",{className:"max-w-screen-2xl mx-auto flex items-center justify-between px-4 sm:px-6 lg:px-8 relative",children:[h.jsxs("div",{className:"relative",onMouseEnter:j,onMouseLeave:R,children:[h.jsx("a",{href:"https://",target:"_blank",rel:"noopener noreferrer",className:"inline-block",children:h.jsx("img",{src:s?PL:qL,className:"h-8 sm:h-10 lg:h-12 logo",alt:"logo"})}),b&&h.jsx("div",{className:"absolute top-full left-0 mt-1 bg-surface-1 border border-strong rounded px-2 py-1 text-xs text-text-secondary whitespace-nowrap shadow-lg animate-fade-in z-50",children:' Try clicking "Guido"'})]}),h.jsxs("div",{className:"flex flex-row items-center gap-4 sm:gap-6 lg:gap-8",children:[h.jsx("button",{type:"button",className:"w-6 h-6 flex items-center justify-center border border-strong rounded-full text-text-secondary hover:bg-surface-hover hover:text-text-primary",onClick:()=>t(e??"Grab your towel firmly and brace for impact!"),children:"?"}),h.jsx(FL,{onOpenRegistries:()=>f(!0),isExpertMode:r,onToggleExpertMode:k,onOpenAISetup:()=>y(!0),onOpenChatHistory:()=>x(!0)})]}),l&&h.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 cursor-pointer",onClick:E,children:h.jsx("img",{src:c9,alt:"Clear",className:"h-8 w-8 dark:invert"})})]})}),d&&h.jsx(VL,{onClose:()=>f(!1)}),p&&h.jsx(dk,{onClose:()=>y(!1)}),v&&h.jsx(u9,{onClose:()=>x(!1)})]})},f9=()=>{const e="1.0.0-alpha",t="2025-12-10T12:13:36-08:00",{setSecretSpaceMode:r}=Br(),[a,s]=U.useState(0),l=()=>{const c=a+1;s(c),c>=5&&(r(!0),s(0)),setTimeout(()=>{s(d=>d===c?0:d)},2e3)};return h.jsx("footer",{className:"mt-auto border-t border-gray-500 py-4 bg-surface-0/90 backdrop-blur-sm transition-all duration-300 blend-glass",children:h.jsx("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-2 text-sm text-text-secondary",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{onClick:l,className:"cursor-default select-none transition-all duration-300 hover:text-vibrant-blue hover:drop-shadow-[0_0_8px_rgba(59,130,246,0.8)]",title:a>0?`${5-a} more...`:void 0,children:"Guido"}),h.jsxs("span",{className:"text-text-tertiary",children:["v",e]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("span",{className:"text-text-tertiary text-xs",children:`Built: ${t}`}),h.jsx("a",{href:"https://github.com/quotentiroler/Guido",target:"_blank",rel:"noopener noreferrer",className:"hover:text-text-primary transition-colors",children:"GitHub"}),h.jsx("a",{href:"https://github.com/quotentiroler/quotentiroler",target:"_blank",rel:"noopener noreferrer",className:"hover:text-text-primary transition-colors",children:"QuotenTiroler"})]})]})})})},p9=(e,t,r)=>{const a=["rgba(255, 255, 255,","rgba(255, 220, 180,","rgba(200, 220, 255,","rgba(255, 200, 150,"],s=r?.7:1;return Array.from({length:e},()=>({x:Math.random()*100,y:Math.random()*t,size:(Math.random()*2+.5)*s,brightness:Math.random()*.5+.5,twinkleDelay:Math.random()*4,color:a[Math.floor(Math.random()*a.length)]}))},Ak=({blend:e,starFieldHeight:t=50})=>{const{themeBlend:r}=Br(),[a,s]=U.useState(!1);U.useEffect(()=>{const k=()=>s(window.innerWidth<640);return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]);const l=(e??r)/100,c=U.useMemo(()=>p9(a?60:100,t,a),[t,a]),d=8+l*84,p=l-.3,y=10+Math.pow(p,2)*140,v=y>52,x=v?0:Math.max(0,1-(y-35)/20),b=Math.max(0,(l-.5)/.35),_=l>.38&&l<.72?Math.sin((l-.38)/.34*Math.PI)*.7:0,S=()=>{if(l<=.2)return`linear-gradient(to bottom, 
        #E8C4A0 0%, 
        #D4A574 20%, 
        #C4956A 40%, 
        #B8825A 60%,
        #A06040 80%,
        #8B5035 100%)`;if(l<=.4){const k=(l-.2)/.2;return`linear-gradient(to bottom, 
        rgb(${232-k*60}, ${196-k*50}, ${160-k*40}) 0%, 
        rgb(${212-k*55}, ${165-k*45}, ${116-k*30}) 20%, 
        rgb(${196-k*50}, ${149-k*40}, ${106-k*25}) 40%,
        rgb(${184-k*50}, ${130-k*40}, ${90-k*20}) 60%,
        rgb(${160-k*45}, ${96-k*30}, ${64-k*15}) 80%,
        rgb(${139-k*40}, ${80-k*25}, ${53-k*12}) 100%)`}else if(l<=.55){const k=(l-.4)/.15;return`linear-gradient(to bottom, 
        rgb(${172-k*70}, ${146-k*50}, ${120+k*30}) 0%, 
        rgb(${157-k*65}, ${120-k*40}, ${86+k*50}) 20%, 
        rgb(${146-k*60}, ${109-k*40}, ${81+k*60}) 40%,
        rgb(${134-k*55}, ${90-k*35}, ${70+k*40}) 60%,
        rgb(${115-k*50}, ${66-k*25}, ${49+k*30}) 80%,
        rgb(${99-k*45}, ${55-k*22}, ${41+k*20}) 100%)`}else if(l<=.7){const k=(l-.55)/.15;return`linear-gradient(to bottom, 
        rgb(${102-k*55}, ${96-k*50}, ${150-k*50}) 0%, 
        rgb(${92-k*50}, ${80-k*45}, ${136-k*50}) 20%, 
        rgb(${86-k*50}, ${69-k*40}, ${141-k*60}) 40%,
        rgb(${79-k*45}, ${55-k*30}, ${110-k*50}) 60%,
        rgb(${65-k*40}, ${41-k*22}, ${79-k*40}) 80%,
        rgb(${54-k*32}, ${33-k*18}, ${61-k*35}) 100%)`}else if(l<=.85){const k=(l-.7)/.15;return`linear-gradient(to bottom, 
        rgb(${47-k*30}, ${46-k*30}, ${100-k*60}) 0%, 
        rgb(${42-k*28}, ${35-k*25}, ${86-k*55}) 20%, 
        rgb(${36-k*24}, ${29-k*20}, ${81-k*55}) 40%,
        rgb(${34-k*22}, ${25-k*16}, ${60-k*40}) 60%,
        rgb(${25-k*16}, ${19-k*12}, ${39-k*26}) 80%,
        rgb(${22-k*14}, ${15-k*10}, ${26-k*18}) 100%)`}else return`linear-gradient(to bottom, 
        #0d0818 0%, 
        #0a0612 20%, 
        #080410 40%,
        #0c0610 60%,
        #060308 80%,
        #030204 100%)`};return h.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[h.jsx("div",{className:"absolute inset-0 transition-all duration-1000",style:{background:S()}}),h.jsx("div",{className:"absolute inset-0 transition-opacity duration-1000",style:{opacity:Math.max(0,(l-.52)/.38)},children:c.map((k,j)=>h.jsx("div",{className:"absolute rounded-full",style:{left:`${k.x}%`,top:`${k.y}%`,width:`${k.size}px`,height:`${k.size}px`,background:`${k.color}${k.brightness})`,boxShadow:`0 0 ${k.size*2}px ${k.color}${k.brightness*.5})`,animation:`marsTwinkle ${2.5+k.twinkleDelay}s ease-in-out infinite`,animationDelay:`${k.twinkleDelay}s`}},j))}),!v&&h.jsxs("div",{className:"absolute transition-all duration-500",style:{left:`${d}%`,top:`${y}%`,transform:"translate(-50%, -50%)",opacity:x},children:[h.jsx("div",{className:"absolute rounded-full",style:{width:a?"120px":"200px",height:a?"120px":"200px",left:a?"-60px":"-100px",top:a?"-60px":"-100px",background:`radial-gradient(circle, 
                rgba(255, 200, 120, ${.25*x}) 0%, 
                rgba(255, 160, 80, ${.12*x}) 40%, 
                transparent 70%)`,filter:a?"blur(10px)":"blur(15px)"}}),_>0&&h.jsx("div",{className:"absolute rounded-full",style:{width:a?"170px":"280px",height:a?"170px":"280px",left:a?"-85px":"-140px",top:a?"-85px":"-140px",background:`radial-gradient(circle, 
                  rgba(100, 150, 220, ${_*.35}) 0%, 
                  rgba(80, 120, 200, ${_*.2}) 30%, 
                  rgba(60, 100, 180, ${_*.1}) 50%,
                  transparent 70%)`,filter:a?"blur(18px)":"blur(25px)"}}),h.jsx("div",{className:"absolute rounded-full",style:{width:a?"60px":"100px",height:a?"60px":"100px",left:a?"-30px":"-50px",top:a?"-30px":"-50px",background:`radial-gradient(circle, 
                rgba(255, 230, 170, 0.5) 0%, 
                rgba(255, 190, 100, 0.2) 50%, 
                transparent 70%)`,filter:a?"blur(5px)":"blur(8px)"}}),h.jsx("div",{className:"rounded-full",style:{width:a?"24px":"38px",height:a?"24px":"38px",background:`radial-gradient(circle at 40% 40%, 
                #FFFAF0 0%, 
                #FFE8C0 30%, 
                #FFD070 60%, 
                #FFA530 100%)`,boxShadow:a?"0 0 12px rgba(255, 220, 100, 0.9), 0 0 25px rgba(255, 180, 80, 0.6), 0 0 45px rgba(255, 140, 60, 0.3)":"0 0 20px rgba(255, 220, 100, 0.9), 0 0 40px rgba(255, 180, 80, 0.6), 0 0 70px rgba(255, 140, 60, 0.3)"}})]}),_>0&&h.jsx("div",{className:"absolute transition-opacity duration-700",style:{left:`${Math.max(0,d-25)}%`,bottom:"30%",width:"50%",height:"30%",background:`radial-gradient(ellipse 100% 80% at 50% 100%, 
              rgba(80, 140, 200, ${_*.35}) 0%, 
              rgba(60, 100, 180, ${_*.15}) 40%,
              transparent 70%)`,filter:"blur(30px)"}}),h.jsxs("div",{className:"absolute transition-all duration-700",style:{right:`${15+(1-l)*20}%`,top:`${12+Math.sin(l*Math.PI)*8}%`,opacity:b},children:[h.jsx("div",{className:"absolute rounded-full",style:{width:a?"45px":"70px",height:a?"45px":"70px",left:a?"-22px":"-35px",top:a?"-22px":"-35px",background:`radial-gradient(circle, rgba(200, 200, 220, ${.2*b}) 0%, transparent 60%)`,filter:a?"blur(5px)":"blur(8px)"}}),h.jsxs("div",{style:{width:a?"26px":"40px",height:a?"20px":"30px",background:"linear-gradient(140deg, #E0E0E0 0%, #C8C8C8 20%, #A0A0A0 50%, #6A6A6A 80%, #4A4A4A 100%)",borderRadius:"55% 45% 60% 40% / 50% 55% 45% 50%",boxShadow:a?"0 0 15px rgba(200, 200, 220, 0.4), 0 0 30px rgba(180, 180, 200, 0.2), inset 3px 2px 6px rgba(255, 255, 255, 0.4), inset -2px -2px 5px rgba(0, 0, 0, 0.5)":"0 0 25px rgba(200, 200, 220, 0.4), 0 0 50px rgba(180, 180, 200, 0.2), inset 5px 4px 10px rgba(255, 255, 255, 0.4), inset -4px -4px 8px rgba(0, 0, 0, 0.5)",transform:"rotate(-12deg)"},children:[h.jsx("div",{style:{position:"absolute",left:"16%",top:"20%",width:a?"9px":"14px",height:a?"8px":"12px",background:"radial-gradient(ellipse at 35% 35%, #888 0%, #5a5a5a 60%, #404040 100%)",borderRadius:"50%",boxShadow:"inset 1.5px 1.5px 4px rgba(0, 0, 0, 0.6)"}}),!a&&h.jsx("div",{style:{position:"absolute",right:"20%",bottom:"25%",width:"6px",height:"5px",background:"radial-gradient(ellipse, #707070 0%, #505050 100%)",borderRadius:"50%",boxShadow:"inset 0.5px 0.5px 2px rgba(0, 0, 0, 0.5)"}})]})]}),h.jsxs("div",{className:"absolute transition-all duration-700",style:{left:`${20+l*25}%`,top:`${8+Math.sin(l*Math.PI*.8)*5}%`,opacity:b*.85},children:[h.jsx("div",{className:"absolute rounded-full",style:{width:a?"25px":"40px",height:a?"25px":"40px",left:a?"-12px":"-20px",top:a?"-12px":"-20px",background:`radial-gradient(circle, rgba(180, 180, 200, ${.15*b}) 0%, transparent 60%)`,filter:a?"blur(3px)":"blur(5px)"}}),h.jsx("div",{style:{width:a?"13px":"20px",height:a?"10px":"15px",background:"linear-gradient(135deg, #D8D8D8 0%, #B0B0B0 40%, #787878 80%, #585858 100%)",borderRadius:"50% 50% 45% 55% / 55% 45% 55% 45%",boxShadow:a?"0 0 10px rgba(180, 180, 200, 0.3), inset 1px 1px 3px rgba(255, 255, 255, 0.35), inset -1px -1px 2px rgba(0, 0, 0, 0.4)":"0 0 15px rgba(180, 180, 200, 0.3), inset 2px 2px 5px rgba(255, 255, 255, 0.35), inset -2px -2px 4px rgba(0, 0, 0, 0.4)"},children:!a&&h.jsx("div",{style:{position:"absolute",left:"30%",top:"30%",width:"4px",height:"3px",background:"radial-gradient(ellipse, #909090 0%, #686868 100%)",borderRadius:"50%"}})})]}),h.jsx("div",{className:"absolute left-0 right-0 transition-all duration-700",style:{bottom:0,height:"40%",background:`linear-gradient(to top, 
            rgba(${180-l*100}, ${130-l*80}, ${100-l*60}, ${.15-l*.08}) 0%, 
            transparent 100%)`}}),h.jsx("style",{children:`
        @keyframes marsTwinkle {
          0%, 100% { opacity: 0.4; transform: scale(1); }
          50% { opacity: 1; transform: scale(1.15); }
        }
      `})]})},h9=()=>{const{themeBlend:e,marsBackground:t}=Br(),[r,a]=U.useState(!1);if(U.useEffect(()=>{const l=()=>a(window.innerWidth<640);return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),!t)return null;const s=Math.max(.08,1-e/100*1.1);return h.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",style:{zIndex:-1},children:[h.jsx(Ak,{starFieldHeight:45}),h.jsx("div",{className:"absolute bottom-0 left-0 right-0 transition-all duration-500",style:{height:r?"40%":"35%",background:`linear-gradient(to bottom, 
            rgba(${120*s+30}, ${70*s+20}, ${40*s+15}, 0.6) 0%,
            rgba(${100*s+25}, ${55*s+15}, ${35*s+10}, 0.8) 100%)`,clipPath:r?"polygon(0 75%, 10% 60%, 20% 70%, 30% 50%, 40% 62%, 50% 40%, 60% 55%, 70% 35%, 80% 50%, 90% 60%, 100% 50%, 100% 100%, 0 100%)":"polygon(0 70%, 8% 55%, 15% 62%, 22% 45%, 28% 52%, 32% 35%, 38% 48%, 45% 30%, 52% 42%, 58% 28%, 65% 38%, 72% 25%, 78% 35%, 82% 20%, 88% 32%, 95% 45%, 100% 55%, 100% 100%, 0 100%)",filter:"blur(1px)"}}),h.jsx("div",{className:"absolute bottom-0 left-0 right-0 transition-all duration-500",style:{height:"28%",background:`linear-gradient(to bottom, 
            rgb(${140*s+35}, ${75*s+20}, ${45*s+12}) 0%,
            rgb(${130*s+30}, ${68*s+18}, ${40*s+10}) 30%,
            rgb(${120*s+25}, ${60*s+15}, ${35*s+8}) 60%,
            rgb(${100*s+20}, ${50*s+12}, ${30*s+6}) 100%)`,clipPath:"polygon(0 50%, 3% 42%, 8% 48%, 12% 38%, 18% 45%, 25% 35%, 30% 42%, 38% 32%, 45% 40%, 52% 30%, 58% 38%, 65% 28%, 70% 35%, 78% 42%, 85% 32%, 92% 40%, 100% 35%, 100% 100%, 0 100%)"}}),h.jsx("div",{className:"absolute bottom-0 left-0 right-0 transition-opacity duration-500",style:{height:"28%",opacity:.3*s+.1,background:`
            radial-gradient(ellipse 8px 6px at 10% 60%, rgba(80, 40, 20, 0.4) 0%, transparent 100%),
            radial-gradient(ellipse 12px 8px at 25% 75%, rgba(60, 30, 15, 0.3) 0%, transparent 100%),
            radial-gradient(ellipse 6px 5px at 40% 55%, rgba(90, 45, 25, 0.4) 0%, transparent 100%),
            radial-gradient(ellipse 15px 10px at 55% 70%, rgba(70, 35, 18, 0.3) 0%, transparent 100%),
            radial-gradient(ellipse 8px 6px at 70% 65%, rgba(85, 42, 22, 0.4) 0%, transparent 100%),
            radial-gradient(ellipse 10px 7px at 85% 58%, rgba(75, 38, 20, 0.3) 0%, transparent 100%),
            radial-gradient(ellipse 5px 4px at 95% 72%, rgba(65, 32, 16, 0.4) 0%, transparent 100%)
          `,clipPath:"polygon(0 50%, 3% 42%, 8% 48%, 12% 38%, 18% 45%, 25% 35%, 30% 42%, 38% 32%, 45% 40%, 52% 30%, 58% 38%, 65% 28%, 70% 35%, 78% 42%, 85% 32%, 92% 40%, 100% 35%, 100% 100%, 0 100%)"}}),h.jsx("div",{className:"absolute bottom-0 left-0 right-0 transition-all duration-500",style:{height:"18%",background:`linear-gradient(to bottom, 
            rgb(${110*s+25}, ${55*s+15}, ${30*s+8}) 0%,
            rgb(${95*s+20}, ${48*s+12}, ${26*s+6}) 40%,
            rgb(${80*s+15}, ${40*s+10}, ${22*s+5}) 70%,
            rgb(${65*s+10}, ${32*s+8}, ${18*s+4}) 100%)`,clipPath:"polygon(0 55%, 5% 48%, 10% 55%, 18% 42%, 25% 52%, 32% 45%, 40% 55%, 48% 40%, 55% 50%, 62% 42%, 70% 52%, 78% 38%, 85% 48%, 92% 42%, 100% 50%, 100% 100%, 0 100%)"}}),h.jsxs("div",{className:"absolute bottom-0 left-0 right-0",style:{height:"12%"},children:[h.jsx("div",{className:"absolute transition-all duration-500",style:{bottom:"15%",left:"8%",width:r?"28px":"45px",height:r?"18px":"30px",background:`linear-gradient(145deg, 
              rgb(${100*s+30}, ${55*s+15}, ${35*s+10}) 0%,
              rgb(${70*s+20}, ${38*s+10}, ${22*s+6}) 100%)`,borderRadius:"40% 60% 50% 50% / 60% 40% 60% 40%",boxShadow:`
              3px 3px 8px rgba(0, 0, 0, ${.4*(1-s)+.2}),
              inset -2px -2px 4px rgba(0, 0, 0, 0.3),
              inset 1px 1px 2px rgba(255, 200, 150, ${.15*s})
            `}}),h.jsx("div",{className:"absolute transition-all duration-500",style:{bottom:"8%",left:"22%",width:r?"16px":"25px",height:r?"11px":"18px",background:`linear-gradient(135deg, 
              rgb(${90*s+25}, ${50*s+12}, ${30*s+8}) 0%,
              rgb(${60*s+15}, ${32*s+8}, ${18*s+5}) 100%)`,borderRadius:"50% 50% 45% 55% / 55% 45% 55% 45%",boxShadow:`2px 2px 5px rgba(0, 0, 0, ${.3*(1-s)+.15})`}}),!r&&h.jsx("div",{className:"absolute transition-all duration-500",style:{bottom:"5%",left:"35%",width:"12px",height:"9px",background:`linear-gradient(140deg, 
                rgb(${85*s+20}, ${45*s+10}, ${28*s+6}) 0%,
                rgb(${55*s+12}, ${28*s+6}, ${16*s+4}) 100%)`,borderRadius:"45% 55% 50% 50%",boxShadow:`1px 1px 3px rgba(0, 0, 0, ${.25*(1-s)+.1})`}}),h.jsx("div",{className:"absolute transition-all duration-500",style:{bottom:"12%",right:"12%",width:r?"35px":"55px",height:r?"22px":"35px",background:`linear-gradient(150deg, 
              rgb(${95*s+28}, ${52*s+14}, ${32*s+9}) 0%,
              rgb(${65*s+18}, ${35*s+9}, ${20*s+5}) 100%)`,borderRadius:"55% 45% 50% 50% / 50% 55% 45% 55%",boxShadow:`
              4px 4px 10px rgba(0, 0, 0, ${.45*(1-s)+.2}),
              inset -3px -3px 6px rgba(0, 0, 0, 0.35),
              inset 2px 2px 3px rgba(255, 200, 150, ${.12*s})
            `}}),!r&&h.jsx("div",{className:"absolute transition-all duration-500",style:{bottom:"4%",right:"28%",width:"20px",height:"14px",background:`linear-gradient(130deg, 
                rgb(${88*s+22}, ${48*s+11}, ${29*s+7}) 0%,
                rgb(${58*s+14}, ${30*s+7}, ${17*s+4}) 100%)`,borderRadius:"48% 52% 50% 50%",boxShadow:`2px 2px 4px rgba(0, 0, 0, ${.28*(1-s)+.12})`}})]}),h.jsx("div",{className:"absolute inset-0 transition-opacity duration-700",style:{opacity:.15*s+.05,background:`
            radial-gradient(1px 1px at 15% 70%, rgba(200, 150, 100, 0.5), transparent),
            radial-gradient(1px 1px at 35% 65%, rgba(180, 130, 90, 0.4), transparent),
            radial-gradient(1.5px 1.5px at 50% 72%, rgba(190, 140, 95, 0.5), transparent),
            radial-gradient(1px 1px at 68% 68%, rgba(175, 125, 85, 0.4), transparent),
            radial-gradient(1px 1px at 82% 75%, rgba(185, 135, 92, 0.5), transparent),
            radial-gradient(1px 1px at 25% 78%, rgba(195, 145, 98, 0.4), transparent),
            radial-gradient(1.5px 1.5px at 60% 80%, rgba(170, 120, 82, 0.5), transparent),
            radial-gradient(1px 1px at 90% 70%, rgba(188, 138, 94, 0.4), transparent)
          `}})]})},Ck=()=>{const{themeBlend:e}=Br(),[t,r]=U.useState(!1);U.useEffect(()=>{const s=()=>r(window.innerWidth<640);return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const a=Math.max(.08,1-e/100*1.1);return h.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",style:{zIndex:-1},children:[h.jsx(Ak,{starFieldHeight:55}),h.jsx("div",{className:"absolute transition-all duration-700",style:{left:0,top:t?"48%":"42%",width:t?"35%":"40%",height:t?"52%":"58%",background:`linear-gradient(to right, 
            rgb(${55*a+12}, ${32*a+6}, ${25*a+5}) 0%, 
            rgb(${40*a+8}, ${22*a+4}, ${16*a+3}) 40%, 
            rgb(${22*a+4}, ${12*a+2}, ${9*a+1}) 70%,
            rgb(${10*a+2}, ${5*a+1}, ${5*a+1}) 100%)`,clipPath:t?"polygon(0 0, 100% 40%, 100% 100%, 0 100%)":"polygon(0 0, 100% 45%, 100% 100%, 0 100%)",opacity:.9,filter:"blur(1px)"}}),h.jsx("div",{className:"absolute transition-all duration-700",style:{right:0,top:t?"48%":"42%",width:t?"35%":"40%",height:t?"52%":"58%",background:`linear-gradient(to left, 
            rgb(${35*a+6}, ${20*a+3}, ${16*a+2}) 0%, 
            rgb(${22*a+3}, ${12*a+2}, ${9*a+1}) 35%,
            rgb(${12*a+2}, ${7*a+1}, ${6*a}) 60%, 
            rgb(${6*a+1}, ${3*a}, ${3*a}) 100%)`,clipPath:t?"polygon(100% 0, 0 40%, 0 100%, 100% 100%)":"polygon(100% 0, 0 45%, 0 100%, 100% 100%)",opacity:.9,filter:"blur(1px)"}}),h.jsx("div",{className:"absolute transition-all duration-700",style:{left:t?"22%":"28%",right:t?"22%":"28%",top:t?"62%":"58%",height:t?"10%":"12%",background:`linear-gradient(to bottom, 
            rgba(${85*a+15}, ${50*a+8}, ${35*a+5}, 0.9) 0%,
            rgba(${45*a+8}, ${25*a+4}, ${18*a+3}, 0.95) 40%,
            rgba(${20*a+3}, ${12*a+2}, ${10*a+1}, 1) 100%)`,clipPath:"polygon(5% 0, 95% 0, 88% 100%, 12% 100%)"}}),h.jsx("div",{className:"absolute transition-all duration-700",style:{left:t?"22%":"28%",width:t?"18%":"14%",top:t?"62%":"58%",bottom:0,background:`linear-gradient(135deg, 
            rgba(${70*a+10}, ${40*a+6}, ${28*a+4}, 0.85) 0%,
            rgba(${35*a+5}, ${20*a+3}, ${14*a+2}, 0.9) 30%,
            rgba(${12*a+2}, ${7*a+1}, ${6*a+1}, 0.95) 60%,
            rgba(0, 0, 0, 1) 100%)`,clipPath:"polygon(5% 0, 100% 12%, 75% 100%, 12% 100%)"}}),h.jsx("div",{className:"absolute transition-all duration-700",style:{right:t?"22%":"28%",width:t?"18%":"14%",top:t?"62%":"58%",bottom:0,background:`linear-gradient(225deg, 
            rgba(${40*a+5}, ${22*a+3}, ${16*a+2}, 0.85) 0%,
            rgba(${18*a+2}, ${10*a+1}, ${8*a+1}, 0.92) 25%,
            rgba(${6*a+1}, ${3*a}, ${3*a}, 0.97) 50%,
            rgba(0, 0, 0, 1) 100%)`,clipPath:"polygon(0% 12%, 95% 0, 88% 100%, 25% 100%)"}}),h.jsx("div",{className:"absolute",style:{left:t?"32%":"35%",right:t?"32%":"35%",top:t?"68%":"65%",bottom:0,background:`linear-gradient(to bottom, 
            rgba(${5*a+1}, ${3*a}, ${3*a}, 1) 0%, 
            #020101 20%, 
            #010101 50%, 
            #000000 100%)`,clipPath:"polygon(0 0, 100% 0, 80% 100%, 20% 100%)"}}),h.jsx("div",{className:"absolute",style:{left:t?"33%":"36%",right:t?"33%":"36%",top:t?"72%":"70%",height:t?"12%":"15%",background:`linear-gradient(to bottom, 
            rgba(${35*a+3}, ${18*a+2}, ${12*a+1}, 0.25) 0%, 
            transparent 100%)`,clipPath:"polygon(8% 0, 92% 0, 78% 100%, 22% 100%)"}}),h.jsx("div",{className:"absolute",style:{left:t?"25%":"30%",right:t?"25%":"30%",top:t?"75%":"72%",bottom:t?"8%":"5%",background:`radial-gradient(ellipse 100% 70% at 50% 90%, 
            rgba(${120*a+8}, ${65*a+4}, ${40*a+3}, 0.12) 0%, 
            transparent 65%)`,filter:t?"blur(10px)":"blur(15px)"}}),h.jsx("div",{className:"absolute transition-all duration-700",style:{left:0,bottom:0,width:t?"42%":"36%",height:t?"45%":"52%",background:`linear-gradient(135deg, 
            rgb(${85*a+5}, ${50*a+3}, ${36*a+2}) 0%, 
            rgb(${70*a+4}, ${38*a+2}, ${30*a+2}) 30%, 
            rgb(${58*a+3}, ${30*a+2}, ${23*a+1}) 60%, 
            rgb(${42*a+2}, ${20*a+1}, ${15*a+1}) 100%)`,clipPath:t?"polygon(0 25%, 58% 38%, 100% 100%, 0 100%)":"polygon(0 22%, 62% 36%, 100% 100%, 0 100%)",boxShadow:`inset 0 10px 40px rgba(${85*a+5}, ${45*a+3}, ${30*a+2}, 0.4)`}}),h.jsx("div",{className:"absolute transition-all duration-700",style:{left:0,bottom:t?"28%":"36%",width:t?"40%":"34%",height:t?"6%":"8%",background:`linear-gradient(to bottom, 
            rgba(255, ${180*a+40}, ${100*a+20}, ${.25*a+.05}) 0%, 
            transparent 100%)`,clipPath:"polygon(0 50%, 100% 0, 100% 100%, 0 100%)",filter:"blur(2px)"}}),h.jsx("div",{className:"absolute transition-all duration-700",style:{right:0,bottom:0,width:t?"42%":"36%",height:t?"45%":"52%",background:`linear-gradient(225deg, 
            rgb(${70*a+4}, ${38*a+2}, ${30*a+2}) 0%, 
            rgb(${58*a+3}, ${30*a+2}, ${23*a+1}) 30%, 
            rgb(${42*a+2}, ${20*a+1}, ${15*a+1}) 60%, 
            rgb(${25*a+1}, ${10*a+1}, ${8*a}) 100%)`,clipPath:t?"polygon(100% 25%, 42% 38%, 0 100%, 100% 100%)":"polygon(100% 22%, 38% 36%, 0 100%, 100% 100%)",boxShadow:`inset 0 10px 40px rgba(${65*a+4}, ${35*a+2}, ${25*a+2}, 0.3)`}}),h.jsx("div",{className:"absolute transition-all duration-700",style:{right:0,bottom:0,width:t?"42%":"36%",height:t?"45%":"52%",background:`linear-gradient(to left, 
            rgba(0, 0, 0, ${.4-a*.2}) 0%, 
            transparent 60%)`,clipPath:t?"polygon(100% 25%, 42% 38%, 0 100%, 100% 100%)":"polygon(100% 22%, 38% 36%, 0 100%, 100% 100%)"}}),h.jsx("div",{className:"absolute transition-all duration-700",style:{left:"8%",bottom:t?"18%":"24%",width:t?"35px":"55px",height:t?"20px":"32px",background:`linear-gradient(145deg, 
            rgb(${100*a+6}, ${55*a+3}, ${45*a+3}) 0%, 
            rgb(${85*a+5}, ${45*a+3}, ${36*a+2}) 30%, 
            rgb(${58*a+3}, ${30*a+2}, ${22*a+1}) 100%)`,borderRadius:"40% 60% 30% 70%",transform:"rotate(-8deg)",boxShadow:`
            inset 3px 3px 8px rgba(${95*a+5}, ${55*a+3}, ${38*a+2}, 0.4),
            inset -4px -4px 10px rgba(0, 0, 0, 0.5),
            5px 5px 15px rgba(0, 0, 0, 0.4)
          `}}),h.jsx("div",{className:"absolute transition-all duration-700",style:{left:"18%",bottom:t?"14%":"19%",width:t?"24px":"38px",height:t?"13px":"20px",background:`linear-gradient(135deg, 
            rgb(${85*a+5}, ${45*a+3}, ${36*a+2}) 0%, 
            rgb(${70*a+4}, ${38*a+2}, ${30*a+2}) 40%, 
            rgb(${42*a+2}, ${20*a+1}, ${15*a+1}) 100%)`,borderRadius:"50% 50% 40% 60%",boxShadow:`
            inset 2px 2px 6px rgba(${85*a+5}, ${48*a+3}, ${33*a+2}, 0.3),
            inset -3px -3px 8px rgba(0, 0, 0, 0.4),
            4px 4px 12px rgba(0, 0, 0, 0.35)
          `}}),!t&&h.jsx("div",{className:"absolute transition-all duration-700",style:{left:"26%",bottom:"31%",width:"14px",height:"9px",background:`linear-gradient(135deg, 
              rgb(${70*a+4}, ${38*a+2}, ${30*a+2}) 0%, 
              rgb(${42*a+2}, ${20*a+1}, ${15*a+1}) 100%)`,borderRadius:"50%",boxShadow:"2px 2px 4px rgba(0, 0, 0, 0.3)"}}),h.jsx("div",{className:"absolute inset-0 pointer-events-none transition-all duration-700",style:{background:`linear-gradient(to bottom, 
            transparent 0%, 
            transparent 50%, 
            rgba(${95*a+5}, ${55*a+5}, ${38*a+2}, 0.08) 70%, 
            rgba(${75*a+4}, ${38*a+2}, ${28*a+2}, 0.12) 100%)`}}),h.jsx("div",{className:"absolute inset-0 transition-opacity duration-700 pointer-events-none",style:{opacity:.12*a+.03,background:`
            radial-gradient(1px 1px at 12% 55%, rgba(200, 150, 100, 0.5), transparent),
            radial-gradient(1.5px 1.5px at 28% 48%, rgba(180, 130, 90, 0.4), transparent),
            radial-gradient(1px 1px at 45% 52%, rgba(190, 140, 95, 0.5), transparent),
            radial-gradient(1px 1px at 62% 45%, rgba(175, 125, 85, 0.4), transparent),
            radial-gradient(1.5px 1.5px at 78% 50%, rgba(185, 135, 92, 0.5), transparent),
            radial-gradient(1px 1px at 88% 58%, rgba(195, 145, 98, 0.4), transparent)
          `}})]})},m9=e=>Array.from({length:e},()=>({width:Math.random()*3+1,height:Math.random()*3+1,left:Math.random()*100,top:Math.random()*100,opacity:Math.random()*.8+.2,duration:Math.random()*3+2,delay:Math.random()*2})),g9=({count:e=80,className:t=""})=>{const r=U.useMemo(()=>m9(e),[e]);return h.jsx("div",{className:`absolute inset-0 overflow-hidden ${t}`,children:r.map((a,s)=>h.jsx("div",{className:"absolute rounded-full bg-white",style:{width:a.width+"px",height:a.height+"px",left:a.left+"%",top:a.top+"%",opacity:a.opacity,animation:`twinkle ${a.duration}s ease-in-out infinite`,animationDelay:a.delay+"s"}},s))})},y9=e=>Array.from({length:e},(t,r)=>({id:r,x:45+Math.random()*10,startY:15+Math.random()*5,size:Math.random()*4+2,speed:4+Math.random()*3,wobble:Math.random()*10-5,delay:Math.random()*2,brightness:.7+Math.random()*.3})),v9=e=>Array.from({length:e},(t,r)=>({id:r,x:42+Math.random()*16,size:20+Math.random()*40,speed:6+Math.random()*4,drift:Math.random()*30-15,delay:Math.random()*3,opacity:.3+Math.random()*.4})),b9=e=>Array.from({length:e},(t,r)=>({id:r,x:40+Math.random()*20,y:5+Math.random()*15,size:1+Math.random()*2,duration:1.5+Math.random()*2,delay:Math.random()*3})),x9=({isErupting:e=!0,positionX:t=50,scale:r=1,opacity:a=1})=>{const[s,l]=U.useState(!1);U.useEffect(()=>{const v=()=>l(window.innerWidth<640);return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const c=U.useMemo(()=>y9(s?8:15),[s]),d=U.useMemo(()=>v9(s?6:12),[s]),f=U.useMemo(()=>b9(s?10:20),[s]),p=s?180:300,y=s?120:200;return h.jsxs("div",{className:"absolute pointer-events-none",style:{left:`${t}%`,bottom:s?"18%":"22%",transform:`translateX(-50%) scale(${r})`,width:`${p}px`,height:`${y}px`,opacity:a,zIndex:5},children:[e&&h.jsx("div",{className:"absolute",style:{left:"30%",top:"-30%",width:"40%",height:"60%",background:`radial-gradient(ellipse 100% 100% at 50% 100%, 
              rgba(255, 100, 50, 0.4) 0%, 
              rgba(255, 60, 20, 0.2) 40%, 
              transparent 70%)`,filter:s?"blur(15px)":"blur(25px)",animation:"volcanoGlow 2s ease-in-out infinite alternate"}}),e&&h.jsx("div",{className:"absolute inset-0 overflow-visible",style:{zIndex:1},children:d.map(v=>h.jsx("div",{className:"absolute rounded-full",style:{left:`${v.x}%`,bottom:"75%",width:`${v.size}px`,height:`${v.size}px`,background:`radial-gradient(circle at 40% 40%, 
                  rgba(80, 60, 50, ${v.opacity}) 0%, 
                  rgba(50, 40, 35, ${v.opacity*.6}) 50%, 
                  transparent 70%)`,animation:`smokeRise ${v.speed}s ease-out infinite`,animationDelay:`${v.delay}s`,filter:"blur(3px)"}},v.id))}),h.jsxs("div",{className:"absolute bottom-0 left-0 right-0",style:{height:"100%",zIndex:2},children:[h.jsx("div",{className:"absolute bottom-0",style:{left:"-5%",width:"110%",height:"95%",background:`linear-gradient(to top, 
              #1a0f0a 0%, 
              #2d1810 30%, 
              #3d2015 60%, 
              #2a1510 80%, 
              #1a0a05 100%)`,clipPath:"polygon(0 100%, 15% 70%, 30% 45%, 42% 25%, 50% 15%, 58% 25%, 70% 45%, 85% 70%, 100% 100%)"}}),h.jsx("div",{className:"absolute bottom-0",style:{left:"0%",width:"100%",height:"90%",background:`linear-gradient(135deg, 
              #3d2518 0%, 
              #4a2a1a 25%, 
              #3d2015 50%, 
              #2d1510 75%, 
              #1a0a08 100%)`,clipPath:"polygon(5% 100%, 18% 68%, 32% 42%, 44% 22%, 50% 12%, 56% 22%, 68% 42%, 82% 68%, 95% 100%)"}}),h.jsx("div",{className:"absolute bottom-0",style:{left:"5%",width:"45%",height:"85%",background:`linear-gradient(120deg, 
              rgba(100, 60, 40, 0.4) 0%, 
              rgba(80, 45, 30, 0.2) 40%, 
              transparent 70%)`,clipPath:"polygon(0 100%, 28% 65%, 55% 35%, 80% 15%, 100% 100%)"}}),h.jsx("div",{className:"absolute bottom-0",style:{right:"5%",width:"45%",height:"85%",background:`linear-gradient(240deg, 
              rgba(0, 0, 0, 0.4) 0%, 
              rgba(0, 0, 0, 0.2) 40%, 
              transparent 70%)`,clipPath:"polygon(100% 100%, 72% 65%, 45% 35%, 20% 15%, 0% 100%)"}}),h.jsx("div",{className:"absolute",style:{left:"42%",top:"8%",width:"16%",height:"12%",background:e?`radial-gradient(ellipse 100% 80% at 50% 60%, 
                  rgba(255, 200, 100, 0.9) 0%, 
                  rgba(255, 120, 50, 0.8) 30%, 
                  rgba(200, 60, 20, 0.6) 60%, 
                  rgba(80, 30, 10, 0.8) 100%)`:`radial-gradient(ellipse 100% 80% at 50% 60%, 
                  rgba(60, 30, 15, 1) 0%, 
                  rgba(40, 20, 10, 1) 60%, 
                  rgba(30, 15, 8, 1) 100%)`,borderRadius:"50%",boxShadow:e?`0 0 20px rgba(255, 100, 50, 0.8), 
                 0 0 40px rgba(255, 60, 20, 0.5), 
                 inset 0 2px 10px rgba(255, 200, 100, 0.6)`:"inset 0 2px 8px rgba(0, 0, 0, 0.5)",animation:e?"craterPulse 1.5s ease-in-out infinite":void 0}}),e&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"absolute",style:{left:"35%",top:"18%",width:"8%",height:"75%",background:`linear-gradient(180deg, 
                  rgba(255, 180, 80, 0.9) 0%, 
                  rgba(255, 120, 40, 0.85) 20%, 
                  rgba(255, 80, 20, 0.8) 40%, 
                  rgba(200, 50, 10, 0.7) 60%, 
                  rgba(150, 30, 5, 0.6) 80%, 
                  rgba(80, 20, 5, 0.4) 100%)`,clipPath:"polygon(40% 0, 60% 0, 80% 30%, 100% 60%, 90% 100%, 10% 100%, 0% 70%, 20% 40%)",filter:"blur(1px)",animation:"lavaFlow 3s ease-in-out infinite"}}),h.jsx("div",{className:"absolute",style:{left:"33%",top:"15%",width:"12%",height:"80%",background:`linear-gradient(180deg, 
                  rgba(255, 150, 50, 0.4) 0%, 
                  rgba(255, 100, 30, 0.3) 30%, 
                  rgba(200, 50, 10, 0.2) 60%, 
                  transparent 100%)`,filter:s?"blur(6px)":"blur(10px)",animation:"lavaGlow 2s ease-in-out infinite alternate"}}),h.jsx("div",{className:"absolute",style:{right:"38%",top:"20%",width:"6%",height:"65%",background:`linear-gradient(180deg, 
                  rgba(255, 160, 60, 0.85) 0%, 
                  rgba(255, 100, 30, 0.8) 25%, 
                  rgba(220, 60, 15, 0.7) 50%, 
                  rgba(160, 40, 10, 0.5) 75%, 
                  rgba(100, 25, 5, 0.3) 100%)`,clipPath:"polygon(30% 0, 70% 0, 90% 40%, 100% 100%, 0% 100%, 10% 50%)",filter:"blur(1px)",animation:"lavaFlow 3.5s ease-in-out infinite",animationDelay:"0.5s"}}),h.jsx("div",{className:"absolute",style:{left:"28%",top:"45%",width:"4%",height:"50%",background:`linear-gradient(180deg, 
                  rgba(255, 140, 50, 0.7) 0%, 
                  rgba(200, 80, 20, 0.5) 50%, 
                  rgba(120, 40, 10, 0.3) 100%)`,clipPath:"polygon(20% 0, 80% 0, 100% 100%, 0% 100%)",filter:"blur(1px)",animation:"lavaFlow 4s ease-in-out infinite",animationDelay:"1s"}})]}),h.jsx("div",{className:"absolute bottom-0",style:{left:"20%",width:"60%",height:"70%",opacity:.3,background:`
              radial-gradient(ellipse 8px 6px at 25% 60%, rgba(60, 35, 20, 0.6) 0%, transparent 100%),
              radial-gradient(ellipse 12px 8px at 45% 45%, rgba(50, 30, 18, 0.5) 0%, transparent 100%),
              radial-gradient(ellipse 6px 5px at 65% 55%, rgba(70, 40, 25, 0.6) 0%, transparent 100%),
              radial-gradient(ellipse 10px 7px at 55% 70%, rgba(55, 32, 20, 0.5) 0%, transparent 100%),
              radial-gradient(ellipse 8px 6px at 35% 75%, rgba(65, 38, 22, 0.5) 0%, transparent 100%)
            `}})]}),e&&h.jsxs("div",{className:"absolute inset-0 overflow-visible",style:{zIndex:3},children:[h.jsx("div",{className:"absolute",style:{left:"44%",bottom:"85%",width:"12%",height:"40%",background:`linear-gradient(to top, 
                rgba(255, 200, 100, 0.9) 0%, 
                rgba(255, 150, 50, 0.8) 20%, 
                rgba(255, 100, 30, 0.6) 40%, 
                rgba(255, 60, 20, 0.4) 60%, 
                rgba(200, 40, 10, 0.2) 80%, 
                transparent 100%)`,filter:s?"blur(2px)":"blur(3px)",animation:"fireFlicker 0.3s ease-in-out infinite",transformOrigin:"bottom center"}}),h.jsx("div",{className:"absolute",style:{left:"42%",bottom:"90%",width:"6%",height:"25%",background:`linear-gradient(to top, 
                rgba(255, 220, 120, 0.9) 0%, 
                rgba(255, 150, 50, 0.7) 40%, 
                rgba(255, 80, 20, 0.4) 70%, 
                transparent 100%)`,filter:"blur(2px)",animation:"fireFlicker 0.25s ease-in-out infinite",animationDelay:"0.1s",transformOrigin:"bottom center"}}),h.jsx("div",{className:"absolute",style:{left:"52%",bottom:"88%",width:"5%",height:"20%",background:`linear-gradient(to top, 
                rgba(255, 200, 100, 0.85) 0%, 
                rgba(255, 120, 40, 0.6) 50%, 
                transparent 100%)`,filter:"blur(2px)",animation:"fireFlicker 0.35s ease-in-out infinite",animationDelay:"0.15s",transformOrigin:"bottom center"}}),c.map(v=>h.jsx("div",{className:"absolute rounded-full",style:{left:`${v.x}%`,bottom:`${75+v.startY}%`,width:`${v.size}px`,height:`${v.size}px`,background:`radial-gradient(circle at 30% 30%, 
                  rgba(255, 255, 200, ${v.brightness}) 0%, 
                  rgba(255, 180, 80, ${v.brightness*.9}) 30%, 
                  rgba(255, 100, 40, ${v.brightness*.7}) 60%, 
                  rgba(200, 50, 10, ${v.brightness*.4}) 100%)`,boxShadow:`0 0 ${v.size*2}px rgba(255, 150, 50, 0.8)`,animation:`lavaParticle ${v.speed}s ease-out infinite`,animationDelay:`${v.delay}s`}},v.id)),f.map(v=>h.jsx("div",{className:"absolute rounded-full",style:{left:`${v.x}%`,bottom:`${80+v.y}%`,width:`${v.size}px`,height:`${v.size}px`,background:`radial-gradient(circle, 
                  rgba(255, 200, 100, 0.9) 0%, 
                  rgba(255, 120, 50, 0.6) 50%, 
                  transparent 100%)`,animation:`emberFloat ${v.duration}s ease-in-out infinite`,animationDelay:`${v.delay}s`}},v.id))]}),h.jsx("div",{className:"absolute",style:{left:"-20%",bottom:"-10%",width:"140%",height:"40%",background:`linear-gradient(to top, 
            rgba(45, 25, 15, 0.5) 0%, 
            rgba(60, 35, 20, 0.3) 40%, 
            transparent 100%)`,filter:s?"blur(8px)":"blur(15px)"}}),h.jsx("style",{children:`
        @keyframes volcanoGlow {
          0% { opacity: 0.8; transform: scale(1); }
          100% { opacity: 1; transform: scale(1.1); }
        }
        
        @keyframes craterPulse {
          0%, 100% { transform: scale(1); opacity: 1; }
          50% { transform: scale(1.05); opacity: 0.9; }
        }
        
        @keyframes lavaFlow {
          0%, 100% { opacity: 0.85; }
          50% { opacity: 1; }
        }
        
        @keyframes lavaGlow {
          0% { opacity: 0.6; }
          100% { opacity: 1; }
        }
        
        @keyframes fireFlicker {
          0%, 100% { transform: scaleY(1) scaleX(1); }
          25% { transform: scaleY(1.1) scaleX(0.95); }
          50% { transform: scaleY(0.95) scaleX(1.05); }
          75% { transform: scaleY(1.05) scaleX(0.98); }
        }
        
        @keyframes smokeRise {
          0% { 
            transform: translateY(0) translateX(0) scale(0.5); 
            opacity: 0.6; 
          }
          50% { 
            opacity: 0.4; 
          }
          100% { 
            transform: translateY(-150px) translateX(var(--drift, 20px)) scale(2); 
            opacity: 0; 
          }
        }
        
        @keyframes lavaParticle {
          0% { 
            transform: translateY(0) translateX(0) scale(1); 
            opacity: 1; 
          }
          50% {
            opacity: 0.8;
          }
          100% { 
            transform: translateY(-80px) translateX(var(--wobble, 10px)) scale(0.3); 
            opacity: 0; 
          }
        }
        
        @keyframes emberFloat {
          0%, 100% { 
            transform: translateY(0) translateX(0); 
            opacity: 0.8; 
          }
          25% { 
            transform: translateY(-15px) translateX(5px); 
            opacity: 1; 
          }
          50% { 
            transform: translateY(-25px) translateX(-3px); 
            opacity: 0.6; 
          }
          75% { 
            transform: translateY(-35px) translateX(8px); 
            opacity: 0.4; 
          }
        }
      `})]})},_9=e=>Array.from({length:e},()=>({size:Math.random()*4+2,x:Math.random()*100,y:Math.random()*100,duration:3+Math.random()*4,delay:Math.random()*2})),$c=[{text:"Oh! A visitor! ",duration:2e3,position:"left",action:"stop"},{text:"Hey there! I'm Guido!",duration:2e3,position:"left"},{text:"You know Sojourner? Mars Pathfinder, 1997?",duration:2500,position:"left"},{text:"Cute little rover. We were roommates! ",duration:2500,position:"left",action:"roll"},{text:"Well... until I borrowed her antenna.",duration:2500,position:"center",action:"stop"},{text:"And maybe her solar panel. Just a little one!",duration:2500,position:"center"},{text:"She didn't need ALL of them, right? ",duration:2500,position:"center"},{text:"Anyway! Wanna see something cool?",duration:2e3,position:"center",action:"roll",background:"journey"},{text:"*rolling across Mars like a boss* ",duration:2500,position:"right"},{text:"Check it out! Olympus Mons! ",duration:2500,position:"right"},{text:"I've got a secret spot nearby...",duration:2500,position:"right",action:"stop"},{text:"Welcome to my chill zone! ",duration:2500,position:"cliff-edge",action:"secret",background:"cliff"},{text:"The Valles Marineris. Best view on Mars!",duration:3e3,position:"cliff-edge"},{text:"I keep all my favorite configs down there.",duration:2500,position:"cliff-edge"},{text:"27 years of collecting! ",duration:2500,position:"cliff-edge",action:"wave"},{text:"Stuff Sojourner never even knew about!",duration:2500,position:"cliff-edge"},{text:"Come on, follow me! ",duration:2e3,position:"cliff-edge"},{text:"I'll show you the really cool stuff...",duration:2500,position:"descend",action:"exit"},{text:"*disappearing into the canyon* ",duration:2e3,position:"descend"}],w9=({isActive:e,onComplete:t})=>{const{setMarsBackground:r,setSecretSpaceMode:a}=Br(),{setHideUI:s}=om(),{speakResponseAsync:l,cancelSpeech:c}=Fi(),d=U.useRef(l),f=U.useRef(c);U.useEffect(()=>{d.current=l,f.current=c});const p=U.useRef(!1),[y,v]=U.useState(0),[x,b]=U.useState(-20),[_,S]=U.useState(!1),[k,j]=U.useState(!1),[R,E]=U.useState(!1),[q,P]=U.useState("mars"),[H,I]=U.useState(!1),[A,O]=U.useState(0),[M,F]=U.useState(!1),[Y,ae]=U.useState(!1),[ee,de]=U.useState(!1),J=U.useRef(e);U.useEffect(()=>{const N=()=>ae(window.innerWidth<640);return N(),window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[]);const te=U.useMemo(()=>_9(20),[]);U.useEffect(()=>{if(!e||!R)return;const N=setInterval(()=>{O(L=>(L+15)%360)},50);return()=>clearInterval(N)},[e,R]);const he=U.useCallback(()=>{s(!1),f.current(),H&&a(!0),t()},[H,t,a,s]);if(U.useEffect(()=>{if(!e)return;J.current=!0,p.current=!1,r(!0);const N=setTimeout(()=>{F(!0)},100),L=(G,X)=>{p.current||(v(X),G.position==="left"?(b(15),E(!1)):G.position==="center"?b(45):G.position==="right"?(b(75),E(!1)):G.position==="cliff-edge"?(b(22),E(!1),de(!1)):G.position==="descend"?(b(50),E(!0),de(!0)):G.position==="offscreen-right"&&(b(110),E(!0)),G.action==="roll"?E(!0):G.action==="stop"?E(!1):G.action==="secret"?S(!0):G.action==="wave"?(j(!0),E(!1)):G.action==="exit"&&(j(!1),E(!0)),G.background==="journey"?P("journey"):G.background==="cliff"&&P("cliff"),X===2&&s(!0))};return(async()=>{await new Promise(G=>setTimeout(G,500));for(let G=0;G<$c.length&&!p.current;G++){const X=$c[G];L(X,G);const D=X.text.replace(/[\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]|[\u{1F600}-\u{1F64F}]|[\u{1F680}-\u{1F6FF}]|[\u{1FA00}-\u{1FAFF}]|[]|/gu,"").trim(),ne=/^\*.*\*$/.test(D);if(D&&!ne){const le=d.current(D),Se=new Promise(Ae=>setTimeout(Ae,X.duration));await Promise.all([le,Se])}else await new Promise(le=>setTimeout(le,X.duration));p.current||await new Promise(le=>setTimeout(le,300))}p.current||I(!0)})(),()=>{p.current=!0,clearTimeout(N),v(0),b(-20),S(!1),j(!1),E(!1),de(!1),P("mars"),I(!1),F(!1),s(!1),r(!1),f.current()}},[e,r,s]),U.useEffect(()=>{if(H){const N=setTimeout(()=>{a(!0),t()},1e3);return()=>clearTimeout(N)}},[H,t,a]),!e||!M)return null;const ve=$c[y],se=()=>q==="mars"?"transparent":q==="journey"?"linear-gradient(to bottom, #1a0f0a 0%, #2d1810 25%, #4a2a1a 50%, #3d2817 75%, #1a0f0a 100%)":"linear-gradient(to bottom, #1a0505 0%, #3d1a1a 15%, #6b2a1a 30%, #c45c2a 45%, #e8a060 55%, #4a2820 70%, #1a0808 100%)";return h.jsxs("div",{className:"fixed inset-0 z-[100] cursor-pointer overflow-hidden",onClick:he,style:{perspective:"1000px",perspectiveOrigin:"50% 60%"},children:[h.jsx("div",{className:"absolute inset-0 transition-all duration-2000",style:{background:se(),transition:"background 3s ease-in-out"}}),q!=="mars"&&h.jsx("div",{style:{opacity:q==="journey"?.6:.8,transform:"translateZ(-200px) scale(1.2)",transformStyle:"preserve-3d"},children:h.jsx(g9,{count:100})}),q==="journey"&&h.jsx("div",{className:"absolute w-16 h-16 rounded-full",style:{right:"15%",top:"20%",background:"radial-gradient(circle at 30% 30%, #FFFACD 0%, #FFE4B5 20%, #FFA500 50%, #FF6B35 100%)",boxShadow:`
              0 0 60px rgba(255, 165, 0, 0.6), 
              0 0 120px rgba(255, 100, 50, 0.3),
              inset -8px -8px 20px rgba(255, 69, 0, 0.4),
              inset 5px 5px 15px rgba(255, 255, 200, 0.6)
            `,filter:"blur(1px)",transform:"translateZ(-100px)"}}),q==="journey"&&h.jsx("div",{className:"absolute inset-0 overflow-hidden",style:{transform:"translateZ(-50px)"},children:te.map((N,L)=>h.jsx("div",{className:"absolute rounded-full",style:{width:N.size+"px",height:N.size+"px",left:`${N.x}%`,top:`${N.y}%`,background:"radial-gradient(circle at 30% 30%, rgba(255, 200, 150, 0.5), rgba(200, 120, 80, 0.2))",boxShadow:"0 0 4px rgba(255, 180, 120, 0.3)",animation:`dustFloat ${N.duration}s ease-in-out infinite`,animationDelay:`${N.delay}s`}},L))}),q==="cliff"&&h.jsx("div",{className:"absolute inset-0",style:{zIndex:0},children:h.jsx(Ck,{})}),q==="journey"&&h.jsx("div",{className:"absolute inset-0",style:{transform:"translateZ(-120px)"},children:h.jsx(x9,{isErupting:!0,positionX:50,scale:Y?.7:1,opacity:.85})}),q==="journey"&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"absolute w-full",style:{bottom:"30%",height:"25%",background:"linear-gradient(to bottom, #2d1510 0%, #1a0a08 100%)",clipPath:"polygon(0 80%, 15% 55%, 30% 70%, 50% 40%, 65% 60%, 85% 35%, 100% 50%, 100% 100%, 0 100%)",opacity:.5,filter:"blur(2px)",transform:"translateZ(-150px) scale(1.08)",transition:"all 2s ease-in-out"}}),h.jsx("div",{className:"absolute w-full",style:{bottom:"20%",height:"30%",background:"linear-gradient(to bottom, #3d2015 0%, #2d1510 100%)",clipPath:"polygon(0 70%, 10% 50%, 20% 65%, 35% 35%, 45% 55%, 60% 30%, 75% 50%, 85% 40%, 100% 55%, 100% 100%, 0 100%)",boxShadow:"inset 0 10px 30px rgba(0, 0, 0, 0.2)",transform:"translateZ(-80px) scale(1.04)",transition:"all 2s ease-in-out"}}),h.jsx("div",{className:"absolute w-full",style:{bottom:0,height:"25%",background:"linear-gradient(175deg, #5a3525 0%, #4a2a1a 20%, #2d1510 50%, #1a0a08 100%)",boxShadow:`
                inset 0 15px 40px rgba(100, 60, 40, 0.3),
                inset 0 -5px 20px rgba(0, 0, 0, 0.4)
              `,transform:"translateZ(0px)",transition:"all 2s ease-in-out"}}),h.jsx("div",{className:"absolute",style:{bottom:"8%",left:"20%",width:Y?"24px":"40px",height:Y?"12px":"20px",background:"linear-gradient(135deg, #3d2015 0%, #2d1510 100%)",borderRadius:"50%",transform:"translateZ(10px)",boxShadow:"2px 2px 6px rgba(0, 0, 0, 0.3)",transition:"all 2s ease-in-out"}}),h.jsx("div",{className:"absolute",style:{bottom:"5%",left:"45%",width:Y?"18px":"30px",height:Y?"9px":"15px",background:"linear-gradient(135deg, #2d1510 0%, #1a0a08 100%)",borderRadius:"45% 55% 50% 50%",transform:"translateZ(8px)",boxShadow:"2px 2px 4px rgba(0, 0, 0, 0.25)",transition:"all 2s ease-in-out"}})]}),h.jsx("div",{className:"absolute transition-all ease-in-out",style:{left:`${x}%`,bottom:q==="cliff"?Y?"18%":"28%":Y?"8%":"12%",transform:`translateX(-50%) scaleY(0.3) scaleX(${ee?.5:1.1})`,width:Y?"60px":"100px",height:Y?"24px":"40px",background:"radial-gradient(ellipse, rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0.1) 50%, transparent 70%)",filter:Y?"blur(5px)":"blur(8px)",transition:ee?"all 2s ease-in":R?"left 1.5s ease-in-out":"left 0.8s ease-out",opacity:ee?0:x>0&&x<100?1:0}}),h.jsxs("div",{className:"absolute transition-all ease-in-out",style:{left:`${x}%`,bottom:ee?"-20%":q==="cliff"?Y?"5rem":"10rem":Y?"3rem":"5rem",transform:`translateX(-50%) translateZ(50px) ${ee?"scale(0.3)":"scale(1)"}`,transition:ee?"all 2.5s ease-in":R?"left 1.5s ease-in-out, bottom 0.5s ease-out":"left 0.8s ease-out, bottom 0.5s ease-out",filter:Y?"drop-shadow(2px 4px 6px rgba(0, 0, 0, 0.4))":"drop-shadow(4px 8px 12px rgba(0, 0, 0, 0.4))",opacity:ee?0:1},children:[x>0&&x<100&&h.jsxs("div",{className:`absolute left-1/2 transform -translate-x-1/2 
                       bg-white text-gray-800 rounded-2xl shadow-2xl
                       text-center border-2 border-gray-100
                       ${Y?"-top-20 px-3 py-2 min-w-[160px] max-w-[220px]":"-top-32 px-5 py-4 min-w-[220px] max-w-[320px]"}`,style:{animation:"bubbleIn 0.4s ease-out"},children:[h.jsx("p",{className:`font-medium leading-relaxed ${Y?"text-xs":"text-base"}`,children:ve?.text}),h.jsx("div",{className:`absolute left-1/2 transform -translate-x-1/2
                         w-0 h-0 border-l-transparent border-r-transparent border-t-white
                         ${Y?"-bottom-2 border-l-[8px] border-r-[8px] border-t-[8px]":"-bottom-3 border-l-[12px] border-r-[12px] border-t-[12px]"}`,style:{filter:"drop-shadow(0 2px 2px rgba(0,0,0,0.1))"}})]}),h.jsxs("svg",{width:Y?"72":"120",height:Y?"90":"150",viewBox:"0 0 120 150",className:`drop-shadow-2xl ${k?"animate-bounce":""}`,style:{transform:R?`translateY(${Math.sin(A*.05)*(Y?2:3)}px)`:void 0},children:[h.jsx("line",{x1:"45",y1:"15",x2:"45",y2:"5",stroke:"#4A4A4A",strokeWidth:"2"}),h.jsx("circle",{cx:"45",cy:"3",r:"3",fill:R?"#FFD700":"#4A4A4A",children:R&&h.jsx("animate",{attributeName:"fill",values:"#FFD700;#FF6B6B;#4ECDC4;#FFD700",dur:"0.5s",repeatCount:"indefinite"})}),h.jsx("line",{x1:"75",y1:"15",x2:"75",y2:"5",stroke:"#4A4A4A",strokeWidth:"2"}),h.jsx("circle",{cx:"75",cy:"3",r:"3",fill:R?"#FFD700":"#4A4A4A",children:R&&h.jsx("animate",{attributeName:"fill",values:"#4ECDC4;#FFD700;#FF6B6B;#4ECDC4",dur:"0.5s",repeatCount:"indefinite"})}),h.jsx("rect",{x:"25",y:"15",width:"70",height:"50",rx:"10",fill:"#E8E8E8",stroke:"#4A4A4A",strokeWidth:"2"}),h.jsx("circle",{cx:"45",cy:"40",r:"12",fill:"#2C2C2C",stroke:"#4A4A4A",strokeWidth:"2"}),h.jsx("circle",{cx:"75",cy:"40",r:"12",fill:"#2C2C2C",stroke:"#4A4A4A",strokeWidth:"2"}),h.jsx("circle",{cx:"47",cy:"38",r:"4",fill:"white"}),h.jsx("circle",{cx:"77",cy:"38",r:"4",fill:"white"}),k&&h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M 40 48 Q 45 52, 50 48",stroke:"white",strokeWidth:"2",fill:"none"}),h.jsx("path",{d:"M 70 48 Q 75 52, 80 48",stroke:"white",strokeWidth:"2",fill:"none"})]}),h.jsx("rect",{x:"15",y:"30",width:"10",height:"20",rx:"3",fill:"#8A8A8A"}),h.jsx("rect",{x:"95",y:"30",width:"10",height:"20",rx:"3",fill:"#8A8A8A"}),h.jsx("rect",{x:"50",y:"65",width:"20",height:"10",fill:"#4A4A4A"}),h.jsx("rect",{x:"25",y:"75",width:"70",height:"45",rx:"8",fill:"#E8E8E8",stroke:"#4A4A4A",strokeWidth:"2"}),h.jsx("rect",{x:"35",y:"85",width:"50",height:"25",rx:"5",fill:"#F5B800",stroke:"#4A4A4A",strokeWidth:"1"}),h.jsx("text",{x:"60",y:"102",textAnchor:"middle",fontSize:"12",fontWeight:"bold",fill:"#2C2C2C",children:"GUIDO"}),h.jsxs("g",{style:k?{transformOrigin:"10px 80px",animation:"wave 0.3s ease-in-out infinite alternate"}:{},children:[h.jsx("rect",{x:"5",y:"80",width:"15",height:"8",rx:"3",fill:"#8A8A8A"}),h.jsx("rect",{x:"0",y:"88",width:"10",height:"25",rx:"3",fill:"#E8E8E8",stroke:"#4A4A4A",strokeWidth:"1"}),h.jsx("rect",{x:"0",y:"113",width:"12",height:"8",rx:"2",fill:"#8A8A8A"})]}),h.jsxs("g",{children:[h.jsx("rect",{x:"100",y:"80",width:"15",height:"8",rx:"3",fill:"#8A8A8A"}),h.jsx("rect",{x:"110",y:"88",width:"10",height:"25",rx:"3",fill:"#E8E8E8",stroke:"#4A4A4A",strokeWidth:"1"}),h.jsx("rect",{x:"108",y:"113",width:"12",height:"8",rx:"2",fill:"#8A8A8A"})]}),h.jsx("rect",{x:"40",y:"120",width:"40",height:"15",rx:"5",fill:"#F5B800",stroke:"#4A4A4A",strokeWidth:"1"}),h.jsxs("g",{style:{transformOrigin:"35px 145px",transform:`rotate(${A}deg)`},children:[h.jsx("ellipse",{cx:"35",cy:"145",rx:"15",ry:"8",fill:"#3A3A3A"}),h.jsx("ellipse",{cx:"35",cy:"143",rx:"12",ry:"5",fill:"#5A5A5A"}),[0,1,2,3,4,5].map(N=>h.jsx("line",{x1:35+Math.cos(N*Math.PI/3)*10,y1:145+Math.sin(N*Math.PI/3)*6,x2:35+Math.cos(N*Math.PI/3)*14,y2:145+Math.sin(N*Math.PI/3)*7,stroke:"#2A2A2A",strokeWidth:"2"},`left-${N}`))]}),h.jsxs("g",{style:{transformOrigin:"85px 145px",transform:`rotate(${A}deg)`},children:[h.jsx("ellipse",{cx:"85",cy:"145",rx:"15",ry:"8",fill:"#3A3A3A"}),h.jsx("ellipse",{cx:"85",cy:"143",rx:"12",ry:"5",fill:"#5A5A5A"}),[0,1,2,3,4,5].map(N=>h.jsx("line",{x1:85+Math.cos(N*Math.PI/3)*10,y1:145+Math.sin(N*Math.PI/3)*6,x2:85+Math.cos(N*Math.PI/3)*14,y2:145+Math.sin(N*Math.PI/3)*7,stroke:"#2A2A2A",strokeWidth:"2"},`right-${N}`))]})]})]}),h.jsx("div",{className:`absolute left-1/2 transform -translate-x-1/2 flex items-center ${Y?"bottom-6 gap-1":"bottom-8 gap-2"}`,children:$c.map((N,L)=>h.jsx("div",{className:`rounded-full transition-all duration-300 ${L<=y?"bg-white":"bg-white/30"} ${Y?"w-1.5 h-1.5":"w-2 h-2"}`},L))}),h.jsx("div",{className:`absolute left-1/2 transform -translate-x-1/2 text-white/50 ${Y?"bottom-2 text-[10px]":"bottom-3 text-xs"}`,children:Y?"Tap to skip":"Click anywhere to skip"}),h.jsx("style",{children:`
        @keyframes bubbleIn {
          from { opacity: 0; transform: translateX(-50%) translateY(10px) scale(0.9); }
          to { opacity: 1; transform: translateX(-50%) translateY(0) scale(1); }
        }
        @keyframes wave {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(-30deg); }
        }
        @keyframes twinkle {
          0%, 100% { opacity: 0.3; }
          50% { opacity: 1; }
        }
        @keyframes float {
          0%, 100% { transform: translateY(0px); }
          50% { transform: translateY(-20px); }
        }
        @keyframes glow {
          0%, 100% { filter: drop-shadow(0 0 20px rgba(255,255,255,0.8)); }
          50% { filter: drop-shadow(0 0 40px rgba(138,43,226,0.9)); }
        }
        @keyframes gradient {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        @keyframes dustFloat {
          0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.3; }
          25% { transform: translate(10px, -15px) scale(1.1); opacity: 0.5; }
          50% { transform: translate(-5px, -25px) scale(0.9); opacity: 0.4; }
          75% { transform: translate(15px, -10px) scale(1.05); opacity: 0.35; }
        }
      `})]})};function S9(){const{isChatOpen:e,setIsChatOpen:t,config:r,chatPhase:a,setChatPhase:s,setCurrentToolName:l,setChatResponse:c,showFullResponse:d,setShowFullResponse:f,chatResponse:p,addChatHistoryItem:y,sessionMessages:v,setSessionMessages:x,clearSession:b}=Fi(),[_,S]=U.useState(""),[k,j]=U.useState(!1),R=U.useRef(null),E=U.useRef(null),{handleFieldChange:q}=Ws(),{template:P,fields:H,setFields:I,ruleSets:A,setRuleSets:O,selectedRuleSetIndex:M,updateTemplate:F}=er(),{searchAllRegistries:Y,fetchPackageTemplates:ae,searchResults:ee}=eo(),{isExpertMode:de}=Pr(),J=U.useCallback(()=>{t(!1)},[t]);U.useEffect(()=>{e&&a==="input"&&R.current&&R.current.focus()},[e,a]),U.useEffect(()=>{const G=window.SpeechRecognition||window.webkitSpeechRecognition;return G&&(E.current=new G,E.current.continuous=!1,E.current.interimResults=!0,E.current.lang="en-US",E.current.onresult=X=>{const D=Array.from({length:X.results.length},(ne,le)=>X.results[le]).map(ne=>ne[0].transcript).join("");S(D)},E.current.onend=()=>{j(!1)},E.current.onerror=()=>{j(!1)}),()=>{E.current&&E.current.abort()}},[]);const te=U.useCallback(()=>{E.current&&(k?(E.current.stop(),j(!1)):(E.current.start(),j(!0)))},[k]),he=U.useCallback(async()=>{if(!_.trim()||a!=="input"||!r)return;const G=_.trim();S(""),s("thinking"),c("");const X={name:P.name,fileName:P.fileName,version:P.version,description:P.description,owner:P.owner,application:P.application,fieldCount:H.length,ruleCount:A.reduce((Ae,Te)=>Ae+Te.rules.length,0)},D=ak(de),ne=[{role:"system",content:nk(de,X,D)},...v,{role:"user",content:G}],le={template:{name:P.name,fileName:P.fileName||"",version:P.version,description:P.description,owner:P.owner,application:P.application,docs:P.docs},fields:H,setFields:I,handleFieldChange:q,ruleSets:A,setRuleSets:O,selectedRuleSetIndex:M,searchRegistries:async Ae=>(await Y(Ae),new Promise(Te=>{setTimeout(()=>{Te(ee.map($e=>({name:$e.name,description:$e.description||"",source:$e.source,registryName:$e.registryName,downloadUrl:$e.downloadUrl})))},500)})),loadTemplateFromRegistry:async(Ae,Te,$e)=>{try{const Oe=ee.find(Ue=>Ue.name===Ae&&Ue.source===Te);if(!Oe)return{success:!1,message:`Template "${Ae}" not found. Please search for it first using search_registries.`};const Me=await ae(Oe,$e);if(Me.length===0)return{success:!1,message:"No templates found in the package."};const Re=Me[0];return F(Re),{success:!0,message:`Successfully loaded template: ${Re.name}`,templateName:Re.name}}catch(Oe){return{success:!1,message:`Failed to load template: ${Oe instanceof Error?Oe.message:String(Oe)}`}}}},Se=[];try{let Ae=!0;const Te=[...ne];for(;Ae;){const $e=await ek(r.provider,r.apiKey,r.model,Te,r.baseUrl,{tools:D});if($e.toolCalls&&$e.toolCalls.length>0){Te.push({role:"assistant",content:$e.content,toolCalls:$e.toolCalls});const Oe=[];for(const Re of $e.toolCalls){s("tool-calling"),l(Re.name),Se.push(Re.name),await new Promise(wt=>setTimeout(wt,100));const[Ue]=await ik([Re],le);Oe.push(Ue)}const Me=Te[Te.length-1];Me.role==="assistant"&&(Me.toolResults=Oe)}else{Ae=!1,l(null),c($e.content),s("done"),Te.push({role:"assistant",content:$e.content});const Oe=Te.slice(1);x(Oe),y({userMessage:G,assistantResponse:$e.content,toolsUsed:Se.length>0?[...new Set(Se)]:void 0})}}}catch(Ae){console.error("Chat error:",Ae);const Te="Sorry, something went wrong. Please try again.";c(Te),s("done"),y({userMessage:G,assistantResponse:Te,toolsUsed:Se.length>0?[...new Set(Se)]:void 0})}},[_,a,r,P,H,I,q,A,O,M,s,l,c,y,v,x,Y,ee,ae,F,de]),ve=U.useCallback(G=>{G.key==="Enter"&&!G.shiftKey?(G.preventDefault(),he()):G.key==="Escape"&&J()},[he,J]),se=U.useCallback(()=>{s("idle"),c(""),S(""),l(null),f(!1),J()},[J,s,l,c,f]),N=U.useCallback(()=>{f(!1)},[f]),L=U.useCallback(()=>{b(),c(""),S(""),s("input")},[b,c,s]);return!e&&!d||!(a==="input"||d)?null:h.jsxs(io,{children:[h.jsx("div",{className:"fixed inset-0 z-[999] bg-black/30 backdrop-blur-sm animate-fade-in",onClick:d?N:se}),h.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center pointer-events-none p-4",children:[a==="input"&&h.jsxs("div",{className:"pointer-events-auto animate-fade-in relative",children:[h.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-primary-400 via-primary-500 to-primary-600 rounded-2xl blur-sm opacity-50"}),h.jsxs("div",{className:"relative bg-surface-0 rounded-2xl p-4 border border-primary-300 dark:border-primary-500/30 shadow-2xl w-[380px]",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3 px-1",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-500 animate-pulse shadow-lg shadow-primary-500/50"}),h.jsx("span",{className:"text-xs font-mono text-primary-600 dark:text-primary-400 uppercase tracking-wider",children:"Guido AI"}),v.length>0&&h.jsxs("span",{className:"text-xs text-text-tertiary",children:[" ",Math.floor(v.length/2)," turn",Math.floor(v.length/2)!==1?"s":""]}),h.jsx("div",{className:"flex-1"}),v.length>0&&h.jsx("button",{onClick:L,className:"text-xs text-text-tertiary hover:text-primary-500 transition-colors mr-2",title:"Start a new conversation",children:"New Chat"}),h.jsx("button",{onClick:se,className:"w-6 h-6 flex items-center justify-center text-text-secondary hover:text-primary-500 transition-colors rounded-lg hover:bg-surface-2",children:""})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"flex-1 relative",children:h.jsx("input",{ref:R,type:"text",value:_,onChange:G=>S(G.target.value),onKeyDown:ve,placeholder:"Ask me anything...",className:"w-full bg-surface-1 border border-strong rounded-xl px-4 py-3 text-sm text-text-primary placeholder:text-text-tertiary outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all"})}),h.jsx("button",{onClick:te,className:`w-11 h-11 rounded-xl flex items-center justify-center transition-all duration-300 text-lg
                    ${k?"bg-danger-100 dark:bg-danger-900/30 border-2 border-danger-500 text-danger-500 shadow-lg shadow-danger-500/30 animate-pulse":"bg-surface-1 border border-strong text-text-secondary hover:border-primary-500 hover:text-primary-500 hover:shadow-lg hover:shadow-primary-500/20"}`,title:k?"Stop listening":"Start voice input",children:""}),h.jsx("button",{onClick:()=>void he(),disabled:!_.trim(),className:"w-11 h-11 rounded-xl flex items-center justify-center transition-all duration-300 text-lg bg-primary-500 hover:bg-primary-600 text-gray-900 dark:text-white shadow-lg shadow-primary-500/30 hover:shadow-primary-500/50 hover:scale-105 disabled:opacity-30 disabled:shadow-none disabled:hover:scale-100 disabled:cursor-not-allowed",title:"Send",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),h.jsx("div",{className:"mt-3 text-xs text-text-tertiary text-center",children:"Press Enter to send  Esc to close"})]})]}),d&&p&&h.jsxs("div",{className:"pointer-events-auto animate-fade-in relative max-w-lg",children:[h.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-success-400 via-primary-400 to-primary-500 rounded-2xl blur-sm opacity-40"}),h.jsxs("div",{className:"relative bg-surface-0 rounded-2xl p-5 border border-success-300 dark:border-success-500/30 shadow-2xl",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-success-500 shadow-lg shadow-success-500/50"}),h.jsx("span",{className:"text-xs font-mono text-success-600 dark:text-success-400 uppercase tracking-wider",children:"Guido says"}),h.jsx("div",{className:"flex-1"}),h.jsx("button",{onClick:N,className:"w-6 h-6 flex items-center justify-center text-text-secondary hover:text-success-500 transition-colors rounded-lg hover:bg-surface-2",children:""})]}),h.jsx("div",{className:"markdown-content text-sm leading-relaxed text-text-primary max-h-[60vh] overflow-y-auto",children:h.jsx(Bm,{content:p})}),h.jsx("div",{className:"mt-4 text-xs text-text-tertiary text-center",children:"Click anywhere or press Esc to close"})]})]})]})]})}function k9(){const[e,t]=U.useState(""),{marsBackground:r,secretSpaceMode:a}=Br(),{isActive:s,setIsActive:l,hideUI:c}=om(),{isExpertMode:d}=Pr();return U.useEffect(()=>{(async()=>{try{let p;d?p=await fetch("/Guido/HELP.md"):p=await fetch("/Guido/HELP.simple.md");const y=await p.text(),v=await Et(y);t(v)}catch(p){console.error("Error fetching README.md:",p)}})()},[d]),h.jsxs("div",{className:"min-h-screen flex flex-col text-text-primary transition-colors relative",children:[a&&h.jsx(Ck,{}),!a&&h.jsx(h9,{}),!r&&!a&&h.jsx("div",{className:"fixed inset-0 bg-surface-0 transition-colors duration-300",style:{zIndex:-1}}),h.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[!c&&h.jsxs(h.Fragment,{children:[h.jsx(d9,{readmeContent:e}),h.jsx("div",{className:"flex-grow max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 w-full",children:h.jsx(nL,{})})]}),h.jsx(f9,{})]}),h.jsx(w9,{isActive:s,onComplete:()=>l(!1)}),h.jsx(S9,{})]})}function T9(e){return e.replace(/(<table[^>]*>)\s+/g,"$1").replace(/\s+(<\/table>)/g,"$1").replace(/(<thead[^>]*>)\s+/g,"$1").replace(/\s+(<\/thead>)/g,"$1").replace(/(<tbody[^>]*>)\s+/g,"$1").replace(/\s+(<\/tbody>)/g,"$1").replace(/(<tr[^>]*>)\s+/g,"$1").replace(/\s+(<\/tr>)/g,"$1").replace(/<\/th>\s+<th/g,"</th><th").replace(/<\/td>\s+<td/g,"</td><td").replace(/<\/tr>\s+<tr/g,"</tr><tr").replace(/<\/thead>\s+<tbody/g,"</thead><tbody")}const E9=({message:e,onClose:t})=>{const r=U.useMemo(()=>T9(e),[e]),a=e.includes("<table")||e.includes("<ul")||e.length>200;return h.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 overflow-y-auto p-4 sm:p-6 z-50",onClick:t,children:h.jsxs("div",{className:`bg-surface-0 p-4 sm:p-6 rounded-lg shadow-lg mx-auto my-auto ${a?"w-full max-w-[95vw] sm:max-w-xl md:max-w-2xl lg:max-w-3xl":"w-auto max-w-sm"}`,onClick:s=>s.stopPropagation(),children:[h.jsx("div",{className:"flex justify-center mb-3 sm:mb-4",children:h.jsx("img",{src:"/Guido/guido_icon.png",alt:"Guido",className:"h-10 sm:h-12 opacity-90"})}),h.jsx("div",{className:`markdown-content mb-3 sm:mb-4 max-h-[60vh] overflow-y-auto overflow-x-auto text-text-primary text-sm sm:text-base ${a?"text-left":"text-center"}`,children:h.jsx(Bm,{content:r})}),h.jsx("div",{className:"flex justify-center",children:h.jsx(Xe,{onClick:t,size:"small",children:"Close"})})]})})},N9=({message:e,onConfirm:t,onClose:r})=>h.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50",children:h.jsxs("div",{className:"bg-surface-0 p-6 rounded-default shadow-lg",children:[h.jsx("div",{className:"flex justify-center mb-3",children:h.jsx("img",{src:"/Guido/guido_icon.png",alt:"Guido",className:"h-12 opacity-90"})}),h.jsx("p",{className:"mb-4 text-text-primary text-center",children:e}),h.jsxs("div",{className:"flex justify-end gap-2",children:[h.jsx(Xe,{onClick:r,type:"primary-text",size:"small",children:"Cancel"}),h.jsx(Xe,{onClick:t,size:"small",children:"Confirm"})]})]})}),A9=({message:e,options:t,onChoice:r,onClose:a})=>h.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",children:h.jsxs("div",{className:"bg-surface-0 p-6 rounded-default shadow-lg max-w-md",children:[h.jsx("div",{className:"flex justify-center mb-3",children:h.jsx("img",{src:"/Guido/guido_icon.png",alt:"Guido",className:"h-12 opacity-90"})}),h.jsx("p",{className:"mb-4 text-text-primary text-center",children:e}),h.jsxs("div",{className:"flex flex-col gap-2",children:[t.map(s=>h.jsx(Xe,{onClick:()=>r(s.value),type:s.type||"primary",size:"small",className:"w-full",children:s.label},s.value)),h.jsx(Xe,{onClick:a,type:"primary-text",size:"small",className:"w-full mt-2",children:"Cancel"})]})]})}),C9=({children:e})=>{const[t,r]=U.useState(null),[a,s]=U.useState(null),[l,c]=U.useState(null),[d,f]=U.useState(null),[p,y]=U.useState(null),[v,x]=U.useState([]),[b,_]=U.useState(null),[S,k]=U.useState(null),j=M=>{r(M)},R=(M,F,Y)=>{s(M),c(()=>F),f(()=>Y)},E=(M,F,Y,ae)=>{y(M),x(F),_(()=>Y),k(()=>ae)},q=()=>{l&&l(),s(null),c(null)},P=()=>{s(null),c(null),d&&d(),f(null)},H=()=>{r(null)},I=M=>{b&&b(M),y(null),x([]),_(null),k(null)},A=()=>{y(null),x([]),_(null),S&&S(),k(null)},O={alert:j,confirm:R,choice:E};return h.jsxs(n2.Provider,{value:O,children:[e,h.jsxs("div",{className:"relative z-50",children:[t&&h.jsx(E9,{message:t,onClose:H}),a&&h.jsx(N9,{message:a,onConfirm:q,onClose:P}),p&&h.jsx(A9,{message:p,options:v,onChoice:I,onClose:A})]})]})},K_="theme",Q_="theme-blend",W_="mars-background",e1="secret-space-mode",ln={surface0:["#E8F7FC","#CEEFF8"],surface1:["#DCF2F9","#B9E6F4"],surface2:["#CEEFF8","#A0D8EC"],surface3:["#B9E6F4","#8ACDE5"],surface4:["#A0D8EC","#6EC2DE"],surface5:["#8ACDE5","#5AB8D8"],border:["#A0D8EC","#6EC2DE"],borderStrong:["#5AB8D8","#3AB0DB"],hover:["#CEEFF8","#A0D8EC"],active:["#B9E6F4","#8ACDE5"]},un={surface0:["#3AB0DB","#0f2a38"],surface1:["#2A9BC5","#133545"],surface2:["#226280","#194960"],surface3:["#1d5570","#1d5570"],surface4:["#194960","#226280"],surface5:["#133545","#2a7090"],border:["#3AB0DB","#1d5570"],borderStrong:["#4ABAE0","#226280"],hover:["#226280","#194960"],active:["#1d5570","#1d5570"]};function cn(e,t,r){const a=b=>parseInt(b,16),s=a(e.slice(1,3)),l=a(e.slice(3,5)),c=a(e.slice(5,7)),d=a(t.slice(1,3)),f=a(t.slice(3,5)),p=a(t.slice(5,7)),y=Math.round(s+(d-s)*r),v=Math.round(l+(f-l)*r),x=Math.round(c+(p-c)*r);return`#${y.toString(16).padStart(2,"0")}${v.toString(16).padStart(2,"0")}${x.toString(16).padStart(2,"0")}`}function xh(e,t){const r=document.documentElement;r.classList.remove("dark","blend-mode","zone-light-plus","zone-dark-plus"),r.style.removeProperty("--theme-blend");const a=Math.max(0,1-Math.abs(t-50)/50),s=t>=25&&t<=75?Math.pow(a,.5):a*.3;if(r.style.setProperty("--glass-opacity",`${.85-s*.45}`),r.style.setProperty("--glass-blur",`${4+s*16}px`),r.style.setProperty("--glass-saturation",`${100+s*80}%`),t<=25)r.style.colorScheme="light";else if(t<=50){const l=(t-25)/25;r.classList.add("blend-mode","zone-light-plus"),r.style.colorScheme="light",r.style.setProperty("--zone-surface-0",cn(ln.surface0[0],ln.surface0[1],l)),r.style.setProperty("--zone-surface-1",cn(ln.surface1[0],ln.surface1[1],l)),r.style.setProperty("--zone-surface-2",cn(ln.surface2[0],ln.surface2[1],l)),r.style.setProperty("--zone-surface-3",cn(ln.surface3[0],ln.surface3[1],l)),r.style.setProperty("--zone-surface-4",cn(ln.surface4[0],ln.surface4[1],l)),r.style.setProperty("--zone-surface-5",cn(ln.surface5[0],ln.surface5[1],l)),r.style.setProperty("--zone-border",cn(ln.border[0],ln.border[1],l)),r.style.setProperty("--zone-border-strong",cn(ln.borderStrong[0],ln.borderStrong[1],l)),r.style.setProperty("--zone-hover",cn(ln.hover[0],ln.hover[1],l)),r.style.setProperty("--zone-active",cn(ln.active[0],ln.active[1],l))}else if(t<=75){const l=(t-50)/25;r.classList.add("blend-mode","zone-dark-plus"),r.style.colorScheme="dark",r.style.setProperty("--zone-surface-0",cn(un.surface0[0],un.surface0[1],l)),r.style.setProperty("--zone-surface-1",cn(un.surface1[0],un.surface1[1],l)),r.style.setProperty("--zone-surface-2",cn(un.surface2[0],un.surface2[1],l)),r.style.setProperty("--zone-surface-3",cn(un.surface3[0],un.surface3[1],l)),r.style.setProperty("--zone-surface-4",cn(un.surface4[0],un.surface4[1],l)),r.style.setProperty("--zone-surface-5",cn(un.surface5[0],un.surface5[1],l)),r.style.setProperty("--zone-border",cn(un.border[0],un.border[1],l)),r.style.setProperty("--zone-border-strong",cn(un.borderStrong[0],un.borderStrong[1],l)),r.style.setProperty("--zone-hover",cn(un.hover[0],un.hover[1],l)),r.style.setProperty("--zone-active",cn(un.active[0],un.active[1],l))}else r.classList.add("dark"),r.style.colorScheme="dark"}const R9=({children:e})=>{const[t,r]=U.useState("system"),[a,s]=U.useState(0),[l,c]=U.useState(!0),[d,f]=U.useState(!1);U.useEffect(()=>{Promise.all([ft.getItem(K_),ft.getItem(Q_),ft.getItem(W_),ft.getItem(e1)]).then(([b,_,S,k])=>{const j=_??0,R=b??"system",E=S??!0,q=k??!1;r(R),s(j),c(E),f(q),xh(R,j)})},[]),U.useEffect(()=>{xh(t,a),ft.setItem(K_,t),ft.setItem(Q_,a)},[t,a]),U.useEffect(()=>{if(t!=="system"||a>0)return;const b=window.matchMedia("(prefers-color-scheme: dark)"),_=()=>xh("system",a);return b.addEventListener("change",_),()=>b.removeEventListener("change",_)},[t,a]);const p=b=>{r(b),b==="light"?s(0):b==="dark"&&s(100)},y=b=>{s(b),r(b===0?"light":b===100?"dark":"system")},v=U.useCallback(b=>{c(b),ft.setItem(W_,b)},[]),x=U.useCallback(b=>{f(b),ft.setItem(e1,b)},[]);return U.useEffect(()=>{let b="/Guido";b.endsWith("/")||(b+="/"),document.querySelectorAll("link[rel='icon'], link[rel='shortcut icon']").forEach(k=>k.remove());const S=document.createElement("link");S.rel="icon",d?(S.type="image/png",S.href=`${b}guido_icon.png?v=${Date.now()}`):(S.type="image/svg+xml",S.href=`${b}favicon.svg?v=${Date.now()}`),document.head.appendChild(S)},[d]),h.jsx(s2.Provider,{value:{theme:t,setTheme:p,themeBlend:a,setThemeBlend:y,marsBackground:l,setMarsBackground:v,secretSpaceMode:d,setSecretSpaceMode:x},children:e})},j9=({children:e,maxEntries:t=50})=>{const[r,a]=U.useState([]),s=U.useCallback((f,p)=>{if(p.length===0)return;const y=new Date,v=CA.includes(f.type),x={id:crypto.randomUUID(),trigger:f,changes:p.map(b=>({...b,timestamp:y})),timestamp:y,canUndo:v};a(b=>[x,...b].slice(0,t))},[t]);U.useEffect(()=>(Be.onFieldChanges(s),()=>{Be.onFieldChanges(null)}),[s]);const l=U.useCallback(()=>{a([])},[]),c=U.useCallback(()=>{const f=r.findIndex(y=>y.canUndo);if(f===-1)return null;const p=r[f];return a(y=>y.filter((v,x)=>x!==f)),p},[r]),d=U.useCallback(f=>{const p=r.findIndex(v=>v.id===f);if(p===-1)return[];const y=r.slice(0,p+1);return a(v=>v.slice(p+1)),y},[r]);return h.jsx(uk.Provider,{value:{history:r,addEntry:s,clearHistory:l,undoLast:c,undoEntry:d},children:e})},O9=({children:e})=>{const[t,r]=U.useState(!1),[a,s]=U.useState(!1),l=U.useCallback(d=>{r(d)},[]),c=U.useCallback(d=>{s(d)},[]);return h.jsx(o2.Provider,{value:{isActive:t,setIsActive:l,hideUI:a,setHideUI:c},children:e})},M9=({children:e})=>{const[t,r]=U.useState(!1),[a,s]=U.useState(!1);U.useEffect(()=>{(async()=>{try{const f=await ft.getItem("expertMode");f!==null&&r(f)}catch(f){console.error("Failed to load expertMode from storage:",f)}s(!0)})()},[]),U.useEffect(()=>{a&&ft.setItem("expertMode",t)},[t,a]);const l=U.useCallback(d=>{r(d)},[]),c=U.useMemo(()=>({isExpertMode:t,setIsExpertMode:l}),[t,l]);return h.jsx(i2.Provider,{value:c,children:e})},I9={rate:1.1,pitch:.4,volume:1,lang:"en-US"};function $9(){const[e]=U.useState(()=>typeof window<"u"&&"speechSynthesis"in window),[t,r]=U.useState(!1),[a,s]=U.useState(!1),[l,c]=U.useState(!1),[d,f]=U.useState([]),[p,y]=U.useState(null),[v,x]=U.useState(I9),b=U.useRef(null);U.useEffect(()=>{if(!e)return;const H=()=>{const A=speechSynthesis.getVoices().map(O=>({name:O.name,lang:O.lang,default:O.default,localService:O.localService,voiceURI:O.voiceURI}));if(f(A),A.length>0&&!p){const O=A.find(ee=>ee.lang.startsWith("en")&&(ee.name.toLowerCase().includes("male")||ee.name.toLowerCase().includes("david")||ee.name.toLowerCase().includes("james")||ee.name.toLowerCase().includes("daniel")||ee.name.toLowerCase().includes("george")||ee.name.toLowerCase().includes("guy"))),M=A.find(ee=>ee.name.toLowerCase().includes("google")&&ee.lang.startsWith("en")&&ee.name.toLowerCase().includes("us")),F=A.find(ee=>ee.name.toLowerCase().includes("google")&&ee.lang.startsWith("en")),Y=A.find(ee=>ee.lang.startsWith("en")),ae=A.find(ee=>ee.default);y(O||M||F||Y||ae||A[0])}};return H(),speechSynthesis.addEventListener("voiceschanged",H),()=>{speechSynthesis.removeEventListener("voiceschanged",H)}},[e,p]);const _=U.useRef(!1),S=U.useRef(!1);U.useEffect(()=>{if(!e)return;const I=setInterval(()=>{const A=speechSynthesis.speaking,O=speechSynthesis.paused;A!==_.current&&(_.current=A,r(A)),O!==S.current&&(S.current=O,s(O))},100);return()=>clearInterval(I)},[e]);const k=U.useCallback((H,I)=>{if(!e||!l||!H.trim())return;speechSynthesis.cancel();const A=new SpeechSynthesisUtterance(H);A.rate=I?.rate??1,A.pitch=I?.pitch??.3,A.volume=I?.volume??1,A.lang=I?.lang??"en-US";const O=speechSynthesis.getVoices();if(O.length>0){const M=O.find(F=>F.name.includes("David"))||O.find(F=>F.name.includes("Mark"))||O.find(F=>F.name.includes("Male")&&F.lang.startsWith("en"))||O.find(F=>F.name.toLowerCase().includes("google")&&F.lang==="en-US")||O.find(F=>F.lang.startsWith("en"));M&&(A.voice=M)}A.onstart=()=>r(!0),A.onend=()=>r(!1),A.onerror=M=>{M.error!=="interrupted"&&M.error!=="canceled"&&console.error("Speech synthesis error:",M),r(!1)},A.onpause=()=>s(!0),A.onresume=()=>s(!1),b.current=A,speechSynthesis.speak(A)},[e,l]),j=U.useCallback((H,I)=>new Promise(A=>{if(!e||!l||!H.trim()){A();return}speechSynthesis.cancel();const O=new SpeechSynthesisUtterance(H);O.rate=I?.rate??1,O.pitch=I?.pitch??.3,O.volume=I?.volume??1,O.lang=I?.lang??"en-US";const M=speechSynthesis.getVoices();if(M.length>0){const F=M.find(Y=>Y.name.includes("David"))||M.find(Y=>Y.name.includes("Mark"))||M.find(Y=>Y.name.includes("Male")&&Y.lang.startsWith("en"))||M.find(Y=>Y.name.toLowerCase().includes("google")&&Y.lang==="en-US")||M.find(Y=>Y.lang.startsWith("en"));F&&(O.voice=F)}O.onstart=()=>{_.current=!0,r(!0)},O.onend=()=>{_.current=!1,r(!1),A()},O.onerror=F=>{F.error!=="interrupted"&&F.error!=="canceled"&&console.error("Speech synthesis error:",F),_.current=!1,r(!1),A()},b.current=O,speechSynthesis.speak(O)}),[e,l]),R=U.useCallback(()=>{e&&(speechSynthesis.cancel(),r(!1),s(!1))},[e]),E=U.useCallback(()=>{e&&(speechSynthesis.pause(),s(!0))},[e]),q=U.useCallback(()=>{e&&(speechSynthesis.resume(),s(!1))},[e]),P=U.useCallback(H=>{y(H)},[]);return U.useMemo(()=>({isSupported:e,isSpeaking:t,isPaused:a,isEnabled:l,setEnabled:c,voices:d,selectedVoice:p,setVoice:P,speak:k,speakAsync:j,cancel:R,pause:E,resume:q,options:v,setOptions:x}),[e,t,a,l,d,p,P,k,j,R,E,q,v])}const _h="guido-ai-config",wh="guido-chat-history",t1="guido-speech-enabled",n1="guido-speech-rate",r1="guido-speech-volume",D9=({children:e})=>{const{secretSpaceMode:t}=Br(),[r,a]=U.useState(null),[s,l]=U.useState(!1),[c,d]=U.useState({x:0,y:0}),[f,p]=U.useState("idle"),[y,v]=U.useState(null),[x,b]=U.useState(""),[_,S]=U.useState(!1),[k,j]=U.useState([]),[R,E]=U.useState([]),[q,P]=U.useState(!1),[H,I]=U.useState(1),[A,O]=U.useState(1),M=$9(),F=U.useRef("");U.useEffect(()=>{(async()=>{try{const[D,ne,le,Se,Ae]=await Promise.all([ft.getItem(_h),ft.getItem(wh),ft.getItem(t1),ft.getItem(n1),ft.getItem(r1)]);D&&a(D),ne&&j(ne),le!==null&&(P(le),M.setEnabled(le)),Se!==null&&I(Se),Ae!==null&&O(Ae)}catch(D){console.warn("Failed to load AI data from localforage:",D)}})()},[M]);const Y=U.useCallback(X=>{a(X),X?ft.setItem(_h,X):ft.removeItem(_h)},[]),ae=r!==null&&(r.provider==="ollama"||!!(r.apiKey&&r.apiKey.length>0)),ee=U.useCallback(X=>{d(X),p("input"),l(!0)},[]),de=U.useCallback(X=>{const D={...X,id:crypto.randomUUID(),timestamp:Date.now()};j(ne=>{const le=[D,...ne].slice(0,100);return ft.setItem(wh,le),le})},[]),J=U.useCallback(()=>{j([]),ft.removeItem(wh)},[]),te=U.useCallback(()=>{E([])},[]),he=U.useCallback(X=>{P(X),M.setEnabled(X),ft.setItem(t1,X),X||M.cancel()},[M]),ve=U.useCallback(X=>{if(q&&X&&X!==F.current){F.current=X;const D=t?H:1.1,ne=t?A:1;M.speak(X,{rate:D,volume:ne})}},[q,M,H,A,t]),se=U.useCallback(async X=>{if(q&&X&&X!==F.current){F.current=X;const D=t?H:1,ne=t?A:1;await M.speakAsync(X,{rate:D,volume:ne})}},[q,M,H,A,t]),N=U.useCallback(()=>{M.cancel(),F.current=""},[M]),L=U.useCallback(X=>{I(X),ft.setItem(n1,X)},[]),V=U.useCallback(X=>{O(X),ft.setItem(r1,X)},[]),G=U.useMemo(()=>({config:r,setConfig:Y,isConfigured:ae,isChatOpen:s,setIsChatOpen:l,chatPosition:c,openChatAt:ee,chatPhase:f,setChatPhase:p,currentToolName:y,setCurrentToolName:v,chatResponse:x,setChatResponse:b,showFullResponse:_,setShowFullResponse:S,chatHistory:k,addChatHistoryItem:de,clearChatHistory:J,sessionMessages:R,setSessionMessages:E,clearSession:te,speechEnabled:q,setSpeechEnabled:he,isSpeaking:M.isSpeaking,speakResponse:ve,speakResponseAsync:se,cancelSpeech:N,speechRate:H,setSpeechRate:L,speechVolume:A,setSpeechVolume:V}),[r,Y,ae,s,c,ee,f,y,x,_,k,de,J,R,te,q,he,M.isSpeaking,ve,se,N,H,L,A,V]);return h.jsx(l2.Provider,{value:G,children:e})},Sh=e=>!e.ruleSets||e.ruleSets.length===0?{...e,ruleSets:[qi()]}:e,z9=({children:e})=>{const[t,r]=U.useState([qi()]),[a,s]=U.useState(0),[l,c]=U.useState([]),{alert:d,confirm:f,choice:p}=Ea(),{fetchTarballFromUrl:y}=eo(),v=bn.useMemo(()=>({ruleSets:[qi()],fields:[],name:"",fileName:"",version:"",description:"",owner:""}),[]),[x,b]=U.useState(v),_=U.useCallback(R=>{if(R){const E=R.ruleSets?.some(q=>q.rules.length>0)??!1;return R.name===""&&R.fileName===""&&R.version===""&&R.description===""&&R.owner===""&&!E}else{const E=t.some(q=>q.rules.length>0);return x.name===""&&x.fileName===""&&x.version===""&&x.description===""&&x.owner===""&&!E}},[t,x]);U.useEffect(()=>{(async()=>{try{const E=await ft.getItem("template");if(E&&!_(E)){const q=Sh(E);b(q),r(q.ruleSets),s(0),c((q.fields||[]).map(P=>({...P,value:Array.isArray(P.value)?JSON.stringify(P.value):P.value})))}else{const q=await fetch("/Guido/templates/registry.guido.json");if(!q.ok)throw new Error("Failed to fetch the default template file.");const P=await q.json();if(!Hl(P))throw new Error("Invalid template format");const H=Sh(P);b(H),r(H.ruleSets),s(0),c(H.fields.map(I=>({...I,value:Array.isArray(I.value)?JSON.stringify(I.value):I.value})))}}catch(E){console.error("Error loading template from localforage:",E)}})()},[]),U.useEffect(()=>{x&&(async()=>{try{const E={...x,ruleSets:t,fields:l.map(P=>({...P,value:P.value}))},q=await ft.getItem("template");JSON.stringify(q)!==JSON.stringify(E)&&await ft.setItem("template",E)}catch(E){console.error("Error updating template in localforage:",E)}})()},[t,l,x]),U.useEffect(()=>{let R=!1;(async()=>{const q=new URLSearchParams(window.location.search),P=q.get("package"),H=q.get("template");if((P||H)&&!R)try{let A;if(H){const O=await fetch(H);if(!O.ok)throw new Error(`Failed to fetch template from URL: ${H}`);A=await O.json()}else P&&(A=await y(P));if(!Hl(A))throw new Error("Invalid template format from URL");k(A),d("Template loaded successfully from URL")}catch(A){console.error("Error loading template from URL:",A),R||(R=!0,f("Failed to load template from URL. Press Confirm to retry or Cancel to stop.",()=>{window.location.reload()},()=>{window.location.search=""}))}})()},[]);const S=U.useCallback(()=>{b(v),r([qi()]),s(0),c([]),ft.removeItem("template")},[v]),k=U.useCallback(R=>{const E=Sh(R);b(E),r(E.ruleSets),s(0),c(E.fields||[]),ft.setItem("template",E)},[]),j=U.useCallback(R=>{const E=R.target.files?.[0];if(E){const q=new FileReader;q.onload=P=>{try{const H=P.target?.result;if(H){const I=JSON.parse(H);if(!I||typeof I!="object"||!("fields"in I)||!Array.isArray(I.fields)){d("Invalid template format");return}const A=I,O={...A,fields:A.fields.map(M=>({...M,value:Array.isArray(M.value)?JSON.stringify(M.value):M.value}))};if(_())k(O);else{const M=x.name||"current template",F=O.name||"imported template";p(`Do you want to replace "${M}" with "${F}" or merge them?`,[{label:`Replace with "${F}"`,value:"replace",type:"primary"},{label:`Merge "${F}" into "${M}"`,value:"merge",type:"secondary"}],Y=>{if(Y==="replace")k(O);else if(Y==="merge"){const ae=e2(x,O);k(ae)}})}}}catch(H){console.error("Error loading template from file:",H),d("Error loading template from file")}},q.readAsText(E)}R.target.value=""},[d,p,_,x,k]);return h.jsx(r2.Provider,{value:{isEmpty:_,template:x,updateTemplate:k,ruleSets:t,setRuleSets:r,selectedRuleSetIndex:a,setSelectedRuleSetIndex:s,fields:l,setFields:c,loadTemplateFromFile:j,removeTemplate:S},children:e})},L9=({children:e})=>{const{alert:t,confirm:r}=Ea(),{ruleSets:a,setRuleSets:s,selectedRuleSetIndex:l,setSelectedRuleSetIndex:c}=er(),d=a[l]||a[0]||qi(),f=d.rules,p=E=>{s(q=>{const P=[...q],H=l;return P[H]&&(P[H]={...P[H],rules:E(P[H].rules)}),P})},y=()=>{rC(f)},v=E=>E.targets.length>0&&E.targets.every(q=>q.name&&q.state),x=(E,q,P)=>{if(!v(E)){t("A rule must have at least one target with both name and state set.");return}if(q!==void 0&&q>=0){p(I=>{const A=[...I];return A[q]=E,A}),P&&P();return}if(f.some(I=>JSON.stringify(I)===JSON.stringify(E))){t("This rule already exists.");return}p(I=>[...I,E]),P&&P()},b=E=>{p(q=>q.filter((P,H)=>H!==E))},_=()=>{r("Are you sure you want to delete all rules in this ruleset?",()=>{p(()=>[])})},S=E=>{if(E.length<1){t("Provide at least 2 valid indexes to merge rules.");return}const q=new Map,P=new Map;E.forEach(O=>{O.conditions?.forEach(M=>{const F=JSON.stringify({name:M.name,state:M.state,not:M.not});q.has(F)||q.set(F,M)}),O.targets.forEach(M=>{const F=JSON.stringify({name:M.name,state:M.state,not:M.not});P.has(F)||P.set(F,M)})});const H=Array.from(q.values()),I=Array.from(P.values()),A={conditions:H,targets:I};if(!v(A)){t("A rule must have at least one target with both name and state set.");return}p(O=>{const M=O.filter(F=>!E.includes(F));return M.push(A),M})},k=E=>{s(q=>[...q,E])},j=E=>{if(a.length<=1){t("Cannot delete the last ruleset. At least one ruleset is required.");return}if(E===0){t("Cannot delete the default ruleset (first one).");return}r(`Are you sure you want to delete ruleset "${a[E]?.name}"?`,()=>{s(q=>q.filter((P,H)=>H!==E)),l>=E&&c(Math.max(0,l-1))})},R=(E,q)=>{s(P=>{const H=[...P];return H[E]&&(H[E]={...H[E],...q}),H})};return h.jsx(ok.Provider,{value:{currentRuleSet:d,currentRules:f,saveRules:y,handleAddOrEditRule:x,handleDeleteRules:_,handleDeleteRule:b,mergeRules:S,handleAddRuleSet:k,handleDeleteRuleSet:j,handleUpdateRuleSet:R},children:e})},U9=({children:e})=>{const{alert:t,confirm:r}=Ea(),[a,s]=U.useState({}),{template:l,ruleSets:c,selectedRuleSetIndex:d,fields:f,setFields:p}=er(),y=U.useMemo(()=>{try{const I={...l,ruleSets:c};return sm(I,d)}catch(I){return console.warn("Failed to resolve ruleset inheritance:",I),c[d]?.rules??[]}},[l,c,d]),[v,x]=U.useState(null);U.useEffect(()=>{if(f.length>0&&y.length>0){const{updatedFields:I,disabledReasons:A}=Uc(f,y),O=I.some((F,Y)=>F.checked!==f[Y]?.checked||F.value!==f[Y]?.value),M=Object.keys(A).length>0||Object.keys(a).length>0;O&&p(I),M&&JSON.stringify(A)!==JSON.stringify(a)&&s(A)}},[y,d]);const b=U.useCallback(()=>{nC(f)},[f]),_=U.useCallback(I=>{p(I)},[p]),S=U.useCallback((I,A,O,M)=>{const F=f.find(J=>J.name===I);let Y;M?Y={type:"ai_change",fieldName:I,oldValue:F?.value,newValue:A,aiTool:M}:F?F.checked!==O?Y={type:O?"field_check":"field_uncheck",fieldName:I,oldValue:F.checked,newValue:O}:Y={type:"field_value_change",fieldName:I,oldValue:F.value,newValue:A}:Y={type:"rules_changed"};const ae=f.map(J=>J.name===I?{...J,value:A,checked:O}:J),{updatedFields:ee,disabledReasons:de}=Uc(ae,y,Y);_(ee),s(de)},[f,y,_]),k=U.useCallback((I,A,O)=>{const M=f.map(ae=>ae.name===I?{...ae,value:A,checked:O}:ae),{updatedFields:F,disabledReasons:Y}=Uc(M,y);_(F),s(Y)},[f,y,_]),j=U.useCallback(I=>{const A=f.map(O=>O.name===I.name?I:O);_(A)},[f,_]),R=U.useCallback(I=>{if(IA(I,y)){t(`Field "${I}" cannot be deleted because it is required`);return}p(A=>A.filter(O=>O.name!==I)),x(I)},[y,t,p]),E=U.useCallback(()=>{r("Are you sure you want to delete all fields?",()=>{p([]),window.location.reload()})},[r,p]),q=U.useCallback(I=>I.name.length>0,[]),P=U.useCallback((I,A)=>{const O=f.some(F=>F.name===I.name);if(!q(I)){t("Field name cannot be empty.");return}if(O){t("A field with this name already exists.");return}const M=[...f,I];p(M),x(I.name),A&&A()},[f,q,t,p]);U.useEffect(()=>{if(!v)return;const I=v.split(".").slice(0,-1).join(".");p(A=>A.map(M=>{if(M.name.startsWith(`${I}.`)){const F=M.name.split("."),Y=parseInt(F[F.length-1],10);if(!isNaN(Y)){const ee=A.filter(de=>de.name.startsWith(`${I}.`)).indexOf(M)+1;return F[F.length-1]=ee.toString(),{...M,name:F.join(".")}}}return M})),queueMicrotask(()=>x(null))},[v,p]);const H=U.useMemo(()=>({saveFields:b,handleFieldChange:S,handleFieldChangeSilent:k,handleUpdateField:j,handleDeleteField:R,handleDeleteFields:E,handleAddField:P,handleUpdateFields:_,disabledReasons:a,setDisabledReasons:s}),[b,S,k,j,R,E,P,_,a]);return h.jsx(a2.Provider,{value:H,children:e})};class q9 extends U.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null,showDetails:!1,copied:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("ErrorBoundary caught an error",t,r),this.setState({errorInfo:r}),this.props.onError?.(t,r)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null,showDetails:!1})};handleClearStorageAndRetry=async()=>{try{await ft.clear(),localStorage.clear()}catch(t){console.error("Failed to clear storage:",t)}window.location.reload()};handleCopyError=async()=>{const{error:t,errorInfo:r}=this.state,a=`
Error: ${t?.message||"Unknown error"}
Stack: ${t?.stack||"No stack trace"}
Component Stack: ${r?.componentStack||"No component stack"}
URL: ${window.location.href}
User Agent: ${navigator.userAgent}
Time: ${new Date().toISOString()}
    `.trim();try{await navigator.clipboard.writeText(a),this.setState({copied:!0}),setTimeout(()=>this.setState({copied:!1}),2e3)}catch(s){console.error("Failed to copy:",s)}};toggleDetails=()=>{this.setState(t=>({showDetails:!t.showDetails}))};render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const{error:t,errorInfo:r,showDetails:a,copied:s}=this.state;return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-surface-1 p-4",children:h.jsxs("div",{className:"max-w-lg w-full bg-surface-0 rounded-lg shadow-xl border border-border overflow-hidden",children:[h.jsxs("div",{className:"bg-validation-error-bg p-6 text-center",children:[h.jsx("div",{className:"text-6xl mb-3",children:""}),h.jsx("h2",{className:"text-2xl font-bold text-validation-error-text",children:"Oops! Something went wrong"})]}),h.jsxs("div",{className:"p-6 space-y-4",children:[h.jsx("p",{className:"text-text-secondary text-center",children:"Guido encountered an unexpected error. Don't worry, your data might still be safe!"}),h.jsx("div",{className:"bg-surface-2 rounded-lg p-3 text-sm",children:h.jsx("p",{className:"text-text-primary font-mono break-all",children:t?.message||"An unknown error occurred"})}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[h.jsx(Xe,{onClick:this.handleRetry,type:"primary",className:"flex-1",children:" Try Again"}),h.jsx(Xe,{onClick:()=>window.location.reload(),type:"secondary",className:"flex-1",children:" Reload Page"})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[h.jsx(Xe,{onClick:()=>void this.handleCopyError(),type:"primary-text",size:"small",className:"flex-1",children:s?" Copied!":" Copy Error Details"}),h.jsx(Xe,{onClick:this.toggleDetails,type:"primary-text",size:"small",className:"flex-1",children:a?" Hide Details":" Show Details"})]}),a&&h.jsxs("div",{className:"bg-surface-2 rounded-lg p-3 text-xs font-mono overflow-auto max-h-48 space-y-2",children:[t?.stack&&h.jsxs("div",{children:[h.jsx("p",{className:"text-text-tertiary mb-1",children:"Stack trace:"}),h.jsx("pre",{className:"text-text-secondary whitespace-pre-wrap break-all",children:t.stack})]}),!1]}),h.jsxs("div",{className:"pt-4 border-t border-border",children:[h.jsx("p",{className:"text-xs text-text-tertiary mb-2 text-center",children:"If the error persists, try clearing cached data:"}),h.jsx(Xe,{onClick:()=>void this.handleClearStorageAndRetry(),type:"secondary",size:"small",className:"w-full",children:" Clear Cache & Reload"}),h.jsx("p",{className:"text-xs text-text-tertiary mt-1 text-center",children:" This will reset your saved template and settings"})]})]})]})})}return this.props.children}}qE.createRoot(document.getElementById("root")).render(h.jsx(U.StrictMode,{children:h.jsx(q9,{children:h.jsx(R9,{children:h.jsx(M9,{children:h.jsx(O9,{children:h.jsx(j9,{children:h.jsx(C9,{children:h.jsx(z9,{children:h.jsx(L9,{children:h.jsx(U9,{children:h.jsx(D9,{children:h.jsx(k9,{})})})})})})})})})})})}));export{P9 as a,qs as c,Ql as g,PM as r};
