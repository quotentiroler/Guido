import{c as fe,a as le,r as ne}from"./index-B0f8S6ks.js";var F={exports:{}},G={},Z,Y;function ce(){return Y||(Y=1,Z=function(m){return m&&typeof m=="object"&&typeof m.copy=="function"&&typeof m.fill=="function"&&typeof m.readUInt8=="function"}),Z}var q={exports:{}},x;function pe(){return x||(x=1,typeof Object.create=="function"?q.exports=function(m,h){m.super_=h,m.prototype=Object.create(h.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}})}:q.exports=function(m,h){m.super_=h;var T=function(){};T.prototype=h.prototype,m.prototype=new T,m.prototype.constructor=m}),q.exports}var $;function de(){return $||($=1,(function(f){var m={},h=/%[sdj%]/g;f.format=function(r){if(!g(r)){for(var n=[],s=0;s<arguments.length;s++)n.push(A(arguments[s]));return n.join(" ")}for(var s=1,b=arguments,D=b.length,_=String(r).replace(h,function(j){if(j==="%%")return"%";if(s>=D)return j;switch(j){case"%s":return String(b[s++]);case"%d":return Number(b[s++]);case"%j":try{return JSON.stringify(b[s++])}catch{return"[Circular]"}default:return j}}),y=b[s];s<D;y=b[++s])i(y)||!u(y)?_+=" "+y:_+=" "+A(y);return _},f.deprecate=function(r,n){if(w(fe.process))return function(){return f.deprecate(r,n).apply(this,arguments)};if(process.noDeprecation===!0)return r;var s=!1;function b(){if(!s){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),s=!0}return r.apply(this,arguments)}return b};var T={},U;f.debuglog=function(r){if(w(U)&&(U=m.NODE_DEBUG||""),r=r.toUpperCase(),!T[r])if(new RegExp("\\b"+r+"\\b","i").test(U)){var n=process.pid;T[r]=function(){var s=f.format.apply(f,arguments);console.error("%s %d: %s",r,n,s)}}else T[r]=function(){};return T[r]};function A(r,n){var s={seen:[],stylize:v};return arguments.length>=3&&(s.depth=arguments[2]),arguments.length>=4&&(s.colors=arguments[3]),o(n)?s.showHidden=n:n&&f._extend(s,n),w(s.showHidden)&&(s.showHidden=!1),w(s.depth)&&(s.depth=2),w(s.colors)&&(s.colors=!1),w(s.customInspect)&&(s.customInspect=!0),s.colors&&(s.stylize=B),N(s,r,s.depth)}f.inspect=A,A.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},A.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function B(r,n){var s=A.styles[n];return s?"\x1B["+A.colors[s][0]+"m"+r+"\x1B["+A.colors[s][1]+"m":r}function v(r,n){return r}function R(r){var n={};return r.forEach(function(s,b){n[s]=!0}),n}function N(r,n,s){if(r.customInspect&&n&&P(n.inspect)&&n.inspect!==f.inspect&&!(n.constructor&&n.constructor.prototype===n)){var b=n.inspect(s,r);return g(b)||(b=N(r,b,s)),b}var D=C(r,n);if(D)return D;var _=Object.keys(n),y=R(_);if(r.showHidden&&(_=Object.getOwnPropertyNames(n)),d(n)&&(_.indexOf("message")>=0||_.indexOf("description")>=0))return z(n);if(_.length===0){if(P(n)){var j=n.name?": "+n.name:"";return r.stylize("[Function"+j+"]","special")}if(E(n))return r.stylize(RegExp.prototype.toString.call(n),"regexp");if(p(n))return r.stylize(Date.prototype.toString.call(n),"date");if(d(n))return z(n)}var S="",V=!1,L=["{","}"];if(t(n)&&(V=!0,L=["[","]"]),P(n)){var ae=n.name?": "+n.name:"";S=" [Function"+ae+"]"}if(E(n)&&(S=" "+RegExp.prototype.toString.call(n)),p(n)&&(S=" "+Date.prototype.toUTCString.call(n)),d(n)&&(S=" "+z(n)),_.length===0&&(!V||n.length==0))return L[0]+S+L[1];if(s<0)return E(n)?r.stylize(RegExp.prototype.toString.call(n),"regexp"):r.stylize("[Object]","special");r.seen.push(n);var H;return V?H=c(r,n,s,y,_):H=_.map(function(ue){return O(r,n,s,y,ue,V)}),r.seen.pop(),e(H,S,L)}function C(r,n){if(w(n))return r.stylize("undefined","undefined");if(g(n)){var s="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(s,"string")}if(l(n))return r.stylize(""+n,"number");if(o(n))return r.stylize(""+n,"boolean");if(i(n))return r.stylize("null","null")}function z(r){return"["+Error.prototype.toString.call(r)+"]"}function c(r,n,s,b,D){for(var _=[],y=0,j=n.length;y<j;++y)Q(n,String(y))?_.push(O(r,n,s,b,String(y),!0)):_.push("");return D.forEach(function(S){S.match(/^\d+$/)||_.push(O(r,n,s,b,S,!0))}),_}function O(r,n,s,b,D,_){var y,j,S;if(S=Object.getOwnPropertyDescriptor(n,D)||{value:n[D]},S.get?S.set?j=r.stylize("[Getter/Setter]","special"):j=r.stylize("[Getter]","special"):S.set&&(j=r.stylize("[Setter]","special")),Q(b,D)||(y="["+D+"]"),j||(r.seen.indexOf(S.value)<0?(i(s)?j=N(r,S.value,null):j=N(r,S.value,s-1),j.indexOf(`
`)>-1&&(_?j=j.split(`
`).map(function(V){return"  "+V}).join(`
`).substr(2):j=`
`+j.split(`
`).map(function(V){return"   "+V}).join(`
`))):j=r.stylize("[Circular]","special")),w(y)){if(_&&D.match(/^\d+$/))return j;y=JSON.stringify(""+D),y.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(y=y.substr(1,y.length-2),y=r.stylize(y,"name")):(y=y.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),y=r.stylize(y,"string"))}return y+": "+j}function e(r,n,s){var b=r.reduce(function(D,_){return _.indexOf(`
`)>=0,D+_.replace(/\u001b\[\d\d?m/g,"").length+1},0);return b>60?s[0]+(n===""?"":n+`
 `)+" "+r.join(`,
  `)+" "+s[1]:s[0]+n+" "+r.join(", ")+" "+s[1]}function t(r){return Array.isArray(r)}f.isArray=t;function o(r){return typeof r=="boolean"}f.isBoolean=o;function i(r){return r===null}f.isNull=i;function a(r){return r==null}f.isNullOrUndefined=a;function l(r){return typeof r=="number"}f.isNumber=l;function g(r){return typeof r=="string"}f.isString=g;function k(r){return typeof r=="symbol"}f.isSymbol=k;function w(r){return r===void 0}f.isUndefined=w;function E(r){return u(r)&&M(r)==="[object RegExp]"}f.isRegExp=E;function u(r){return typeof r=="object"&&r!==null}f.isObject=u;function p(r){return u(r)&&M(r)==="[object Date]"}f.isDate=p;function d(r){return u(r)&&(M(r)==="[object Error]"||r instanceof Error)}f.isError=d;function P(r){return typeof r=="function"}f.isFunction=P;function I(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r>"u"}f.isPrimitive=I,f.isBuffer=ce();function M(r){return Object.prototype.toString.call(r)}function J(r){return r<10?"0"+r.toString(10):r.toString(10)}var ie=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function se(){var r=new Date,n=[J(r.getHours()),J(r.getMinutes()),J(r.getSeconds())].join(":");return[r.getDate(),ie[r.getMonth()],n].join(" ")}f.log=function(){console.log("%s - %s",se(),f.format.apply(f,arguments))},f.inherits=pe(),f._extend=function(r,n){if(!n||!u(n))return r;for(var s=Object.keys(n),b=s.length;b--;)r[s[b]]=n[s[b]];return r};function Q(r,n){return Object.prototype.hasOwnProperty.call(r,n)}})(G)),G}var ee;function oe(){if(ee)return F.exports;ee=1;var f={},m=process.platform==="win32",h=de();function T(e,t){for(var o=[],i=0;i<e.length;i++){var a=e[i];!a||a==="."||(a===".."?o.length&&o[o.length-1]!==".."?o.pop():t&&o.push(".."):o.push(a))}return o}function U(e){for(var t=e.length-1,o=0;o<=t&&!e[o];o++);for(var i=t;i>=0&&!e[i];i--);return o===0&&i===t?e:o>i?[]:e.slice(o,i+1)}var A=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,B=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,v={};function R(e){var t=A.exec(e),o=(t[1]||"")+(t[2]||""),i=t[3]||"",a=B.exec(i),l=a[1],g=a[2],k=a[3];return[o,l,g,k]}function N(e){var t=A.exec(e),o=t[1]||"",i=!!o&&o[1]!==":";return{device:o,isUnc:i,isAbsolute:i||!!t[2],tail:t[3]}}function C(e){return"\\\\"+e.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}v.resolve=function(){for(var e="",t="",o=!1,i=arguments.length-1;i>=-1;i--){var a;if(i>=0?a=arguments[i]:e?(a=f["="+e],(!a||a.substr(0,3).toLowerCase()!==e.toLowerCase()+"\\")&&(a=e+"\\")):a=process.cwd(),h.isString(a)){if(!a)continue}else throw new TypeError("Arguments to path.resolve must be strings");var l=N(a),g=l.device,k=l.isUnc,w=l.isAbsolute,E=l.tail;if(!(g&&e&&g.toLowerCase()!==e.toLowerCase())&&(e||(e=g),o||(t=E+"\\"+t,o=w),e&&o))break}return k&&(e=C(e)),t=T(t.split(/[\\\/]+/),!o).join("\\"),e+(o?"\\":"")+t||"."},v.normalize=function(e){var t=N(e),o=t.device,i=t.isUnc,a=t.isAbsolute,l=t.tail,g=/[\\\/]$/.test(l);return l=T(l.split(/[\\\/]+/),!a).join("\\"),!l&&!a&&(l="."),l&&g&&(l+="\\"),i&&(o=C(o)),o+(a?"\\":"")+l},v.isAbsolute=function(e){return N(e).isAbsolute},v.join=function(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(!h.isString(o))throw new TypeError("Arguments to path.join must be strings");o&&e.push(o)}var i=e.join("\\");return/^[\\\/]{2}[^\\\/]/.test(e[0])||(i=i.replace(/^[\\\/]{2,}/,"\\")),v.normalize(i)},v.relative=function(e,t){e=v.resolve(e),t=v.resolve(t);for(var o=e.toLowerCase(),i=t.toLowerCase(),a=U(t.split("\\")),l=U(o.split("\\")),g=U(i.split("\\")),k=Math.min(l.length,g.length),w=k,E=0;E<k;E++)if(l[E]!==g[E]){w=E;break}if(w==0)return t;for(var u=[],E=w;E<l.length;E++)u.push("..");return u=u.concat(a.slice(w)),u.join("\\")},v._makeLong=function(e){if(!h.isString(e))return e;if(!e)return"";var t=v.resolve(e);return/^[a-zA-Z]\:\\/.test(t)?"\\\\?\\"+t:/^\\\\[^?.]/.test(t)?"\\\\?\\UNC\\"+t.substring(2):e},v.dirname=function(e){var t=R(e),o=t[0],i=t[1];return!o&&!i?".":(i&&(i=i.substr(0,i.length-1)),o+i)},v.basename=function(e,t){var o=R(e)[2];return t&&o.substr(-1*t.length)===t&&(o=o.substr(0,o.length-t.length)),o},v.extname=function(e){return R(e)[3]},v.format=function(e){if(!h.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!h.isString(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);var o=e.dir,i=e.base||"";return o?o[o.length-1]===v.sep?o+i:o+v.sep+i:i},v.parse=function(e){if(!h.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=R(e);if(!t||t.length!==4)throw new TypeError("Invalid path '"+e+"'");return{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},v.sep="\\",v.delimiter=";";var z=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,c={};function O(e){return z.exec(e).slice(1)}return c.resolve=function(){for(var e="",t=!1,o=arguments.length-1;o>=-1&&!t;o--){var i=o>=0?arguments[o]:process.cwd();if(h.isString(i)){if(!i)continue}else throw new TypeError("Arguments to path.resolve must be strings");e=i+"/"+e,t=i[0]==="/"}return e=T(e.split("/"),!t).join("/"),(t?"/":"")+e||"."},c.normalize=function(e){var t=c.isAbsolute(e),o=e&&e[e.length-1]==="/";return e=T(e.split("/"),!t).join("/"),!e&&!t&&(e="."),e&&o&&(e+="/"),(t?"/":"")+e},c.isAbsolute=function(e){return e.charAt(0)==="/"},c.join=function(){for(var e="",t=0;t<arguments.length;t++){var o=arguments[t];if(!h.isString(o))throw new TypeError("Arguments to path.join must be strings");o&&(e?e+="/"+o:e+=o)}return c.normalize(e)},c.relative=function(e,t){e=c.resolve(e).substr(1),t=c.resolve(t).substr(1);for(var o=U(e.split("/")),i=U(t.split("/")),a=Math.min(o.length,i.length),l=a,g=0;g<a;g++)if(o[g]!==i[g]){l=g;break}for(var k=[],g=l;g<o.length;g++)k.push("..");return k=k.concat(i.slice(l)),k.join("/")},c._makeLong=function(e){return e},c.dirname=function(e){var t=O(e),o=t[0],i=t[1];return!o&&!i?".":(i&&(i=i.substr(0,i.length-1)),o+i)},c.basename=function(e,t){var o=O(e)[2];return t&&o.substr(-1*t.length)===t&&(o=o.substr(0,o.length-t.length)),o},c.extname=function(e){return O(e)[3]},c.format=function(e){if(!h.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!h.isString(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);var o=e.dir?e.dir+c.sep:"",i=e.base||"";return o+i},c.parse=function(e){if(!h.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=O(e);if(!t||t.length!==4)throw new TypeError("Invalid path '"+e+"'");return t[1]=t[1]||"",t[2]=t[2]||"",t[3]=t[3]||"",{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},c.sep="/",c.delimiter=":",m?F.exports=v:F.exports=c,F.exports.posix=c,F.exports.win32=v,F.exports}const ge={},ve=Object.freeze(Object.defineProperty({__proto__:null,default:ge},Symbol.toStringTag,{value:"Module"})),K=le(ve);var W,re;function ye(){if(re)return W;re=1;var f={},m=Object.create,h=Object.defineProperty,T=Object.getOwnPropertyDescriptor,U=Object.getOwnPropertyNames,A=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty,v=(a,l)=>{for(var g in l)h(a,g,{get:l[g],enumerable:!0})},R=(a,l,g,k)=>{if(l&&typeof l=="object"||typeof l=="function")for(let w of U(l))!B.call(a,w)&&w!==g&&h(a,w,{get:()=>l[w],enumerable:!(k=T(l,w))||k.enumerable});return a},N=(a,l,g)=>(g=a!=null?m(A(a)):{},R(!a||!a.__esModule?h(g,"default",{value:a,enumerable:!0}):g,a)),C=a=>R(h({},"__esModule",{value:!0}),a),z={};v(z,{findRootDir:()=>o,getUserDataDir:()=>i}),W=C(z);var c=N(oe()),O=N(K),e=N(K),t=ne();function o(){try{let a=process.cwd();for(;a!==c.default.dirname(a);){const l=c.default.join(a,".vercel");if(O.default.existsSync(l))return a;a=c.default.dirname(a)}}catch{throw new t.VercelOidcTokenError("Token refresh only supported in node server environments")}throw new t.VercelOidcTokenError("Unable to find root directory")}function i(){if(f.XDG_DATA_HOME)return f.XDG_DATA_HOME;switch(e.default.platform()){case"darwin":return c.default.join(e.default.homedir(),"Library/Application Support");case"linux":return c.default.join(e.default.homedir(),".local/share");case"win32":return f.LOCALAPPDATA?f.LOCALAPPDATA:null;default:return null}}return W}var X,te;function me(){if(te)return X;te=1;var f=Object.create,m=Object.defineProperty,h=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyNames,U=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty,B=(u,p)=>{for(var d in p)m(u,d,{get:p[d],enumerable:!0})},v=(u,p,d,P)=>{if(p&&typeof p=="object"||typeof p=="function")for(let I of T(p))!A.call(u,I)&&I!==d&&m(u,I,{get:()=>p[I],enumerable:!(P=h(p,I))||P.enumerable});return u},R=(u,p,d)=>(d=u!=null?f(U(u)):{},v(!u||!u.__esModule?m(d,"default",{value:u,enumerable:!0}):d,u)),N=u=>v(m({},"__esModule",{value:!0}),u),C={};B(C,{assertVercelOidcTokenResponse:()=>a,findProjectInfo:()=>l,getTokenPayload:()=>w,getVercelCliToken:()=>o,getVercelDataDir:()=>t,getVercelOidcToken:()=>i,isExpired:()=>E,loadToken:()=>k,saveToken:()=>g}),X=N(C);var z=R(oe()),c=R(K),O=ne(),e=ye();function t(){const u="com.vercel.cli",p=(0,e.getUserDataDir)();return p?z.join(p,u):null}function o(){const u=t();if(!u)return null;const p=z.join(u,"auth.json");if(!c.existsSync(p))return null;const d=c.readFileSync(p,"utf8");return d?JSON.parse(d).token:null}async function i(u,p,d){try{const P=`https://api.vercel.com/v1/projects/${p}/token?source=vercel-oidc-refresh${d?`&teamId=${d}`:""}`,I=await fetch(P,{method:"POST",headers:{Authorization:`Bearer ${u}`}});if(!I.ok)throw new O.VercelOidcTokenError(`Failed to refresh OIDC token: ${I.statusText}`);const M=await I.json();return a(M),M}catch(P){throw new O.VercelOidcTokenError("Failed to refresh OIDC token",P)}}function a(u){if(!u||typeof u!="object")throw new TypeError("Expected an object");if(!("token"in u)||typeof u.token!="string")throw new TypeError("Expected a string-valued token property")}function l(){const u=(0,e.findRootDir)();if(!u)throw new O.VercelOidcTokenError("Unable to find root directory");try{const p=z.join(u,".vercel","project.json");if(!c.existsSync(p))throw new O.VercelOidcTokenError("project.json not found");const d=JSON.parse(c.readFileSync(p,"utf8"));if(typeof d.projectId!="string"&&typeof d.orgId!="string")throw new TypeError("Expected a string-valued projectId property");return{projectId:d.projectId,teamId:d.orgId}}catch(p){throw new O.VercelOidcTokenError("Unable to find project ID",p)}}function g(u,p){try{const d=(0,e.getUserDataDir)();if(!d)throw new O.VercelOidcTokenError("Unable to find user data directory");const P=z.join(d,"com.vercel.token",`${p}.json`),I=JSON.stringify(u);c.mkdirSync(z.dirname(P),{mode:504,recursive:!0}),c.writeFileSync(P,I),c.chmodSync(P,432);return}catch(d){throw new O.VercelOidcTokenError("Failed to save token",d)}}function k(u){try{const p=(0,e.getUserDataDir)();if(!p)return null;const d=z.join(p,"com.vercel.token",`${u}.json`);if(!c.existsSync(d))return null;const P=JSON.parse(c.readFileSync(d,"utf8"));return a(P),P}catch(p){throw new O.VercelOidcTokenError("Failed to load token",p)}}function w(u){const p=u.split(".");if(p.length!==3)throw new O.VercelOidcTokenError("Invalid token");const d=p[1].replace(/-/g,"+").replace(/_/g,"/"),P=d.padEnd(d.length+(4-d.length%4)%4,"=");return JSON.parse(Buffer.from(P,"base64").toString("utf8"))}function E(u){return u.exp*1e3<Date.now()}return X}export{me as r};
